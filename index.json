[{"categories":["tutorial"],"content":" ç¨‹åºè¿è¡Œè¿‡ç¨‹ è®©ä½ è®¾è®¡ä¸€ä¸ªJAVACç¼–è¯‘å™¨ï¼Œä½ ä¼šå¦‚ä½•è®¾è®¡ï¼Ÿå…ˆå¯¹.javaæ–‡ä»¶è¿›è¡ŒTokenåˆ†æï¼Œç„¶åç¿»è¯‘æˆå­—èŠ‚ç æ–‡ä»¶ã€‚ ç±»çš„ç”Ÿå‘½å‘¨æœŸå¸¸è§çš„ç”Ÿå‘½å‘¨æœŸæœ‰å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œç±»çš„ç”Ÿå‘½å‘¨æœŸï¼Œbinçš„ç”Ÿå‘½å‘¨æœŸã€‚ è£…è½½ï¼šå°†classæ–‡ä»¶ä¸­æˆ‘ä»¬éœ€è¦çš„å†…å®¹åŠ è½½è¿›JVMã€‚ a)Classâ€”Â»å­—èŠ‚æµ â€”Â»\u003eå¯»æ‰¾å™¨ï¼ˆç±»åŠ è½½å™¨ï¼‰ b)å°†è¿™ä¸ªå­—èŠ‚æµè¯´ä»£è¡¨çš„è¿‘æ€å­˜å‚¨ç»“æ„è½¬æ¢æˆæ–¹æ³•å–çš„è¿è¡Œæ—¶æ•°æ®ç»“æ„ã€‚ c)åœ¨javaçš„å †ä¸­ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¿™ä¸ªç±»çš„java.lang.classå¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•åŒºçš„è®¿é—®å…¥å£ã€‚ 2.é“¾æ¥ a)éªŒè¯ æ–‡ä»¶åŠå…¶å†…å®¹æ­£ç¡®æ€§ï¼Œæ–‡ä»¶æ ¼å¼ï¼Œå…ƒæ•°æ®ï¼Œå­—èŠ‚ç ï¼Œç¬¦å·å¼•ç”¨ã€‚ b)å‡†å¤‡ c)è§£æ ","date":"2023-07-12","objectID":"/jvm/:0:1","series":[],"tags":[],"title":"ä¸€äº›JVMåŸºç¡€çŸ¥è¯†","uri":"/jvm/#heading"},{"categories":["tutorial"],"content":" ç¨‹åºè¿è¡Œè¿‡ç¨‹ è®©ä½ è®¾è®¡ä¸€ä¸ªJAVACç¼–è¯‘å™¨ï¼Œä½ ä¼šå¦‚ä½•è®¾è®¡ï¼Ÿå…ˆå¯¹.javaæ–‡ä»¶è¿›è¡ŒTokenåˆ†æï¼Œç„¶åç¿»è¯‘æˆå­—èŠ‚ç æ–‡ä»¶ã€‚ ç±»çš„ç”Ÿå‘½å‘¨æœŸå¸¸è§çš„ç”Ÿå‘½å‘¨æœŸæœ‰å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œç±»çš„ç”Ÿå‘½å‘¨æœŸï¼Œbinçš„ç”Ÿå‘½å‘¨æœŸã€‚ è£…è½½ï¼šå°†classæ–‡ä»¶ä¸­æˆ‘ä»¬éœ€è¦çš„å†…å®¹åŠ è½½è¿›JVMã€‚ a)Classâ€”Â»å­—èŠ‚æµ â€”Â»\u003eå¯»æ‰¾å™¨ï¼ˆç±»åŠ è½½å™¨ï¼‰ b)å°†è¿™ä¸ªå­—èŠ‚æµè¯´ä»£è¡¨çš„è¿‘æ€å­˜å‚¨ç»“æ„è½¬æ¢æˆæ–¹æ³•å–çš„è¿è¡Œæ—¶æ•°æ®ç»“æ„ã€‚ c)åœ¨javaçš„å †ä¸­ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¿™ä¸ªç±»çš„java.lang.classå¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•åŒºçš„è®¿é—®å…¥å£ã€‚ 2.é“¾æ¥ a)éªŒè¯ æ–‡ä»¶åŠå…¶å†…å®¹æ­£ç¡®æ€§ï¼Œæ–‡ä»¶æ ¼å¼ï¼Œå…ƒæ•°æ®ï¼Œå­—èŠ‚ç ï¼Œç¬¦å·å¼•ç”¨ã€‚ b)å‡†å¤‡ c)è§£æ ","date":"2023-07-12","objectID":"/jvm/:0:1","series":[],"tags":[],"title":"ä¸€äº›JVMåŸºç¡€çŸ¥è¯†","uri":"/jvm/#ç¨‹åºè¿è¡Œè¿‡ç¨‹"},{"categories":["tutorial"],"content":" ç¨‹åºè¿è¡Œè¿‡ç¨‹ è®©ä½ è®¾è®¡ä¸€ä¸ªJAVACç¼–è¯‘å™¨ï¼Œä½ ä¼šå¦‚ä½•è®¾è®¡ï¼Ÿå…ˆå¯¹.javaæ–‡ä»¶è¿›è¡ŒTokenåˆ†æï¼Œç„¶åç¿»è¯‘æˆå­—èŠ‚ç æ–‡ä»¶ã€‚ ç±»çš„ç”Ÿå‘½å‘¨æœŸå¸¸è§çš„ç”Ÿå‘½å‘¨æœŸæœ‰å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œç±»çš„ç”Ÿå‘½å‘¨æœŸï¼Œbinçš„ç”Ÿå‘½å‘¨æœŸã€‚ è£…è½½ï¼šå°†classæ–‡ä»¶ä¸­æˆ‘ä»¬éœ€è¦çš„å†…å®¹åŠ è½½è¿›JVMã€‚ a)Classâ€”Â»å­—èŠ‚æµ â€”Â»\u003eå¯»æ‰¾å™¨ï¼ˆç±»åŠ è½½å™¨ï¼‰ b)å°†è¿™ä¸ªå­—èŠ‚æµè¯´ä»£è¡¨çš„è¿‘æ€å­˜å‚¨ç»“æ„è½¬æ¢æˆæ–¹æ³•å–çš„è¿è¡Œæ—¶æ•°æ®ç»“æ„ã€‚ c)åœ¨javaçš„å †ä¸­ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¿™ä¸ªç±»çš„java.lang.classå¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•åŒºçš„è®¿é—®å…¥å£ã€‚ 2.é“¾æ¥ a)éªŒè¯ æ–‡ä»¶åŠå…¶å†…å®¹æ­£ç¡®æ€§ï¼Œæ–‡ä»¶æ ¼å¼ï¼Œå…ƒæ•°æ®ï¼Œå­—èŠ‚ç ï¼Œç¬¦å·å¼•ç”¨ã€‚ b)å‡†å¤‡ c)è§£æ ","date":"2023-07-12","objectID":"/jvm/:0:1","series":[],"tags":[],"title":"ä¸€äº›JVMåŸºç¡€çŸ¥è¯†","uri":"/jvm/#è®©ä½ è®¾è®¡ä¸€ä¸ªjavacç¼–è¯‘å™¨ä½ ä¼šå¦‚ä½•è®¾è®¡"},{"categories":["tutorial"],"content":" ç¨‹åºè¿è¡Œè¿‡ç¨‹ è®©ä½ è®¾è®¡ä¸€ä¸ªJAVACç¼–è¯‘å™¨ï¼Œä½ ä¼šå¦‚ä½•è®¾è®¡ï¼Ÿå…ˆå¯¹.javaæ–‡ä»¶è¿›è¡ŒTokenåˆ†æï¼Œç„¶åç¿»è¯‘æˆå­—èŠ‚ç æ–‡ä»¶ã€‚ ç±»çš„ç”Ÿå‘½å‘¨æœŸå¸¸è§çš„ç”Ÿå‘½å‘¨æœŸæœ‰å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œç±»çš„ç”Ÿå‘½å‘¨æœŸï¼Œbinçš„ç”Ÿå‘½å‘¨æœŸã€‚ è£…è½½ï¼šå°†classæ–‡ä»¶ä¸­æˆ‘ä»¬éœ€è¦çš„å†…å®¹åŠ è½½è¿›JVMã€‚ a)Classâ€”Â»å­—èŠ‚æµ â€”Â»\u003eå¯»æ‰¾å™¨ï¼ˆç±»åŠ è½½å™¨ï¼‰ b)å°†è¿™ä¸ªå­—èŠ‚æµè¯´ä»£è¡¨çš„è¿‘æ€å­˜å‚¨ç»“æ„è½¬æ¢æˆæ–¹æ³•å–çš„è¿è¡Œæ—¶æ•°æ®ç»“æ„ã€‚ c)åœ¨javaçš„å †ä¸­ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¿™ä¸ªç±»çš„java.lang.classå¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•åŒºçš„è®¿é—®å…¥å£ã€‚ 2.é“¾æ¥ a)éªŒè¯ æ–‡ä»¶åŠå…¶å†…å®¹æ­£ç¡®æ€§ï¼Œæ–‡ä»¶æ ¼å¼ï¼Œå…ƒæ•°æ®ï¼Œå­—èŠ‚ç ï¼Œç¬¦å·å¼•ç”¨ã€‚ b)å‡†å¤‡ c)è§£æ ","date":"2023-07-12","objectID":"/jvm/:0:1","series":[],"tags":[],"title":"ä¸€äº›JVMåŸºç¡€çŸ¥è¯†","uri":"/jvm/#ç±»çš„ç”Ÿå‘½å‘¨æœŸ"},{"categories":["tutorial"],"content":" JAVAå¥—ä»¶ç›¸å…³ä¿¡æ¯ï¼Œæ¥è‡ªJAVAå®˜ç½‘ï¼ŒJDKåŒ…å«äº†JVMã€‚ ","date":"2023-07-12","objectID":"/jvm/:0:2","series":[],"tags":[],"title":"ä¸€äº›JVMåŸºç¡€çŸ¥è¯†","uri":"/jvm/#javaå¥—ä»¶ç›¸å…³ä¿¡æ¯æ¥è‡ªjavaå®˜ç½‘jdkåŒ…å«äº†jvm"},{"categories":["paper_reading"],"content":" åŸæ–‡é“¾æ¥ï¼šhttps://aclanthology.org/2021.findings-emnlp.203.pdf æºç é“¾æ¥ï¼šhttps://github.com/J-zin/DHIM ","date":"2023-07-11","objectID":"/bert_embedding_and_mimaximization/:0:0","series":[],"tags":[],"title":"ã€ŠRefining BERT Embeddings for Document Hashing via Mutual Information Maximizationã€‹é˜…è¯»ç¬”è®°","uri":"/bert_embedding_and_mimaximization/#"},{"categories":["paper_reading"],"content":" è¡Œæ–‡åŠ¨æœºå¤§å¤šæ•°æ–‡æœ¬å“ˆå¸Œæ–¹æ³•éƒ½æ˜¯åŸºäºBOWå’ŒTFIDFå­¦å¾—çš„ï¼Œè€Œè¿™ç§ç‰¹å¾ç¼ºä¹è¯åºå’Œä¾å­˜å…³ç³»çš„ç›¸å…³ä¿¡æ¯ã€‚ç„¶è€Œï¼Œç”±äºBERT embeddingåœ¨ä¸‹æ¸¸ä»»åŠ¡ä¸­çš„å‡ºè‰²è¡¨ç°ï¼Œæœ¬æ–‡å†³å®šæŠ›å¼ƒâ€œè½åâ€çš„BOWå’ŒTFIDFç‰¹å¾ï¼Œè½¬è€Œç›´æ¥å»ºæ¨¡ç”±BERTåµŒå…¥è¡¨å¾çš„æ–‡æœ¬ã€‚æ–‡ä¸­å°†ä½¿ç”¨BOWå’ŒTFIDFçš„ä½¿ç”¨å½’å› äºæ˜¯é€ƒé¿å¯¹äºé•¿ä¾èµ–å…³ç³»å¸¦æ¥çš„æŒ‘æˆ˜ï¼ˆå…¶å®è¿™ç§åŸºäºç»Ÿè®¡çš„ç‰¹å¾æ˜¯å¸¦æœ‰åŸå§‹æ£€ç´¢çš„æ½œåœ¨æ„ä¹‰çš„ï¼Œæ¯”å¦‚å…³é”®è¯æ„ŸçŸ¥ç­‰ï¼‰ã€‚ åˆ›æ–°ï¼šå¼•å…¥äº†æœ€å¤§äº’ä¿¡æ¯åŸåˆ™æ¥è§£å†³BERTåµŒå…¥ä¸­å­˜åœ¨è¿‡äºä¸°å¯Œçš„ä¿¡æ¯çš„é—®é¢˜ã€‚å…·ä½“è€Œè¨€ï¼ŒBERT embedding å¯Œå«ä¿¡æ¯ï¼Œå…¶ä¸­åªæœ‰ä¸€å°éƒ¨åˆ†å’Œå“ˆå¸Œæœ‰å…³ï¼Œæ‰€ä»¥å“ˆå¸Œç ä¸å¤ªèƒ½åœ¨è¯­ä¹‰ä¸€è‡´ä¸Šå’ŒåµŒå…¥ä¸€è‡´ã€‚æ–‡ç« æŒ‡å‡ºï¼Œåœ¨2019å¹´çš„ä¸€ç¯‡é«˜å¼•è®ºæ–‡5900+ã€ŠSentencebert: Sentence embeddings using siamese bertnetworksã€‹ä¸­å°±æ›¾å¾—å‡ºè¿‡ç»“è®ºï¼ŒåŸå§‹çš„BERTåµŒå…¥åœ¨ä½™å¼¦ç›¸ä¼¼åº¦ï¼Œæ›¼å“ˆé¡¿è·ç¦»ï¼Œæ¬§å‡ é‡Œå¾—è·ç¦»ä¸Šçš„è¡¨ç°ä¸å°½å¦‚äººæ„ã€‚æœ¬æ–‡å—ã€ŠLearning deep representations by mutual information estimation and maximizationã€‹ä¸€æ–‡å¯å‘ï¼Œé€šè¿‡æœ€å¤§äº’ä¿¡æ¯åŸåˆ™å¯ä»¥å­¦å¾—æœ‰ç›®æ ‡åŒºåˆ†åº¦çš„è¡¨å¾ï¼Œæ¥æ›´å¤šçªå‡ºè¯­ä¹‰ä¿¡æ¯ä»¥åŠå‰Šå¼±å…¶ä»–æ— å…³çš„ä¿¡æ¯ã€‚ ","date":"2023-07-11","objectID":"/bert_embedding_and_mimaximization/:1:0","series":[],"tags":[],"title":"ã€ŠRefining BERT Embeddings for Document Hashing via Mutual Information Maximizationã€‹é˜…è¯»ç¬”è®°","uri":"/bert_embedding_and_mimaximization/#è¡Œæ–‡åŠ¨æœº"},{"categories":["paper_reading"],"content":" åŸºäºå¯¹æ¯”æ–¹æ³•å¼•å…¥BERTåµŒå…¥åŸºäºBOWå’ŒTFIDFç‰¹å¾çš„æ–‡æœ¬å“ˆå¸Œæ–¹æ³•å¤§éƒ½åŸºäºå¦‚ä¸‹æ–¹å¼å»ºæ¨¡ï¼Œç»™å®šä¸€ä¸ªç”±è¯åºåˆ—è¡¨ç¤ºçš„æ–‡æ¡£$\\boldsymbol x={w_1, w_2,\\cdots,w_{|x|}}$ï¼š $$ p(x, z)=\\prod_{w_{i} \\in x} p_{\\theta}\\left(w_{i} \\mid z\\right) p(z) $$ å…¶ä¸­ $$ p_{\\theta}\\left(w_{i} \\mid z\\right) \\triangleq \\frac{\\exp \\left(z^{T} E w_{i}+b_{i}\\right)}{\\sum_{j=1}^{|V|} \\exp \\left(z^{T} E w_{j}+b_{j}\\right)} $$ ç”±äºBERTåµŒå…¥å’ŒBOWç‰¹å¾çš„å·®å¼‚æ€§ï¼Œè§£ç è¿‡ç¨‹æ›¿æ¢ä¸ºä¸€ä¸ªæ¡ä»¶é«˜æ–¯åˆ†å¸ƒ $$ p_{\\theta}(x|z) = \\frac{1}{{(2\\pi\\sigma^2)}^{d/2}}e^{-\\frac{||\\mathcal B(x) - Wz||^2}{2\\sigma^2}} $$ å…¶ä¸­$\\mathcal B(x)$ä¸ºBERTåµŒå…¥ï¼Œ$W$ä¸ºå¯å­¦ä¹ çš„æ¨¡å‹å‚æ•°ï¼ˆè§£ç ç½‘ç»œï¼‰ï¼Œ$d$ä¸ºBERTåµŒå…¥ç»´æ•°ï¼ˆ768ï¼‰ã€‚ ","date":"2023-07-11","objectID":"/bert_embedding_and_mimaximization/:2:0","series":[],"tags":[],"title":"ã€ŠRefining BERT Embeddings for Document Hashing via Mutual Information Maximizationã€‹é˜…è¯»ç¬”è®°","uri":"/bert_embedding_and_mimaximization/#åŸºäºå¯¹æ¯”æ–¹æ³•å¼•å…¥bertåµŒå…¥"},{"categories":["paper_reading"],"content":" æœ¬æ–‡æ–¹æ³•â€”â€”åŸºäºäº’ä¿¡æ¯æœ€å¤§åŒ–åŸåˆ™é‡æ„BERTåµŒå…¥","date":"2023-07-11","objectID":"/bert_embedding_and_mimaximization/:3:0","series":[],"tags":[],"title":"ã€ŠRefining BERT Embeddings for Document Hashing via Mutual Information Maximizationã€‹é˜…è¯»ç¬”è®°","uri":"/bert_embedding_and_mimaximization/#æœ¬æ–‡æ–¹æ³•åŸºäºäº’ä¿¡æ¯æœ€å¤§åŒ–åŸåˆ™é‡æ„bertåµŒå…¥"},{"categories":["paper_reading"],"content":" å›¾åƒé¢†åŸŸçš„äº’ä¿¡æ¯æœ€å¤§åŒ–æ–¹æ³•ã€ŠLearning deep representations by mutual information estimation and maximizationã€‹ä¸­é€šè¿‡æœ€å¤§åŒ–å…¨å±€å’Œå±€éƒ¨è¡¨ç¤ºä¹‹é—´çš„äº’ä¿¡æ¯æ¥å­¦ä¹ ç±»åˆ«å¯åŒºåˆ†çš„å›¾åƒè¡¨ç¤ºã€‚è¯¥æ–‡ç¬¬ä¸€æ¬¡æ„é€ äº†å¯¹äºå›¾ç‰‡çš„å…¨å±€è¡¨ç¤ºå’Œä¼—å¤šçš„å±€éƒ¨è¡¨ç¤ºï¼Œå®ƒä»¬éƒ½é€šè¿‡å›¾åƒçš„å·ç§¯ç‰¹å¾å¾—åˆ°ã€‚æ—¢ç„¶æœ‰ä¼—å¤šçš„å±€éƒ¨è¡¨ç¤ºï¼Œå¹¶ä¸”å„è‡ªå±€éƒ¨è¡¨ç¤ºå›¾åƒä¸­çš„ç‰¹å®šå±€éƒ¨æºã€‚å…¨å±€å’Œå±€éƒ¨è¡¨ç¤ºçš„äº’ä¿¡æ¯ä½¿å¾—å…¨å±€è¡¨ç¤ºæ›´åŠ å…³æ³¨å…¨å±€è¯­ä¹‰ï¼Œå³æ‰€æœ‰å±€éƒ¨è¯­ä¹‰ä¿¡æ¯çš„å…±æ€§ï¼Œè€Œéå±€éƒ¨è¡¨ç¤ºä¹‹é—´çš„å…·ä½“ä¸åŒç»†èŠ‚ã€‚ ","date":"2023-07-11","objectID":"/bert_embedding_and_mimaximization/:3:1","series":[],"tags":[],"title":"ã€ŠRefining BERT Embeddings for Document Hashing via Mutual Information Maximizationã€‹é˜…è¯»ç¬”è®°","uri":"/bert_embedding_and_mimaximization/#å›¾åƒé¢†åŸŸçš„äº’ä¿¡æ¯æœ€å¤§åŒ–æ–¹æ³•"},{"categories":["paper_reading"],"content":" æ„å»ºæ–‡æœ¬å±€éƒ¨å’Œå…¨å±€è¡¨å¾ å±€éƒ¨è¡¨å¾ç»™å®šä¸€ç¯‡æ–‡æ¡£ï¼Œè·å–æ¯ä¸€ä¸ªè¯çš„åµŒå…¥è¡¨ç¤ºï¼Œæœ€ç»ˆè¡¨ç¤ºä¸€ç¯‡æ–‡æ¡£ä¸º$X = {e_1, . . . , e_T}$ï¼Œå…¶ä¸­$e_i\\in \\mathbb R^d$è¡¨ç¤ºç¬¬$i$ä¸ªè¯çš„BERTåµŒå…¥è¡¨ç¤ºï¼Œ $T$è¡¨ç¤ºæ–‡æ¡£æ€»è¯æ•°ã€‚å°†æ–‡æ¡£$X$è¾“å…¥æ–‡æœ¬å·ç§¯ç¥ç»ç½‘ç»œCNNï¼Œå…¶ä¸­ç­›é€‰å™¨$W\\in \\mathbb R^{K\\times n\\times d}$ï¼Œ $n$å’Œ$K$è¡¨ç¤ºç­›é€‰å™¨çš„å¤§å°å’Œæ•°é‡ã€‚è¿™ç§æ–¹å¼èƒ½å¤Ÿä¸ºæ¯ä¸ª n-gram ç‰‡æ®µç”Ÿæˆå±€éƒ¨è¡¨å¾ï¼Œå…·ä½“è€Œè¨€ï¼Œç¬¬$i$ä¸ªç‰‡æ®µçš„å±€éƒ¨è¡¨å¾å¦‚ä¸‹è®¡ç®—ï¼Œ*è¡¨ç¤ºå·ç§¯è¿ç®—ç¬¦ï¼š $$ h_i^{(n)}={\\rm RELU}(W* e_{i:i+n-1}) $$ å°†å…¶ä½œç”¨äºæ‰€æœ‰çš„æ–‡æœ¬ç‰‡æ®µï¼Œåˆ™å¯ä»¥è·å¾—æ‰€æœ‰è¯å¯¹åº”ä½ç½®çš„å±€éƒ¨è¡¨å¾ï¼š $$ H^{(n)}=\\{h_1^{(n)},h_2^{(n)},\\cdots,h_T^{(n)}\\} $$ å…¨å±€è¡¨å¾å°†$H^{(n)}$ ä¼ å…¥$\\rm READOUT$å‡½æ•°ï¼Œå³å¹³å‡æ± åŒ–å‡½æ•°æˆ–è€…æ›´å¤æ‚çš„è‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼Œå¯ä»¥åœ¨ä¸å—æ–‡æ¡£é•¿åº¦çš„å½±å“ä¸‹è·å¾—æ–‡æ¡£çš„å…¨å±€è¡¨å¾ã€‚ $$ H = {\\rm READOUT}({h_i^{(n)}}_{n\\in\\mathcal N}) $$ å¦å¤–ï¼Œä¸ºäº†è¿›ä¸€æ­¥åœ¨å…¨å±€è¡¨å¾ä¸­çªå‡ºè¯­ä¹‰ä¿¡æ¯ï¼Œæå‡ºé‡‡ç”¨ä¸‰ç§ä¸åŒåˆ‡ç‰‡æ–¹å¼çš„è¿æ¥ï¼Œå³1-gramï¼Œ3-gramï¼Œ5-gramï¼Œæœ€ç»ˆçš„å±€éƒ¨å’Œå…¨å±€è¡¨å¾å¯ä»¥å¦‚ä¸‹è®¡ç®—ï¼š $$ h_i = {\\rm MLP(CONCAT}(\\{h_i^{(n)}\\}_{n\\in\\mathcal N})),\\\\ H = {\\rm READOUT}(\\{h_i\\}_{i=1}^T), $$ å…¶ä¸­$\\mathcal N$è¡¨ç¤ºä¸åŒçš„çª—å£å¤§å°é›†åˆï¼Œåœ¨å®éªŒä¸­$\\mathcal N={1,3,5}$å¦‚Figure 1æ‰€ç¤ºã€‚ ","date":"2023-07-11","objectID":"/bert_embedding_and_mimaximization/:3:2","series":[],"tags":[],"title":"ã€ŠRefining BERT Embeddings for Document Hashing via Mutual Information Maximizationã€‹é˜…è¯»ç¬”è®°","uri":"/bert_embedding_and_mimaximization/#æ„å»ºæ–‡æœ¬å±€éƒ¨å’Œå…¨å±€è¡¨å¾"},{"categories":["paper_reading"],"content":" æ„å»ºæ–‡æœ¬å±€éƒ¨å’Œå…¨å±€è¡¨å¾ å±€éƒ¨è¡¨å¾ç»™å®šä¸€ç¯‡æ–‡æ¡£ï¼Œè·å–æ¯ä¸€ä¸ªè¯çš„åµŒå…¥è¡¨ç¤ºï¼Œæœ€ç»ˆè¡¨ç¤ºä¸€ç¯‡æ–‡æ¡£ä¸º$X = {e_1, . . . , e_T}$ï¼Œå…¶ä¸­$e_i\\in \\mathbb R^d$è¡¨ç¤ºç¬¬$i$ä¸ªè¯çš„BERTåµŒå…¥è¡¨ç¤ºï¼Œ $T$è¡¨ç¤ºæ–‡æ¡£æ€»è¯æ•°ã€‚å°†æ–‡æ¡£$X$è¾“å…¥æ–‡æœ¬å·ç§¯ç¥ç»ç½‘ç»œCNNï¼Œå…¶ä¸­ç­›é€‰å™¨$W\\in \\mathbb R^{K\\times n\\times d}$ï¼Œ $n$å’Œ$K$è¡¨ç¤ºç­›é€‰å™¨çš„å¤§å°å’Œæ•°é‡ã€‚è¿™ç§æ–¹å¼èƒ½å¤Ÿä¸ºæ¯ä¸ª n-gram ç‰‡æ®µç”Ÿæˆå±€éƒ¨è¡¨å¾ï¼Œå…·ä½“è€Œè¨€ï¼Œç¬¬$i$ä¸ªç‰‡æ®µçš„å±€éƒ¨è¡¨å¾å¦‚ä¸‹è®¡ç®—ï¼Œ*è¡¨ç¤ºå·ç§¯è¿ç®—ç¬¦ï¼š $$ h_i^{(n)}={\\rm RELU}(W* e_{i:i+n-1}) $$ å°†å…¶ä½œç”¨äºæ‰€æœ‰çš„æ–‡æœ¬ç‰‡æ®µï¼Œåˆ™å¯ä»¥è·å¾—æ‰€æœ‰è¯å¯¹åº”ä½ç½®çš„å±€éƒ¨è¡¨å¾ï¼š $$ H^{(n)}=\\{h_1^{(n)},h_2^{(n)},\\cdots,h_T^{(n)}\\} $$ å…¨å±€è¡¨å¾å°†$H^{(n)}$ ä¼ å…¥$\\rm READOUT$å‡½æ•°ï¼Œå³å¹³å‡æ± åŒ–å‡½æ•°æˆ–è€…æ›´å¤æ‚çš„è‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼Œå¯ä»¥åœ¨ä¸å—æ–‡æ¡£é•¿åº¦çš„å½±å“ä¸‹è·å¾—æ–‡æ¡£çš„å…¨å±€è¡¨å¾ã€‚ $$ H = {\\rm READOUT}({h_i^{(n)}}_{n\\in\\mathcal N}) $$ å¦å¤–ï¼Œä¸ºäº†è¿›ä¸€æ­¥åœ¨å…¨å±€è¡¨å¾ä¸­çªå‡ºè¯­ä¹‰ä¿¡æ¯ï¼Œæå‡ºé‡‡ç”¨ä¸‰ç§ä¸åŒåˆ‡ç‰‡æ–¹å¼çš„è¿æ¥ï¼Œå³1-gramï¼Œ3-gramï¼Œ5-gramï¼Œæœ€ç»ˆçš„å±€éƒ¨å’Œå…¨å±€è¡¨å¾å¯ä»¥å¦‚ä¸‹è®¡ç®—ï¼š $$ h_i = {\\rm MLP(CONCAT}(\\{h_i^{(n)}\\}_{n\\in\\mathcal N})),\\\\ H = {\\rm READOUT}(\\{h_i\\}_{i=1}^T), $$ å…¶ä¸­$\\mathcal N$è¡¨ç¤ºä¸åŒçš„çª—å£å¤§å°é›†åˆï¼Œåœ¨å®éªŒä¸­$\\mathcal N={1,3,5}$å¦‚Figure 1æ‰€ç¤ºã€‚ ","date":"2023-07-11","objectID":"/bert_embedding_and_mimaximization/:3:2","series":[],"tags":[],"title":"ã€ŠRefining BERT Embeddings for Document Hashing via Mutual Information Maximizationã€‹é˜…è¯»ç¬”è®°","uri":"/bert_embedding_and_mimaximization/#å±€éƒ¨è¡¨å¾"},{"categories":["paper_reading"],"content":" æ„å»ºæ–‡æœ¬å±€éƒ¨å’Œå…¨å±€è¡¨å¾ å±€éƒ¨è¡¨å¾ç»™å®šä¸€ç¯‡æ–‡æ¡£ï¼Œè·å–æ¯ä¸€ä¸ªè¯çš„åµŒå…¥è¡¨ç¤ºï¼Œæœ€ç»ˆè¡¨ç¤ºä¸€ç¯‡æ–‡æ¡£ä¸º$X = {e_1, . . . , e_T}$ï¼Œå…¶ä¸­$e_i\\in \\mathbb R^d$è¡¨ç¤ºç¬¬$i$ä¸ªè¯çš„BERTåµŒå…¥è¡¨ç¤ºï¼Œ $T$è¡¨ç¤ºæ–‡æ¡£æ€»è¯æ•°ã€‚å°†æ–‡æ¡£$X$è¾“å…¥æ–‡æœ¬å·ç§¯ç¥ç»ç½‘ç»œCNNï¼Œå…¶ä¸­ç­›é€‰å™¨$W\\in \\mathbb R^{K\\times n\\times d}$ï¼Œ $n$å’Œ$K$è¡¨ç¤ºç­›é€‰å™¨çš„å¤§å°å’Œæ•°é‡ã€‚è¿™ç§æ–¹å¼èƒ½å¤Ÿä¸ºæ¯ä¸ª n-gram ç‰‡æ®µç”Ÿæˆå±€éƒ¨è¡¨å¾ï¼Œå…·ä½“è€Œè¨€ï¼Œç¬¬$i$ä¸ªç‰‡æ®µçš„å±€éƒ¨è¡¨å¾å¦‚ä¸‹è®¡ç®—ï¼Œ*è¡¨ç¤ºå·ç§¯è¿ç®—ç¬¦ï¼š $$ h_i^{(n)}={\\rm RELU}(W* e_{i:i+n-1}) $$ å°†å…¶ä½œç”¨äºæ‰€æœ‰çš„æ–‡æœ¬ç‰‡æ®µï¼Œåˆ™å¯ä»¥è·å¾—æ‰€æœ‰è¯å¯¹åº”ä½ç½®çš„å±€éƒ¨è¡¨å¾ï¼š $$ H^{(n)}=\\{h_1^{(n)},h_2^{(n)},\\cdots,h_T^{(n)}\\} $$ å…¨å±€è¡¨å¾å°†$H^{(n)}$ ä¼ å…¥$\\rm READOUT$å‡½æ•°ï¼Œå³å¹³å‡æ± åŒ–å‡½æ•°æˆ–è€…æ›´å¤æ‚çš„è‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼Œå¯ä»¥åœ¨ä¸å—æ–‡æ¡£é•¿åº¦çš„å½±å“ä¸‹è·å¾—æ–‡æ¡£çš„å…¨å±€è¡¨å¾ã€‚ $$ H = {\\rm READOUT}({h_i^{(n)}}_{n\\in\\mathcal N}) $$ å¦å¤–ï¼Œä¸ºäº†è¿›ä¸€æ­¥åœ¨å…¨å±€è¡¨å¾ä¸­çªå‡ºè¯­ä¹‰ä¿¡æ¯ï¼Œæå‡ºé‡‡ç”¨ä¸‰ç§ä¸åŒåˆ‡ç‰‡æ–¹å¼çš„è¿æ¥ï¼Œå³1-gramï¼Œ3-gramï¼Œ5-gramï¼Œæœ€ç»ˆçš„å±€éƒ¨å’Œå…¨å±€è¡¨å¾å¯ä»¥å¦‚ä¸‹è®¡ç®—ï¼š $$ h_i = {\\rm MLP(CONCAT}(\\{h_i^{(n)}\\}_{n\\in\\mathcal N})),\\\\ H = {\\rm READOUT}(\\{h_i\\}_{i=1}^T), $$ å…¶ä¸­$\\mathcal N$è¡¨ç¤ºä¸åŒçš„çª—å£å¤§å°é›†åˆï¼Œåœ¨å®éªŒä¸­$\\mathcal N={1,3,5}$å¦‚Figure 1æ‰€ç¤ºã€‚ ","date":"2023-07-11","objectID":"/bert_embedding_and_mimaximization/:3:2","series":[],"tags":[],"title":"ã€ŠRefining BERT Embeddings for Document Hashing via Mutual Information Maximizationã€‹é˜…è¯»ç¬”è®°","uri":"/bert_embedding_and_mimaximization/#å…¨å±€è¡¨å¾"},{"categories":["paper_reading"],"content":" åŸºäºæœ€å¤§åŒ–å±€éƒ¨å’Œå…¨å±€è¡¨å¾äº’ä¿¡æ¯çš„ç«¯åˆ°ç«¯çš„å“ˆå¸Œ é¦–å…ˆç”ŸæˆåŸºäºå±€éƒ¨å’Œå…¨å±€è¡¨å¾çš„å“ˆå¸Œç ï¼Œé€šè¿‡é‡‡æ ·å¦‚ä¸‹ä¼¯åŠªåˆ©åˆ†å¸ƒå¾—åˆ°ï¼š $$ b_i\\sim {\\rm Bernoulli}(\\sigma(h_i)),\\\\ B\\sim {\\rm Bernoulli(\\sigma(H))}, $$ $b_i$ å’Œ$B$è¡¨ç¤ºå±€éƒ¨å’Œå…¨å±€å¯¹åº”çš„å“ˆå¸Œç ã€‚æ¥ä¸‹æ¥æœ€å¤§åŒ–ä»–ä»¬ä¹‹é—´çš„äº’ä¿¡æ¯ã€‚ $$ \\hat{\\theta}=\\arg \\max_{\\theta}\\frac{1}{T}\\sum^T_{i=1}I(b_i,B), $$ $b_i$ å’Œ$B$è¡¨ç¤ºå¯¹äºç‰¹å®šæ–‡æ¡£è€Œè¨€ä¸æ˜¯å”¯ä¸€å¯¹åº”çš„ï¼Œè¿™ä½¿å¾—äº’ä¿¡æ¯éš¾ä»¥è¯„ä¼°ã€‚ æœ€è¿‘ï¼Œæœ‰è®¸å¤šæ–¹æ³•è¢«æå‡ºç”¨æ¥ä¼°è®¡äº’ä¿¡æ¯ï¼Œå¦‚MINEï¼ŒinfoNCEï¼ŒJensen-Shannon divergence estimator (JSDE)ï¼Œå…¶ä¸­JSDEå¯¹è´Ÿæ ·æœ¬æ•°é‡è¾ƒä¸æ•æ„Ÿï¼Œäºæ˜¯æœ¬æ–‡ä½¿ç”¨JSDEæ¥ä¼°è®¡äº’ä¿¡æ¯å¹¶ä¼˜åŒ–å®ƒã€‚å…·ä½“è€Œè¨€ï¼Œäº’ä¿¡æ¯å¯ä»¥é€šè¿‡æœ€å°åŒ–å¦‚ä¸‹å…¬å¼æ¥ä¼°è®¡ï¼š $$ \\begin{aligned} \\tilde{I_{\\phi}}(b_i;B)=\u0026-{\\rm softplus}(-D_{\\phi}(b_i,B))\\\\ \u0026-\\mathbb E_{\\tilde{\\mathbb P}}{\\rm softplus}(-D_{\\phi}(\\tilde{b_i},B)) \\end{aligned} $$ å…¶ä¸­$\\tilde{b_i}$è¡¨ç¤ºä»ç»éªŒåˆ†å¸ƒ$\\tilde{\\mathbb P}=\\mathbb P$ç”Ÿæˆçš„è´Ÿæ ·æœ¬çš„ç¬¬$i$ä¸ªå±€éƒ¨è¡¨å¾ï¼Œåœ¨å®é™…å®éªŒä¸­è´Ÿæ ·æœ¬$\\tilde{b_i}$æ˜¯åœ¨å±€éƒ¨è¡¨å¾ä¸­é€‰å–çš„æˆ–ä»batchçš„å…¶ä»–æ–‡æ¡£ä¸­é€‰å–çš„ã€‚$D_{\\phi}(\\cdot,\\cdot)$æ˜¯ç”±ç¥ç»ç½‘ç»œå®ç°çš„åˆ¤åˆ«å™¨ã€‚${\\rm softplus}(x)\\triangleq\\log (1+e^x)$ã€‚ ä¸Šè¿°æœ€å¤§åŒ–äº’ä¿¡æ¯æ¡†æ¶ä»…ä»…ä¾èµ–BERTå¯¹å•ä¸ªå•è¯çš„åµŒå…¥ï¼Œå¿½ç•¥äº†BERTçš„CLSåµŒå…¥ã€‚å› æ­¤ï¼Œä¸ºäº†æé«˜å­¦å¾—å“ˆå¸Œç ä¸­çš„å…¨å±€è¯­ä¹‰ä¿¡æ¯,æ·»åŠ ä¸€ä¸ªæ­£åˆ™åŒ–é¡¹æ¥æé«˜å“ˆå¸Œç å’ŒCLSåµŒå…¥ä¹‹é—´çš„äº’ä¿¡æ¯ï¼Œæœ€ç»ˆçš„Losså¦‚ä¸‹ï¼š $$ \\tilde{\\mathcal L}(\\phi,\\theta)=-\\frac{1}{T}\\sum^T_{i=1}\\tilde{I_{\\phi}}(b_i;B)-\\beta(E,B), $$ $\\beta$ æ˜¯è¶…å‚æ•°ï¼Œ$E$è¡¨ç¤ºäºŒå€¼åŒ–åçš„CLSåµŒå…¥ï¼Œ $\\theta$æ˜¯æ„é€ å±€éƒ¨å’Œå…¨å±€äºŒå€¼ç  $b_i$ å’Œ$B$è¿‡ç¨‹ä¸­æ¶‰åŠçš„æ¨¡å‹å‚æ•°ã€‚ ","date":"2023-07-11","objectID":"/bert_embedding_and_mimaximization/:3:3","series":[],"tags":[],"title":"ã€ŠRefining BERT Embeddings for Document Hashing via Mutual Information Maximizationã€‹é˜…è¯»ç¬”è®°","uri":"/bert_embedding_and_mimaximization/#åŸºäºæœ€å¤§åŒ–å±€éƒ¨å’Œå…¨å±€è¡¨å¾äº’ä¿¡æ¯çš„ç«¯åˆ°ç«¯çš„å“ˆå¸Œ"},{"categories":["paper_reading"],"content":" å®éªŒéƒ¨åˆ† æ•°æ®é›†ä¿¡æ¯ å¯¹æ¯”æ–¹æ³•å’Œç»†èŠ‚ è¯„ä¼°æ–¹æ³• æ€»ä½“ç»“æœDHIMå³æœ¬æ–‡æ¨¡å‹ï¼Œæ— ç±»åˆ«æ ‡ç­¾ç›‘ç£çš„æ¨¡å‹ï¼Œç›¸æ¯”åŸºçº¿æ¨¡å‹æœ‰æ‰€æå‡ï¼Œä¹Ÿå°è¯äº†å‰æ–‡æåˆ°çš„èƒœæ¾ˆç»™ä½ æ¨¡å‹çš„ç›¸å…³å·¥ä½œâ€”â€”å•çº¯é‡æ„BERTåµŒå…¥å“ˆå¸Œç é¢ä¸´çš„æ€§èƒ½é—®é¢˜ã€‚ ","date":"2023-07-11","objectID":"/bert_embedding_and_mimaximization/:3:4","series":[],"tags":[],"title":"ã€ŠRefining BERT Embeddings for Document Hashing via Mutual Information Maximizationã€‹é˜…è¯»ç¬”è®°","uri":"/bert_embedding_and_mimaximization/#å®éªŒéƒ¨åˆ†"},{"categories":["paper_reading"],"content":" å®éªŒéƒ¨åˆ† æ•°æ®é›†ä¿¡æ¯ å¯¹æ¯”æ–¹æ³•å’Œç»†èŠ‚ è¯„ä¼°æ–¹æ³• æ€»ä½“ç»“æœDHIMå³æœ¬æ–‡æ¨¡å‹ï¼Œæ— ç±»åˆ«æ ‡ç­¾ç›‘ç£çš„æ¨¡å‹ï¼Œç›¸æ¯”åŸºçº¿æ¨¡å‹æœ‰æ‰€æå‡ï¼Œä¹Ÿå°è¯äº†å‰æ–‡æåˆ°çš„èƒœæ¾ˆç»™ä½ æ¨¡å‹çš„ç›¸å…³å·¥ä½œâ€”â€”å•çº¯é‡æ„BERTåµŒå…¥å“ˆå¸Œç é¢ä¸´çš„æ€§èƒ½é—®é¢˜ã€‚ ","date":"2023-07-11","objectID":"/bert_embedding_and_mimaximization/:3:4","series":[],"tags":[],"title":"ã€ŠRefining BERT Embeddings for Document Hashing via Mutual Information Maximizationã€‹é˜…è¯»ç¬”è®°","uri":"/bert_embedding_and_mimaximization/#æ•°æ®é›†ä¿¡æ¯"},{"categories":["paper_reading"],"content":" å®éªŒéƒ¨åˆ† æ•°æ®é›†ä¿¡æ¯ å¯¹æ¯”æ–¹æ³•å’Œç»†èŠ‚ è¯„ä¼°æ–¹æ³• æ€»ä½“ç»“æœDHIMå³æœ¬æ–‡æ¨¡å‹ï¼Œæ— ç±»åˆ«æ ‡ç­¾ç›‘ç£çš„æ¨¡å‹ï¼Œç›¸æ¯”åŸºçº¿æ¨¡å‹æœ‰æ‰€æå‡ï¼Œä¹Ÿå°è¯äº†å‰æ–‡æåˆ°çš„èƒœæ¾ˆç»™ä½ æ¨¡å‹çš„ç›¸å…³å·¥ä½œâ€”â€”å•çº¯é‡æ„BERTåµŒå…¥å“ˆå¸Œç é¢ä¸´çš„æ€§èƒ½é—®é¢˜ã€‚ ","date":"2023-07-11","objectID":"/bert_embedding_and_mimaximization/:3:4","series":[],"tags":[],"title":"ã€ŠRefining BERT Embeddings for Document Hashing via Mutual Information Maximizationã€‹é˜…è¯»ç¬”è®°","uri":"/bert_embedding_and_mimaximization/#å¯¹æ¯”æ–¹æ³•å’Œç»†èŠ‚"},{"categories":["paper_reading"],"content":" å®éªŒéƒ¨åˆ† æ•°æ®é›†ä¿¡æ¯ å¯¹æ¯”æ–¹æ³•å’Œç»†èŠ‚ è¯„ä¼°æ–¹æ³• æ€»ä½“ç»“æœDHIMå³æœ¬æ–‡æ¨¡å‹ï¼Œæ— ç±»åˆ«æ ‡ç­¾ç›‘ç£çš„æ¨¡å‹ï¼Œç›¸æ¯”åŸºçº¿æ¨¡å‹æœ‰æ‰€æå‡ï¼Œä¹Ÿå°è¯äº†å‰æ–‡æåˆ°çš„èƒœæ¾ˆç»™ä½ æ¨¡å‹çš„ç›¸å…³å·¥ä½œâ€”â€”å•çº¯é‡æ„BERTåµŒå…¥å“ˆå¸Œç é¢ä¸´çš„æ€§èƒ½é—®é¢˜ã€‚ ","date":"2023-07-11","objectID":"/bert_embedding_and_mimaximization/:3:4","series":[],"tags":[],"title":"ã€ŠRefining BERT Embeddings for Document Hashing via Mutual Information Maximizationã€‹é˜…è¯»ç¬”è®°","uri":"/bert_embedding_and_mimaximization/#è¯„ä¼°æ–¹æ³•"},{"categories":["paper_reading"],"content":" å®éªŒéƒ¨åˆ† æ•°æ®é›†ä¿¡æ¯ å¯¹æ¯”æ–¹æ³•å’Œç»†èŠ‚ è¯„ä¼°æ–¹æ³• æ€»ä½“ç»“æœDHIMå³æœ¬æ–‡æ¨¡å‹ï¼Œæ— ç±»åˆ«æ ‡ç­¾ç›‘ç£çš„æ¨¡å‹ï¼Œç›¸æ¯”åŸºçº¿æ¨¡å‹æœ‰æ‰€æå‡ï¼Œä¹Ÿå°è¯äº†å‰æ–‡æåˆ°çš„èƒœæ¾ˆç»™ä½ æ¨¡å‹çš„ç›¸å…³å·¥ä½œâ€”â€”å•çº¯é‡æ„BERTåµŒå…¥å“ˆå¸Œç é¢ä¸´çš„æ€§èƒ½é—®é¢˜ã€‚ ","date":"2023-07-11","objectID":"/bert_embedding_and_mimaximization/:3:4","series":[],"tags":[],"title":"ã€ŠRefining BERT Embeddings for Document Hashing via Mutual Information Maximizationã€‹é˜…è¯»ç¬”è®°","uri":"/bert_embedding_and_mimaximization/#æ€»ä½“ç»“æœ"},{"categories":["tutorial"],"content":" TUNæ¨¡å¼é¦–å…ˆç†è§£TUNæ¨¡å¼ï¼Œè¿™æ˜¯ä¸€ä¸ªçœŸæ­£æ„ä¹‰ä¸Šçš„å…¨å±€çš„ä»£ç†æ¨¡å¼ï¼Œå®ƒä¼šåœ¨ä½ çš„ç½‘ç»œé€‚é…å™¨ä¸­æ–°å»ºä¸€ä¸ªClashä¸“ç”¨çš„ï¼Œå¯ä»¥ç†è§£ä¸ºè½¯è·¯ç”±ä¸­è½¬ç½‘å¡ï¼Œå¼€å¯TUNæ¨¡å¼å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ ç„¶åå¯ä»¥åœ¨ç½‘ç»œé€‚é…å™¨ä¸­æ‰¾åˆ°clash for windows å®¢æˆ·ç«¯ä¸“ç”¨çš„ç½‘ç»œé€‚é…å™¨ï¼Œæ‰€æœ‰è¿›å…¥æœ¬æœºçš„æµé‡éƒ½ä¼šç»è¿‡è¿™ä¸ªé€‚é…å™¨ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º åŒå‡»æ‰“å¼€å®ƒè¿›è¡Œå¦‚ä¸‹è®¾ç½®ï¼Œæ³¨æ„æ›´æ”¹DNSè§£æï¼Œå¦‚æœclash for windows å®¢æˆ·ç«¯ç»™äº†é»˜è®¤çš„æœ‰å¯èƒ½å¯¼è‡´ç½‘é¡µæ— æ³•æ‰“å¼€ï¼Œé€‰æ‹©è‡ªåŠ¨è·å–DNSæœåŠ¡å™¨åœ°å€å³å¯ã€‚ ç„¶åå›åˆ°clash for windows å®¢æˆ·ç«¯ï¼Œä¸€èˆ¬æœºåœºç»™çš„é…ç½®æ–‡ä»¶é‡Œéƒ½ä¼šæœ‰è§„åˆ™ï¼Œæˆ‘ä»¬åˆ‡æ¢åˆ°æŒ‰è§„åˆ™é€‰æ‹©èŠ‚ç‚¹å³å¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º ç„¶åæˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨è¿›è¡Œæµ‹è¯•ï¼Œåˆ†åˆ«è®¿é—®ç™¾åº¦å’Œå¤ğŸ¶ï¼Œè¿™é‡Œä¸è¿›è¡Œæ¼”ç¤ºäº†ã€‚ è®¿é—®å®Œäº†ä¹‹åæˆ‘ä»¬åˆ°clash for windows å®¢æˆ·ç«¯è¿›è¡Œæ£€æŸ¥ä¸€ä¸‹çœ‹ä¸‹æµé‡æ€ä¹ˆèµ°çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯ä»¥çœ‹åˆ°å‰è€…æ˜¯èµ°äº†ä»£ç†çš„ï¼Œè€Œåè€…æ˜¯ç›´è¿ã€‚ ","date":"2023-04-05","objectID":"/clashtun/:0:1","series":[],"tags":["tools","win"],"title":"TUNæ¨¡å¼ Clash for windows é…ç½®æ•™ç¨‹","uri":"/clashtun/#tunæ¨¡å¼"},{"categories":["tutorial"],"content":" Proxy SwitchyOmega æ’ä»¶æ¨¡å¼å¦‚æœä½ çš„#Clashè§„åˆ™ä¸å¥½ç”¨ï¼Œæˆ–æ˜¯#åªéœ€è¦æµè§ˆå™¨ä»£ç†ï¼Œå¯ä»¥å€Ÿç”¨Proxy SwitchyOmegaæµè§ˆå™¨æ’ä»¶æ¥å®Œæˆä»£ç†ã€‚ ä»¥è°·æ­Œæµè§ˆå™¨ä¸ºä¾‹ï¼ŒEdgeåº”è¯¥ä¹Ÿæœ‰ï¼Œå…ˆåœ¨åº”ç”¨å•†åº—æ‰¾åˆ°è¿™ä¸ªæ’ä»¶ï¼Œç„¶åå®‰è£…åˆ°æµè§ˆå™¨ä¸Š å®Œæˆåä½ çš„æµè§ˆå™¨ä¸Šåº”è¯¥ä¼šå‡ºç°ä»¥ä¸‹æ ‡å¿—åœ¨æ’ä»¶æ é‡Œ åŸºäºProxy SwitchyOmegaï¼Œä½ å¯ä»¥é€‰æ‹©ä¸¤ç§è§„åˆ™æ–¹å¼ï¼Œä¸‹é¢åˆ†åˆ«ä»‹ç»è¿™ä¸¤ç§æ–¹å¼çš„å…·ä½“è®¾ç½®ã€‚ æ–¹å¼ä¸€ ä½¿ç”¨clashè‡ªå¸¦è§„åˆ™ é¦–å…ˆæ‰“å¼€clash for windowså®¢æˆ·ç«¯ï¼Œç¡®è®¤clashæœåŠ¡ç«¯å£ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè®°ä½è¿™ä¸ªç«¯å£ï¼ˆå¯ä»¥è‡ªè¡Œè®¾ç½®ï¼‰ã€‚ 7890 ç„¶åå›åˆ°æµè§ˆå™¨ï¼Œæ‰“å¼€Proxy SwitchyOmegaæ’ä»¶çš„é€‰é¡¹å¡ æ–°å»ºä¸€ä¸ªåä¸ºclashçš„æƒ…æ™¯æ¨¡å¼ï¼Œå¹¶åšå¥½å¦‚ä¸‹è®¾ç½®ä¿å­˜ ä¸‹å›¾ä¸­çš„ä»£ç†ç«¯å£æ”¹ä¸ºåˆšåˆšè®°ä½çš„ç«¯å£ï¼Œä»£ç†åè®®å’ŒæœåŠ¡å™¨å¦‚å›¾æ‰€ç¤ºä¸ºHTTPå’Œæœ¬åœ°å›ç¯åœ°å€ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬å›åˆ°clash for windows å®¢æˆ·ç«¯ï¼Œè®¾ç½®æŒ‰è§„åˆ™ä»£ç† æ‰“å¼€æµè§ˆå™¨ï¼Œé€‰æ‹©æˆ‘ä»¬åˆšåˆšè®¾ç½®çš„æ’ä»¶æƒ…æ™¯æ¨¡å¼ è®¿é—®ç™¾åº¦å’Œå¤ğŸ¶ å›åˆ°clash for windows å®¢æˆ·ç«¯æŸ¥çœ‹è®¿é—®æµ‹è¯• åˆ†æµæˆåŠŸ æ–¹å¼äºŒ ä½¿ç”¨ç½‘ç»œæ¥æºè§„åˆ™ æ‰“å¼€æµè§ˆå™¨æ’ä»¶ï¼Œåœ¨å»ºç«‹å¥½æ–¹å¼ä¸€ä¸­æµè§ˆå™¨clashæƒ…æ™¯æ¨¡å¼çš„åŸºç¡€ä¸‹æ–°å»ºä¸€ä¸ªauto switchæƒ…æ™¯æ¨¡å¼ å¯¹è¿™ä¸ªæƒ…æ™¯æ¨¡å¼è¿›è¡Œå¦‚ä¸‹è®¾ç½® ä½¿ç”¨è¿™ä¸ªå¼€æºè§„åˆ™åˆ—è¡¨ï¼ˆä¹Ÿå¯ä»¥æ›¿æ¢æˆåˆ«çš„ï¼‰ https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt å®Œæˆè®¾ç½®åæˆ‘ä»¬å›åˆ°clash for windows å®¢æˆ·ç«¯ï¼Œè®¾ç½®æŒ‡å®šä»£ç† å›åˆ°æµè§ˆå™¨æ‰“å¼€æ’ä»¶çš„auto switchæƒ…æ™¯æ¨¡å¼ è®¿é—®ç™¾åº¦å’Œå¤ğŸ¶ å›åˆ°clash for windows å®¢æˆ·ç«¯æŸ¥çœ‹è®¿é—®æµ‹è¯• å¯ä»¥çœ‹åˆ°ï¼Œclash for windows å®¢æˆ·ç«¯åœ¨è®¿é—®ç™¾åº¦æ—¶å‹æ ¹æ²¡æœ‰connectionè®°å½•ï¼Œè¯´æ˜Proxy SwitchyOmegaæ’ä»¶ä½¿å¾—æµè§ˆå™¨åœ¨è®¿é—®æŸäº›ç½‘ç«™æ—¶æ²¡æœ‰èµ°ä»£ç†ï¼Œè€ŒæŸäº›ç½‘ç«™èµ°äº†ä»£ç†ã€‚ åˆ†æµæˆåŠŸ æŸGPTæ›´æ¢èŠ‚ç‚¹è®¾ç½®æ–¹æ³•å½“æŸGPTæŒ‚äº†æ—¶ï¼ŒæŒ‰ç…§Proxy SwitchyOmegaæ’ä»¶æ’ä»¶æ–¹å¼äºŒè®¾ç½®ï¼Œå¹¶å°è¯•åˆ‡æ¢ä¸åŒåœ°åŸŸèŠ‚ç‚¹å³å¯ã€‚ ","date":"2023-04-05","objectID":"/clashtun/:0:2","series":[],"tags":["tools","win"],"title":"TUNæ¨¡å¼ Clash for windows é…ç½®æ•™ç¨‹","uri":"/clashtun/#proxy-switchyomega-æ’ä»¶æ¨¡å¼"},{"categories":["tutorial"],"content":" Proxy SwitchyOmega æ’ä»¶æ¨¡å¼å¦‚æœä½ çš„#Clashè§„åˆ™ä¸å¥½ç”¨ï¼Œæˆ–æ˜¯#åªéœ€è¦æµè§ˆå™¨ä»£ç†ï¼Œå¯ä»¥å€Ÿç”¨Proxy SwitchyOmegaæµè§ˆå™¨æ’ä»¶æ¥å®Œæˆä»£ç†ã€‚ ä»¥è°·æ­Œæµè§ˆå™¨ä¸ºä¾‹ï¼ŒEdgeåº”è¯¥ä¹Ÿæœ‰ï¼Œå…ˆåœ¨åº”ç”¨å•†åº—æ‰¾åˆ°è¿™ä¸ªæ’ä»¶ï¼Œç„¶åå®‰è£…åˆ°æµè§ˆå™¨ä¸Š å®Œæˆåä½ çš„æµè§ˆå™¨ä¸Šåº”è¯¥ä¼šå‡ºç°ä»¥ä¸‹æ ‡å¿—åœ¨æ’ä»¶æ é‡Œ åŸºäºProxy SwitchyOmegaï¼Œä½ å¯ä»¥é€‰æ‹©ä¸¤ç§è§„åˆ™æ–¹å¼ï¼Œä¸‹é¢åˆ†åˆ«ä»‹ç»è¿™ä¸¤ç§æ–¹å¼çš„å…·ä½“è®¾ç½®ã€‚ æ–¹å¼ä¸€ ä½¿ç”¨clashè‡ªå¸¦è§„åˆ™ é¦–å…ˆæ‰“å¼€clash for windowså®¢æˆ·ç«¯ï¼Œç¡®è®¤clashæœåŠ¡ç«¯å£ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè®°ä½è¿™ä¸ªç«¯å£ï¼ˆå¯ä»¥è‡ªè¡Œè®¾ç½®ï¼‰ã€‚ 7890 ç„¶åå›åˆ°æµè§ˆå™¨ï¼Œæ‰“å¼€Proxy SwitchyOmegaæ’ä»¶çš„é€‰é¡¹å¡ æ–°å»ºä¸€ä¸ªåä¸ºclashçš„æƒ…æ™¯æ¨¡å¼ï¼Œå¹¶åšå¥½å¦‚ä¸‹è®¾ç½®ä¿å­˜ ä¸‹å›¾ä¸­çš„ä»£ç†ç«¯å£æ”¹ä¸ºåˆšåˆšè®°ä½çš„ç«¯å£ï¼Œä»£ç†åè®®å’ŒæœåŠ¡å™¨å¦‚å›¾æ‰€ç¤ºä¸ºHTTPå’Œæœ¬åœ°å›ç¯åœ°å€ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬å›åˆ°clash for windows å®¢æˆ·ç«¯ï¼Œè®¾ç½®æŒ‰è§„åˆ™ä»£ç† æ‰“å¼€æµè§ˆå™¨ï¼Œé€‰æ‹©æˆ‘ä»¬åˆšåˆšè®¾ç½®çš„æ’ä»¶æƒ…æ™¯æ¨¡å¼ è®¿é—®ç™¾åº¦å’Œå¤ğŸ¶ å›åˆ°clash for windows å®¢æˆ·ç«¯æŸ¥çœ‹è®¿é—®æµ‹è¯• åˆ†æµæˆåŠŸ æ–¹å¼äºŒ ä½¿ç”¨ç½‘ç»œæ¥æºè§„åˆ™ æ‰“å¼€æµè§ˆå™¨æ’ä»¶ï¼Œåœ¨å»ºç«‹å¥½æ–¹å¼ä¸€ä¸­æµè§ˆå™¨clashæƒ…æ™¯æ¨¡å¼çš„åŸºç¡€ä¸‹æ–°å»ºä¸€ä¸ªauto switchæƒ…æ™¯æ¨¡å¼ å¯¹è¿™ä¸ªæƒ…æ™¯æ¨¡å¼è¿›è¡Œå¦‚ä¸‹è®¾ç½® ä½¿ç”¨è¿™ä¸ªå¼€æºè§„åˆ™åˆ—è¡¨ï¼ˆä¹Ÿå¯ä»¥æ›¿æ¢æˆåˆ«çš„ï¼‰ https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt å®Œæˆè®¾ç½®åæˆ‘ä»¬å›åˆ°clash for windows å®¢æˆ·ç«¯ï¼Œè®¾ç½®æŒ‡å®šä»£ç† å›åˆ°æµè§ˆå™¨æ‰“å¼€æ’ä»¶çš„auto switchæƒ…æ™¯æ¨¡å¼ è®¿é—®ç™¾åº¦å’Œå¤ğŸ¶ å›åˆ°clash for windows å®¢æˆ·ç«¯æŸ¥çœ‹è®¿é—®æµ‹è¯• å¯ä»¥çœ‹åˆ°ï¼Œclash for windows å®¢æˆ·ç«¯åœ¨è®¿é—®ç™¾åº¦æ—¶å‹æ ¹æ²¡æœ‰connectionè®°å½•ï¼Œè¯´æ˜Proxy SwitchyOmegaæ’ä»¶ä½¿å¾—æµè§ˆå™¨åœ¨è®¿é—®æŸäº›ç½‘ç«™æ—¶æ²¡æœ‰èµ°ä»£ç†ï¼Œè€ŒæŸäº›ç½‘ç«™èµ°äº†ä»£ç†ã€‚ åˆ†æµæˆåŠŸ æŸGPTæ›´æ¢èŠ‚ç‚¹è®¾ç½®æ–¹æ³•å½“æŸGPTæŒ‚äº†æ—¶ï¼ŒæŒ‰ç…§Proxy SwitchyOmegaæ’ä»¶æ’ä»¶æ–¹å¼äºŒè®¾ç½®ï¼Œå¹¶å°è¯•åˆ‡æ¢ä¸åŒåœ°åŸŸèŠ‚ç‚¹å³å¯ã€‚ ","date":"2023-04-05","objectID":"/clashtun/:0:2","series":[],"tags":["tools","win"],"title":"TUNæ¨¡å¼ Clash for windows é…ç½®æ•™ç¨‹","uri":"/clashtun/#æ–¹å¼ä¸€--ä½¿ç”¨clashè‡ªå¸¦è§„åˆ™"},{"categories":["tutorial"],"content":" Proxy SwitchyOmega æ’ä»¶æ¨¡å¼å¦‚æœä½ çš„#Clashè§„åˆ™ä¸å¥½ç”¨ï¼Œæˆ–æ˜¯#åªéœ€è¦æµè§ˆå™¨ä»£ç†ï¼Œå¯ä»¥å€Ÿç”¨Proxy SwitchyOmegaæµè§ˆå™¨æ’ä»¶æ¥å®Œæˆä»£ç†ã€‚ ä»¥è°·æ­Œæµè§ˆå™¨ä¸ºä¾‹ï¼ŒEdgeåº”è¯¥ä¹Ÿæœ‰ï¼Œå…ˆåœ¨åº”ç”¨å•†åº—æ‰¾åˆ°è¿™ä¸ªæ’ä»¶ï¼Œç„¶åå®‰è£…åˆ°æµè§ˆå™¨ä¸Š å®Œæˆåä½ çš„æµè§ˆå™¨ä¸Šåº”è¯¥ä¼šå‡ºç°ä»¥ä¸‹æ ‡å¿—åœ¨æ’ä»¶æ é‡Œ åŸºäºProxy SwitchyOmegaï¼Œä½ å¯ä»¥é€‰æ‹©ä¸¤ç§è§„åˆ™æ–¹å¼ï¼Œä¸‹é¢åˆ†åˆ«ä»‹ç»è¿™ä¸¤ç§æ–¹å¼çš„å…·ä½“è®¾ç½®ã€‚ æ–¹å¼ä¸€ ä½¿ç”¨clashè‡ªå¸¦è§„åˆ™ é¦–å…ˆæ‰“å¼€clash for windowså®¢æˆ·ç«¯ï¼Œç¡®è®¤clashæœåŠ¡ç«¯å£ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè®°ä½è¿™ä¸ªç«¯å£ï¼ˆå¯ä»¥è‡ªè¡Œè®¾ç½®ï¼‰ã€‚ 7890 ç„¶åå›åˆ°æµè§ˆå™¨ï¼Œæ‰“å¼€Proxy SwitchyOmegaæ’ä»¶çš„é€‰é¡¹å¡ æ–°å»ºä¸€ä¸ªåä¸ºclashçš„æƒ…æ™¯æ¨¡å¼ï¼Œå¹¶åšå¥½å¦‚ä¸‹è®¾ç½®ä¿å­˜ ä¸‹å›¾ä¸­çš„ä»£ç†ç«¯å£æ”¹ä¸ºåˆšåˆšè®°ä½çš„ç«¯å£ï¼Œä»£ç†åè®®å’ŒæœåŠ¡å™¨å¦‚å›¾æ‰€ç¤ºä¸ºHTTPå’Œæœ¬åœ°å›ç¯åœ°å€ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬å›åˆ°clash for windows å®¢æˆ·ç«¯ï¼Œè®¾ç½®æŒ‰è§„åˆ™ä»£ç† æ‰“å¼€æµè§ˆå™¨ï¼Œé€‰æ‹©æˆ‘ä»¬åˆšåˆšè®¾ç½®çš„æ’ä»¶æƒ…æ™¯æ¨¡å¼ è®¿é—®ç™¾åº¦å’Œå¤ğŸ¶ å›åˆ°clash for windows å®¢æˆ·ç«¯æŸ¥çœ‹è®¿é—®æµ‹è¯• åˆ†æµæˆåŠŸ æ–¹å¼äºŒ ä½¿ç”¨ç½‘ç»œæ¥æºè§„åˆ™ æ‰“å¼€æµè§ˆå™¨æ’ä»¶ï¼Œåœ¨å»ºç«‹å¥½æ–¹å¼ä¸€ä¸­æµè§ˆå™¨clashæƒ…æ™¯æ¨¡å¼çš„åŸºç¡€ä¸‹æ–°å»ºä¸€ä¸ªauto switchæƒ…æ™¯æ¨¡å¼ å¯¹è¿™ä¸ªæƒ…æ™¯æ¨¡å¼è¿›è¡Œå¦‚ä¸‹è®¾ç½® ä½¿ç”¨è¿™ä¸ªå¼€æºè§„åˆ™åˆ—è¡¨ï¼ˆä¹Ÿå¯ä»¥æ›¿æ¢æˆåˆ«çš„ï¼‰ https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt å®Œæˆè®¾ç½®åæˆ‘ä»¬å›åˆ°clash for windows å®¢æˆ·ç«¯ï¼Œè®¾ç½®æŒ‡å®šä»£ç† å›åˆ°æµè§ˆå™¨æ‰“å¼€æ’ä»¶çš„auto switchæƒ…æ™¯æ¨¡å¼ è®¿é—®ç™¾åº¦å’Œå¤ğŸ¶ å›åˆ°clash for windows å®¢æˆ·ç«¯æŸ¥çœ‹è®¿é—®æµ‹è¯• å¯ä»¥çœ‹åˆ°ï¼Œclash for windows å®¢æˆ·ç«¯åœ¨è®¿é—®ç™¾åº¦æ—¶å‹æ ¹æ²¡æœ‰connectionè®°å½•ï¼Œè¯´æ˜Proxy SwitchyOmegaæ’ä»¶ä½¿å¾—æµè§ˆå™¨åœ¨è®¿é—®æŸäº›ç½‘ç«™æ—¶æ²¡æœ‰èµ°ä»£ç†ï¼Œè€ŒæŸäº›ç½‘ç«™èµ°äº†ä»£ç†ã€‚ åˆ†æµæˆåŠŸ æŸGPTæ›´æ¢èŠ‚ç‚¹è®¾ç½®æ–¹æ³•å½“æŸGPTæŒ‚äº†æ—¶ï¼ŒæŒ‰ç…§Proxy SwitchyOmegaæ’ä»¶æ’ä»¶æ–¹å¼äºŒè®¾ç½®ï¼Œå¹¶å°è¯•åˆ‡æ¢ä¸åŒåœ°åŸŸèŠ‚ç‚¹å³å¯ã€‚ ","date":"2023-04-05","objectID":"/clashtun/:0:2","series":[],"tags":["tools","win"],"title":"TUNæ¨¡å¼ Clash for windows é…ç½®æ•™ç¨‹","uri":"/clashtun/#æ–¹å¼äºŒ--ä½¿ç”¨ç½‘ç»œæ¥æºè§„åˆ™"},{"categories":["tutorial"],"content":" Proxy SwitchyOmega æ’ä»¶æ¨¡å¼å¦‚æœä½ çš„#Clashè§„åˆ™ä¸å¥½ç”¨ï¼Œæˆ–æ˜¯#åªéœ€è¦æµè§ˆå™¨ä»£ç†ï¼Œå¯ä»¥å€Ÿç”¨Proxy SwitchyOmegaæµè§ˆå™¨æ’ä»¶æ¥å®Œæˆä»£ç†ã€‚ ä»¥è°·æ­Œæµè§ˆå™¨ä¸ºä¾‹ï¼ŒEdgeåº”è¯¥ä¹Ÿæœ‰ï¼Œå…ˆåœ¨åº”ç”¨å•†åº—æ‰¾åˆ°è¿™ä¸ªæ’ä»¶ï¼Œç„¶åå®‰è£…åˆ°æµè§ˆå™¨ä¸Š å®Œæˆåä½ çš„æµè§ˆå™¨ä¸Šåº”è¯¥ä¼šå‡ºç°ä»¥ä¸‹æ ‡å¿—åœ¨æ’ä»¶æ é‡Œ åŸºäºProxy SwitchyOmegaï¼Œä½ å¯ä»¥é€‰æ‹©ä¸¤ç§è§„åˆ™æ–¹å¼ï¼Œä¸‹é¢åˆ†åˆ«ä»‹ç»è¿™ä¸¤ç§æ–¹å¼çš„å…·ä½“è®¾ç½®ã€‚ æ–¹å¼ä¸€ ä½¿ç”¨clashè‡ªå¸¦è§„åˆ™ é¦–å…ˆæ‰“å¼€clash for windowså®¢æˆ·ç«¯ï¼Œç¡®è®¤clashæœåŠ¡ç«¯å£ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè®°ä½è¿™ä¸ªç«¯å£ï¼ˆå¯ä»¥è‡ªè¡Œè®¾ç½®ï¼‰ã€‚ 7890 ç„¶åå›åˆ°æµè§ˆå™¨ï¼Œæ‰“å¼€Proxy SwitchyOmegaæ’ä»¶çš„é€‰é¡¹å¡ æ–°å»ºä¸€ä¸ªåä¸ºclashçš„æƒ…æ™¯æ¨¡å¼ï¼Œå¹¶åšå¥½å¦‚ä¸‹è®¾ç½®ä¿å­˜ ä¸‹å›¾ä¸­çš„ä»£ç†ç«¯å£æ”¹ä¸ºåˆšåˆšè®°ä½çš„ç«¯å£ï¼Œä»£ç†åè®®å’ŒæœåŠ¡å™¨å¦‚å›¾æ‰€ç¤ºä¸ºHTTPå’Œæœ¬åœ°å›ç¯åœ°å€ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬å›åˆ°clash for windows å®¢æˆ·ç«¯ï¼Œè®¾ç½®æŒ‰è§„åˆ™ä»£ç† æ‰“å¼€æµè§ˆå™¨ï¼Œé€‰æ‹©æˆ‘ä»¬åˆšåˆšè®¾ç½®çš„æ’ä»¶æƒ…æ™¯æ¨¡å¼ è®¿é—®ç™¾åº¦å’Œå¤ğŸ¶ å›åˆ°clash for windows å®¢æˆ·ç«¯æŸ¥çœ‹è®¿é—®æµ‹è¯• åˆ†æµæˆåŠŸ æ–¹å¼äºŒ ä½¿ç”¨ç½‘ç»œæ¥æºè§„åˆ™ æ‰“å¼€æµè§ˆå™¨æ’ä»¶ï¼Œåœ¨å»ºç«‹å¥½æ–¹å¼ä¸€ä¸­æµè§ˆå™¨clashæƒ…æ™¯æ¨¡å¼çš„åŸºç¡€ä¸‹æ–°å»ºä¸€ä¸ªauto switchæƒ…æ™¯æ¨¡å¼ å¯¹è¿™ä¸ªæƒ…æ™¯æ¨¡å¼è¿›è¡Œå¦‚ä¸‹è®¾ç½® ä½¿ç”¨è¿™ä¸ªå¼€æºè§„åˆ™åˆ—è¡¨ï¼ˆä¹Ÿå¯ä»¥æ›¿æ¢æˆåˆ«çš„ï¼‰ https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt å®Œæˆè®¾ç½®åæˆ‘ä»¬å›åˆ°clash for windows å®¢æˆ·ç«¯ï¼Œè®¾ç½®æŒ‡å®šä»£ç† å›åˆ°æµè§ˆå™¨æ‰“å¼€æ’ä»¶çš„auto switchæƒ…æ™¯æ¨¡å¼ è®¿é—®ç™¾åº¦å’Œå¤ğŸ¶ å›åˆ°clash for windows å®¢æˆ·ç«¯æŸ¥çœ‹è®¿é—®æµ‹è¯• å¯ä»¥çœ‹åˆ°ï¼Œclash for windows å®¢æˆ·ç«¯åœ¨è®¿é—®ç™¾åº¦æ—¶å‹æ ¹æ²¡æœ‰connectionè®°å½•ï¼Œè¯´æ˜Proxy SwitchyOmegaæ’ä»¶ä½¿å¾—æµè§ˆå™¨åœ¨è®¿é—®æŸäº›ç½‘ç«™æ—¶æ²¡æœ‰èµ°ä»£ç†ï¼Œè€ŒæŸäº›ç½‘ç«™èµ°äº†ä»£ç†ã€‚ åˆ†æµæˆåŠŸ æŸGPTæ›´æ¢èŠ‚ç‚¹è®¾ç½®æ–¹æ³•å½“æŸGPTæŒ‚äº†æ—¶ï¼ŒæŒ‰ç…§Proxy SwitchyOmegaæ’ä»¶æ’ä»¶æ–¹å¼äºŒè®¾ç½®ï¼Œå¹¶å°è¯•åˆ‡æ¢ä¸åŒåœ°åŸŸèŠ‚ç‚¹å³å¯ã€‚ ","date":"2023-04-05","objectID":"/clashtun/:0:2","series":[],"tags":["tools","win"],"title":"TUNæ¨¡å¼ Clash for windows é…ç½®æ•™ç¨‹","uri":"/clashtun/#æŸgptæ›´æ¢èŠ‚ç‚¹è®¾ç½®æ–¹æ³•"},{"categories":[],"content":" æ··æ·†çŸ©é˜µ ","date":"2022-11-30","objectID":"/confusion_matrix/:1:0","series":[],"tags":[],"title":"å°è§£ä¸€æ³¢å‡†å¬ç‡","uri":"/confusion_matrix/#æ··æ·†çŸ©é˜µ"},{"categories":[],"content":" ç²¾ç¡®ç‡ Precisionï¼ˆé€šå¸¸æŒ‡microï¼‰$$ Precision = \\frac{TP}{TP+FP} $$ ","date":"2022-11-30","objectID":"/confusion_matrix/:2:0","series":[],"tags":[],"title":"å°è§£ä¸€æ³¢å‡†å¬ç‡","uri":"/confusion_matrix/#ç²¾ç¡®ç‡-precisioné€šå¸¸æŒ‡micro"},{"categories":[],"content":" æŸ¥å…¨ç‡ Recall$$ Recall = \\frac{TP}{TP+FN} $$ ","date":"2022-11-30","objectID":"/confusion_matrix/:3:0","series":[],"tags":[],"title":"å°è§£ä¸€æ³¢å‡†å¬ç‡","uri":"/confusion_matrix/#æŸ¥å…¨ç‡-recall"},{"categories":[],"content":" F1 (æŸ¥å‡†ç‡å’ŒæŸ¥å…¨ç‡çš„è°ƒå’Œå¹³å‡æ•°)$$ F1 = \\frac{2\\cdot Precision \\cdot Recall}{Precision+Recall} $$ ","date":"2022-11-30","objectID":"/confusion_matrix/:4:0","series":[],"tags":[],"title":"å°è§£ä¸€æ³¢å‡†å¬ç‡","uri":"/confusion_matrix/#f1-æŸ¥å‡†ç‡å’ŒæŸ¥å…¨ç‡çš„è°ƒå’Œå¹³å‡æ•°"},{"categories":["tutorial"],"content":" å®‰è£… pip install wandb ","date":"2022-11-22","objectID":"/wandb/:1:0","series":[],"tags":["tools"],"title":"wandbâ€”â€”æ·±åº¦å­¦ä¹ çš„ä¼˜ç§€ä¼´ä¾£","uri":"/wandb/#å®‰è£…"},{"categories":["tutorial"],"content":" è®°å½•å®éªŒç»“æœ import wandb import argparse parser.add_argument(\"--train_batch_size\", default=100, type=int) parser.add_argument(\"--test_batch_size\", default=100, type=int) parser.add_argument(\"--num_epochs\", default=60, type=int) parser.add_argument(\"-lr\", \"--learning_rate\", default=0.0005, type=float) args = parser.parse_args() # è®¾ç½®éšæœºç§å­ seed_everthing(2022) # åˆå§‹åŒ–wandb wandb.init(project=\"project_name\", entity=\"dp0d\") # è®°å½•è¶…å‚ wandb.config.update(vars(args)) # varså°†argsè½¬ä¸ºå­—å…¸ç±»å‹ ... # é€‰æ‹©ä½ è¦è®°å½•çš„æŒ‡æ ‡ wandb.log({\"Total Loss\": total_loss.item()}) wandb.log({\"precision\": pre}) ... ","date":"2022-11-22","objectID":"/wandb/:2:0","series":[],"tags":["tools"],"title":"wandbâ€”â€”æ·±åº¦å­¦ä¹ çš„ä¼˜ç§€ä¼´ä¾£","uri":"/wandb/#è®°å½•å®éªŒç»“æœ"},{"categories":["tutorial"],"content":" è¶…å‚æœç´¢ import wandb import argparse parser.add_argument(\"--train_batch_size\", default=100, type=int) parser.add_argument(\"--test_batch_size\", default=100, type=int) parser.add_argument(\"--num_epochs\", default=60, type=int) parser.add_argument(\"-lr\", \"--learning_rate\", default=0.0005, type=float) parser.add_argument(\"--m1\", default=0.01, type=float, help=\"margin 1\") parser.add_argument(\"--m2\", default=0.01, type=float, help=\"margin 2\") parser.add_argument(\"--do_sweep\", default=1, type=bool, help=\"do sweep\") args = parser.parse_args() # è®¾ç½®éšæœºç§å­ seed_everthing(2022) # æ•°æ®å‡†å¤‡å¯ä»¥æ”¾å¤–é¢ ... train_dataloader = DataLoader( train_data, batch_size=args.train_batch_size, shuffle=True, ) ... # ä¸€å®šæŠŠæ¯æ¬¡å¿…é¡»è¿›è¡Œçš„ä¸»æµç¨‹æ”¾åœ¨main()é‡Œè¾¹ def main(): seed_everthing(2022) # æ³¨æ„ä¸€å®šè¦åœ¨ä¸»æµç¨‹å‡½æ•°é‡Œé¢å†è®¾ç½®ä¸€ééšæœºç§å­ # åˆå§‹åŒ–wandb wandb.init(project=\"project_name\", entity=\"dp0d\") # å…³é”®æ­¥éª¤ï¼Œå°†éœ€è¦æœç´¢çš„è¶…å‚é‡æ–°èµ‹å€¼ if args.do_sweep: args.m1 = wandb.config.m1 args.m2 = wandb.config.m2 model = Mymodel(args) model.to(device) optimizer = torch.optim.Adam(model.parameters(), lr=args.learning_rate) ... wandb.log({\"precision\": pre}) ... if args.do_sweep: sweep_config = { 'method': 'bayes', # bayesæ–¹æ³•ä¼šæ ¹æ®é«˜æ–¯æ–¹æ³•è‡ªåŠ¨æœç´¢è¶…å‚ 'name': 'sweep__2022', 'metric': {'goal': 'maximize', 'name': 'precision'}, 'parameters': { 'm1': { 'min': 0.005, 'max': 0.015 }, 'm2': { 'min': 0.005, 'max': 0.015 }, } } # Initialize sweep by passing in config. (Optional) Provide a name of the project. sweep_id = wandb.sweep(sweep=sweep_config, project='project_name') # Start sweep job through main function. wandb.agent(sweep_id, function=main, count=200) # æŒ‡å®šæœç´¢æ¬¡æ•°ä¸º200å’Œå…¥å£å‡½æ•°ä¸ºmain else: main() sweepçš„å…¶ä»–é…ç½®æ–¹æ³• sweep_config_1 = { 'method': 'bayes', # bayesæ–¹æ³•ä¼šæ ¹æ®é«˜æ–¯æ–¹æ³•è‡ªåŠ¨æœç´¢è¶…å‚ 'name': 'sweep__2022', 'metric': {'goal': 'maximize', 'name': 'precision'}, 'parameters': { 'm1': { 'values': [0.005,0.006] }, 'm2': { 'values': [0.005,0.001,0.0015] }, } } sweep_config_2 = { 'method': 'grid', # ç½‘æ ¼æ³•ä¼šæ£€ç´¢åˆ—è¡¨é‡Œçš„æ‰€æœ‰è¶…å‚ç»„åˆ 'name': 'sweep__2022', 'metric': {'goal': 'maximize', 'name': 'precision'}, 'parameters': { 'm1': { 'values': [0.005,0.006] }, 'm2': { 'values': [0.005,0.001,0.0015] }, } } sweep_config_2 = { 'method': 'random', # éšæœºæ³•ä¼šéšæœºæ£€ç´¢åˆ—è¡¨é‡Œçš„æ‰€æœ‰è¶…å‚ç»„åˆï¼ˆå¯èƒ½ä¼šé‡å¤ï¼‰ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰ 'name': 'sweep__2022', 'metric': {'goal': 'maximize', 'name': 'precision'}, 'parameters': { 'm1': { 'values': [0.005,0.006] }, 'm2': { 'values': [0.005,0.001,0.0015] }, } } åœ¨å¦ä¸€å°æœºå™¨ä¸Šå¯åŠ¨è¶…å‚æœç´¢ ... ... # å…¶ä»–éƒ¨åˆ†ä»£ç ä¸åŠ¨ # è¿™è¡Œidæ³¨æ‰ # sweep_id = wandb.sweep(sweep=sweep_config, project='project_name') # å»wandbåˆ›å»ºsweepçš„ä¸»é¡µè·å–idå¡«åˆ°ä¸‹é¢ï¼Œå¦‚è·å–çš„æ˜¯ sr0cogu1 wandb.agent(sweep_id='dp0d/project_name/sr0cogu1', function=main, count=200) # æŒ‡å®šæœç´¢æ¬¡æ•°ä¸º200å’Œå…¥å£å‡½æ•°ä¸ºmain else: main() ","date":"2022-11-22","objectID":"/wandb/:3:0","series":[],"tags":["tools"],"title":"wandbâ€”â€”æ·±åº¦å­¦ä¹ çš„ä¼˜ç§€ä¼´ä¾£","uri":"/wandb/#è¶…å‚æœç´¢"},{"categories":["tutorial"],"content":" è¶…å‚æœç´¢ import wandb import argparse parser.add_argument(\"--train_batch_size\", default=100, type=int) parser.add_argument(\"--test_batch_size\", default=100, type=int) parser.add_argument(\"--num_epochs\", default=60, type=int) parser.add_argument(\"-lr\", \"--learning_rate\", default=0.0005, type=float) parser.add_argument(\"--m1\", default=0.01, type=float, help=\"margin 1\") parser.add_argument(\"--m2\", default=0.01, type=float, help=\"margin 2\") parser.add_argument(\"--do_sweep\", default=1, type=bool, help=\"do sweep\") args = parser.parse_args() # è®¾ç½®éšæœºç§å­ seed_everthing(2022) # æ•°æ®å‡†å¤‡å¯ä»¥æ”¾å¤–é¢ ... train_dataloader = DataLoader( train_data, batch_size=args.train_batch_size, shuffle=True, ) ... # ä¸€å®šæŠŠæ¯æ¬¡å¿…é¡»è¿›è¡Œçš„ä¸»æµç¨‹æ”¾åœ¨main()é‡Œè¾¹ def main(): seed_everthing(2022) # æ³¨æ„ä¸€å®šè¦åœ¨ä¸»æµç¨‹å‡½æ•°é‡Œé¢å†è®¾ç½®ä¸€ééšæœºç§å­ # åˆå§‹åŒ–wandb wandb.init(project=\"project_name\", entity=\"dp0d\") # å…³é”®æ­¥éª¤ï¼Œå°†éœ€è¦æœç´¢çš„è¶…å‚é‡æ–°èµ‹å€¼ if args.do_sweep: args.m1 = wandb.config.m1 args.m2 = wandb.config.m2 model = Mymodel(args) model.to(device) optimizer = torch.optim.Adam(model.parameters(), lr=args.learning_rate) ... wandb.log({\"precision\": pre}) ... if args.do_sweep: sweep_config = { 'method': 'bayes', # bayesæ–¹æ³•ä¼šæ ¹æ®é«˜æ–¯æ–¹æ³•è‡ªåŠ¨æœç´¢è¶…å‚ 'name': 'sweep__2022', 'metric': {'goal': 'maximize', 'name': 'precision'}, 'parameters': { 'm1': { 'min': 0.005, 'max': 0.015 }, 'm2': { 'min': 0.005, 'max': 0.015 }, } } # Initialize sweep by passing in config. (Optional) Provide a name of the project. sweep_id = wandb.sweep(sweep=sweep_config, project='project_name') # Start sweep job through main function. wandb.agent(sweep_id, function=main, count=200) # æŒ‡å®šæœç´¢æ¬¡æ•°ä¸º200å’Œå…¥å£å‡½æ•°ä¸ºmain else: main() sweepçš„å…¶ä»–é…ç½®æ–¹æ³• sweep_config_1 = { 'method': 'bayes', # bayesæ–¹æ³•ä¼šæ ¹æ®é«˜æ–¯æ–¹æ³•è‡ªåŠ¨æœç´¢è¶…å‚ 'name': 'sweep__2022', 'metric': {'goal': 'maximize', 'name': 'precision'}, 'parameters': { 'm1': { 'values': [0.005,0.006] }, 'm2': { 'values': [0.005,0.001,0.0015] }, } } sweep_config_2 = { 'method': 'grid', # ç½‘æ ¼æ³•ä¼šæ£€ç´¢åˆ—è¡¨é‡Œçš„æ‰€æœ‰è¶…å‚ç»„åˆ 'name': 'sweep__2022', 'metric': {'goal': 'maximize', 'name': 'precision'}, 'parameters': { 'm1': { 'values': [0.005,0.006] }, 'm2': { 'values': [0.005,0.001,0.0015] }, } } sweep_config_2 = { 'method': 'random', # éšæœºæ³•ä¼šéšæœºæ£€ç´¢åˆ—è¡¨é‡Œçš„æ‰€æœ‰è¶…å‚ç»„åˆï¼ˆå¯èƒ½ä¼šé‡å¤ï¼‰ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰ 'name': 'sweep__2022', 'metric': {'goal': 'maximize', 'name': 'precision'}, 'parameters': { 'm1': { 'values': [0.005,0.006] }, 'm2': { 'values': [0.005,0.001,0.0015] }, } } åœ¨å¦ä¸€å°æœºå™¨ä¸Šå¯åŠ¨è¶…å‚æœç´¢ ... ... # å…¶ä»–éƒ¨åˆ†ä»£ç ä¸åŠ¨ # è¿™è¡Œidæ³¨æ‰ # sweep_id = wandb.sweep(sweep=sweep_config, project='project_name') # å»wandbåˆ›å»ºsweepçš„ä¸»é¡µè·å–idå¡«åˆ°ä¸‹é¢ï¼Œå¦‚è·å–çš„æ˜¯ sr0cogu1 wandb.agent(sweep_id='dp0d/project_name/sr0cogu1', function=main, count=200) # æŒ‡å®šæœç´¢æ¬¡æ•°ä¸º200å’Œå…¥å£å‡½æ•°ä¸ºmain else: main() ","date":"2022-11-22","objectID":"/wandb/:3:0","series":[],"tags":["tools"],"title":"wandbâ€”â€”æ·±åº¦å­¦ä¹ çš„ä¼˜ç§€ä¼´ä¾£","uri":"/wandb/#sweepçš„å…¶ä»–é…ç½®æ–¹æ³•"},{"categories":[],"content":" dpkgæ˜¯ä¸€ä¸ªå®‰è£…ã€åˆ›å»ºã€ç§»é™¤å’Œç®¡ç†debianåŒ…çš„å·¥å…·ã€‚ å®‰è£…è½¯ä»¶ sudo dpkg -i *.deb ","date":"2022-11-06","objectID":"/package_manager/:1:1","series":[],"tags":[],"title":"Linuxä¸‹çš„åŒ…ç®¡ç†å·¥å…·ä»‹ç»","uri":"/package_manager/#dpkg"},{"categories":["machine_learning"],"content":" 1.å˜åˆ†å‡½æ•°","date":"2022-09-15","objectID":"/variational_inference/:1:0","series":[],"tags":[],"title":"å˜åˆ†æ¨æ–­","uri":"/variational_inference/#1å˜åˆ†å‡½æ•°"},{"categories":["machine_learning"],"content":" å¾®åˆ†ï¼ˆéä¸¥æ ¼ï¼‰$$ dy = f(x_1+dx)-f(x_1) $$ $dy$æ˜¯$y$çš„å¾®åˆ†ï¼Œä¹Ÿå°±æ˜¯å‡½æ•°çš„å¾®åˆ†ï¼Œæ˜¯æŒ‡çš„$x$å˜åŒ–äº†ä¸€ä¸ªæå°å€¼å¼•èµ·çš„å› å˜é‡å‡½æ•°çš„å˜åŒ–ã€‚ ","date":"2022-09-15","objectID":"/variational_inference/:1:1","series":[],"tags":[],"title":"å˜åˆ†æ¨æ–­","uri":"/variational_inference/#å¾®åˆ†éä¸¥æ ¼"},{"categories":["machine_learning"],"content":" æ³›å‡½æ³›å‡½æŒ‡çš„æ˜¯ï¼Œå› å˜é‡ä¸ºå‡½æ•°çš„å‡½æ•°ã€‚ å‡½æ•° æ³›å‡½ $f(x_0) = y_0$ $\\phi(f_{\\theta_0}(x))=y_0$ å½“è‡ªå˜é‡ä¸ºä¸€ä¸ªç‰¹å®šå€¼ï¼Œå‡½æ•°åŠ å·¥çš„ç»“æœå¯¹åº”ç‰¹å®šå€¼ å½“è‡ªå˜é‡ä¸ºä¸€ä¸ªç‰¹å®šçš„å‡½æ•°ï¼ˆå¯ä»¥ç†è§£ä¸ºç‰¹å®šçš„åˆ†å¸ƒï¼‰å¦‚$y=x$ï¼Œæ³›å‡½åŠ å·¥ä¸ºä¸€ä¸ªç‰¹å®šçš„å€¼ ","date":"2022-09-15","objectID":"/variational_inference/:1:2","series":[],"tags":[],"title":"å˜åˆ†æ¨æ–­","uri":"/variational_inference/#æ³›å‡½"},{"categories":["machine_learning"],"content":" å˜åˆ†ï¼ˆå®è´¨ä¸Šæ˜¯æ³›å‡½çš„å˜åˆ†ï¼‰å˜åˆ†æŒ‡çš„æ˜¯ï¼Œå½“è‡ªå˜é‡å‡½æ•°åšå‡ºå¾®å°å˜åŒ–$y \\rarr y + \\delta y$æ—¶ï¼ˆå¯ä»¥ç†è§£ä¸ºåˆ†å¸ƒå‘ç”Ÿå¾®å°å˜åŒ–ï¼Œå¦‚$y=x$å˜ä¸º$y=1.00001*x,y=x + 0.0001$ï¼‰ï¼Œæ³›å‡½çš„å‡½æ•°å€¼å˜åŒ–äº†$\\delta J$,è¿™ä¸ªå˜åŒ–å€¼å°±æ˜¯æ³›å‡½çš„å˜åˆ†ã€‚ ","date":"2022-09-15","objectID":"/variational_inference/:1:3","series":[],"tags":[],"title":"å˜åˆ†æ¨æ–­","uri":"/variational_inference/#å˜åˆ†å®è´¨ä¸Šæ˜¯æ³›å‡½çš„å˜åˆ†"},{"categories":["machine_learning"],"content":" 2.å¹³å‡åœºç†è®º$$ q(x)=\\prod_iq(x_i) $$ ","date":"2022-09-15","objectID":"/variational_inference/:2:0","series":[],"tags":[],"title":"å˜åˆ†æ¨æ–­","uri":"/variational_inference/#2å¹³å‡åœºç†è®º"},{"categories":["machine_learning"],"content":" 3.æœºå™¨å­¦ä¹ åˆ†ç±»ï¼ˆç ”ç©¶æ–¹æ³•ï¼‰","date":"2022-09-15","objectID":"/variational_inference/:3:0","series":[],"tags":[],"title":"å˜åˆ†æ¨æ–­","uri":"/variational_inference/#3æœºå™¨å­¦ä¹ åˆ†ç±»ç ”ç©¶æ–¹æ³•"},{"categories":["machine_learning"],"content":" è´å¶æ–¯æ´¾å­¦ä¹ çš„è¿‡ç¨‹è´å¶æ–¯å­¦ä¹ è®¤ä¸ºæ¨¡å‹$p(x|\\theta)$ä¸­çš„å‚æ•°$\\theta$ä¸æ˜¯ä¸€ä¸ªç¡®å®šçš„æœªçŸ¥å‚æ•°ï¼Œè€Œæ˜¯ä¸€ä¸ªéšæœºå˜é‡ï¼Œå‡è®¾ä¸º$\\theta æœä» p(\\theta|\\lambda)$ï¼Œæ‰€ä»¥ï¼Œéœ€è¦é€šè¿‡è´å¶æ–¯å®šç†æ±‚å¾—åéªŒ$p(\\theta|x)=\\frac{p(x|\\theta)p(\\theta|\\lambda)}{p(x)}$ã€‚ è´å¶æ–¯æ¨æ–­ï¼ˆInferenceï¼‰éœ€è¦è®¡ç®—$p(\\theta|x)$çš„å€¼ï¼ŒæŠ½æ ·å¾ˆå¤šæ ·æœ¬ï¼Œä½¿ç”¨æœŸæœ›æ¥è¿‘ä¼¼ï¼Œè´å¶æ–¯å…¬å¼ä¸­$p(x|\\theta)$æ˜¯æ•°æ®çš„ä¼¼ç„¶å’Œ$p(\\theta|\\lambda)$ æ˜¯å‚æ•°çš„å…ˆéªŒåˆ†å¸ƒï¼Œ$p(x)$é€šè¿‡$\\int_{\\theta} p(x|\\theta)p(\\theta|\\lambda)d\\lambda$å¾—åˆ°ã€‚ è´å¶æ–¯å†³ç­–é€šè¿‡åŸæœ‰æ ·æœ¬$X$æ¥æ¨æ–­Nä¸ªæ–°çš„æ ·æœ¬$\\hat x$ï¼Œå³ $$ p(\\hat x|X)=\\int_\\theta p(\\hat x,\\theta|X)d\\theta =\\int_\\theta p(\\hat x|\\theta)\\cdot p(\\theta|X)d\\theta =E_{\\theta|X}[p(\\hat x|\\theta)] $$ ","date":"2022-09-15","objectID":"/variational_inference/:3:1","series":[],"tags":[],"title":"å˜åˆ†æ¨æ–­","uri":"/variational_inference/#è´å¶æ–¯æ´¾å­¦ä¹ çš„è¿‡ç¨‹"},{"categories":["machine_learning"],"content":" è´å¶æ–¯æ´¾å­¦ä¹ çš„è¿‡ç¨‹è´å¶æ–¯å­¦ä¹ è®¤ä¸ºæ¨¡å‹$p(x|\\theta)$ä¸­çš„å‚æ•°$\\theta$ä¸æ˜¯ä¸€ä¸ªç¡®å®šçš„æœªçŸ¥å‚æ•°ï¼Œè€Œæ˜¯ä¸€ä¸ªéšæœºå˜é‡ï¼Œå‡è®¾ä¸º$\\theta æœä» p(\\theta|\\lambda)$ï¼Œæ‰€ä»¥ï¼Œéœ€è¦é€šè¿‡è´å¶æ–¯å®šç†æ±‚å¾—åéªŒ$p(\\theta|x)=\\frac{p(x|\\theta)p(\\theta|\\lambda)}{p(x)}$ã€‚ è´å¶æ–¯æ¨æ–­ï¼ˆInferenceï¼‰éœ€è¦è®¡ç®—$p(\\theta|x)$çš„å€¼ï¼ŒæŠ½æ ·å¾ˆå¤šæ ·æœ¬ï¼Œä½¿ç”¨æœŸæœ›æ¥è¿‘ä¼¼ï¼Œè´å¶æ–¯å…¬å¼ä¸­$p(x|\\theta)$æ˜¯æ•°æ®çš„ä¼¼ç„¶å’Œ$p(\\theta|\\lambda)$ æ˜¯å‚æ•°çš„å…ˆéªŒåˆ†å¸ƒï¼Œ$p(x)$é€šè¿‡$\\int_{\\theta} p(x|\\theta)p(\\theta|\\lambda)d\\lambda$å¾—åˆ°ã€‚ è´å¶æ–¯å†³ç­–é€šè¿‡åŸæœ‰æ ·æœ¬$X$æ¥æ¨æ–­Nä¸ªæ–°çš„æ ·æœ¬$\\hat x$ï¼Œå³ $$ p(\\hat x|X)=\\int_\\theta p(\\hat x,\\theta|X)d\\theta =\\int_\\theta p(\\hat x|\\theta)\\cdot p(\\theta|X)d\\theta =E_{\\theta|X}[p(\\hat x|\\theta)] $$ ","date":"2022-09-15","objectID":"/variational_inference/:3:1","series":[],"tags":[],"title":"å˜åˆ†æ¨æ–­","uri":"/variational_inference/#è´å¶æ–¯æ¨æ–­inference"},{"categories":["machine_learning"],"content":" è´å¶æ–¯æ´¾å­¦ä¹ çš„è¿‡ç¨‹è´å¶æ–¯å­¦ä¹ è®¤ä¸ºæ¨¡å‹$p(x|\\theta)$ä¸­çš„å‚æ•°$\\theta$ä¸æ˜¯ä¸€ä¸ªç¡®å®šçš„æœªçŸ¥å‚æ•°ï¼Œè€Œæ˜¯ä¸€ä¸ªéšæœºå˜é‡ï¼Œå‡è®¾ä¸º$\\theta æœä» p(\\theta|\\lambda)$ï¼Œæ‰€ä»¥ï¼Œéœ€è¦é€šè¿‡è´å¶æ–¯å®šç†æ±‚å¾—åéªŒ$p(\\theta|x)=\\frac{p(x|\\theta)p(\\theta|\\lambda)}{p(x)}$ã€‚ è´å¶æ–¯æ¨æ–­ï¼ˆInferenceï¼‰éœ€è¦è®¡ç®—$p(\\theta|x)$çš„å€¼ï¼ŒæŠ½æ ·å¾ˆå¤šæ ·æœ¬ï¼Œä½¿ç”¨æœŸæœ›æ¥è¿‘ä¼¼ï¼Œè´å¶æ–¯å…¬å¼ä¸­$p(x|\\theta)$æ˜¯æ•°æ®çš„ä¼¼ç„¶å’Œ$p(\\theta|\\lambda)$ æ˜¯å‚æ•°çš„å…ˆéªŒåˆ†å¸ƒï¼Œ$p(x)$é€šè¿‡$\\int_{\\theta} p(x|\\theta)p(\\theta|\\lambda)d\\lambda$å¾—åˆ°ã€‚ è´å¶æ–¯å†³ç­–é€šè¿‡åŸæœ‰æ ·æœ¬$X$æ¥æ¨æ–­Nä¸ªæ–°çš„æ ·æœ¬$\\hat x$ï¼Œå³ $$ p(\\hat x|X)=\\int_\\theta p(\\hat x,\\theta|X)d\\theta =\\int_\\theta p(\\hat x|\\theta)\\cdot p(\\theta|X)d\\theta =E_{\\theta|X}[p(\\hat x|\\theta)] $$ ","date":"2022-09-15","objectID":"/variational_inference/:3:1","series":[],"tags":[],"title":"å˜åˆ†æ¨æ–­","uri":"/variational_inference/#è´å¶æ–¯å†³ç­–"},{"categories":["machine_learning"],"content":" å˜åˆ†æ¨æ–­(Variational Inference) ä½¿ç”¨ELBOæ¥æ›¿ä»£ï¼Œå«æœ‰éšå˜é‡çš„æ¦‚ç‡æ¨¡å‹ä¸­ï¼Œè§‚æµ‹æ•°æ®çš„å¯¹æ•°æ¦‚ç‡$\\log_{\\theta} p(x)$ å‚æ•°è®¾å®šå¦‚ä¸‹ $X$ : Observed data $Z$ : latent variable + parameter $(X,Z)$ : complete data + parameter ç”±äº$x$æ˜¯è§‚æµ‹æ•°æ®ï¼Œ$q(z|x)$ç®€å†™ä¸º$q(z)$ æ ¹æ®è´å¶æ–¯å®šç† $$ p(z|x) = \\frac{p(x|z)p(z)}{p(x)} = \\frac{p(x,z)}{p(x)} $$ ç§»é¡¹å–log $$ \\log p(x)=\\log \\frac{p(x,z)}{p(z|x)}=\\log \\frac{\\frac{p(x,z)}{q(z)}}{\\frac {p(z|x)}{q(z)}}=\\log \\frac{p(x,z)}{q(z)} - \\log \\frac {p(z|x)}{q(z)} $$ å·¦å³ä¸¤è¾¹å¯¹$q(z)$æ±‚è¿›è¡Œç§¯åˆ† $$ å·¦è¾¹=\\int_z q(z)\\log p(x)dz = \\log p(x) $$ $$ å³è¾¹=\\int q(z)\\log \\frac{p(x,z)}{q(z)}dz - \\int q(z) \\log \\frac {p(z|x)}{q(z)}dz $$ $$ å³è¾¹=\\underbrace{\\int q(z)\\log \\frac{p(x,z)}{q(z)}dz}_{ELBO(evidence\\;lower\\;bound)} + \\underbrace{\\int q(z) \\log \\frac {q(z)}{p(z|x)}}_{KL(q||p)}dz $$ $$ å³è¾¹=\\underbrace{\\mathcal{L}(q)}_{å…³äºqçš„å˜åˆ†}+\\underbrace{KL(q||p)}_{\\geqslant 0} $$ å…¶ä¸­$\\mathcal{L}(q)$æ˜¯ç”¨æ¥å®šä¹‰ELBOé¡¹çš„å‡½æ•°ï¼Œç”¨ä»¥è¯´æ˜å…¶è¾“å…¥æ˜¯ä¸€ä¸ª$q$å‡½æ•°ï¼Œ$q$å‡½æ•°æ˜¯æˆ‘ä»¬éšæ„æ‰¾çš„ä¸€ä¸ªæ¦‚ç‡å¯†åº¦å‡½æ•°ï¼Œæ‰€ä»¥$\\mathcal{L}(q)$æ˜¯å…³äº$q$çš„å˜åˆ†ï¼Œå˜åˆ†æ¨æ–­æ¥è‡ªäºæ­¤ã€‚ è¯´æ˜ä¸€ä¸‹ï¼Œå½“Xå›ºå®šæ—¶ï¼Œå³è¾¹çš„å’Œå›ºå®šï¼Œè€Œç”±äºKLæ•£åº¦çš„æ€§è´¨ï¼Œ$KL(q||p)$æ’å¤§äºé›¶ï¼Œæ‰€ä»¥$\\mathcal{L}(q)$æœ€å¤§å°±æ˜¯$\\log p(x)$ã€‚ è½¬ä¸ºå˜åˆ†æ¨æ–­çš„å…³é”®é—®é¢˜ï¼ŒåéªŒ$p(z|x)$æ— æ³•æ±‚å¾—ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨$q(z)$æ¥è¿‘ä¼¼å®ƒï¼Œå³ä½¿å¾—$q(z)\\approx p(z|x)$ã€‚æ­¤æ—¶$KL(q||p)$æœ€å°ï¼Œè¶‹è¿‘äºé›¶ã€‚åè¿‡æ¥æ€è€ƒï¼Œå½“æ‰¾åˆ°ä¸€ä¸ª$\\tilde {q(z)}$ä½¿å¾—å˜åˆ†$\\mathcal{L}(q)$è¾¾åˆ°æœ€å¤§æ—¶ï¼Œä¹Ÿèƒ½è®©$KL(q||p)$è¾¾åˆ°æœ€å°å€¼ï¼Œå³ä½¿å¾—$\\tilde {q(z)}\\approx p(z|x)$ï¼Œå½¢å¼åŒ–è¡¨è¾¾å¦‚ä¸‹ã€‚ $$ \\tilde {q(z)} = \\mathop{\\arg\\max}_{q(z)}\\ \\ \\mathcal{L}(q)\\ \\ \\Rightarrow\\ \\ \\tilde {q(z)}\\approx p(z|x) $$ å¹³å‡åœºç†è®º $$ q(z) = \\prod_{i=1}^{M}q(z_i) $$ ","date":"2022-09-15","objectID":"/variational_inference/:4:0","series":[],"tags":[],"title":"å˜åˆ†æ¨æ–­","uri":"/variational_inference/#å˜åˆ†æ¨æ–­variational-inference"},{"categories":["machine_learning"],"content":" éšæœºæ¢¯åº¦å˜åˆ†æ¨æ–­ (Stochastic Gradient VI, SGVI) $$ \\log p_\\theta(X) = \\log \\prod_{i=1}^N p_{\\theta}(x^i)=\\sum_{i=1}^N\\log p_{\\theta}(x^i) $$ $$ \\log p_{\\theta}(x^i) = \\underbrace{ELBO}_{\\mathcal L(q)} + \\underbrace{KL(q||p)}_{\\geqslant 0}) \\geqslant \\mathcal L(q) $$ éœ€è¦æ±‚è§£çš„ç›®æ ‡å‡½æ•°æ˜¯ $$ \\tilde {q(z)} = \\mathop{\\arg\\min}_{q(z)}\\ \\ KL(q||p) =\\mathop{\\arg\\max}_{q(z)}\\ \\ \\mathcal{L}(q) $$ å‡è®¾$q(z)$çš„åˆ†å¸ƒå‚æ•°ä¸º$\\phi$,åˆ™å˜åˆ†$\\mathcal L(q)$å¯ä»¥å†™æˆ$\\mathcal L(\\phi)$ï¼Œå³è§‚æµ‹åˆ†å¸ƒè¡¨ç¤ºä¸º $$ \\log p_{\\theta}(x^i) = \\underbrace{ELBO}_{\\mathcal L(\\phi)} + \\underbrace{KL(q||p)}_{\\geqslant 0}) \\geqslant \\mathcal L(\\phi) $$ $$ ELBO = E_{q_{\\phi}(z)}[\\log \\frac{p_{\\theta}(x^i,z)}{q_{\\phi}(z)}] $$ é‚£ä¹ˆæˆ‘ä»¬æƒ³è¦æœ€å¤§åŒ–$ELBO$æ—¶ï¼Œ$q(z)$åˆ†å¸ƒçš„å‚æ•°$\\phi$å½¢å¼åŒ–è¡¨è¾¾ä¸º $$ \\hat \\phi =\\mathop{\\arg\\max}_{\\phi} \\ \\mathcal L(\\phi) $$ ä½¿ç”¨æ¢¯åº¦éšæœºæ¢¯åº¦ä¸Šå‡ç­–ç•¥ï¼Œéœ€è¦æ±‚å¾—$\\mathcal L(\\phi)$å¯¹$\\phi$çš„æ¢¯åº¦å¦‚ä¸‹ã€‚ $$ \\begin{equation} \\begin{aligned} \\nabla_{\\phi} \\mathcal L(\\phi) \u0026= \\nabla_{\\phi}E_{q_{\\phi}}[\\log p_{\\theta}(x^i,z)-\\log q_{\\phi}(z)] \\\\ \u0026=\\nabla_{\\phi}\\int q_{\\phi}[\\log p_{\\theta}(x^i,z)-\\log q_{\\phi}(z)]dz \\\\ \u0026=\\int \\nabla_{\\phi}q_{\\phi}\\cdot[\\log p_{\\theta}(x^i,z)-\\log q_{\\phi}(z)]dz + \\int q_{\\phi}\\nabla_{\\phi}[\\log p_{\\theta}(x^i,z)-\\log q_{\\phi}(z)]dz \\\\ \u0026=\\int q_{\\phi}\\cdot\\nabla_{\\phi}\\log q_{\\phi}\\cdot[\\log p_{\\theta}(x^i,z)-\\log q_{\\phi}(z)]dz + 0 \\\\ \u0026=E_{q_{\\phi}}[\\nabla_{\\phi}\\log q_{\\phi}\\cdot[\\log p_{\\theta}(x^i,z)-\\log q_{\\phi}(z)] \\end{aligned} \\end{equation} $$ å¦‚æœä½¿ç”¨è’™ç‰¹å¡ç½—çš„æ–¹å¼ï¼Œæ¢¯åº¦$\\nabla_{\\phi} \\mathcal L(\\phi)$ï¼Œå³æœŸæœ›$E_{q_{\\phi}}[\\nabla_{\\phi}\\log q_{\\phi}\\cdot[\\log p_{\\theta}(x^i,z)-\\log q_{\\phi}(z)]$å¯ä»¥é€šè¿‡ä»$q_{\\phi}(z)ä¸­é‡‡æ ·Lä¸ªz$å¾—åˆ°ï¼Œå³ $$ z^{(l)} \\backsim q_{\\phi}(z),\\quad l=1,2,\\cdots,L \\\\ \\nabla_{\\phi} \\mathcal L(\\phi)\\approx \\frac{1}{L}\\sum_{l=1}^L \\nabla_{\\phi}\\log q_{\\phi}(z^i)\\cdot[\\log p_{\\theta}(x^i,z)-\\log q_{\\phi}(z)] $$ è€Œ$E_{q_{\\phi}}[\\underbrace{\\nabla_{\\phi}\\log q_{\\phi}}_{high\\ variance}\\cdot[\\log p_{\\theta}(x^i,z)-\\log q_{\\phi}(z)]$åœ¨é‡‡æ ·æ—¶ï¼Œç”±äºlogå‡½æ•°çš„æ€§è´¨ï¼Œå½“$q_{\\phi}(z)\\ \\rightarrow \\ 0$æ—¶ï¼Œå…¶ä¸­çš„$\\nabla_{\\phi}\\log q_{\\phi}$é¡¹ä¼šå¸¦æ¥é«˜æ–¹å·®é—®é¢˜ã€‚è¿™å¯¼è‡´äº†é‡‡æ ·éœ€è¦çš„æ ·æœ¬é‡å·¨å¤§ï¼Œä¸”è¯¯å·®è¾ƒå¤§ï¼Œç”šè‡³å¯ä»¥è®¤ä¸ºæ— æ³•é‡‡æ ·ã€‚å› æ­¤ï¼Œæ— æ³•é‡‡ç”¨è’™ç‰¹å¡æ´›æ–¹å¼æ¥è¿‘ä¼¼æ¢¯åº¦$\\nabla_{\\phi} \\mathcal L(\\phi)$ã€‚ æ•…ç°åœ¨éœ€è¦é™ä½æ¢¯åº¦è¡¨è¾¾çš„æ–¹å·®ï¼Œå³Variance Reductioné—®é¢˜ã€‚ä½¿ç”¨é‡å‚æ•°åŒ–æŠ€å·§ï¼ˆReparameterization Trickï¼‰ã€‚ ","date":"2022-09-15","objectID":"/variational_inference/:5:0","series":[],"tags":[],"title":"å˜åˆ†æ¨æ–­","uri":"/variational_inference/#éšæœºæ¢¯åº¦å˜åˆ†æ¨æ–­-stochastic-gradient-vi-sgvi"},{"categories":["machine_learning"],"content":" Reparameterization Trick ç›®çš„æ˜¯å°†éšæœºå˜é‡$z$å’Œ$\\phi$çš„å…³ç³»è§£è€¦ï¼Œå°†$z$çš„éšæœºæˆåˆ†è½¬ç§»åˆ°$\\epsilon$ã€‚ å‡è®¾$z=g_{\\phi}(\\epsilon,x^i)$ ï¼Œ$\\epsilon \\backsim p(\\epsilon)$ï¼Œ$z\\backsim q_{\\phi}(z|x^i)$ï¼Œåˆ™ç”±äº$\\int q_{\\phi}(z|x^i)dz = \\int p(\\epsilon)d\\epsilon = 1$ï¼Œå¯ä»¥å¾—å‡º$|q_{\\phi}(z|x^i)dz|=|p(\\epsilon)\\cdot d\\epsilon|$ã€‚ æ•…æ¢¯åº¦å¯ä»¥è¿›è¡Œå¦‚ä¸‹è¡¨è¾¾ $$ \\begin{equation} \\begin{aligned} \\nabla_{\\phi} \\mathcal L(\\phi) \u0026= \\nabla_{\\phi}\\underline{E_{q_{\\phi}}}[\\log p_{\\theta}(x^i,z)-\\log q_{\\phi}(z)] \\\\ \u0026=\\nabla_{\\phi}\\int[\\log p_{\\theta}(x^i,z)-\\log q_{\\phi}(z)]\\underline{q_{\\phi}dz} \\\\ \u0026=\\nabla_{\\phi}\\int[\\log p_{\\theta}(x^i,z)-\\log q_{\\phi}(z)]\\underline{p(\\epsilon)d\\epsilon} \\\\ \u0026=\\nabla_{\\phi}\\underline{E_{p(\\epsilon)}}[\\log p_{\\theta}(x^i,z)-\\log q_{\\phi}(z)] \\\\ \u0026=E_{p(\\epsilon)}[\\nabla_{\\phi}(\\log p_{\\theta}(x^i,z)-\\log q_{\\phi}(z))] \\\\ å¸¦å…¥z=g_{\\phi}(\\epsilon,x^i)å¾—ï¼Œ \\\\ \u0026=E_{p(\\epsilon)}[\\nabla_z(\\log p_{\\theta}(x^i,z)-\\log q_{\\phi}(z))\\cdot \\underline{\\nabla_{\\phi}z}] \\\\ \u0026=E_{p(\\epsilon)}[\\nabla_z(\\log p_{\\theta}(x^i,z)-\\log q_{\\phi}(z))\\cdot \\underline{\\nabla_{\\phi}g_{\\phi}(\\epsilon,x^i)}] \\end{aligned} \\end{equation} $$ æ­¤æ—¶ï¼Œä¾¿å¯ä»¥é‡‡ç”¨è’™ç‰¹å¡ç½—é‡‡æ ·æ¥è¿‘ä¼¼æ¢¯åº¦$\\nabla_{\\phi} \\mathcal L(\\phi)$ï¼ŒæœŸæœ›å³æ˜¯å‡å€¼ã€‚ å‡è®¾è¿›è¡Œ$L$æ¬¡é‡‡æ ·ï¼Œ$\\epsilon^{(l)}\\sim p(\\epsilon),\\ \\ l=1,2,\\cdots,L$ã€‚ $$ \\nabla_{\\phi} \\mathcal L(\\phi) \\approx \\widetilde {\\nabla_{\\phi} \\mathcal L(\\phi)}= \\frac{1}{L} \\sum_{l=1}^L\\nabla_z(\\log p_{\\theta}(x^i,z)-\\log q_{\\phi}(z))\\cdot \\nabla_{\\phi}g_{\\phi}(\\epsilon^{(l)},x^i) $$ SGVIè®­ç»ƒè¿‡ç¨‹å¦‚ä¸‹ $$ \\phi^{(t+1)} \\leftarrow \\phi^{(t)} + \\lambda^{(t)} \\cdot \\widetilde {\\nabla_{\\phi} \\mathcal L(\\phi)}f $$ ","date":"2022-09-15","objectID":"/variational_inference/:5:1","series":[],"tags":[],"title":"å˜åˆ†æ¨æ–­","uri":"/variational_inference/#reparameterization-trick"},{"categories":["machine_learning"],"content":" å˜åˆ†è‡ªç¼–ç å™¨VAE é—®é¢˜åœºæ™¯ å‡è®¾æ•°æ®é›†$X=\\{x^{(i)}\\}^N_{i=1}$æœä»$N$ i.i.d.ã€‚è¯¥é›†åˆä¸­çš„æ•°æ®ç”±æŸäº›éšæœºè¿‡ç¨‹ç”Ÿæˆè€Œæ¥ï¼Œè¿‡ç¨‹ä¸­å«æœ‰æ— æ³•è§‚æµ‹çš„è¿ç»­éšæœºå˜é‡$\\bf z$ã€‚è¿™ä¸ªéšæœºè¿‡ç¨‹åŒ…å«ä¸¤ä¸ªæ­¥éª¤ï¼Œé¦–å…ˆï¼Œä»å…ˆéªŒåˆ†å¸ƒ$p_{\\theta ^*}(\\bf z)$ä¸­ç”Ÿæˆä¸€ä¸ª$\\bf z^{(i)}$ã€‚æ­¥éª¤äºŒæ˜¯ä»æ¡ä»¶åˆ†å¸ƒ$p_{\\theta ^*}(\\bf x |\\bf z)$ä¸­é‡‡æ ·$\\bf x^{(i)}$ã€‚å‡è®¾$p_{\\theta ^*}(\\bf z)$å’Œ$p_{\\theta ^*}(\\bf x |\\bf z)$æ¥è‡ª$p_{\\theta}(\\bf z)$å’Œ$p_{\\theta}(\\bf x |\\bf z)$çš„å‚æ•°å®¶æ—ï¼Œå¹¶ä¸”ä»–ä»¬çš„è¡¨è¾¾åœ¨æåŠ$\\theta$å’Œ$z$æ—¶éƒ½æ˜¯å¯å¾®çš„ã€‚è¿™ä¸ªè¿‡ç¨‹çš„è®¸å¤šéƒ¨åˆ†éƒ½æ˜¯å¯¹æˆ‘ä»¬ä¸å¯è§çš„ï¼šä¸è®ºæ˜¯çœŸå®çš„å‚æ•°$\\theta ^*$è¿˜æ˜¯éšå˜é‡$z^{(i)}$éƒ½æ˜¯æœªçŸ¥çš„ã€‚ éšå˜é‡æ¨¡å‹ Latent Variable Model GMM æ··åˆé«˜æ–¯æ¨¡å‹ï¼Œæœ‰é™ä¸ªé«˜æ–¯æ¨¡å‹æ··åˆ$z$~Categorical Dist VAE æ— é™ä¸ªï¼ˆinfiniteï¼‰é«˜æ–¯æ¨¡å‹æ··åˆ: $z \\sim N(0,\\bf I) $ï¼Œ$x|z \\sim N(\\mu_{\\theta}(z),\\sum_{\\theta}(z))$ï¼Œå¾—åˆ°å¦‚ä¸‹å»ºæ¨¡ï¼Œ $$ p_{\\theta}(x) = \\int_zp_{\\theta}(x,z)dz \\ = \\ \\int_z p(z)\\cdot p_{\\theta}(x|z)dz $$ å…¶ä¸­$p_{\\theta}(x)$ä¸ºintractableã€‚ å¦‚æœéœ€è¦ä½¿ç”¨VAEç”Ÿæˆä¸€ä¸ªæ ·æœ¬ï¼Œå…ˆä»$p(z)$ä¸­é‡‡æ ·ä¸€ä¸ª$z^i$ï¼Œç„¶åä½¿ç”¨$p_{\\theta}(x|z)$ï¼ˆå®é™…é‡‡ç”¨ä¸€ä¸ªç¥ç»ç½‘ç»œæ¥é€¼è¿‘ï¼Œå³Decoderï¼‰æ¥å¾—åˆ°$x^i $ã€‚ ç”±å˜åˆ†æ¨æ–­å¯çŸ¥ $$ \\log p(x) = ELBO + KL(q_{\\phi}(z|x)||p_{\\theta}(z|x)) $$ ä¼˜åŒ–ç›®æ ‡å¦‚ä¸‹ $$ \\begin{equation} \\begin{aligned} \u003c\\hat \\theta,\\hat \\phi\u003e \u0026= \\mathop{\\arg\\min}_{\u003c\\theta, \\phi\u003e}\\ KL(q_{\\phi}(z|x)||p_{\\theta}(z|x)) \\\\ \u0026=\\mathop{\\arg\\max}_{\u003c\\theta, \\phi\u003e}\\ ELBO \\\\ \u0026=\\mathop{\\arg\\max}_{\u003c\\theta, \\phi\u003e}\\ E_{q_{\\phi}(z|x)}[\\log p_{\\theta}(x,z)]+H[q_{\\phi}] \\\\ \u0026=\\mathop{\\arg\\max}_{\u003c\\theta, \\phi\u003e}\\ E_{q_{\\phi}(z|x)}[\\log p_{\\theta}(x,z)-\\log q_{\\phi}(z|x)] \\\\ \u0026=\\mathop{\\arg\\max}_{\u003c\\theta, \\phi\u003e}\\ E_{q_{\\phi}(z|x)}[\\log p_{\\theta}(x|z)+\\log p(z)-\\log q_{\\phi}(z|x)] \\\\ \u0026=\\mathop{\\arg\\max}_{\u003c\\theta, \\phi\u003e}\\ E_{q_{\\phi}(z|x)}[\\log p_{\\theta}(x|z)]+\\int q_{\\phi}(z|x)\\frac{\\log p(z)}{\\log q_{\\phi}(z|x)}dz \\\\ \u0026=\\mathop{\\arg\\max}_{\u003c\\theta, \\phi\u003e}\\underbrace{\\ E_{q_{\\phi}(z|x)}[\\log p_{\\theta}(x|z)]}_{çœŸæ­£çš„ç›®æ ‡å‡½æ•°}-\\underbrace{KL(q_{\\phi}(z|x)||p(z))}_{çœ‹åšæ­£åˆ™åŒ–é¡¹ï¼Œä½¿ç¼–ç å™¨ä¸åç¼©} \\end{aligned} \\end{equation} $$ ä½¿ç”¨SGVIè¿›è¡Œè®­ç»ƒï¼Œé‡å‚æ•°åŒ–æŠ€å·§å¯ä»¥å¦‚ä¸‹å®ç° $\\epsilon$å¯ä»¥çœ‹åšé‡‡æ ·çš„å™ªå£°ï¼Œ$\\epsilon \\backsim N(0,\\bf I)$ã€‚å‡è®¾$z|x \\backsim N(\\mu_{\\phi}(x),\\Sigma_{\\phi}(x))$åˆ™ $$ z=\\mu_{\\phi}(x)+\\Sigma_{\\phi}^{\\frac{1}{2}}(x)\\cdot \\epsilon $$ ","date":"2022-09-15","objectID":"/variational_inference/:6:0","series":[],"tags":[],"title":"å˜åˆ†æ¨æ–­","uri":"/variational_inference/#å˜åˆ†è‡ªç¼–ç å™¨vae"},{"categories":["machine_learning"],"content":" å˜åˆ†è‡ªç¼–ç å™¨VAE é—®é¢˜åœºæ™¯ å‡è®¾æ•°æ®é›†$X=\\{x^{(i)}\\}^N_{i=1}$æœä»$N$ i.i.d.ã€‚è¯¥é›†åˆä¸­çš„æ•°æ®ç”±æŸäº›éšæœºè¿‡ç¨‹ç”Ÿæˆè€Œæ¥ï¼Œè¿‡ç¨‹ä¸­å«æœ‰æ— æ³•è§‚æµ‹çš„è¿ç»­éšæœºå˜é‡$\\bf z$ã€‚è¿™ä¸ªéšæœºè¿‡ç¨‹åŒ…å«ä¸¤ä¸ªæ­¥éª¤ï¼Œé¦–å…ˆï¼Œä»å…ˆéªŒåˆ†å¸ƒ$p_{\\theta ^*}(\\bf z)$ä¸­ç”Ÿæˆä¸€ä¸ª$\\bf z^{(i)}$ã€‚æ­¥éª¤äºŒæ˜¯ä»æ¡ä»¶åˆ†å¸ƒ$p_{\\theta ^*}(\\bf x |\\bf z)$ä¸­é‡‡æ ·$\\bf x^{(i)}$ã€‚å‡è®¾$p_{\\theta ^*}(\\bf z)$å’Œ$p_{\\theta ^*}(\\bf x |\\bf z)$æ¥è‡ª$p_{\\theta}(\\bf z)$å’Œ$p_{\\theta}(\\bf x |\\bf z)$çš„å‚æ•°å®¶æ—ï¼Œå¹¶ä¸”ä»–ä»¬çš„è¡¨è¾¾åœ¨æåŠ$\\theta$å’Œ$z$æ—¶éƒ½æ˜¯å¯å¾®çš„ã€‚è¿™ä¸ªè¿‡ç¨‹çš„è®¸å¤šéƒ¨åˆ†éƒ½æ˜¯å¯¹æˆ‘ä»¬ä¸å¯è§çš„ï¼šä¸è®ºæ˜¯çœŸå®çš„å‚æ•°$\\theta ^*$è¿˜æ˜¯éšå˜é‡$z^{(i)}$éƒ½æ˜¯æœªçŸ¥çš„ã€‚ éšå˜é‡æ¨¡å‹ Latent Variable Model GMM æ··åˆé«˜æ–¯æ¨¡å‹ï¼Œæœ‰é™ä¸ªé«˜æ–¯æ¨¡å‹æ··åˆ$z$~Categorical Dist VAE æ— é™ä¸ªï¼ˆinfiniteï¼‰é«˜æ–¯æ¨¡å‹æ··åˆ: $z \\sim N(0,\\bf I) $ï¼Œ$x|z \\sim N(\\mu_{\\theta}(z),\\sum_{\\theta}(z))$ï¼Œå¾—åˆ°å¦‚ä¸‹å»ºæ¨¡ï¼Œ $$ p_{\\theta}(x) = \\int_zp_{\\theta}(x,z)dz \\ = \\ \\int_z p(z)\\cdot p_{\\theta}(x|z)dz $$ å…¶ä¸­$p_{\\theta}(x)$ä¸ºintractableã€‚ å¦‚æœéœ€è¦ä½¿ç”¨VAEç”Ÿæˆä¸€ä¸ªæ ·æœ¬ï¼Œå…ˆä»$p(z)$ä¸­é‡‡æ ·ä¸€ä¸ª$z^i$ï¼Œç„¶åä½¿ç”¨$p_{\\theta}(x|z)$ï¼ˆå®é™…é‡‡ç”¨ä¸€ä¸ªç¥ç»ç½‘ç»œæ¥é€¼è¿‘ï¼Œå³Decoderï¼‰æ¥å¾—åˆ°$x^i $ã€‚ ç”±å˜åˆ†æ¨æ–­å¯çŸ¥ $$ \\log p(x) = ELBO + KL(q_{\\phi}(z|x)||p_{\\theta}(z|x)) $$ ä¼˜åŒ–ç›®æ ‡å¦‚ä¸‹ $$ \\begin{equation} \\begin{aligned} \u003c\\hat \\theta,\\hat \\phi\u003e \u0026= \\mathop{\\arg\\min}_{\u003c\\theta, \\phi\u003e}\\ KL(q_{\\phi}(z|x)||p_{\\theta}(z|x)) \\\\ \u0026=\\mathop{\\arg\\max}_{\u003c\\theta, \\phi\u003e}\\ ELBO \\\\ \u0026=\\mathop{\\arg\\max}_{\u003c\\theta, \\phi\u003e}\\ E_{q_{\\phi}(z|x)}[\\log p_{\\theta}(x,z)]+H[q_{\\phi}] \\\\ \u0026=\\mathop{\\arg\\max}_{\u003c\\theta, \\phi\u003e}\\ E_{q_{\\phi}(z|x)}[\\log p_{\\theta}(x,z)-\\log q_{\\phi}(z|x)] \\\\ \u0026=\\mathop{\\arg\\max}_{\u003c\\theta, \\phi\u003e}\\ E_{q_{\\phi}(z|x)}[\\log p_{\\theta}(x|z)+\\log p(z)-\\log q_{\\phi}(z|x)] \\\\ \u0026=\\mathop{\\arg\\max}_{\u003c\\theta, \\phi\u003e}\\ E_{q_{\\phi}(z|x)}[\\log p_{\\theta}(x|z)]+\\int q_{\\phi}(z|x)\\frac{\\log p(z)}{\\log q_{\\phi}(z|x)}dz \\\\ \u0026=\\mathop{\\arg\\max}_{\u003c\\theta, \\phi\u003e}\\underbrace{\\ E_{q_{\\phi}(z|x)}[\\log p_{\\theta}(x|z)]}_{çœŸæ­£çš„ç›®æ ‡å‡½æ•°}-\\underbrace{KL(q_{\\phi}(z|x)||p(z))}_{çœ‹åšæ­£åˆ™åŒ–é¡¹ï¼Œä½¿ç¼–ç å™¨ä¸åç¼©} \\end{aligned} \\end{equation} $$ ä½¿ç”¨SGVIè¿›è¡Œè®­ç»ƒï¼Œé‡å‚æ•°åŒ–æŠ€å·§å¯ä»¥å¦‚ä¸‹å®ç° $\\epsilon$å¯ä»¥çœ‹åšé‡‡æ ·çš„å™ªå£°ï¼Œ$\\epsilon \\backsim N(0,\\bf I)$ã€‚å‡è®¾$z|x \\backsim N(\\mu_{\\phi}(x),\\Sigma_{\\phi}(x))$åˆ™ $$ z=\\mu_{\\phi}(x)+\\Sigma_{\\phi}^{\\frac{1}{2}}(x)\\cdot \\epsilon $$ ","date":"2022-09-15","objectID":"/variational_inference/:6:0","series":[],"tags":[],"title":"å˜åˆ†æ¨æ–­","uri":"/variational_inference/#é—®é¢˜åœºæ™¯"},{"categories":["machine_learning"],"content":" å‚è€ƒèµ„æ–™https://www.bilibili.com/video/BV1DW41167vr?p=1\u0026vd_source=309d79182a0075ce59fbfe1a028281fd https://www.bilibili.com/video/BV1G34y1t7Dy/?p=2\u0026spm_id_from=pageDriver\u0026vd_source=309d79182a0075ce59fbfe1a028281fd https://zhuanlan.zhihu.com/p/345597656 ","date":"2022-09-15","objectID":"/variational_inference/:7:0","series":[],"tags":[],"title":"å˜åˆ†æ¨æ–­","uri":"/variational_inference/#å‚è€ƒèµ„æ–™"},{"categories":["machine_learning"],"content":" BERTBERTï¼ˆBidirectional Encoder Representations from Transformersï¼‰ç”±è°·æ­Œåœ¨2018å¹´æå‡º[1]ã€‚åœ¨è¯­è¨€æ¨¡å‹ä¸­ï¼Œå®ƒçš„ä¼˜åŠ¿æ˜¯é‡‡ç”¨äº†åŠ¨æ€çš„è¯å‘é‡ï¼Œç”¨ä»¥è§£å†³ä¸€è¯å¤šä¹‰ç­‰é—®é¢˜ï¼Œå¹¶ä¸”åœ¨è®­ç»ƒé˜¶æ®µä½¿ç”¨å¤šä»»åŠ¡â€”â€”MLMï¼ˆMasked Language Modelingï¼‰å’ŒNSPï¼ˆNext Sentence Predictionï¼‰æ¥èå…¥è¯­è¨€å­¦çŸ¥è¯†ï¼Œå‰è€…ä½¿ç”¨äº†åŒå‘è¯­ä¹‰ä¿¡æ¯æ¥ç¼–ç è¯æ±‡ï¼Œè€Œåè€…æœ‰åˆ©äºä¸‹æ¸¸å¥çº§å…³ç³»çš„æ¨ç†ï¼›å®ƒçš„ç¼ºç‚¹æ˜¯æ©ç æœºåˆ¶çš„è¢«æ©è¯çš„æ¡ä»¶ç‹¬ç«‹å‡è®¾ï¼Œæ©ç ä½¿ç”¨çš„ç‰¹æ®Šæ ‡è®°ä¸ä¸‹æ¸¸å¾®è°ƒæ—¶çš„ä¸ä¸€è‡´æ€§ä»¥åŠåˆ‡è¯æ—¶å¯èƒ½ä¼šç ´ååŸè¯ç­‰[2]ã€‚ [1] Devlin J, Chang M W, Lee K, et al. Bert: Pre-training of deep bidirectional transformers for language understanding[J]. arXiv preprint arXiv:1810.04805, 2018. [2] Yang Z, Dai Z, Yang Y, et al. Xlnet: Generalized autoregressive pretraining for language understanding[J]. Advances in neural information processing systems, 2019, 32. ","date":"2022-09-05","objectID":"/pretrain_model/:0:0","series":[],"tags":[],"title":"é¢„è®­ç»ƒæ¨¡å‹çš„å¯¹æ¯”","uri":"/pretrain_model/#bert"},{"categories":["machine_learning"],"content":" GPTGPTï¼ˆGenerative Pre-Trainingï¼‰ç”±OpenAIåœ¨2018å¹´æå‡º[3]ã€‚GPTæ¨¡å‹åŒæ ·é‡‡ç”¨äº†é¢„è®­ç»ƒåŠ å¾®è°ƒçš„è®­ç»ƒç­–ç•¥ï¼Œèƒ½å¤Ÿå®ç°åŠ¨æ€è¯å‘é‡ï¼Œä¸”ç”±äºå…¶æ˜¯è‡ªå›å½’æ¨¡å‹ï¼Œç›¸æ¯”äºBERTï¼ŒGPTæ¨¡å‹å¯ä»¥æ›´å¥½åœ°åº”ç”¨äºè‡ªç„¶è¯­è¨€ç”Ÿæˆä»»åŠ¡ã€‚ç„¶è€Œï¼ŒGPTæ¨¡å‹ä»…åˆ©ç”¨äº†ä¸Šæ–‡ä¿¡æ¯ï¼Œç›¸æ¯”äºBERTï¼Œå…¶åªèƒ½æ•æ‰å•å‘çš„è¯­ä¹‰ä¿¡æ¯ã€‚åœ¨GPTçš„ç‰ˆæœ¬æ›´æ–°è¿­ä»£ä¸­ï¼Œå…¶å‚æ•°è§„æ¨¡è¿…é€Ÿå¢é•¿ï¼Œè¿™ä¹Ÿå¯¼è‡´äº†å…¶éš¾ä»¥åå‘ä¼ æ’­æ¥æ›´æ–°æƒé‡ã€‚ [3] Radford A, Narasimhan K, Salimans T, et al. Improving laAnguage understanding by generative pre-training[J]. 2018. ","date":"2022-09-05","objectID":"/pretrain_model/:0:0","series":[],"tags":[],"title":"é¢„è®­ç»ƒæ¨¡å‹çš„å¯¹æ¯”","uri":"/pretrain_model/#gpt"},{"categories":[],"content":" æ–‡æœ¬å“ˆå¸Œ æ•°æ®é›† 20Newsgroups ","date":"2022-08-09","objectID":"/datasets/:1:0","series":[],"tags":[],"title":"æœ‰å…³æ•°æ®é›†è°ƒç ”å’Œä»‹ç»","uri":"/datasets/#æ–‡æœ¬å“ˆå¸Œ"},{"categories":[],"content":" åŸºäºæ–‡æ¡£çš„å¤šè½®é—®ç­” ä»»åŠ¡ æ•°æ®é›† æè¿° è¯­è¨€ å¯¹è¯å¼é—®ç­”(Conversational Question Answering, CQA) CoQAï¼ŒCuQAç­‰ åŸºäºç»™å®šæ–‡æ¡£çš„å¤šè½®é—®ç­”ï¼Œæ— éœ€æ£€ç´¢ï¼ŒçŸ­æ–‡ã€‚ è‹±æ–‡ CQA OR-QuAC, MultiDoc2Dialç­‰ åŸºäºå¤šæ–‡æ¡£çš„å¤šè½®é—®ç­”ï¼Œéœ€è¦æ£€ç´¢ï¼Œé•¿æ–‡å’Œå¤šçŸ­æ–‡ã€‚ è‹±æ–‡ CQA INSCIT é¢å‘ä¿¡æ¯æ£€ç´¢çš„å¤šè½®å¤šæ–‡æ¡£é—®ç­” è‹±æ–‡ CQA ã€CCL 2020ã€‘å¤šè½®å¯¹è¯é—®ç­”æ•°æ®é‡‡é›†å¹³å° æœªå…¬å¼€ï¼Œå·²å‘é‚®ä»¶ï¼Œé•¿æ–‡ï¼Œ3000å­—ä»¥å†…ï¼ŒCCL2020 ä¸­æ–‡ æœºå™¨é˜…è¯»ç†è§£ï¼ˆMachine Reading Comprehension, MRCï¼‰ ChineseSquad å•è½®æœºå™¨é˜…è¯»ç†è§£ã€‚ æœ‰ä¸€ç±»åšæ³•æ˜¯å°†æ•°æ®é›†è¿›è¡Œç¿»è¯‘ä¸ºä¸­æ–‡ï¼Œæœ¬æ•°æ®é›†ä¾¿æ˜¯ä»SQuADç¿»è¯‘è¿‡æ¥çš„ä¸­æ–‡æ•°æ®é›†ã€‚ MRC CAILå¤§èµ›é˜…è¯»ç†è§£æ•°æ®é›†,DuReader å‰è€…æ˜¯æœ€é«˜äººæ°‘æ³•é™¢å¸æ”¹åŠæŒ‡å¯¼ä¸¾åŠçš„ä¸­å›½æ³•å¾‹æ™ºèƒ½æŠ€æœ¯è¯„æµ‹å¤§èµ›ï¼ˆæ¯å¹´éƒ½æœ‰ï¼Œ2021å¹´æœ‰é˜…è¯»ç†è§£ä»»åŠ¡ï¼‰ï¼Œåè€…æ˜¯ç™¾åº¦åœ¨2018å¹´æœºå™¨é˜…è¯»ç†è§£å¤§èµ›ä¸Šæ„é€ çš„æ•°æ®é›†ã€‚ ä¸­æ–‡ ","date":"2022-08-09","objectID":"/datasets/:2:0","series":[],"tags":[],"title":"æœ‰å…³æ•°æ®é›†è°ƒç ”å’Œä»‹ç»","uri":"/datasets/#åŸºäºæ–‡æ¡£çš„å¤šè½®é—®ç­”"},{"categories":["tutorial","technology_log"],"content":" å‰è¨€æœ¬é¡¹ç›®ä¸ºä¸ªäººå®è·µé¡¹ç›®ï¼ŒæŒ‰å®éªŒå®¤è€å¸ˆè¦æ±‚å°†é¡¹ç›®éƒ¨ç½²ä¸Šäº‘æœåŠ¡å™¨ï¼Œä¸»è¦å®ç°åŸºæœ¬çš„ç½‘ç«™ç»“æ„å’Œapiäº¤äº’ï¼Œä½¿ç”¨nginxè¿›è¡Œåå‘ä»£ç†ï¼Œæä¾›webæœåŠ¡ï¼Œåç«¯ä½¿ç”¨springæ¶æ„ã€‚ å¼€å‘ç¯å¢ƒå¦‚ä¸‹ï¼Œ äº‘æœåŠ¡å™¨ Ubuntu æœ¬åœ° vscodeï¼ŒMacOSï¼Œidea ","date":"2022-07-23","objectID":"/full_stack_development/:1:0","series":[],"tags":["linux"],"title":"è®°ä¸€æ¬¡å‰åç«¯åˆ†ç¦»çš„å¼€å‘éƒ¨ç½²å®è·µ","uri":"/full_stack_development/#å‰è¨€"},{"categories":["tutorial","technology_log"],"content":" Nginxé…ç½®ç‰ˆæœ¬ Nginx Open Source å®˜æ–¹æ–‡æ¡£ https://docs.nginx.com/nginx/admin-guide/installing-nginx/installing-nginx-open-source/ ä¸€é”®å®‰è£… sudo apt install -y nginx æ‰‹åŠ¨å®‰è£…æ–¹æ³•ï¼ˆhttps://blog.csdn.net/lsygood/article/details/ï¼‰ï¼ˆä¸æ¨èï¼‰ å¤§è‡´è¯´ä¸‹åšæ³• å…ˆå®‰è£…ä¾èµ– apt install -y gcc pcre pcre-devel zlib zlib-devel openssl openssl-devel åˆ°è¿™ä¸‹ä¸€ä¸ªnginxå‹ç¼©åŒ… http://nginx.org/ è§£å‹ä¹‹åè¿›å…¥è¯¥æ–‡ä»¶å¤¹ ç„¶å # æ‰§è¡Œå‘½ä»¤ ./configure # æ‰§è¡Œmakeå‘½ä»¤ make # æ‰§è¡Œmake installå‘½ä»¤ make install #è¿›å…¥nginxå¯åŠ¨ç›®å½•å¯åŠ¨ ./nginx æŸ¥çœ‹ç‰ˆæœ¬ sudo nginx -v out: nginx version: nginx/1.20.1 ä¿®æ”¹/etc/nginx ä¸‹çš„nginx.confæ–‡ä»¶ï¼Œæ‰‹åŠ¨å®‰è£…çš„åœ¨confæ–‡ä»¶å¤¹ä¸‹é¢ server { listen 9000; # æ”¹ä¸ºä½ æƒ³è¦çš„ç«¯å£å· listen [::]:9000; # æ”¹ä¸ºä½ æƒ³è¦çš„ç«¯å£å· server_name _; root /usr/share/nginx/html; # Load configuration files for the default server block. include /etc/nginx/default.d/*.conf; error_page 404 /404.html; location = /404.html { } error_page 500 502 503 504 /50x.html; location = /50x.html { } } é‡å¯nginx sudo nginx -s reload æ‰“å¼€æµè§ˆå™¨è®¿é—®http://æµè§ˆå™¨ip:9000ï¼ˆä½ è®¾ç½®çš„ç«¯å£å·ï¼‰ ä¸æ˜¯æ— æ³•è®¿é—®å°±è¡Œï¼Œè¿™ä¸ªé¡µé¢å¯¹åº”é…ç½®æ–‡ä»¶é‡Œrootå˜é‡å¯¹åº”æ–‡ä»¶å¤¹ä¸‹çš„å“ªä¸ªindex.htmlé‡Œçš„å†…å®¹ã€‚ å…¶ä»–å‘½ä»¤ï¼ˆè°ƒè¯•ä½¿ç”¨ï¼‰ # å¹²æ‰æ‰€æœ‰çš„nginxè¿›ç¨‹ killall -9 nginx # æŸ¥çœ‹æ‰€æœ‰ç›‘å¬ç«¯å£çš„è¿›ç¨‹ netstat -nltp # æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹ ps -aux ","date":"2022-07-23","objectID":"/full_stack_development/:2:0","series":[],"tags":["linux"],"title":"è®°ä¸€æ¬¡å‰åç«¯åˆ†ç¦»çš„å¼€å‘éƒ¨ç½²å®è·µ","uri":"/full_stack_development/#nginxé…ç½®"},{"categories":["tutorial","technology_log"],"content":" åˆ›å»ºViteé¡¹ç›®æ³¨ï¼šå¦‚æœæœ¬åœ°å·²æœ‰viteé¡¹ç›®ï¼Œè¯·åœ¨viteé¡¹ç›®ç¯å¢ƒä¸‹ç›´æ¥åˆ›å»ºdistå³å¯ã€‚ å…·ä½“æ“ä½œå¦‚ä¸‹ # ç¬¬ä¸€æ­¥ ## åˆ é™¤node_modulesæ–‡ä»¶å¤¹å’Œpackage-lock.jsonæ–‡ä»¶ # ç¬¬äºŒæ­¥ ## å®‰è£…ä¾èµ–(éœ€è¦å®‰è£…nodejs) npm install --unsafe-perm --registry=https://registry.npm.taobao.org # ç¬¬ä¸‰æ­¥ ## å¯åŠ¨é¡¹ç›®(éœ€è¦çŸ¥é“å¯æ‰§è¡Œçš„ä¸œè¥¿æœ‰å“ªäº›ï¼Œåœ¨package.jsoné‡Œæœ‰å£°æ˜serve) npm run serve ä½¿ç”¨vueç¼–å†™å‰ç«¯é¡µé¢ åˆ›å»ºviteé¡¹ç›® npm init vite ä¸€è·¯å›è½¦å¹¶æŒ‰å¦‚ä¸‹é€‰æ‹© åˆ›å»ºæˆåŠŸ è¿›å…¥viteé¡¹ç›®ä¸­å®‰è£…ä¾èµ– cd my_vite_project/ npm install å®‰è£…å®Œæˆâ€¦â€¦ å¯åŠ¨viteé¡¹ç›® npm run dev ç‚¹å‡»é“¾æ¥ å‡ºç°å¦‚ä¸Šé¡µé¢ï¼Œè¯æ˜è®¿é—®æˆåŠŸ åˆ›å»ºdist npm run build åˆ›å»ºæˆåŠŸä¹‹ååœ¨my_vite_project ç›®å½•ä¸‹ä¼šäº§ç”Ÿä¸€ä¸ªdistç›®å½•, åç»­æˆ‘ä»¬å°†nginxçš„rootè·¯å¾„æŒ‡å‘è¿™ä¸ªç›®å½•å³å¯ã€‚ ä¿®æ”¹/etc/nginx ä¸‹çš„nginx.confæ–‡ä»¶ï¼Œæ‰‹åŠ¨å®‰è£…çš„åœ¨confæ–‡ä»¶å¤¹ä¸‹é¢ â€¦â€¦ # æ›´æ”¹nginxçš„userä¸ºæœ‰æƒé™è®¿é—®viteé¡¹ç›®çš„ç”¨æˆ· user lighthouse; # æ”¹ä¸ºä½ çš„ç”¨æˆ·å â€¦â€¦ # serveréƒ¨åˆ† server { listen 9000; listen [::]:9000; server_name _; root /home/lighthouse/vue_project/my_vite_project/dist; # ä¿®æ”¹è¿™ä¸ªè·¯å¾„ä¸ºä½ é¡¹ç›®åœ°å€çš„distç›®å½• try_files $uri $uri/ /index.html # åŠ ä¸Šè¿™å¥ä¾¿å¯ä»¥åœ¨ç½‘å€åé¢æ¥ç›®å½• # Load configuration files for the default server block. include /etc/nginx/default.d/*.conf; error_page 404 /404.html; location = /404.html { } error_page 500 502 503 504 /50x.html; location = /50x.html { } } â€¦â€¦ é‡å¯nginx sudo nginx -s reload ","date":"2022-07-23","objectID":"/full_stack_development/:3:0","series":[],"tags":["linux"],"title":"è®°ä¸€æ¬¡å‰åç«¯åˆ†ç¦»çš„å¼€å‘éƒ¨ç½²å®è·µ","uri":"/full_stack_development/#åˆ›å»ºviteé¡¹ç›®"},{"categories":["tutorial","technology_log"],"content":" Mysqlé…ç½®å¦‚æœæ²¡æœ‰mysqlï¼Œåˆ°å®˜ç½‘ä¸‹è½½https://www.mysql.com/ï¼Œç„¶åæŒ‰è¯´æ˜å®‰è£…å³å¯ ","date":"2022-07-23","objectID":"/full_stack_development/:4:0","series":[],"tags":["linux"],"title":"è®°ä¸€æ¬¡å‰åç«¯åˆ†ç¦»çš„å¼€å‘éƒ¨ç½²å®è·µ","uri":"/full_stack_development/#mysqlé…ç½®"},{"categories":["tutorial","technology_log"],"content":" æœ‰mysqlï¼Œå¯†ç æœªçŸ¥å¦‚æœæœ‰mysqlï¼ˆäº‘æœåŠ¡å™¨ä¸€èˆ¬è‡ªå¸¦mysqlï¼‰ï¼Œä¸çŸ¥é“å¯†ç çš„è¯ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤ åˆ°mysqlçš„å®‰è£…ç›®å½•ä¸‹ï¼Œæ‰¾åˆ°my.cnfæ–‡ä»¶ï¼Œä¸€èˆ¬æ˜¯/etc/mysqlï¼Œå¯ä»¥ç”¨whereis mysqlå‘½ä»¤æŸ¥æ‰¾ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½® [mysqld] skip-grant-tables é‡å¯mysqlæœåŠ¡ sudo service mysql restart è¿›å…¥mysqlï¼Œè¾“å…¥ä»¥ä¸‹æŒ‡ä»¤å›è½¦å³å¯ï¼Œä»¥rootç™»å½• mysql -uroot -p ä¿®æ”¹rootå¯†ç ä¸º kkk_123 æ­¤å¤„æœ‰å‘ï¼Œmysql 8.0ç‰ˆæœ¬ä»¥ä¸‹ mysql\u003e USE mysql; mysql\u003e UPDATE user SET authentication_string=password('Kkk_123') WHERE User='root'; mysql\u003e flush privileges; mysql\u003e quit é‡å¯mysqlæœåŠ¡ sudo service mysql restart 8.0åŠä»¥ä¸Šæ­¤å¤„æœ‰å‘ï¼Œhostææ¸…æ¥šï¼Œæ˜¯â€™localhostâ€™è¿˜æ˜¯â€™%â€™ï¼ŒæŸ¥userè¡¨ mysql\u003e select User,Host from user; +------------------+-----------+ | User | Host | +------------------+-----------+ | root | % | | debian-sys-maint | localhost | | mysql.infoschema | localhost | | mysql.session | localhost | | mysql.sys | localhost | +------------------+-----------+ 5 rows in set (0.00 sec) é¦–å…ˆç½®ç©ºå¯†ç  mysql\u003e USE mysql; mysql\u003e UPDATE user SET authentication_string='' where USE='root'; ç„¶ååˆ°mysqlçš„å®‰è£…ç›®å½•ä¸‹ï¼Œæ‰¾åˆ°my.cnfæ–‡ä»¶ï¼Œä¸€èˆ¬æ˜¯/etc/mysqlï¼Œå¯ä»¥ç”¨whereis mysqlå‘½ä»¤æŸ¥æ‰¾ï¼Œå°†åˆšåˆšæŒ‡å®šçš„è·³è¿‡éªŒè¯æ³¨é‡Šæ‰ #[mysqld] #skip-grant-tables é‡å¯mysqlæœåŠ¡ sudo service mysql restart ç”±äºå¯†ç æ—¶ç©ºï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç›´æ¥è¿›å…¥mysql sudo mysql -uroot é‡ç½®å¯†ç ä¸ºKkk_123 mysql\u003e alter user 'root'@'%' identified by 'Kkk_123'; é‡å¯mysqlæœåŠ¡ sudo service mysql restart ç”¨åˆšåˆšçš„å¯†ç ç™»å½•mysql sudo mysql -uroot -pKkk_123 æˆåŠŸã€‚ ","date":"2022-07-23","objectID":"/full_stack_development/:4:1","series":[],"tags":["linux"],"title":"è®°ä¸€æ¬¡å‰åç«¯åˆ†ç¦»çš„å¼€å‘éƒ¨ç½²å®è·µ","uri":"/full_stack_development/#æœ‰mysqlå¯†ç æœªçŸ¥"},{"categories":["tutorial","technology_log"],"content":" æœ‰mysqlï¼Œå¯†ç æœªçŸ¥å¦‚æœæœ‰mysqlï¼ˆäº‘æœåŠ¡å™¨ä¸€èˆ¬è‡ªå¸¦mysqlï¼‰ï¼Œä¸çŸ¥é“å¯†ç çš„è¯ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤ åˆ°mysqlçš„å®‰è£…ç›®å½•ä¸‹ï¼Œæ‰¾åˆ°my.cnfæ–‡ä»¶ï¼Œä¸€èˆ¬æ˜¯/etc/mysqlï¼Œå¯ä»¥ç”¨whereis mysqlå‘½ä»¤æŸ¥æ‰¾ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½® [mysqld] skip-grant-tables é‡å¯mysqlæœåŠ¡ sudo service mysql restart è¿›å…¥mysqlï¼Œè¾“å…¥ä»¥ä¸‹æŒ‡ä»¤å›è½¦å³å¯ï¼Œä»¥rootç™»å½• mysql -uroot -p ä¿®æ”¹rootå¯†ç ä¸º kkk_123 æ­¤å¤„æœ‰å‘ï¼Œmysql 8.0ç‰ˆæœ¬ä»¥ä¸‹ mysql\u003e USE mysql; mysql\u003e UPDATE user SET authentication_string=password('Kkk_123') WHERE User='root'; mysql\u003e flush privileges; mysql\u003e quit é‡å¯mysqlæœåŠ¡ sudo service mysql restart 8.0åŠä»¥ä¸Šæ­¤å¤„æœ‰å‘ï¼Œhostææ¸…æ¥šï¼Œæ˜¯â€™localhostâ€™è¿˜æ˜¯â€™%â€™ï¼ŒæŸ¥userè¡¨ mysql\u003e select User,Host from user; +------------------+-----------+ | User | Host | +------------------+-----------+ | root | % | | debian-sys-maint | localhost | | mysql.infoschema | localhost | | mysql.session | localhost | | mysql.sys | localhost | +------------------+-----------+ 5 rows in set (0.00 sec) é¦–å…ˆç½®ç©ºå¯†ç  mysql\u003e USE mysql; mysql\u003e UPDATE user SET authentication_string='' where USE='root'; ç„¶ååˆ°mysqlçš„å®‰è£…ç›®å½•ä¸‹ï¼Œæ‰¾åˆ°my.cnfæ–‡ä»¶ï¼Œä¸€èˆ¬æ˜¯/etc/mysqlï¼Œå¯ä»¥ç”¨whereis mysqlå‘½ä»¤æŸ¥æ‰¾ï¼Œå°†åˆšåˆšæŒ‡å®šçš„è·³è¿‡éªŒè¯æ³¨é‡Šæ‰ #[mysqld] #skip-grant-tables é‡å¯mysqlæœåŠ¡ sudo service mysql restart ç”±äºå¯†ç æ—¶ç©ºï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç›´æ¥è¿›å…¥mysql sudo mysql -uroot é‡ç½®å¯†ç ä¸ºKkk_123 mysql\u003e alter user 'root'@'%' identified by 'Kkk_123'; é‡å¯mysqlæœåŠ¡ sudo service mysql restart ç”¨åˆšåˆšçš„å¯†ç ç™»å½•mysql sudo mysql -uroot -pKkk_123 æˆåŠŸã€‚ ","date":"2022-07-23","objectID":"/full_stack_development/:4:1","series":[],"tags":["linux"],"title":"è®°ä¸€æ¬¡å‰åç«¯åˆ†ç¦»çš„å¼€å‘éƒ¨ç½²å®è·µ","uri":"/full_stack_development/#æ­¤å¤„æœ‰å‘mysql-80ç‰ˆæœ¬ä»¥ä¸‹"},{"categories":["tutorial","technology_log"],"content":" æœ‰mysqlï¼Œå¯†ç æœªçŸ¥å¦‚æœæœ‰mysqlï¼ˆäº‘æœåŠ¡å™¨ä¸€èˆ¬è‡ªå¸¦mysqlï¼‰ï¼Œä¸çŸ¥é“å¯†ç çš„è¯ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤ åˆ°mysqlçš„å®‰è£…ç›®å½•ä¸‹ï¼Œæ‰¾åˆ°my.cnfæ–‡ä»¶ï¼Œä¸€èˆ¬æ˜¯/etc/mysqlï¼Œå¯ä»¥ç”¨whereis mysqlå‘½ä»¤æŸ¥æ‰¾ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½® [mysqld] skip-grant-tables é‡å¯mysqlæœåŠ¡ sudo service mysql restart è¿›å…¥mysqlï¼Œè¾“å…¥ä»¥ä¸‹æŒ‡ä»¤å›è½¦å³å¯ï¼Œä»¥rootç™»å½• mysql -uroot -p ä¿®æ”¹rootå¯†ç ä¸º kkk_123 æ­¤å¤„æœ‰å‘ï¼Œmysql 8.0ç‰ˆæœ¬ä»¥ä¸‹ mysql\u003e USE mysql; mysql\u003e UPDATE user SET authentication_string=password('Kkk_123') WHERE User='root'; mysql\u003e flush privileges; mysql\u003e quit é‡å¯mysqlæœåŠ¡ sudo service mysql restart 8.0åŠä»¥ä¸Šæ­¤å¤„æœ‰å‘ï¼Œhostææ¸…æ¥šï¼Œæ˜¯â€™localhostâ€™è¿˜æ˜¯â€™%â€™ï¼ŒæŸ¥userè¡¨ mysql\u003e select User,Host from user; +------------------+-----------+ | User | Host | +------------------+-----------+ | root | % | | debian-sys-maint | localhost | | mysql.infoschema | localhost | | mysql.session | localhost | | mysql.sys | localhost | +------------------+-----------+ 5 rows in set (0.00 sec) é¦–å…ˆç½®ç©ºå¯†ç  mysql\u003e USE mysql; mysql\u003e UPDATE user SET authentication_string='' where USE='root'; ç„¶ååˆ°mysqlçš„å®‰è£…ç›®å½•ä¸‹ï¼Œæ‰¾åˆ°my.cnfæ–‡ä»¶ï¼Œä¸€èˆ¬æ˜¯/etc/mysqlï¼Œå¯ä»¥ç”¨whereis mysqlå‘½ä»¤æŸ¥æ‰¾ï¼Œå°†åˆšåˆšæŒ‡å®šçš„è·³è¿‡éªŒè¯æ³¨é‡Šæ‰ #[mysqld] #skip-grant-tables é‡å¯mysqlæœåŠ¡ sudo service mysql restart ç”±äºå¯†ç æ—¶ç©ºï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç›´æ¥è¿›å…¥mysql sudo mysql -uroot é‡ç½®å¯†ç ä¸ºKkk_123 mysql\u003e alter user 'root'@'%' identified by 'Kkk_123'; é‡å¯mysqlæœåŠ¡ sudo service mysql restart ç”¨åˆšåˆšçš„å¯†ç ç™»å½•mysql sudo mysql -uroot -pKkk_123 æˆåŠŸã€‚ ","date":"2022-07-23","objectID":"/full_stack_development/:4:1","series":[],"tags":["linux"],"title":"è®°ä¸€æ¬¡å‰åç«¯åˆ†ç¦»çš„å¼€å‘éƒ¨ç½²å®è·µ","uri":"/full_stack_development/#80åŠä»¥ä¸Š"},{"categories":["tutorial","technology_log"],"content":" åç«¯é…ç½®ä½¿ç”¨ideaå°†å†™å¥½çš„é¡¹ç›®æ‰“ä¸€ä¸ªjaråŒ… åœ¨é¡¹ç›®æ–‡ä»¶çš„targetæ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°ç”Ÿæˆçš„jaråŒ…ï¼Œå¹¶è¿è¡Œã€‚ é…ç½®å®Œæˆã€‚ ","date":"2022-07-23","objectID":"/full_stack_development/:5:0","series":[],"tags":["linux"],"title":"è®°ä¸€æ¬¡å‰åç«¯åˆ†ç¦»çš„å¼€å‘éƒ¨ç½²å®è·µ","uri":"/full_stack_development/#åç«¯é…ç½®"},{"categories":["machine_learning"],"content":" æƒé‡å†»ç»“åœ¨ä½¿ç”¨é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹è¿›è¡Œä¸‹æ¸¸ä»»åŠ¡çš„å¾®è°ƒæ—¶ï¼Œæœ‰æ—¶æ•°æ®é‡éš¾ä»¥ä½¿å¾—å…¶æ”¶æ•›ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥é€‰æ‹©å›ºå®šä½æŸäº›å±‚çš„å‚æ•°ï¼Œä½¿å…¶ä»ç„¶ä¿æŒåœ¨é¢„è®­ç»ƒè¯­æ–™ä¸Šçš„çŸ¥è¯†ç§¯ç´¯ï¼ˆé€šå¸¸æ˜¯ç¼–ç å™¨ï¼‰ï¼Œè€Œä»…å¯¹å¦‚åˆ†ç±»å±‚ç­‰è¿›è¡Œå¾®è°ƒã€‚ åšæ³•å¦‚ä¸‹ # æ–¹æ³•1ï¼š è®¾ç½®requires_grad = False for param in model.parameters(): param.requires_grad = False # æ–¹æ³•2ï¼š torch.no_grad() class net(nn.Module): def __init__(): ...... # æ–¹æ³•1å¯ä»¥åœ¨æ­¤è®¾ç½®è¿›è¡Œåˆå§‹åŒ–ã€‚ def forward(self.x): with torch.no_grad(): # no_gradä¸‹å‚æ•°ä¸ä¼šè¿­ä»£ x = self.layer(x) ...... x = self.fc(x) return x ","date":"2022-07-09","objectID":"/finetune_trick/:1:0","series":[],"tags":["py"],"title":"é¢„è®­ç»ƒæ¨¡å‹çš„finetuneæŠ€å·§","uri":"/finetune_trick/#æƒé‡å†»ç»“"},{"categories":["machine_learning"],"content":" å‚è€ƒé“¾æ¥https://zhuanlan.zhihu.com/p/524036087 ","date":"2022-07-09","objectID":"/finetune_trick/:2:0","series":[],"tags":["py"],"title":"é¢„è®­ç»ƒæ¨¡å‹çš„finetuneæŠ€å·§","uri":"/finetune_trick/#å‚è€ƒé“¾æ¥"},{"categories":["machine_learning"],"content":" Tensoræ˜¯ä»€ä¹ˆï¼ŸTensoråˆå«å¼ é‡ï¼Œä¸æ ‡é‡ï¼Œå‘é‡ç­‰çš„åŒºåˆ«å¦‚ä¸‹ï¼š æ ‡é‡å…¶å®å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹å­˜åœ¨çš„æ•°ï¼Œæ¯”å¦‚åœ¨çº¿æ€§ä»£æ•°ä¸­ä¸€ä¸ªå®æ•° 5 å°±å¯ä»¥è¢«çœ‹ä½œä¸€ä¸ªæ ‡é‡ï¼Œæ‰€ä»¥æ ‡é‡çš„è¿ç®—ç›¸å¯¹ç®€å•ï¼Œä¸æˆ‘ä»¬å¹³å¸¸åšçš„æ•°å­—ç®—æœ¯è¿ç®—ç±»ä¼¼ã€‚ å‘é‡å°±æ˜¯ä¸€åˆ—æ•°ï¼Œè¿™äº›æ•°æ˜¯æœ‰åºæ’åˆ—çš„ã€‚ç”¨è¿‡æ¬¡åºä¸­çš„ç´¢å¼•ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šæ¯ä¸ªå•ç‹¬çš„æ•°ã€‚æˆ‘ä»¬å¯ä»¥å°†å‘é‡çœ‹åšç©ºé—´ä¸­çš„ç‚¹ï¼Œæ¯ä¸ªå…ƒç´ å°±æ˜¯ç©ºé—´ä¸­çš„åæ ‡ã€‚ çŸ©é˜µæ˜¯äºŒç»´æ•°ç»„ï¼Œå…¶ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ è¢«ä¸¤ä¸ªç´¢å¼•è€Œéä¸€ä¸ªæ‰€ç¡®å®šã€‚æˆ‘ä»¬é€šå¸¸ä¼šèµ‹äºˆçŸ©é˜µç²—ä½“çš„å¤§å†™å˜é‡åç§°ã€‚å¦‚æœæˆ‘ä»¬ç°åœ¨æœ‰Nä¸ªç”¨æˆ·çš„æ•°æ®ï¼Œæ¯æ¡æ•°æ®å«æœ‰Mä¸ªç‰¹å¾ï¼Œé‚£å…¶å®å®ƒå¯¹åº”çš„å°±æ˜¯ä¸€ä¸ªN*Mçš„çŸ©é˜µ å‡ ä½•ä»£æ•°ä¸­å®šä¹‰çš„å¼ é‡æ˜¯åŸºäºå‘é‡å’ŒçŸ©é˜µçš„æ¨å¹¿ï¼Œé€šä¿—ä¸€ç‚¹ç†è§£çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ ‡é‡è§†ä¸ºé›¶é˜¶å¼ é‡ï¼ŒçŸ¢é‡è§†ä¸ºä¸€é˜¶å¼ é‡ï¼Œé‚£ä¹ˆçŸ©é˜µå°±æ˜¯äºŒé˜¶å¼ é‡ã€‚ ä¾‹å¦‚ï¼Œå¯ä»¥å°†ä»»æ„ä¸€å¼ å½©è‰²å›¾ç‰‡è¡¨ç¤ºæˆä¸€ä¸ªä¸‰é˜¶å¼ é‡ï¼Œä¸‰ä¸ªç»´åº¦åˆ†åˆ«æ˜¯å›¾ç‰‡çš„é«˜åº¦ã€å®½åº¦å’Œè‰²å½©æ•°æ®ã€‚ ","date":"2022-07-08","objectID":"/tensor/:0:0","series":[],"tags":["py"],"title":"Tensorçš„ç®€å•ä½¿ç”¨","uri":"/tensor/#tensoræ˜¯ä»€ä¹ˆ"},{"categories":["machine_learning"],"content":" Torch","date":"2022-07-08","objectID":"/tensor/:1:0","series":[],"tags":["py"],"title":"Tensorçš„ç®€å•ä½¿ç”¨","uri":"/tensor/#torch"},{"categories":["machine_learning"],"content":" torch.argmaxè¿”å›æœ€å¤§å€¼ç´¢å¼• è¿”å›æ‰€æœ‰å€¼çš„æœ€å¤§å€¼ä½ç½®ç´¢å¼• \u003e\u003e\u003e a = torch.randn(4, 4) \u003e\u003e\u003e a tensor([[ 1.3398, 0.2663, -0.2686, 0.2450], [-0.7401, -0.8805, -0.3402, -1.1936], [ 0.4907, -1.3948, -1.0691, -0.3132], [-1.6092, 0.5419, -0.2993, 0.3195]]) \u003e\u003e\u003e torch.argmax(a) tensor(0) è¿”å›æŒ‡å®šç»´åº¦æœ€å¤§å€¼çš„ä½ç½®ç´¢å¼• \u003e\u003e\u003e a = torch.randn(4, 4) \u003e\u003e\u003e a tensor([[ 1.3398, 0.2663, -0.2686, 0.2450], [-0.7401, -0.8805, -0.3402, -1.1936], [ 0.4907, -1.3948, -1.0691, -0.3132], [-1.6092, 0.5419, -0.2993, 0.3195]]) \u003e\u003e\u003e torch.argmax(a, dim=1) tensor([ 0, 2, 0, 1]) ","date":"2022-07-08","objectID":"/tensor/:1:1","series":[],"tags":["py"],"title":"Tensorçš„ç®€å•ä½¿ç”¨","uri":"/tensor/#torchargmax"},{"categories":["machine_learning"],"content":" torch.topkè¿”å›ç‰¹å®šç»´çš„top-kæœ€å¤§å€¼çš„ç´¢å¼• \u003e\u003e\u003e x = torch.arange(1., 6.) \u003e\u003e\u003e x tensor([ 1., 2., 3., 4., 5.]) \u003e\u003e\u003e torch.topk(x, 3) torch.return_types.topk(values=tensor([5., 4., 3.]), indices=tensor([4, 3, 2])) top-kç´¢å¼•å–å¾—æ–¹å¼ä¸¾ä¾‹ torch.topk(x, dim=1).indices.to('cpu').numpy() ","date":"2022-07-08","objectID":"/tensor/:1:2","series":[],"tags":["py"],"title":"Tensorçš„ç®€å•ä½¿ç”¨","uri":"/tensor/#torchtopk"},{"categories":["machine_learning"],"content":" torch.catæ‹¼æ¥tensor \u003e\u003e\u003e x = torch.randn(2, 3) \u003e\u003e\u003e x tensor([[ 0.6580, -1.0969, -0.4614], [-0.1034, -0.5790, 0.1497]]) \u003e\u003e\u003e torch.cat((x, x, x), 0) tensor([[ 0.6580, -1.0969, -0.4614], [-0.1034, -0.5790, 0.1497], [ 0.6580, -1.0969, -0.4614], [-0.1034, -0.5790, 0.1497], [ 0.6580, -1.0969, -0.4614], [-0.1034, -0.5790, 0.1497]]) \u003e\u003e\u003e torch.cat((x, x, x), 1) tensor([[ 0.6580, -1.0969, -0.4614, 0.6580, -1.0969, -0.4614, 0.6580, -1.0969, -0.4614], [-0.1034, -0.5790, 0.1497, -0.1034, -0.5790, 0.1497, -0.1034, -0.5790, 0.1497]]) ","date":"2022-07-08","objectID":"/tensor/:1:3","series":[],"tags":["py"],"title":"Tensorçš„ç®€å•ä½¿ç”¨","uri":"/tensor/#torchcat"},{"categories":["machine_learning"],"content":" torch.stackå°†ä¸€ä¸ªtensoråºåˆ—ç»„åˆConcatenatesä¸ºä¸€ä¸ªæ–°çš„tensorï¼Œæ‰€æœ‰çš„tensoréœ€è¦æ˜¯ç›¸åŒçš„sizeï¼ˆshapeï¼‰ \u003e\u003e\u003e tensor_lis = [] \u003e\u003e\u003e for i in range(4): ... x = torch.randn(3,) ... tensor_lis.append(x) ... \u003e\u003e\u003e tensor_lis [tensor([ 0.4239, -0.4117, -1.4423]), tensor([ 0.0388, 0.2642, -0.0006]), tensor([-0.4351, 0.4171, -1.1180]), tensor([ 0.2685, 0.6888, -1.6707])] \u003e\u003e\u003e a = torch.stack(tensor_lis,dim=0) \u003e\u003e\u003e a tensor([[ 4.2391e-01, -4.1169e-01, -1.4423e+00], [ 3.8823e-02, 2.6416e-01, -6.1708e-04], [-4.3513e-01, 4.1708e-01, -1.1180e+00], [ 2.6853e-01, 6.8878e-01, -1.6707e+00]]) ","date":"2022-07-08","objectID":"/tensor/:1:4","series":[],"tags":["py"],"title":"Tensorçš„ç®€å•ä½¿ç”¨","uri":"/tensor/#torchstack"},{"categories":["machine_learning"],"content":" torch.squeezesqueezeæ˜¯è‹±æ–‡ æŒ¤ çš„æ„æ€ è¿”å›ä¸€ä¸ªå¼ é‡ï¼Œå…¶ä¸­æ‰€æœ‰inputå¤§å°ä¸º1çš„ç»´åº¦éƒ½å·²åˆ é™¤ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœè¾“å…¥æ˜¯å½¢çŠ¶ï¼š $(A \\times 1 \\times B \\times C \\times 1 \\times D)$é‚£ä¹ˆè¾“å‡ºå¼ é‡å°†å…·æœ‰ä»¥ä¸‹å½¢çŠ¶ï¼šï¼ˆ$A \\times B \\times C\\times D$ï¼‰. dimç»™å®šæ—¶ï¼Œä»…åœ¨ç»™å®šç»´åº¦ä¸Šè¿›è¡ŒæŒ¤å‹æ“ä½œã€‚å¦‚æœè¾“å…¥æ˜¯å½¢çŠ¶ï¼š$(A \\times 1 \\times B)$ï¼Œsqueeze(input, 0) è¯­å¥å°†ä¿æŒå¼ é‡ä¸å˜ï¼Œä½†squeeze(input, 1)è¯­å¥ä¼šå°†å¼ é‡å‹ç¼©åˆ°å½¢çŠ¶$(A \\times B)$. \u003e\u003e\u003e x = torch.zeros(2, 1, 2, 1, 2) \u003e\u003e\u003e x.size() torch.Size([2, 1, 2, 1, 2]) \u003e\u003e\u003e y = torch.squeeze(x) \u003e\u003e\u003e y.size() torch.Size([2, 2, 2]) \u003e\u003e\u003e y = torch.squeeze(x, 0) \u003e\u003e\u003e y.size() torch.Size([2, 1, 2, 1, 2]) \u003e\u003e\u003e y = torch.squeeze(x, 1) \u003e\u003e\u003e y.size() torch.Size([2, 2, 1, 2]) ","date":"2022-07-08","objectID":"/tensor/:1:5","series":[],"tags":["py"],"title":"Tensorçš„ç®€å•ä½¿ç”¨","uri":"/tensor/#torchsqueeze"},{"categories":["machine_learning"],"content":" torch.tensor.viewæ”¹å˜tensorçš„å½¢çŠ¶ï¼Œæ³¨æ„ï¼Œè°ƒç”¨çš„æ—¶å€™æ˜¯ä½œç”¨åœ¨tensorä¸Šçš„ï¼Œæ¯”å¦‚tensor_x.view()ï¼Œè€Œä¸æ˜¯torch.view()ï¼Œæœ‰æ‰€åŒºåˆ«ã€‚ \u003e\u003e\u003e x = torch.randn(4, 4) \u003e\u003e\u003e x.size() torch.Size([4, 4]) \u003e\u003e\u003e y = x.view(16) \u003e\u003e\u003e y.size() torch.Size([16]) \u003e\u003e\u003e z = x.view(-1, 8) # the size -1 is inferred from other dimensions \u003e\u003e\u003e z.size() torch.Size([2, 8]) \u003e\u003e\u003e a = torch.randn(1, 2, 3, 4) \u003e\u003e\u003e a.size() torch.Size([1, 2, 3, 4]) \u003e\u003e\u003e b = a.transpose(1, 2) # Swaps 2nd and 3rd dimension \u003e\u003e\u003e b.size() torch.Size([1, 3, 2, 4]) \u003e\u003e\u003e c = a.view(1, 3, 2, 4) # Does not change tensor layout in memory \u003e\u003e\u003e c.size() torch.Size([1, 3, 2, 4]) \u003e\u003e\u003e torch.equal(b, c) False æ”¹å˜æ•°æ®ç±»å‹ï¼Œé€šå¸¸ç”¨äºæ§åˆ¶æµ®ç‚¹æ•° \u003e\u003e\u003e x = torch.randn(4, 4) \u003e\u003e\u003e x tensor([[ 0.9482, -0.0310, 1.4999, -0.5316], [-0.1520, 0.7472, 0.5617, -0.8649], [-2.4724, -0.0334, -0.2976, -0.8499], [-0.2109, 1.9913, -0.9607, -0.6123]]) \u003e\u003e\u003e x.dtype torch.float32 \u003e\u003e\u003e y = x.view(torch.int32) \u003e\u003e\u003e y tensor([[ 1064483442, -1124191867, 1069546515, -1089989247], [-1105482831, 1061112040, 1057999968, -1084397505], [-1071760287, -1123489973, -1097310419, -1084649136], [-1101533110, 1073668768, -1082790149, -1088634448]], dtype=torch.int32) \u003e\u003e\u003e y[0, 0] = 1000000000 \u003e\u003e\u003e x tensor([[ 0.0047, -0.0310, 1.4999, -0.5316], [-0.1520, 0.7472, 0.5617, -0.8649], [-2.4724, -0.0334, -0.2976, -0.8499], [-0.2109, 1.9913, -0.9607, -0.6123]]) \u003e\u003e\u003e x.view(torch.cfloat) tensor([[ 0.0047-0.0310j, 1.4999-0.5316j], [-0.1520+0.7472j, 0.5617-0.8649j], [-2.4724-0.0334j, -0.2976-0.8499j], [-0.2109+1.9913j, -0.9607-0.6123j]]) \u003e\u003e\u003e x.view(torch.cfloat).size() torch.Size([4, 2]) \u003e\u003e\u003e x.view(torch.uint8) tensor([[ 0, 202, 154, 59, 182, 243, 253, 188, 185, 252, 191, 63, 240, 22, 8, 191], [227, 165, 27, 190, 128, 72, 63, 63, 146, 203, 15, 63, 22, 106, 93, 191], [205, 59, 30, 192, 112, 206, 8, 189, 7, 95, 152, 190, 12, 147, 89, 191], [ 43, 246, 87, 190, 235, 226, 254, 63, 111, 240, 117, 191, 177, 191, 28, 191]], dtype=torch.uint8) \u003e\u003e\u003e x.view(torch.uint8).size() torch.Size([4, 16]) ","date":"2022-07-08","objectID":"/tensor/:1:6","series":[],"tags":["py"],"title":"Tensorçš„ç®€å•ä½¿ç”¨","uri":"/tensor/#torchtensorview"},{"categories":["machine_learning"],"content":" Tensorå½’ä¸€åŒ–æ“ä½œ æŒ‰ç»´åº¦1å½’ä¸€åŒ– \u003e\u003e\u003e import torch \u003e\u003e\u003e import torch.nn.functional as F \u003e\u003e\u003e x = torch.rand(2,4) \u003e\u003e\u003e x tensor([[0.1780, 0.0885, 0.0239, 0.1663], [0.5253, 0.1764, 0.6815, 0.1032]]) \u003e\u003e\u003e norm_x = F.softmax(x, dim=1) \u003e\u003e\u003e norm_x tensor([[0.2660, 0.2432, 0.2280, 0.2629], [0.2833, 0.1998, 0.3312, 0.1857]]) ","date":"2022-07-08","objectID":"/tensor/:1:7","series":[],"tags":["py"],"title":"Tensorçš„ç®€å•ä½¿ç”¨","uri":"/tensor/#tensorå½’ä¸€åŒ–æ“ä½œ"},{"categories":["machine_learning"],"content":" Tensorçš„å¤šæ¡ä»¶é€‰å– \u003e\u003e\u003e a = [1., 2., 3, 4] \u003e\u003e\u003e b = [-1., -2., -3., -4.] \u003e\u003e\u003e a_tensor = torch.as_tensor(a, dtype=torch.float) \u003e\u003e\u003e b_tensor = torch.as_tensor(b, dtype=torch.float) # å•æ¡ä»¶é€‰å– \u003e\u003e\u003e print(a_tensor[a_tensor \u003e 1.]) tensor([2., 3., 4.]) # å¤šæ¡ä»¶é€‰å– \u003e\u003e\u003e condition1 = torch.where((a_tensor \u003e 1.) \u0026 (a_tensor \u003c 4.)) \u003e\u003e\u003e condition2 = torch.where((a_tensor == 1.) | (a_tensor == 4.)) \u003e\u003e\u003e print(a_tensor[condition1]) tensor([2., 3.]) # åæ¡ä»¶é€‰å– \u003e\u003e\u003e condition = torch.where((a_tensor \u003e 1.) \u0026 (a_tensor \u003c 4.), True, False) # é¦–å…ˆè½¬ä¸ºboolç±»å‹ \u003e\u003e\u003e print(a_tensor[~condition]) # ç„¶åå–å tensor([1., 4.]) \u003e\u003e\u003e print(a_tensor[condition2]) tensor([1., 4.]) # æ¡ä»¶é€‰å¦ä¸€ä¸ªtensoré‡Œçš„å€¼(a,bç­‰ç»´) \u003e\u003e\u003e print(b_tensor[condition1]) tensor([-2., -3.]) # mask æœºåˆ¶ï¼Œåˆ—è¡¨é€‰å€¼ \u003e\u003e\u003e x = torch.tensor([[1,2,0],[2,3,0]]) \u003e\u003e\u003e y = torch.tensor([[2,3,0],[2,3,0]]) \u003e\u003e\u003e select = torch.tensor([1,2]) \u003e\u003e\u003e mask = torch.isin(x, select) \u003e\u003e\u003e mask tensor([[ True, True, False], [ True, False, False]]) \u003e\u003e\u003e y[mask] tensor([2, 3, 2]) ","date":"2022-07-08","objectID":"/tensor/:1:8","series":[],"tags":["py"],"title":"Tensorçš„ç®€å•ä½¿ç”¨","uri":"/tensor/#tensorçš„å¤šæ¡ä»¶é€‰å–"},{"categories":["machine_learning"],"content":" ä¸åŒå½¢çŠ¶çš„Tensorä¹‹é—´è®¡ç®— \u003e\u003e\u003e a = [[1., 2., 3, 4], [1., 2., 3, 4]] \u003e\u003e\u003e b = [[[-1., -2., -3., -4.], [-1., -2., -3., -4.], [-1., -2., -3., -4.]], [[-1., -2., -3., -4.], [-1., -2., -3., -4.], [-1., -2., -3., -4.]]] \u003e\u003e\u003e a_tensor = torch.as_tensor(a, dtype=torch.float) # shape torch.size([2,4]) \u003e\u003e\u003e b_tensor = torch.as_tensor(b, dtype=torch.float) # shape torch.size([2,3,4]) \u003e\u003e\u003e a_tensor = a_tensor.unsqueeze(1) # æ‰©å±•ä¸€ä¸ªid=1çš„ç»´åº¦ \u003e\u003e\u003e print(a_tensor) tensor([[[1., 2., 3., 4.]], [[1., 2., 3., 4.]]]) \u003e\u003e\u003e print(a_tensor-b_tensor) tensor([[[2., 4., 6., 8.], [2., 4., 6., 8.], [2., 4., 6., 8.]], [[2., 4., 6., 8.], [2., 4., 6., 8.], [2., 4., 6., 8.]]]) \u003e\u003e\u003e print((a_tensor-b_tensor)**2) tensor([[[ 4., 16., 36., 64.], [ 4., 16., 36., 64.], [ 4., 16., 36., 64.]], [[ 4., 16., 36., 64.], [ 4., 16., 36., 64.], [ 4., 16., 36., 64.]]]) # äºŒèŒƒå¼ï¼Œdim2ç»´åº¦çš„æ‰€æœ‰å€¼å¹³æ–¹ï¼Œæ±‚å’Œï¼Œç„¶åå¼€æ ¹å· \u003e\u003e\u003e print(torch.norm(a_tensor-b_tensor, p=2, dim=2)) tensor([[10.9545, 10.9545, 10.9545], [10.9545, 10.9545, 10.9545]]) # äºŒèŒƒå¼ï¼Œdim2ç»´åº¦çš„æ‰€æœ‰å€¼å¹³æ–¹ï¼Œæ±‚å’Œï¼Œç„¶åå¼€æ ¹å·ï¼Œå’Œä¸Šé¢ç»“æœä¸€è‡´ \u003e\u003e\u003e print(torch.linalg.norm(a_tensor-b_tensor, dim=2)) tensor([[10.9545, 10.9545, 10.9545], [10.9545, 10.9545, 10.9545]]) ","date":"2022-07-08","objectID":"/tensor/:1:9","series":[],"tags":["py"],"title":"Tensorçš„ç®€å•ä½¿ç”¨","uri":"/tensor/#ä¸åŒå½¢çŠ¶çš„tensorä¹‹é—´è®¡ç®—"},{"categories":["tutorial"],"content":" ç®€ä»‹pyecharts çš„å‘ˆç°ååˆ†ç¾è§‚ï¼Œå°½é‡æ­é…jupyternotebookä½¿ç”¨ï¼Œjupyterlabä¸Šçš„æ˜¾ç¤ºå°šæœ‰ç‘•ç–µã€‚åœ¨ä½¿ç”¨ä¸­ï¼Œå¯ä»¥å°†jupyternotebookè½¬ä¸ºhtmlæ¥é™æ€ä¿å­˜pyechartsçš„å›¾åƒï¼Œåšå¯è§†åŒ–åˆ†æï¼Œç¥ç§˜ä»£ç å¦‚ä¸‹ jupyter nbconvert --to html --no-input data_analy_4.ipynb ä¼šç”Ÿæˆä¸€ä¸ªdata_analy_4.htmlï¼Œå®ƒé‡Œé¢ä»…ä»…åŒ…å«mdå’Œè¾“å‡ºéƒ¨åˆ†ï¼Œcodeéƒ¨åˆ†ä¼šè¢«éšè—ã€‚ ","date":"2022-07-08","objectID":"/pyecharts/:1:0","series":["python_data_analysis"],"tags":["py"],"title":"Pyechartsçš„ç®€å•ä½¿ç”¨","uri":"/pyecharts/#ç®€ä»‹"},{"categories":["tutorial"],"content":" ä½¿ç”¨ä½œä¸ºpythonçš„ç¬¬ä¸‰æ–¹åº“ä½¿ç”¨å³å¯ï¼Œpip install pyecharts ","date":"2022-07-08","objectID":"/pyecharts/:2:0","series":["python_data_analysis"],"tags":["py"],"title":"Pyechartsçš„ç®€å•ä½¿ç”¨","uri":"/pyecharts/#ä½¿ç”¨"},{"categories":["tutorial"],"content":" å›¾ä¾‹(åŸºäºpyecharts1.9.1) # ============= # Library # ============= from pyecharts.charts import Bar,Line,Tab, Grid,Scatter from pyecharts import options as opts from pyecharts.globals import ThemeType ","date":"2022-07-08","objectID":"/pyecharts/:3:0","series":["python_data_analysis"],"tags":["py"],"title":"Pyechartsçš„ç®€å•ä½¿ç”¨","uri":"/pyecharts/#å›¾ä¾‹åŸºäºpyecharts191"},{"categories":["tutorial"],"content":" ç›´æ–¹å›¾ ç¥ç§˜ä»£ç  x_data = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] y_data = [0.804, 0.882, 0.906, 0.934, 0.958, 0.964, 0.972, 0.976, 0.976, 0.976] bar = ( Bar(init_opts=opts.InitOpts(width='400px', height='400px', theme=ThemeType.DARK)) .add_xaxis(x_data,) .add_yaxis(\"top_kå‡†ç¡®ç‡\", y_data) .set_global_opts( xaxis_opts=opts.AxisOpts( name='Top_K' ), yaxis_opts=opts.AxisOpts( name='ACC' ), ) ) bar.render_notebook() ","date":"2022-07-08","objectID":"/pyecharts/:3:1","series":["python_data_analysis"],"tags":["py"],"title":"Pyechartsçš„ç®€å•ä½¿ç”¨","uri":"/pyecharts/#ç›´æ–¹å›¾"},{"categories":["tutorial"],"content":" æŠ˜çº¿å›¾ ç¥ç§˜ä»£ç  x_data = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] # éœ€è¦æ³¨æ„pyechartsçš„æŠ˜çº¿å›¾ä¸­xè½´çš„æ•°æ®éœ€è¦è½¬ä¸ºstrç±»å‹ï¼Œå¦åˆ™å›¾åƒä¼šå‡ºç°åç§» x_data = [str(x) for x in x_data] y_data = [0.804, 0.882, 0.906, 0.934, 0.958, 0.964, 0.972, 0.976, 0.976, 0.976] line = ( Line(init_opts=opts.InitOpts(width='400px', height='400px', theme=ThemeType.DARK)) .add_xaxis(x_data,) .add_yaxis(\"top_kå‡†ç¡®ç‡\", y_data, is_smooth=False, is_symbol_show=True) .set_global_opts( xaxis_opts=opts.AxisOpts( name='Top_K' ), yaxis_opts=opts.AxisOpts( name='ACC' ), ) ) line.render_notebook() ","date":"2022-07-08","objectID":"/pyecharts/:3:2","series":["python_data_analysis"],"tags":["py"],"title":"Pyechartsçš„ç®€å•ä½¿ç”¨","uri":"/pyecharts/#æŠ˜çº¿å›¾"},{"categories":["tutorial"],"content":" æ•£ç‚¹å›¾ ç¥ç§˜ä»£ç  x_lis = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] y_lis = [2, 2, 3, 4, 5, 3, 7, 8, 9, 5] # è®¾ç½®æ•£ç‚¹å›¾ s=Scatter(init_opts=opts.InitOpts( width=\"300px\", height=\"300px\" ) ) s.add_xaxis(x_lis) s.add_yaxis(\"æ ‡ç­¾\",y_lis, label_opts=opts.LabelOpts(is_show=True)) # max_interval æŒ‡å®šåæ ‡è½´é—´éš” s.set_global_opts( title_opts=opts.TitleOpts(title=\"æ•£ç‚¹å›¾\"), xaxis_opts=opts.AxisOpts( type_='value', splitline_opts=opts.SplitLineOpts(is_show=True), max_interval=1 ), yaxis_opts=opts.AxisOpts( splitline_opts=opts.SplitLineOpts(is_show=True), axistick_opts=opts.AxisTickOpts(is_show=True,length=10), max_interval=1 ), ) # è®¾ç½®å‚è€ƒçº¿ line1 = ( Line() .add_xaxis([0,10]) .add_yaxis( \"\", list([0,10]), label_opts=opts.LabelOpts(is_show=False), ) .set_global_opts( xaxis_opts=opts.AxisOpts( type_='value', ) ) ) # è®¾ç½®overlap overlap_1 = s.overlap(line1) grid = ( Grid(init_opts=opts.InitOpts(width=\"300px\", height=\"300px\")) .add( overlap_1, grid_opts=opts.GridOpts(), is_control_axis_index=True ) .render_notebook() ) grid æ›´å¤šå›¾ä¾‹ https://pyecharts.org/#/ ","date":"2022-07-08","objectID":"/pyecharts/:3:3","series":["python_data_analysis"],"tags":["py"],"title":"Pyechartsçš„ç®€å•ä½¿ç”¨","uri":"/pyecharts/#æ•£ç‚¹å›¾"},{"categories":["machine_learning","tutorial"],"content":"æ”¹å˜æ¯ç‡¥å•ä¸€çš„è¿›åº¦æ¡","date":"2022-07-03","objectID":"/bravo_processbar/","series":[],"tags":["py"],"title":"ç‚«é…·çš„processbar","uri":"/bravo_processbar/"},{"categories":["machine_learning","tutorial"],"content":" è¿œå¤çš„æˆ‘(è¿œå¤æ—¶æœŸæ²¡æœ‰æˆªå›¾)ï¼š[00:00:00 \u003c 9999:9999:9999] ","date":"2022-07-03","objectID":"/bravo_processbar/:0:1","series":[],"tags":["py"],"title":"ç‚«é…·çš„processbar","uri":"/bravo_processbar/#è¿œå¤çš„æˆ‘è¿œå¤æ—¶æœŸæ²¡æœ‰æˆªå›¾"},{"categories":["machine_learning","tutorial"],"content":" ä¹‹å‰çš„æˆ‘ ","date":"2022-07-03","objectID":"/bravo_processbar/:0:2","series":[],"tags":["py"],"title":"ç‚«é…·çš„processbar","uri":"/bravo_processbar/#ä¹‹å‰çš„æˆ‘"},{"categories":["machine_learning","tutorial"],"content":" ç°åœ¨çš„æˆ‘ Processbarå®ç° import time import sys import emoji class ProgressBar(object): ''' super progress bar Example: \u003e\u003e\u003e pbar = ProgressBar(n_total=len(train_dataloader), desc=f'EPOCH {_e}/{num_epochs}') \u003e\u003e\u003e pbar(step=step,info={'loss':20}) ''' def __init__(self, n_total, width=6, desc='Training'): self.width = width self.n_total = n_total self.desc = desc self.start_time = time.time() def reset(self): \"\"\"Method to reset internal variables.\"\"\" self.start_time = time.time() def _time_info(self, now, current): time_per_unit = (now - self.start_time) / current if current \u003c self.n_total: eta = time_per_unit * (self.n_total - current) if eta \u003e 3600: eta_format = ('%d:%02d:%02d' % (eta // 3600, (eta % 3600) // 60, eta % 60)) elif eta \u003e 60: eta_format = '%d:%02d' % (eta // 60, eta % 60) else: eta_format = '%ds' % eta time_info = f' - ETA: {eta_format}' else: if time_per_unit \u003e= 1: time_info = f' {time_per_unit:.1f}s/step' elif time_per_unit \u003e= 1e-3: time_info = f' {time_per_unit * 1e3:.1f}ms/step' else: time_info = f' {time_per_unit * 1e6:.1f}us/step' return time_info def _bar(self, current): # âš¡ â“ # you can define your own symbol here ^ ^ # finished symbol f_symbol = emoji.emojize('ğŸš€') # running symbol r_symbol = emoji.emojize('âš¡') recv_per = current / self.n_total bar = f'[{self.desc}] {current}/{self.n_total} [' if recv_per \u003e= 1: recv_per = 1 prog_width = int(self.width * recv_per) if prog_width \u003e 0: bar += f_symbol * (prog_width - 1) if current \u003c self.n_total: bar += r_symbol else: bar += f_symbol bar += '.' * (self.width - prog_width) bar += ']' return bar def __call__(self, step, info={}): now = time.time() current = step + 1 bar = self._bar(current) show_bar = f\"\\r{bar}\" + self._time_info(now, current) if len(info) != 0: show_bar = f'{show_bar} ' + \" [\" + \"-\".join( [f' {key}={value:.4f} ' for key, value in info.items()]) + \"]\" if current \u003e= self.n_total: show_bar += '\\n' sys.stdout.write(show_bar) sys.stdout.flush() ","date":"2022-07-03","objectID":"/bravo_processbar/:0:3","series":[],"tags":["py"],"title":"ç‚«é…·çš„processbar","uri":"/bravo_processbar/#ç°åœ¨çš„æˆ‘"},{"categories":["machine_learning","tutorial"],"content":" ç°åœ¨çš„æˆ‘ Processbarå®ç° import time import sys import emoji class ProgressBar(object): ''' super progress bar Example: \u003e\u003e\u003e pbar = ProgressBar(n_total=len(train_dataloader), desc=f'EPOCH {_e}/{num_epochs}') \u003e\u003e\u003e pbar(step=step,info={'loss':20}) ''' def __init__(self, n_total, width=6, desc='Training'): self.width = width self.n_total = n_total self.desc = desc self.start_time = time.time() def reset(self): \"\"\"Method to reset internal variables.\"\"\" self.start_time = time.time() def _time_info(self, now, current): time_per_unit = (now - self.start_time) / current if current \u003c self.n_total: eta = time_per_unit * (self.n_total - current) if eta \u003e 3600: eta_format = ('%d:%02d:%02d' % (eta // 3600, (eta % 3600) // 60, eta % 60)) elif eta \u003e 60: eta_format = '%d:%02d' % (eta // 60, eta % 60) else: eta_format = '%ds' % eta time_info = f' - ETA: {eta_format}' else: if time_per_unit \u003e= 1: time_info = f' {time_per_unit:.1f}s/step' elif time_per_unit \u003e= 1e-3: time_info = f' {time_per_unit * 1e3:.1f}ms/step' else: time_info = f' {time_per_unit * 1e6:.1f}us/step' return time_info def _bar(self, current): # âš¡ â“ # you can define your own symbol here ^ ^ # finished symbol f_symbol = emoji.emojize('ğŸš€') # running symbol r_symbol = emoji.emojize('âš¡') recv_per = current / self.n_total bar = f'[{self.desc}] {current}/{self.n_total} [' if recv_per \u003e= 1: recv_per = 1 prog_width = int(self.width * recv_per) if prog_width \u003e 0: bar += f_symbol * (prog_width - 1) if current \u003c self.n_total: bar += r_symbol else: bar += f_symbol bar += '.' * (self.width - prog_width) bar += ']' return bar def __call__(self, step, info={}): now = time.time() current = step + 1 bar = self._bar(current) show_bar = f\"\\r{bar}\" + self._time_info(now, current) if len(info) != 0: show_bar = f'{show_bar} ' + \" [\" + \"-\".join( [f' {key}={value:.4f} ' for key, value in info.items()]) + \"]\" if current \u003e= self.n_total: show_bar += '\\n' sys.stdout.write(show_bar) sys.stdout.flush() ","date":"2022-07-03","objectID":"/bravo_processbar/:0:3","series":[],"tags":["py"],"title":"ç‚«é…·çš„processbar","uri":"/bravo_processbar/#processbarå®ç°"},{"categories":["machine_learning","tutorial"],"content":" å¸¸ç”¨emojiåˆ†äº«ä½¬åˆ†äº«ä¼ é€é—¨ https://www.94rg.com/article/1881 ğŸŒ¹ğŸ€ğŸğŸ’°ğŸ“±ğŸŒ™ğŸğŸ‚ğŸƒğŸŒ·ğŸ’ğŸ”ªğŸ”«ğŸ€âš½âš¡ğŸ‘„ğŸ‘ğŸ”¥ emojiè¡¨æƒ… ğŸ˜€ğŸ˜ğŸ˜‚ğŸ˜ƒğŸ˜„ğŸ˜…ğŸ˜†ğŸ˜‰ğŸ˜ŠğŸ˜‹ğŸ˜ğŸ˜ğŸ˜˜ğŸ˜—ğŸ˜™ğŸ˜šâ˜ºğŸ˜‡ğŸ˜ğŸ˜‘ğŸ˜¶ğŸ˜ğŸ˜£ğŸ˜¥ğŸ˜®ğŸ˜¯ğŸ˜ªğŸ˜«ğŸ˜´ğŸ˜ŒğŸ˜›ğŸ˜œğŸ˜ğŸ˜’ğŸ˜“ğŸ˜”ğŸ˜•ğŸ˜²ğŸ˜·ğŸ˜–ğŸ˜ğŸ˜ŸğŸ˜¤ğŸ˜¢ğŸ˜­ğŸ˜¦ğŸ˜§ğŸ˜¨ğŸ˜¬ğŸ˜°ğŸ˜±ğŸ˜³ğŸ˜µğŸ˜¡ğŸ˜  emojiäººç‰© ğŸ‘¦ğŸ‘§ğŸ‘¨ğŸ‘©ğŸ‘´ğŸ‘µğŸ‘¶ğŸ‘±ğŸ‘®ğŸ‘²ğŸ‘³ğŸ‘·ğŸ‘¸ğŸ’‚ğŸ…ğŸ‘°ğŸ‘¼ğŸ’†ğŸ’‡ğŸ™ğŸ™ğŸ™…ğŸ™†ğŸ’ğŸ™‹ğŸ™‡ğŸ™ŒğŸ™ğŸ‘¤ğŸ‘¥ğŸš¶ğŸƒğŸ‘¯ğŸ’ƒğŸ‘«ğŸ‘¬ğŸ‘­ğŸ’ğŸ’‘ğŸ‘ª emojiæ‰‹åŠ¿ ğŸ’ªğŸ‘ˆğŸ‘‰â˜ğŸ‘†ğŸ‘‡âœŒâœ‹ğŸ‘ŒğŸ‘ğŸ‘âœŠğŸ‘ŠğŸ‘‹ğŸ‘ğŸ‘âœ emojiæ—¥å¸¸ ğŸ‘£ğŸ‘€ğŸ‘‚ğŸ‘ƒğŸ‘…ğŸ‘„ğŸ’‹ğŸ‘“ğŸ‘”ğŸ‘•ğŸ‘–ğŸ‘—ğŸ‘˜ğŸ‘™ğŸ‘šğŸ‘›ğŸ‘œğŸ‘ğŸ’ğŸ’¼ğŸ‘ğŸ‘ŸğŸ‘ ğŸ‘¡ğŸ‘¢ğŸ‘‘ğŸ‘’ğŸ©ğŸ“ğŸ’„ğŸ’…ğŸ’ğŸŒ‚ emojiæ‰‹æœº â€‹ ğŸ“±ğŸ“²ğŸ“¶ğŸ“³ğŸ“´â˜ğŸ“ğŸ“ŸğŸ“  emojiå…¬å…± â™»ğŸ§ğŸš®ğŸš°â™¿ğŸš¹ğŸšºğŸš»ğŸš¼ğŸš¾âš ğŸš¸â›”ğŸš«ğŸš³ğŸš­ğŸš¯ğŸš±ğŸš·ğŸ”ğŸ’ˆ emojiåŠ¨ç‰© ğŸ™ˆğŸ™‰ğŸ™ŠğŸµğŸ’ğŸ¶ğŸ•ğŸ©ğŸºğŸ±ğŸ˜ºğŸ˜¸ğŸ˜¹ğŸ˜»ğŸ˜¼ğŸ˜½ğŸ™€ğŸ˜¿ğŸ˜¾ğŸˆğŸ¯ğŸ…ğŸ†ğŸ´ğŸğŸ®ğŸ‚ğŸƒğŸ„ğŸ·ğŸ–ğŸ—ğŸ½ğŸğŸ‘ğŸğŸªğŸ«ğŸ˜ğŸ­ğŸğŸ€ğŸ¹ğŸ°ğŸ‡ğŸ»ğŸ¨ğŸ¼ğŸ¾ğŸ”ğŸ“ğŸ£ğŸ¤ğŸ¥ğŸ¦ğŸ§ğŸ¸ğŸŠğŸ¢ğŸğŸ²ğŸ‰ğŸ³ğŸ‹ğŸ¬ğŸŸğŸ ğŸ¡ğŸ™ğŸšğŸŒğŸ›ğŸœğŸğŸğŸ¦‹ emojiæ¤ç‰© ğŸ’ğŸŒ¸ğŸ’®ğŸŒ¹ğŸŒºğŸŒ»ğŸŒ¼ğŸŒ·ğŸŒ±ğŸŒ²ğŸŒ³ğŸŒ´ğŸŒµğŸŒ¾ğŸŒ¿ğŸ€ğŸğŸ‚ğŸƒ emojiè‡ªç„¶ ğŸŒğŸŒğŸŒğŸŒğŸŒ‘ğŸŒ’ğŸŒ“ğŸŒ”ğŸŒ•ğŸŒ–ğŸŒ—ğŸŒ˜ğŸŒ™ğŸŒšğŸŒ›ğŸŒœâ˜€ğŸŒğŸŒâ­ğŸŒŸğŸŒ â˜â›…â˜”âš¡â„ğŸ”¥ğŸ’§ğŸŒŠ emojié¥®é£Ÿ ğŸ‡ğŸˆğŸ‰ğŸŠğŸ‹ğŸŒğŸğŸğŸğŸğŸ‘ğŸ’ğŸ“ğŸ…ğŸ†ğŸŒ½ğŸ„ğŸŒ°ğŸğŸ–ğŸ—ğŸ”ğŸŸğŸ•ğŸ³ğŸ²ğŸ±ğŸ˜ğŸ™ğŸšğŸ›ğŸœğŸğŸ ğŸ¢ğŸ£ğŸ¤ğŸ¥ğŸ¡ğŸ¦ğŸ§ğŸ¨ğŸ©ğŸªğŸ‚ğŸ°ğŸ«ğŸ¬ğŸ­ğŸ®ğŸ¯ğŸ¼â˜•ğŸµğŸ¶ğŸ·ğŸ¸ğŸ¹ğŸºğŸ»ğŸ´ emojiæ–‡ä½“ ğŸªğŸ­ğŸ¨ğŸ°ğŸš£ğŸ›€ğŸ«ğŸ†âš½âš¾ğŸ€ğŸˆğŸ‰ğŸ¾ğŸ±ğŸ³â›³ğŸ£ğŸ½ğŸ¿ğŸ‚ğŸ„ğŸ‡ğŸŠğŸš´ğŸšµğŸ¯ğŸ®ğŸ²ğŸ·ğŸ¸ğŸºğŸ»ğŸ¬ emojiææ€– ğŸ˜ˆğŸ‘¿ğŸ‘¹ğŸ‘ºğŸ’€â˜ ğŸ‘»ğŸ‘½ğŸ‘¾ğŸ’£ emojiæ—…æ¸¸ ğŸŒ‹ğŸ—»ğŸ ğŸ¡ğŸ¢ğŸ£ğŸ¤ğŸ¥ğŸ¦ğŸ¨ğŸ©ğŸªğŸ«ğŸ¬ğŸ­ğŸ¯ğŸ°ğŸ’’ğŸ—¼ğŸ—½â›ªâ›²ğŸŒğŸŒƒğŸŒ†ğŸŒ‡ğŸŒ‰ğŸŒŒğŸ ğŸ¡ğŸ¢ğŸš‚ğŸšƒğŸš„ğŸš…ğŸš†ğŸš‡ğŸšˆğŸš‰ğŸšŠğŸšğŸšğŸš‹ğŸšŒğŸšğŸšğŸšğŸšğŸš‘ğŸš’ğŸš“ğŸš”ğŸš•ğŸš–ğŸš—ğŸš˜ğŸššğŸš›ğŸšœğŸš²â›½ğŸš¨ğŸš¥ğŸš¦ğŸš§âš“â›µğŸš¤ğŸš¢âœˆğŸ’ºğŸšğŸšŸğŸš ğŸš¡ğŸš€ğŸ‘ğŸ—¿ğŸ›‚ğŸ›ƒğŸ›„ğŸ›… emojiç‰©å“ ğŸ’ŒğŸ’ğŸ”ªğŸ’ˆğŸšªğŸš½ğŸš¿ğŸ›âŒ›â³âŒšâ°ğŸˆğŸ‰ğŸŠğŸğŸğŸğŸ€ğŸğŸ“¯ğŸ“»ğŸ“±ğŸ“²â˜ğŸ“ğŸ“ŸğŸ“ ğŸ”‹ğŸ”ŒğŸ’»ğŸ’½ğŸ’¾ğŸ’¿ğŸ“€ğŸ¥ğŸ“ºğŸ“·ğŸ“¹ğŸ“¼ğŸ”ğŸ”ğŸ”¬ğŸ”­ğŸ“¡ğŸ’¡ğŸ”¦ğŸ®ğŸ“”ğŸ“•ğŸ“–ğŸ“—ğŸ“˜ğŸ“™ğŸ“šğŸ““ğŸ“ƒğŸ“œğŸ“„ğŸ“°ğŸ“‘ğŸ”–ğŸ’°ğŸ’´ğŸ’µğŸ’¶ğŸ’·ğŸ’¸ğŸ’³âœ‰ğŸ“§ğŸ“¨ğŸ“©ğŸ“¤ğŸ“¥ğŸ“¦ğŸ“«ğŸ“ªğŸ“¬ğŸ“­ğŸ“®âœâœ’ğŸ“ğŸ“ğŸ“‚ğŸ“…ğŸ“†ğŸ“‡ğŸ“ˆğŸ“‰ğŸ“ŠğŸ“‹ğŸ“ŒğŸ“ğŸ“ğŸ“ğŸ“âœ‚ğŸ”’ğŸ”“ğŸ”ğŸ”ğŸ”‘ğŸ”¨ğŸ”«ğŸ”§ğŸ”©ğŸ”—ğŸ’‰ğŸ’ŠğŸš¬ğŸ”®ğŸš©ğŸŒğŸ’¦ğŸ’¨ emojiæ ‡å¿— â™ â™¥â™¦â™£ğŸ€„ğŸ´ğŸ”‡ğŸ”ˆğŸ”‰ğŸ”ŠğŸ“¢ğŸ“£ğŸ’¤ğŸ’¢ğŸ’¬ğŸ’­â™¨ğŸŒ€ğŸ””ğŸ”•âœ¡âœğŸ”¯ğŸ“›ğŸ”°ğŸ”±â­•âœ…â˜‘âœ”âœ–âŒââ•â–â—â°â¿ã€½âœ³âœ´â‡â€¼â‰â“â”â•â—Â©Â®â„¢ğŸ¦ğŸ”…ğŸ”†ğŸ’¯ğŸ” ğŸ”¡ğŸ”¢ğŸ”£ğŸ”¤ğŸ…°ğŸ†ğŸ…±ğŸ†‘ğŸ†’ğŸ†“â„¹ğŸ†”â“‚ğŸ†•ğŸ†–ğŸ…¾ğŸ†—ğŸ…¿ğŸ†˜ğŸ†™ğŸ†šğŸˆğŸˆ‚ğŸˆ·ğŸˆ¶ğŸˆ¯ğŸ‰ğŸˆ¹ğŸˆšğŸˆ²ğŸ‰‘ğŸˆ¸ğŸˆ´ğŸˆ³ãŠ—ãŠ™ğŸˆºğŸˆµâ–ªâ–«â—»â—¼â—½â—¾â¬›â¬œğŸ”¶ğŸ”·ğŸ”¸ğŸ”¹ğŸ”ºğŸ”»ğŸ’ ğŸ”²ğŸ”³âšªâš«ğŸ”´ğŸ”µ emojiç”Ÿè‚– ğŸğŸ‚ğŸ…ğŸ‡ğŸ‰ğŸğŸğŸğŸ’ğŸ“ğŸ•ğŸ– emojiæ˜Ÿåº§ â™ˆâ™‰â™Šâ™‹â™Œâ™â™â™â™â™‘â™’â™“â› emojié’Ÿè¡¨ ğŸ•›ğŸ•§ğŸ•ğŸ•œğŸ•‘ğŸ•ğŸ•’ğŸ•ğŸ•“ğŸ•ŸğŸ•”ğŸ• ğŸ••ğŸ•¡ğŸ•–ğŸ•¢ğŸ•—ğŸ•£ğŸ•˜ğŸ•¤ğŸ•™ğŸ•¥ğŸ•šğŸ•¦âŒ›â³âŒšâ°â±â²ğŸ•° emojiå¿ƒå½¢ ğŸ’˜â¤ğŸ’“ğŸ’”ğŸ’•ğŸ’–ğŸ’—ğŸ’™ğŸ’šğŸ’›ğŸ’œğŸ’ğŸ’ğŸ’Ÿâ£ emojièŠ±è‰ ğŸ’ğŸŒ¸ğŸ’®ğŸŒ¹ğŸŒºğŸŒ»ğŸŒ¼ğŸŒ·ğŸŒ±ğŸŒ¿ğŸ€ emojiæ ‘å¶ ğŸŒ¿ğŸ€ğŸğŸ‚ğŸƒ emojiæœˆäº® ğŸŒ‘ğŸŒ’ğŸŒ“ğŸŒ”ğŸŒ•ğŸŒ–ğŸŒ—ğŸŒ˜ğŸŒ™ğŸŒšğŸŒ›ğŸŒœğŸŒ emojiæ°´æœ ğŸ‡ğŸˆğŸ‰ğŸŠğŸ‹ğŸŒğŸğŸğŸğŸğŸ‘ğŸ’ğŸ“ emojié’±å¸ ğŸ’´ğŸ’µğŸ’¶ğŸ’·ğŸ’°ğŸ’¸ğŸ’³ emojiäº¤é€š ğŸš‚ğŸšƒğŸš„ğŸš…ğŸš†ğŸš‡ğŸšˆğŸš‰ğŸšŠğŸšğŸšğŸš‹ğŸšŒğŸšğŸšğŸšğŸšğŸš‘ğŸš’ğŸš“ğŸš”ğŸš•ğŸš–ğŸš—ğŸš˜ğŸššğŸš›ğŸšœğŸš²â›½ğŸš¨ğŸš¥ğŸš¦ğŸš§âš“â›µğŸš£ğŸš¤ğŸš¢âœˆğŸ’ºğŸšğŸšŸğŸš ğŸš¡ğŸš€ emojiå»ºç­‘ ğŸ ğŸ¡ğŸ¢ğŸ£ğŸ¤ğŸ¥ğŸ¦ğŸ¨ğŸ©ğŸªğŸ«ğŸ¬ğŸ­ğŸ¯ğŸ°ğŸ’’ğŸ—¼ğŸ—½â›ªğŸŒ†ğŸŒ‡ğŸŒ‰ emojiåŠå…¬ ğŸ“±ğŸ“²â˜ğŸ“ğŸ“ŸğŸ“ ğŸ”‹ğŸ”ŒğŸ’»ğŸ’½ğŸ’¾ğŸ’¿ğŸ“€ğŸ¥ğŸ“ºğŸ“·ğŸ“¹ğŸ“¼ğŸ”ğŸ”ğŸ”¬ğŸ”­ğŸ“¡ğŸ“”ğŸ“•ğŸ“–ğŸ“—ğŸ“˜ğŸ“™ğŸ“šğŸ““ğŸ“ƒğŸ“œğŸ“„ğŸ“°ğŸ“‘ğŸ”–ğŸ’³âœ‰ğŸ“§ğŸ“¨ğŸ“©ğŸ“¤ğŸ“¥ğŸ“¦ğŸ“«ğŸ“ªğŸ“¬ğŸ“­ğŸ“®âœâœ’ğŸ“ğŸ“ğŸ“‚ğŸ“…ğŸ“†ğŸ“‡ğŸ“ˆğŸ“‰ğŸ“ŠğŸ“‹ğŸ“ŒğŸ“ğŸ“ğŸ“ğŸ“âœ‚ğŸ”’ğŸ”“ğŸ”ğŸ”ğŸ”‘ emojiç®­å¤´ â¬†â†—â¡â†˜â¬‡â†™â¬…â†–â†•â†”â†©â†ªâ¤´â¤µğŸ”ƒğŸ”„ğŸ”™ğŸ”šğŸ”›ğŸ”œğŸ” ","date":"2022-07-03","objectID":"/bravo_processbar/:0:4","series":[],"tags":["py"],"title":"ç‚«é…·çš„processbar","uri":"/bravo_processbar/#å¸¸ç”¨emojiåˆ†äº«"},{"categories":["machine_learning"],"content":" ä»€ä¹ˆæ˜¯KæŠ˜äº¤å‰éªŒè¯ï¼Ÿå¦‚æœä½ æœ‰äº”ä¸ªåœŸè±†ï¼Œä½ æƒ³è¦æ•™ä¼šä¸€ä¸ªå°ç›†å‹ï¼Œè¿™äº›æ˜¯åœŸè±†ï¼Œå¥½äº†ï¼Œç°åœ¨ä½ æ‹¿å‡ºå››ä¸ªåœŸè±†è®©ä»–é€ä¸€è®¤è¯†ï¼Œæœ€åæ‹¿å‡ºç¬¬äº”ä¸ªåœŸè±†æ¥æµ‹è¯•ä»–æ˜¯å¦çœŸæ­£åœ°è®¤è¯†äº†åœŸè±†ï¼Œé‚£ä¹ˆåœŸè±†å¥‡å½¢æ€ªçŠ¶ï¼Œç¬¬äº”ä¸ªåœŸè±†å¯ä»¥æ˜¯äº”ä¸ªä¸­çš„ä»»æ„ä¸€ä¸ªï¼Œé‚£ä¹ˆè¿™å°±è®©æˆ‘ä»¬æ‹¥æœ‰äº†äº”å¥—æ–¹æ¡ˆæ¥æ•™ä¼šå°æœ‹å‹å¦‚ä½•è®¤è¯†åœŸè±†ï¼Œå³ç”¨å…¶ä¸­çš„å››ä¸ªåšè®¤è¯†å­¦ä¹ ï¼Œå‰©ä¸‹çš„ä¸€ä¸ªä½œä¸ºæµ‹è¯•å­¦ä¹ æˆæœã€‚è¿™å°±æ˜¯ä¸€ä¸ªäº”æŠ˜äº¤å‰éªŒè¯çš„ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥å°†æ¯ä¸€ç§å­¦ä¹ æ–¹æ¡ˆçš„å­¦ä¹ æ•ˆæœï¼ˆå¯ä»¥æ˜¯å­©å­ç¡®ä¿¡ç¬¬äº”ä¸ªåœŸè±†æ˜¯åœŸè±†çš„ç½®ä¿¡åº¦ï¼‰åŠ èµ·æ¥å–å¹³å‡æ¥ä»£è¡¨è¿™ä¸ªå°ç›†å‹å­¦ä¹ è®¤è¯†åœŸè±†èƒ½åŠ›çš„æ€»ä½“è¯„åˆ†ï¼Œä»è€Œå‡å°å¯¹æ•°æ®çš„biasã€‚ ","date":"2022-06-29","objectID":"/kfold_cross_validation/:1:0","series":["python_data_analysis"],"tags":["py"],"title":"KæŠ˜äº¤å‰éªŒè¯","uri":"/kfold_cross_validation/#ä»€ä¹ˆæ˜¯kæŠ˜äº¤å‰éªŒè¯"},{"categories":["machine_learning"],"content":" model_selection å®ç°äº¤å‰éªŒè¯æ•°æ®é›†åˆ’åˆ† # ==================================================== # Library # ==================================================== import pandas as pd from sklearn.model_selection import train_test_split, KFold, GroupKFold, StratifiedKFold, StratifiedGroupKFold ","date":"2022-06-29","objectID":"/kfold_cross_validation/:2:0","series":["python_data_analysis"],"tags":["py"],"title":"KæŠ˜äº¤å‰éªŒè¯","uri":"/kfold_cross_validation/#model_selection-å®ç°äº¤å‰éªŒè¯æ•°æ®é›†åˆ’åˆ†"},{"categories":["machine_learning"],"content":" ç®€å•çš„æ•°æ®åˆ’åˆ†(ä¸æ¶‰åŠå¤šæŠ˜) df = pd.DataFrame({\"featrues\": [\"long\", \"high\", \"long\", \"short\", \"big\", \"small\"], \"labels\": [\"1\", \"1\", \"1\", \"0\", \"1\", \"0\"]}) train, test = train_test_split(df, train_size=0.9, shuffle=True) train out: featrues labels 4 big 1 0 long 1 5 small 0 2 long 1 1 high 1 ","date":"2022-06-29","objectID":"/kfold_cross_validation/:2:1","series":["python_data_analysis"],"tags":["py"],"title":"KæŠ˜äº¤å‰éªŒè¯","uri":"/kfold_cross_validation/#ç®€å•çš„æ•°æ®åˆ’åˆ†ä¸æ¶‰åŠå¤šæŠ˜"},{"categories":["machine_learning"],"content":" KFold list data X = [\"a\", \"b\", \"c\", \"d\"] # n_splits=2 ä»£è¡¨åˆ†æˆä¸¤æŠ˜ kf = KFold(n_splits=2, shuffle=True, random_state=42) for train, test in kf.split(X): print(\"%s %s\" % (train, test)) out: [0 2] [1 3] [1 3] [0 2] pd data df = pd.DataFrame({\"featrues\": [\"long\", \"high\", \"long\", \"short\", \"big\", \"small\"], \"labels\": [\"1\", \"1\", \"1\", \"0\", \"1\", \"0\"]}) print(df.head()) out: featrues labels 0 long 1 1 high 1 2 long 1 3 short 0 4 big 1 kf = KFold(n_splits=4, shuffle=True, random_state=42) for train, test in kf.split(df): print(\"%s %s\" % (train, test)) out: [2 3 4 5] [0 1] [0 1 3 4] [2 5] [0 1 2 3 5] [4] [0 1 2 4 5] [3] # æ–°å»ºä¸€åˆ— df['fold'] = -1 # ç»™splitçš„æ¯ä¸€æŠ˜ç”¨enumerateéå†ç¼–å·ï¼Œæ¯”å¦‚è¿™é‡Œæ˜¯0,1,2,3 for idx, (train, test) in enumerate(kf.split(df)): print(idx, train, test) out: 0 [2 3 4 5] [0 1] 1 [0 1 3 4] [2 5] 2 [0 1 2 3 5] [4] 3 [0 1 2 4 5] [3] ä¸ºæ¯ä¸€æŠ˜çš„æ•°æ®è¡Œæ‰“æ ‡è®°å¦‚ä¸‹(å®Œæ•´ç¤ºä¾‹) df = pd.DataFrame({\"featrues\": [\"long\", \"high\", \"long\", \"short\", \"big\", \"small\"], \"labels\": [\"1\", \"1\", \"1\", \"0\", \"1\", \"0\"]}) df['fold'] = -1 kf = KFold(n_splits=4, shuffle=True, random_state=42) for idx, (train, test) in enumerate(kf.split(df)): df.loc[test,'fold'] = idx print(df.head()) out: featrues labels fold 0 long 1 0 1 high 1 0 2 long 1 1 3 short 0 3 4 big 1 2 ","date":"2022-06-29","objectID":"/kfold_cross_validation/:2:2","series":["python_data_analysis"],"tags":["py"],"title":"KæŠ˜äº¤å‰éªŒè¯","uri":"/kfold_cross_validation/#kfold"},{"categories":["machine_learning"],"content":" KFold list data X = [\"a\", \"b\", \"c\", \"d\"] # n_splits=2 ä»£è¡¨åˆ†æˆä¸¤æŠ˜ kf = KFold(n_splits=2, shuffle=True, random_state=42) for train, test in kf.split(X): print(\"%s %s\" % (train, test)) out: [0 2] [1 3] [1 3] [0 2] pd data df = pd.DataFrame({\"featrues\": [\"long\", \"high\", \"long\", \"short\", \"big\", \"small\"], \"labels\": [\"1\", \"1\", \"1\", \"0\", \"1\", \"0\"]}) print(df.head()) out: featrues labels 0 long 1 1 high 1 2 long 1 3 short 0 4 big 1 kf = KFold(n_splits=4, shuffle=True, random_state=42) for train, test in kf.split(df): print(\"%s %s\" % (train, test)) out: [2 3 4 5] [0 1] [0 1 3 4] [2 5] [0 1 2 3 5] [4] [0 1 2 4 5] [3] # æ–°å»ºä¸€åˆ— df['fold'] = -1 # ç»™splitçš„æ¯ä¸€æŠ˜ç”¨enumerateéå†ç¼–å·ï¼Œæ¯”å¦‚è¿™é‡Œæ˜¯0,1,2,3 for idx, (train, test) in enumerate(kf.split(df)): print(idx, train, test) out: 0 [2 3 4 5] [0 1] 1 [0 1 3 4] [2 5] 2 [0 1 2 3 5] [4] 3 [0 1 2 4 5] [3] ä¸ºæ¯ä¸€æŠ˜çš„æ•°æ®è¡Œæ‰“æ ‡è®°å¦‚ä¸‹(å®Œæ•´ç¤ºä¾‹) df = pd.DataFrame({\"featrues\": [\"long\", \"high\", \"long\", \"short\", \"big\", \"small\"], \"labels\": [\"1\", \"1\", \"1\", \"0\", \"1\", \"0\"]}) df['fold'] = -1 kf = KFold(n_splits=4, shuffle=True, random_state=42) for idx, (train, test) in enumerate(kf.split(df)): df.loc[test,'fold'] = idx print(df.head()) out: featrues labels fold 0 long 1 0 1 high 1 0 2 long 1 1 3 short 0 3 4 big 1 2 ","date":"2022-06-29","objectID":"/kfold_cross_validation/:2:2","series":["python_data_analysis"],"tags":["py"],"title":"KæŠ˜äº¤å‰éªŒè¯","uri":"/kfold_cross_validation/#list-data"},{"categories":["machine_learning"],"content":" KFold list data X = [\"a\", \"b\", \"c\", \"d\"] # n_splits=2 ä»£è¡¨åˆ†æˆä¸¤æŠ˜ kf = KFold(n_splits=2, shuffle=True, random_state=42) for train, test in kf.split(X): print(\"%s %s\" % (train, test)) out: [0 2] [1 3] [1 3] [0 2] pd data df = pd.DataFrame({\"featrues\": [\"long\", \"high\", \"long\", \"short\", \"big\", \"small\"], \"labels\": [\"1\", \"1\", \"1\", \"0\", \"1\", \"0\"]}) print(df.head()) out: featrues labels 0 long 1 1 high 1 2 long 1 3 short 0 4 big 1 kf = KFold(n_splits=4, shuffle=True, random_state=42) for train, test in kf.split(df): print(\"%s %s\" % (train, test)) out: [2 3 4 5] [0 1] [0 1 3 4] [2 5] [0 1 2 3 5] [4] [0 1 2 4 5] [3] # æ–°å»ºä¸€åˆ— df['fold'] = -1 # ç»™splitçš„æ¯ä¸€æŠ˜ç”¨enumerateéå†ç¼–å·ï¼Œæ¯”å¦‚è¿™é‡Œæ˜¯0,1,2,3 for idx, (train, test) in enumerate(kf.split(df)): print(idx, train, test) out: 0 [2 3 4 5] [0 1] 1 [0 1 3 4] [2 5] 2 [0 1 2 3 5] [4] 3 [0 1 2 4 5] [3] ä¸ºæ¯ä¸€æŠ˜çš„æ•°æ®è¡Œæ‰“æ ‡è®°å¦‚ä¸‹(å®Œæ•´ç¤ºä¾‹) df = pd.DataFrame({\"featrues\": [\"long\", \"high\", \"long\", \"short\", \"big\", \"small\"], \"labels\": [\"1\", \"1\", \"1\", \"0\", \"1\", \"0\"]}) df['fold'] = -1 kf = KFold(n_splits=4, shuffle=True, random_state=42) for idx, (train, test) in enumerate(kf.split(df)): df.loc[test,'fold'] = idx print(df.head()) out: featrues labels fold 0 long 1 0 1 high 1 0 2 long 1 1 3 short 0 3 4 big 1 2 ","date":"2022-06-29","objectID":"/kfold_cross_validation/:2:2","series":["python_data_analysis"],"tags":["py"],"title":"KæŠ˜äº¤å‰éªŒè¯","uri":"/kfold_cross_validation/#pd-data"},{"categories":["machine_learning"],"content":" StratifiedKFoldæŒ‰æ ‡ç­¾æ¯”ä¾‹æ¥åˆ’åˆ†æ¯ä¸€æŠ˜çš„éªŒè¯é›†å’Œè®­ç»ƒé›†ï¼Œè§‚å¯Ÿä¸‹åˆ—æ•°æ®çš„æ ‡ç­¾ï¼Œå®¹æ˜“å¾—åˆ°ï¼Œåœ¨æœªåˆ’åˆ†æ•°æ®é›†ä¹‹å‰ï¼Œæ ‡ç­¾æ¯”ä¾‹ä¸º\"1\": â€œ0â€ â€”\u003e 2:1 df = pd.DataFrame({\"featrues\": [\"long\", \"high\", \"long\", \"short\", \"big\", \"small\"], \"labels\": [\"1\", \"1\", \"1\", \"0\", \"1\", \"0\"]}) df['fold'] = -1 skf = StratifiedKFold(n_splits=2) for idx, (train, test) in enumerate(skf.split(X=df, y=df[\"labels\"])): df.loc[test,'fold'] = idx print(df) out: featrues labels fold 0 long 1 0 1 high 1 0 2 long 1 1 3 short 0 0 4 big 1 1 5 small 0 1 å¯ä»¥çœ‹åˆ°ï¼Œåˆ†æŠ˜ä¹‹åï¼Œç¬¬0æŠ˜ä¸­ï¼Œæ ‡ç­¾\"1\":â€œ0â€ ä¹Ÿå‘ˆç°ä¸º2:1çš„æ¯”ä¾‹ï¼Œç¬¬1æŠ˜ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ ","date":"2022-06-29","objectID":"/kfold_cross_validation/:2:3","series":["python_data_analysis"],"tags":["py"],"title":"KæŠ˜äº¤å‰éªŒè¯","uri":"/kfold_cross_validation/#stratifiedkfold"},{"categories":["machine_learning"],"content":" GroupKFold pd dataæŒ‰ç…§groupåˆ—çš„å€¼æ¥åˆ†æŠ˜ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œgroupåˆ—å†…çš„å€¼çš„ç§ç±»éœ€è¦å¤§äºç­‰äºn_splitsçš„å€¼ã€‚ df = pd.DataFrame({\"featrues\": [\"long\", \"high\", \"long\", \"short\", \"big\", \"small\"], \"labels\": [\"1\", \"2\", \"1\", \"0\", \"1\", \"0\"]}) # labelæœ‰ä¸‰ç±»å€¼ï¼Œå¯ä»¥ç”¨è¿™ä¸ªä½œä¸ºgroupåˆ—ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å®šä¹‰æ–°å»ºgroupåˆ— df['fold'] = -1 gkf = GroupKFold(n_splits=2) # n_splitsè¦æ»¡è¶³ 2 \u003c= n_splits \u003c= groupåˆ—ä¸­çš„å”¯ä¸€å€¼æ•°é‡ for idx, (train, test) in enumerate(gkf.split(X=df, y=df[\"labels\"], groups=df[\"labels\"])): df.loc[test,'fold'] = idx print(df.head()) out: featrues labels fold 0 long 1 0 1 high 2 1 2 long 1 0 3 short 0 1 4 big 1 0 ","date":"2022-06-29","objectID":"/kfold_cross_validation/:2:4","series":["python_data_analysis"],"tags":["py"],"title":"KæŠ˜äº¤å‰éªŒè¯","uri":"/kfold_cross_validation/#groupkfold"},{"categories":["machine_learning"],"content":" GroupKFold pd dataæŒ‰ç…§groupåˆ—çš„å€¼æ¥åˆ†æŠ˜ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œgroupåˆ—å†…çš„å€¼çš„ç§ç±»éœ€è¦å¤§äºç­‰äºn_splitsçš„å€¼ã€‚ df = pd.DataFrame({\"featrues\": [\"long\", \"high\", \"long\", \"short\", \"big\", \"small\"], \"labels\": [\"1\", \"2\", \"1\", \"0\", \"1\", \"0\"]}) # labelæœ‰ä¸‰ç±»å€¼ï¼Œå¯ä»¥ç”¨è¿™ä¸ªä½œä¸ºgroupåˆ—ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å®šä¹‰æ–°å»ºgroupåˆ— df['fold'] = -1 gkf = GroupKFold(n_splits=2) # n_splitsè¦æ»¡è¶³ 2 \u003c= n_splits \u003c= groupåˆ—ä¸­çš„å”¯ä¸€å€¼æ•°é‡ for idx, (train, test) in enumerate(gkf.split(X=df, y=df[\"labels\"], groups=df[\"labels\"])): df.loc[test,'fold'] = idx print(df.head()) out: featrues labels fold 0 long 1 0 1 high 2 1 2 long 1 0 3 short 0 1 4 big 1 0 ","date":"2022-06-29","objectID":"/kfold_cross_validation/:2:4","series":["python_data_analysis"],"tags":["py"],"title":"KæŠ˜äº¤å‰éªŒè¯","uri":"/kfold_cross_validation/#pd-data-1"},{"categories":["machine_learning"],"content":" StratifiedGroupKFold list dataæ­¤æ–¹æ³•ç»“åˆäº†StratifiedKFoldå’ŒGroupKFoldï¼Œåœ¨æŒ‰groupè¿›è¡Œåˆ†æŠ˜çš„åŒæ—¶å°½é‡ä¿è¯æ¯ä¸€æŠ˜åˆ†å‡ºçš„æ•°æ®æ¥è¿‘åˆ’åˆ†å‰çš„æ ‡ç­¾åˆ†å¸ƒ(è‡ªç„¶ï¼Œå‰©ä¸‹çš„ä¹Ÿæ˜¯ç”±å…¶ä»–æŠ˜ç»„æˆï¼Œä¹Ÿè‡ªç„¶ç¬¦åˆæ ‡ç­¾çš„æ•°æ®åˆ†å¸ƒ)ã€‚ from sklearn.model_selection import StratifiedGroupKFold X = list(range(18)) y = [1] * 6 + [0] * 12 groups = [1, 2, 3, 3, 4, 4, 1, 1, 2, 2, 3, 4, 5, 5, 5, 6, 6, 6] sgkf = StratifiedGroupKFold(n_splits=3) for train, test in sgkf.split(X, y, groups=groups): print(\"%s %s\" % (train, test)) out: å®è·µè¯´æ˜ã€‚ åœ¨ç›®å‰çš„å®ç°ä¸­ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ä¸å¯èƒ½å®ç°å®Œå…¨æ´—ç‰Œã€‚å½“shuffle=Trueæ—¶ï¼Œä¼šå‘ç”Ÿä»¥ä¸‹æƒ…å†µã€‚ æ‰€æœ‰çš„groupéƒ½è¢«æ‰“ä¹±äº†ã€‚ ä½¿ç”¨ç¨³å®šçš„æ’åºæ³•ï¼ŒæŒ‰ç…§ç±»çš„æ ‡å‡†åå·®å¯¹ç»„è¿›è¡Œæ’åºã€‚ æ’åºåçš„ç»„è¢«è¿­ä»£ï¼Œå¹¶åˆ†é…ç»™æ¯ä¸€æŠ˜ã€‚ è¿™æ„å‘³ç€åªæœ‰å…·æœ‰ç›¸åŒçš„ç±»åˆ†å¸ƒæ ‡å‡†å·®çš„ç»„æ‰ä¼šè¢«æ‰“ä¹±ï¼Œè¿™åœ¨æ¯ä¸ªç»„åªæœ‰ä¸€ä¸ªç±»æ—¶å¯èƒ½å¾ˆæœ‰ç”¨ã€‚ è¯¥ç®—æ³•è´ªå©ªåœ°å°†æ¯ä¸ªç»„åˆ†é…åˆ°n_splitsæµ‹è¯•é›†ä¸­çš„ä¸€ä¸ªï¼Œé€‰æ‹©æµ‹è¯•é›†ï¼Œä½¿å„æµ‹è¯•é›†çš„ç±»åˆ†å¸ƒå·®å¼‚æœ€å°ã€‚ç»„çš„åˆ†é…ä»ç±»åˆ«é¢‘ç‡æ–¹å·®æœ€å¤§çš„ç»„åˆ°æœ€å°çš„ç»„è¿›è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸€ä¸ªæˆ–å‡ ä¸ªç±»åˆ«ä¸Šè¾¾åˆ°å³°å€¼çš„å¤§ç»„è¢«é¦–å…ˆåˆ†é…ã€‚ è¿™ç§åˆ†æ³•åœ¨æŸç§æ„ä¹‰ä¸Šæ˜¯æ¬¡ä¼˜çš„ï¼Œå®ƒå¯èƒ½äº§ç”Ÿä¸å¹³è¡¡çš„åˆ†æ³•ï¼Œå³ä½¿å®Œç¾çš„åˆ†å±‚æ˜¯å¯èƒ½çš„ã€‚å¦‚æœä½ åœ¨æ¯ä¸ªç»„ä¸­çš„ç±»çš„åˆ†å¸ƒç›¸å¯¹æ¥è¿‘ï¼Œä½¿ç”¨GroupKFoldä¼šæ›´å¥½ã€‚ pd data df = pd.DataFrame({\"featrues\": [\"long\", \"high\", \"long\", \"short\", \"big\", \"small\"], \"labels\": [\"1\", \"1\", \"1\", \"0\", \"1\", \"0\"]}) df['fold'] = -1 sgkf = StratifiedGroupKFold(n_splits=2) for idx, (train, test) in enumerate(sgkf.split(X=df, y=df[\"labels\"], groups=df[\"labels\"])): df.loc[test,'fold'] = idx print(df) featrues labels fold 0 long 1 0 1 high 1 0 2 long 1 0 3 short 0 1 4 big 1 0 5 small 0 1 æ›´å¤šè¯¦è§å®˜æ–¹æ–‡æ¡£ ","date":"2022-06-29","objectID":"/kfold_cross_validation/:2:5","series":["python_data_analysis"],"tags":["py"],"title":"KæŠ˜äº¤å‰éªŒè¯","uri":"/kfold_cross_validation/#stratifiedgroupkfold"},{"categories":["machine_learning"],"content":" StratifiedGroupKFold list dataæ­¤æ–¹æ³•ç»“åˆäº†StratifiedKFoldå’ŒGroupKFoldï¼Œåœ¨æŒ‰groupè¿›è¡Œåˆ†æŠ˜çš„åŒæ—¶å°½é‡ä¿è¯æ¯ä¸€æŠ˜åˆ†å‡ºçš„æ•°æ®æ¥è¿‘åˆ’åˆ†å‰çš„æ ‡ç­¾åˆ†å¸ƒ(è‡ªç„¶ï¼Œå‰©ä¸‹çš„ä¹Ÿæ˜¯ç”±å…¶ä»–æŠ˜ç»„æˆï¼Œä¹Ÿè‡ªç„¶ç¬¦åˆæ ‡ç­¾çš„æ•°æ®åˆ†å¸ƒ)ã€‚ from sklearn.model_selection import StratifiedGroupKFold X = list(range(18)) y = [1] * 6 + [0] * 12 groups = [1, 2, 3, 3, 4, 4, 1, 1, 2, 2, 3, 4, 5, 5, 5, 6, 6, 6] sgkf = StratifiedGroupKFold(n_splits=3) for train, test in sgkf.split(X, y, groups=groups): print(\"%s %s\" % (train, test)) out: å®è·µè¯´æ˜ã€‚ åœ¨ç›®å‰çš„å®ç°ä¸­ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ä¸å¯èƒ½å®ç°å®Œå…¨æ´—ç‰Œã€‚å½“shuffle=Trueæ—¶ï¼Œä¼šå‘ç”Ÿä»¥ä¸‹æƒ…å†µã€‚ æ‰€æœ‰çš„groupéƒ½è¢«æ‰“ä¹±äº†ã€‚ ä½¿ç”¨ç¨³å®šçš„æ’åºæ³•ï¼ŒæŒ‰ç…§ç±»çš„æ ‡å‡†åå·®å¯¹ç»„è¿›è¡Œæ’åºã€‚ æ’åºåçš„ç»„è¢«è¿­ä»£ï¼Œå¹¶åˆ†é…ç»™æ¯ä¸€æŠ˜ã€‚ è¿™æ„å‘³ç€åªæœ‰å…·æœ‰ç›¸åŒçš„ç±»åˆ†å¸ƒæ ‡å‡†å·®çš„ç»„æ‰ä¼šè¢«æ‰“ä¹±ï¼Œè¿™åœ¨æ¯ä¸ªç»„åªæœ‰ä¸€ä¸ªç±»æ—¶å¯èƒ½å¾ˆæœ‰ç”¨ã€‚ è¯¥ç®—æ³•è´ªå©ªåœ°å°†æ¯ä¸ªç»„åˆ†é…åˆ°n_splitsæµ‹è¯•é›†ä¸­çš„ä¸€ä¸ªï¼Œé€‰æ‹©æµ‹è¯•é›†ï¼Œä½¿å„æµ‹è¯•é›†çš„ç±»åˆ†å¸ƒå·®å¼‚æœ€å°ã€‚ç»„çš„åˆ†é…ä»ç±»åˆ«é¢‘ç‡æ–¹å·®æœ€å¤§çš„ç»„åˆ°æœ€å°çš„ç»„è¿›è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸€ä¸ªæˆ–å‡ ä¸ªç±»åˆ«ä¸Šè¾¾åˆ°å³°å€¼çš„å¤§ç»„è¢«é¦–å…ˆåˆ†é…ã€‚ è¿™ç§åˆ†æ³•åœ¨æŸç§æ„ä¹‰ä¸Šæ˜¯æ¬¡ä¼˜çš„ï¼Œå®ƒå¯èƒ½äº§ç”Ÿä¸å¹³è¡¡çš„åˆ†æ³•ï¼Œå³ä½¿å®Œç¾çš„åˆ†å±‚æ˜¯å¯èƒ½çš„ã€‚å¦‚æœä½ åœ¨æ¯ä¸ªç»„ä¸­çš„ç±»çš„åˆ†å¸ƒç›¸å¯¹æ¥è¿‘ï¼Œä½¿ç”¨GroupKFoldä¼šæ›´å¥½ã€‚ pd data df = pd.DataFrame({\"featrues\": [\"long\", \"high\", \"long\", \"short\", \"big\", \"small\"], \"labels\": [\"1\", \"1\", \"1\", \"0\", \"1\", \"0\"]}) df['fold'] = -1 sgkf = StratifiedGroupKFold(n_splits=2) for idx, (train, test) in enumerate(sgkf.split(X=df, y=df[\"labels\"], groups=df[\"labels\"])): df.loc[test,'fold'] = idx print(df) featrues labels fold 0 long 1 0 1 high 1 0 2 long 1 0 3 short 0 1 4 big 1 0 5 small 0 1 æ›´å¤šè¯¦è§å®˜æ–¹æ–‡æ¡£ ","date":"2022-06-29","objectID":"/kfold_cross_validation/:2:5","series":["python_data_analysis"],"tags":["py"],"title":"KæŠ˜äº¤å‰éªŒè¯","uri":"/kfold_cross_validation/#list-data-1"},{"categories":["machine_learning"],"content":" StratifiedGroupKFold list dataæ­¤æ–¹æ³•ç»“åˆäº†StratifiedKFoldå’ŒGroupKFoldï¼Œåœ¨æŒ‰groupè¿›è¡Œåˆ†æŠ˜çš„åŒæ—¶å°½é‡ä¿è¯æ¯ä¸€æŠ˜åˆ†å‡ºçš„æ•°æ®æ¥è¿‘åˆ’åˆ†å‰çš„æ ‡ç­¾åˆ†å¸ƒ(è‡ªç„¶ï¼Œå‰©ä¸‹çš„ä¹Ÿæ˜¯ç”±å…¶ä»–æŠ˜ç»„æˆï¼Œä¹Ÿè‡ªç„¶ç¬¦åˆæ ‡ç­¾çš„æ•°æ®åˆ†å¸ƒ)ã€‚ from sklearn.model_selection import StratifiedGroupKFold X = list(range(18)) y = [1] * 6 + [0] * 12 groups = [1, 2, 3, 3, 4, 4, 1, 1, 2, 2, 3, 4, 5, 5, 5, 6, 6, 6] sgkf = StratifiedGroupKFold(n_splits=3) for train, test in sgkf.split(X, y, groups=groups): print(\"%s %s\" % (train, test)) out: å®è·µè¯´æ˜ã€‚ åœ¨ç›®å‰çš„å®ç°ä¸­ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ä¸å¯èƒ½å®ç°å®Œå…¨æ´—ç‰Œã€‚å½“shuffle=Trueæ—¶ï¼Œä¼šå‘ç”Ÿä»¥ä¸‹æƒ…å†µã€‚ æ‰€æœ‰çš„groupéƒ½è¢«æ‰“ä¹±äº†ã€‚ ä½¿ç”¨ç¨³å®šçš„æ’åºæ³•ï¼ŒæŒ‰ç…§ç±»çš„æ ‡å‡†åå·®å¯¹ç»„è¿›è¡Œæ’åºã€‚ æ’åºåçš„ç»„è¢«è¿­ä»£ï¼Œå¹¶åˆ†é…ç»™æ¯ä¸€æŠ˜ã€‚ è¿™æ„å‘³ç€åªæœ‰å…·æœ‰ç›¸åŒçš„ç±»åˆ†å¸ƒæ ‡å‡†å·®çš„ç»„æ‰ä¼šè¢«æ‰“ä¹±ï¼Œè¿™åœ¨æ¯ä¸ªç»„åªæœ‰ä¸€ä¸ªç±»æ—¶å¯èƒ½å¾ˆæœ‰ç”¨ã€‚ è¯¥ç®—æ³•è´ªå©ªåœ°å°†æ¯ä¸ªç»„åˆ†é…åˆ°n_splitsæµ‹è¯•é›†ä¸­çš„ä¸€ä¸ªï¼Œé€‰æ‹©æµ‹è¯•é›†ï¼Œä½¿å„æµ‹è¯•é›†çš„ç±»åˆ†å¸ƒå·®å¼‚æœ€å°ã€‚ç»„çš„åˆ†é…ä»ç±»åˆ«é¢‘ç‡æ–¹å·®æœ€å¤§çš„ç»„åˆ°æœ€å°çš„ç»„è¿›è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸€ä¸ªæˆ–å‡ ä¸ªç±»åˆ«ä¸Šè¾¾åˆ°å³°å€¼çš„å¤§ç»„è¢«é¦–å…ˆåˆ†é…ã€‚ è¿™ç§åˆ†æ³•åœ¨æŸç§æ„ä¹‰ä¸Šæ˜¯æ¬¡ä¼˜çš„ï¼Œå®ƒå¯èƒ½äº§ç”Ÿä¸å¹³è¡¡çš„åˆ†æ³•ï¼Œå³ä½¿å®Œç¾çš„åˆ†å±‚æ˜¯å¯èƒ½çš„ã€‚å¦‚æœä½ åœ¨æ¯ä¸ªç»„ä¸­çš„ç±»çš„åˆ†å¸ƒç›¸å¯¹æ¥è¿‘ï¼Œä½¿ç”¨GroupKFoldä¼šæ›´å¥½ã€‚ pd data df = pd.DataFrame({\"featrues\": [\"long\", \"high\", \"long\", \"short\", \"big\", \"small\"], \"labels\": [\"1\", \"1\", \"1\", \"0\", \"1\", \"0\"]}) df['fold'] = -1 sgkf = StratifiedGroupKFold(n_splits=2) for idx, (train, test) in enumerate(sgkf.split(X=df, y=df[\"labels\"], groups=df[\"labels\"])): df.loc[test,'fold'] = idx print(df) featrues labels fold 0 long 1 0 1 high 1 0 2 long 1 0 3 short 0 1 4 big 1 0 5 small 0 1 æ›´å¤šè¯¦è§å®˜æ–¹æ–‡æ¡£ ","date":"2022-06-29","objectID":"/kfold_cross_validation/:2:5","series":["python_data_analysis"],"tags":["py"],"title":"KæŠ˜äº¤å‰éªŒè¯","uri":"/kfold_cross_validation/#pd-data-2"},{"categories":[],"content":" å‘½ä»¤è¡Œçš„ä½¿ç”¨","date":"2022-06-04","objectID":"/kaggle/:1:0","series":["data_science_contest"],"tags":[],"title":"Kaggleä½¿ç”¨ä»‹ç»","uri":"/kaggle/#å‘½ä»¤è¡Œçš„ä½¿ç”¨"},{"categories":[],"content":" Kaggle API å®‰è£… ç¬¬ä¸€æ­¥ï¼Œæœ¬åœ° pip install kaggle ç¬¬äºŒæ­¥ï¼Œkaggle ç‚¹å‡»å¤´åƒ-\u003eAccount-\u003eAPI-\u003eCreate New API Tokenï¼ˆå¦‚æœæƒ³è¦åˆ é™¤ä»¥å¾€ä½¿ç”¨è¿‡çš„Tokenå¯ä»¥ç‚¹å‡»APIä¸‹çš„Expire API Tokenï¼‰ ç¬¬ä¸‰æ­¥ï¼Œæœ¬åœ° æŠŠä¸‹è½½çš„kaggle.jsonæ”¾åœ¨ç”¨æˆ·æ ¹ç›®å½•çš„.kaggle/æ–‡ä»¶å¤¹ä¸‹ å®‰è£…å®Œæˆã€‚ ","date":"2022-06-04","objectID":"/kaggle/:1:1","series":["data_science_contest"],"tags":[],"title":"Kaggleä½¿ç”¨ä»‹ç»","uri":"/kaggle/#kaggle-api-å®‰è£…"},{"categories":[],"content":" å…³äºæ•°æ®é›†æ•°æ®é›†å¯ä»¥ç”¨æ¥ä¸Šä¼ æœ¬åœ°çš„æ•°æ®ä»¥åŠåœ¨æœ¬åœ°è®­ç»ƒå¥½çš„æ¨¡å‹æ–‡ä»¶ã€‚ åˆ›å»ºå¹¶ä¸Šä¼ æ•°æ®é›† ç¬¬ä¸€æ­¥ï¼Œæœ¬åœ°åˆå§‹åŒ– ï¼Œå°†data_diræ¢æˆä½ è‡ªå·±çš„è·¯å¾„åå­— # ä¸Šä¼ ä¸å«å­æ–‡ä»¶å¤¹çš„æ•°æ®æ–‡ä»¶å¤¹ kaggle datasets init -p 'data_dir' # ä¸Šä¼ å«æœ‰å­æ–‡ä»¶å¤¹çš„æ•°æ®æ–‡ä»¶å¤¹ä¸å‹ç¼© kaggle datasets init -p 'data_dir' -r tar ç¬¬äºŒæ­¥ï¼Œæ•°æ®é›†æ”¹å ç¬¬ä¸€æ­¥ä¹‹åä¼šåœ¨data_dirç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªdataset-metadata.jsonæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼ŒæŠŠtitleå’Œidä¸­çš„titleéƒ¨åˆ†æ”¹æˆä½ æƒ³è¦çš„åå­—ï¼Œæ¯”å¦‚æˆ‘æ”¹ä¸ºäº†best-modelã€‚ { \"title\": \"best-model\", \"id\": \"oliverlionado/best-model\", \"licenses\": [ { \"name\": \"CC0-1.0\" } ] } ç¬¬ä¸‰æ­¥ï¼Œä¸Šä¼ æ•°æ®é›† kaggle datasets create -p model_data/ ç„¶åä½ çš„æ•°æ®é›†é‡Œå°±ä¼šå‡ºç°ä¸€ä¸ªæ–°çš„æ•°æ®é›†ï¼Œä»¥æœ¬ä¾‹ä¸ºä¾‹ï¼Œæ•°æ®é›†åå­—å«åšbest-modelï¼Œé‡Œé¢çš„å†…å®¹å°±æ˜¯model_data/ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼ˆä¸å«model_data/æ–‡ä»¶å¤¹ï¼‰ã€‚ æ›´æ–°æŸä¸ªæ•°æ®é›†æ¯”å¦‚æˆ‘æƒ³ä½¿ç”¨model_data/æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶å»æ›´æ–° kaggle datasets version -p model_data/ -m \"update\" æ³¨æ„â€”â€”å¦‚æœä½ æƒ³æ›´æ–°ä¸€ä¸ªä¸æ˜¯åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºçš„æ•°æ®é›†ï¼ˆç›®å½•é‡Œæ²¡æœ‰dataset-metadata.jsonæ–‡ä»¶ï¼‰ é¦–å…ˆä½ éœ€è¦ä¸‹è½½jsonæ–‡ä»¶ kaggle datasets metadata -p model_data/ oliverlionado/best-model å…¶ä¸­oliverlionado/best-modelæŒ‡çš„æ˜¯å·²å­˜åœ¨æ•°æ®é›†çš„id ç„¶åå†æ‰§è¡Œä¸Šä¸€æ¡å‘½ä»¤~ ","date":"2022-06-04","objectID":"/kaggle/:1:2","series":["data_science_contest"],"tags":[],"title":"Kaggleä½¿ç”¨ä»‹ç»","uri":"/kaggle/#å…³äºæ•°æ®é›†"},{"categories":[],"content":" å…³äºæ•°æ®é›†æ•°æ®é›†å¯ä»¥ç”¨æ¥ä¸Šä¼ æœ¬åœ°çš„æ•°æ®ä»¥åŠåœ¨æœ¬åœ°è®­ç»ƒå¥½çš„æ¨¡å‹æ–‡ä»¶ã€‚ åˆ›å»ºå¹¶ä¸Šä¼ æ•°æ®é›† ç¬¬ä¸€æ­¥ï¼Œæœ¬åœ°åˆå§‹åŒ– ï¼Œå°†data_diræ¢æˆä½ è‡ªå·±çš„è·¯å¾„åå­— # ä¸Šä¼ ä¸å«å­æ–‡ä»¶å¤¹çš„æ•°æ®æ–‡ä»¶å¤¹ kaggle datasets init -p 'data_dir' # ä¸Šä¼ å«æœ‰å­æ–‡ä»¶å¤¹çš„æ•°æ®æ–‡ä»¶å¤¹ä¸å‹ç¼© kaggle datasets init -p 'data_dir' -r tar ç¬¬äºŒæ­¥ï¼Œæ•°æ®é›†æ”¹å ç¬¬ä¸€æ­¥ä¹‹åä¼šåœ¨data_dirç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªdataset-metadata.jsonæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼ŒæŠŠtitleå’Œidä¸­çš„titleéƒ¨åˆ†æ”¹æˆä½ æƒ³è¦çš„åå­—ï¼Œæ¯”å¦‚æˆ‘æ”¹ä¸ºäº†best-modelã€‚ { \"title\": \"best-model\", \"id\": \"oliverlionado/best-model\", \"licenses\": [ { \"name\": \"CC0-1.0\" } ] } ç¬¬ä¸‰æ­¥ï¼Œä¸Šä¼ æ•°æ®é›† kaggle datasets create -p model_data/ ç„¶åä½ çš„æ•°æ®é›†é‡Œå°±ä¼šå‡ºç°ä¸€ä¸ªæ–°çš„æ•°æ®é›†ï¼Œä»¥æœ¬ä¾‹ä¸ºä¾‹ï¼Œæ•°æ®é›†åå­—å«åšbest-modelï¼Œé‡Œé¢çš„å†…å®¹å°±æ˜¯model_data/ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼ˆä¸å«model_data/æ–‡ä»¶å¤¹ï¼‰ã€‚ æ›´æ–°æŸä¸ªæ•°æ®é›†æ¯”å¦‚æˆ‘æƒ³ä½¿ç”¨model_data/æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶å»æ›´æ–° kaggle datasets version -p model_data/ -m \"update\" æ³¨æ„â€”â€”å¦‚æœä½ æƒ³æ›´æ–°ä¸€ä¸ªä¸æ˜¯åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºçš„æ•°æ®é›†ï¼ˆç›®å½•é‡Œæ²¡æœ‰dataset-metadata.jsonæ–‡ä»¶ï¼‰ é¦–å…ˆä½ éœ€è¦ä¸‹è½½jsonæ–‡ä»¶ kaggle datasets metadata -p model_data/ oliverlionado/best-model å…¶ä¸­oliverlionado/best-modelæŒ‡çš„æ˜¯å·²å­˜åœ¨æ•°æ®é›†çš„id ç„¶åå†æ‰§è¡Œä¸Šä¸€æ¡å‘½ä»¤~ ","date":"2022-06-04","objectID":"/kaggle/:1:2","series":["data_science_contest"],"tags":[],"title":"Kaggleä½¿ç”¨ä»‹ç»","uri":"/kaggle/#åˆ›å»ºå¹¶ä¸Šä¼ æ•°æ®é›†"},{"categories":[],"content":" å…³äºæ•°æ®é›†æ•°æ®é›†å¯ä»¥ç”¨æ¥ä¸Šä¼ æœ¬åœ°çš„æ•°æ®ä»¥åŠåœ¨æœ¬åœ°è®­ç»ƒå¥½çš„æ¨¡å‹æ–‡ä»¶ã€‚ åˆ›å»ºå¹¶ä¸Šä¼ æ•°æ®é›† ç¬¬ä¸€æ­¥ï¼Œæœ¬åœ°åˆå§‹åŒ– ï¼Œå°†data_diræ¢æˆä½ è‡ªå·±çš„è·¯å¾„åå­— # ä¸Šä¼ ä¸å«å­æ–‡ä»¶å¤¹çš„æ•°æ®æ–‡ä»¶å¤¹ kaggle datasets init -p 'data_dir' # ä¸Šä¼ å«æœ‰å­æ–‡ä»¶å¤¹çš„æ•°æ®æ–‡ä»¶å¤¹ä¸å‹ç¼© kaggle datasets init -p 'data_dir' -r tar ç¬¬äºŒæ­¥ï¼Œæ•°æ®é›†æ”¹å ç¬¬ä¸€æ­¥ä¹‹åä¼šåœ¨data_dirç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªdataset-metadata.jsonæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼ŒæŠŠtitleå’Œidä¸­çš„titleéƒ¨åˆ†æ”¹æˆä½ æƒ³è¦çš„åå­—ï¼Œæ¯”å¦‚æˆ‘æ”¹ä¸ºäº†best-modelã€‚ { \"title\": \"best-model\", \"id\": \"oliverlionado/best-model\", \"licenses\": [ { \"name\": \"CC0-1.0\" } ] } ç¬¬ä¸‰æ­¥ï¼Œä¸Šä¼ æ•°æ®é›† kaggle datasets create -p model_data/ ç„¶åä½ çš„æ•°æ®é›†é‡Œå°±ä¼šå‡ºç°ä¸€ä¸ªæ–°çš„æ•°æ®é›†ï¼Œä»¥æœ¬ä¾‹ä¸ºä¾‹ï¼Œæ•°æ®é›†åå­—å«åšbest-modelï¼Œé‡Œé¢çš„å†…å®¹å°±æ˜¯model_data/ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼ˆä¸å«model_data/æ–‡ä»¶å¤¹ï¼‰ã€‚ æ›´æ–°æŸä¸ªæ•°æ®é›†æ¯”å¦‚æˆ‘æƒ³ä½¿ç”¨model_data/æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶å»æ›´æ–° kaggle datasets version -p model_data/ -m \"update\" æ³¨æ„â€”â€”å¦‚æœä½ æƒ³æ›´æ–°ä¸€ä¸ªä¸æ˜¯åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºçš„æ•°æ®é›†ï¼ˆç›®å½•é‡Œæ²¡æœ‰dataset-metadata.jsonæ–‡ä»¶ï¼‰ é¦–å…ˆä½ éœ€è¦ä¸‹è½½jsonæ–‡ä»¶ kaggle datasets metadata -p model_data/ oliverlionado/best-model å…¶ä¸­oliverlionado/best-modelæŒ‡çš„æ˜¯å·²å­˜åœ¨æ•°æ®é›†çš„id ç„¶åå†æ‰§è¡Œä¸Šä¸€æ¡å‘½ä»¤~ ","date":"2022-06-04","objectID":"/kaggle/:1:2","series":["data_science_contest"],"tags":[],"title":"Kaggleä½¿ç”¨ä»‹ç»","uri":"/kaggle/#æ›´æ–°æŸä¸ªæ•°æ®é›†"},{"categories":["technology_log"],"content":" æŠ¥é”™lookup æŠ¥é”™ åŸå›  è§£å†³æ–¹æ¡ˆ RuntimeError: CUDA error: no kernel image is available for execution on the device torchç‰ˆæœ¬ä¸CUDAä¸åŒ¹é… æ‰¾å¯¹åº”ç‰ˆæœ¬çš„torchè¿›è¡Œå®‰è£… ","date":"2022-05-23","objectID":"/cuda/:0:1","series":[],"tags":["env"],"title":"CUDAç›¸å…³é—®é¢˜å’Œè®¾ç½®","uri":"/cuda/#æŠ¥é”™lookup"},{"categories":[],"content":" Pandas import pandas as pd ","date":"2022-05-23","objectID":"/pandas/:1:0","series":["python_data_analysis"],"tags":["tools","py"],"title":"Pandasçš„ä½¿ç”¨æ–¹æ³•","uri":"/pandas/#pandas"},{"categories":[],"content":" æ•°æ®è¯»å– csvæ ¼å¼ æœ‰è¡¨å¤´æ¨¡å¼ df = pd.read_csv('file') æ— è¡¨å¤´æ¨¡å¼ df = pd.read_csv('file', header=None) è¯»å–ä¹‹åä¸ºå„åˆ—å–è¡¨å¤´ï¼ˆåˆ—åï¼‰ df = pd.read_csv('data/dataset/raw_data/data.csv', header=None) df.columns = ['label_text', 'chapter', 'section', 'subsection', 'text'] ","date":"2022-05-23","objectID":"/pandas/:1:1","series":["python_data_analysis"],"tags":["tools","py"],"title":"Pandasçš„ä½¿ç”¨æ–¹æ³•","uri":"/pandas/#æ•°æ®è¯»å–"},{"categories":[],"content":" å½¢çŠ¶å¤„ç† æ‰“å°å¼€å¤´å‡ è¡Œæ•°æ® df.head() input_path = 'data/contest_data/' #input need be adjusted df = pd.read_csv(input_path+'train.csv') df_title = pd.read_csv(input_path+'titles.csv') å»é™¤ç©ºå€¼æ•°æ®è¡Œ df = df.dropna() æ ¹æ®ç‰¹å®šåˆ—æ•°æ®ç‰¹å¾åˆ é™¤æ•°æ®è¡Œä¾‹å¦‚ï¼Œåˆ é™¤unitåˆ—å€¼ä¸ºâ€™å‚è€ƒä»·â€™çš„è¡Œ df = df.drop(df[df['unit']=='å‚è€ƒä»·'].index) åˆå¹¶ä¸¤ä¸ªDataframeç¬¬ä¸€ä¸ªdf df id anchor target context score 0 37d61fd2272659b1 abatement abatement of pollution A47 0.50 ... ... ... ... ... ... ç¬¬äºŒä¸ªdf df_title code title section class subclass group main_group 0 A HUMAN NECESSITIES A NaN NaN NaN NaN ... ... ... ... ... ... ... ... å°†å®ƒä»¬åˆ†åˆ«æŒ‰ç…§contextåˆ—å†…å®¹å’Œcodeåˆ—å†…å®¹å¯¹åº”ç›¸ç­‰è¿›è¡Œæ‹¼æ¥ï¼Œdfåœ¨å·¦ï¼Œdftitleï¼ˆcodeå€¼å”¯ä¸€ï¼‰å¯é‡å¤ä½¿ç”¨ï¼Œç›¸å½“äºæŸ¥è¡¨ã€‚ df = df.merge(df_title, how='left', left_on='context', right_on='code') df = df[['id', 'anchor', 'target', 'context', 'score', 'title']] æ‹¼æ¥å®Œæˆ df id anchor target context score title 0 37d61fd2272659b1 abatement abatement of pollution A47 0.50 FURNITURE; DOMESTIC ARTICLES OR APPLIANCES; COâ€¦ â€¦ â€¦ â€¦ â€¦ â€¦ â€¦ â€¦ ","date":"2022-05-23","objectID":"/pandas/:1:2","series":["python_data_analysis"],"tags":["tools","py"],"title":"Pandasçš„ä½¿ç”¨æ–¹æ³•","uri":"/pandas/#å½¢çŠ¶å¤„ç†"},{"categories":[],"content":" å½¢çŠ¶å¤„ç† æ‰“å°å¼€å¤´å‡ è¡Œæ•°æ® df.head() input_path = 'data/contest_data/' #input need be adjusted df = pd.read_csv(input_path+'train.csv') df_title = pd.read_csv(input_path+'titles.csv') å»é™¤ç©ºå€¼æ•°æ®è¡Œ df = df.dropna() æ ¹æ®ç‰¹å®šåˆ—æ•°æ®ç‰¹å¾åˆ é™¤æ•°æ®è¡Œä¾‹å¦‚ï¼Œåˆ é™¤unitåˆ—å€¼ä¸ºâ€™å‚è€ƒä»·â€™çš„è¡Œ df = df.drop(df[df['unit']=='å‚è€ƒä»·'].index) åˆå¹¶ä¸¤ä¸ªDataframeç¬¬ä¸€ä¸ªdf df id anchor target context score 0 37d61fd2272659b1 abatement abatement of pollution A47 0.50 ... ... ... ... ... ... ç¬¬äºŒä¸ªdf df_title code title section class subclass group main_group 0 A HUMAN NECESSITIES A NaN NaN NaN NaN ... ... ... ... ... ... ... ... å°†å®ƒä»¬åˆ†åˆ«æŒ‰ç…§contextåˆ—å†…å®¹å’Œcodeåˆ—å†…å®¹å¯¹åº”ç›¸ç­‰è¿›è¡Œæ‹¼æ¥ï¼Œdfåœ¨å·¦ï¼Œdftitleï¼ˆcodeå€¼å”¯ä¸€ï¼‰å¯é‡å¤ä½¿ç”¨ï¼Œç›¸å½“äºæŸ¥è¡¨ã€‚ df = df.merge(df_title, how='left', left_on='context', right_on='code') df = df[['id', 'anchor', 'target', 'context', 'score', 'title']] æ‹¼æ¥å®Œæˆ df id anchor target context score title 0 37d61fd2272659b1 abatement abatement of pollution A47 0.50 FURNITURE; DOMESTIC ARTICLES OR APPLIANCES; COâ€¦ â€¦ â€¦ â€¦ â€¦ â€¦ â€¦ â€¦ ","date":"2022-05-23","objectID":"/pandas/:1:2","series":["python_data_analysis"],"tags":["tools","py"],"title":"Pandasçš„ä½¿ç”¨æ–¹æ³•","uri":"/pandas/#æ‰“å°å¼€å¤´å‡ è¡Œæ•°æ®"},{"categories":[],"content":" å½¢çŠ¶å¤„ç† æ‰“å°å¼€å¤´å‡ è¡Œæ•°æ® df.head() input_path = 'data/contest_data/' #input need be adjusted df = pd.read_csv(input_path+'train.csv') df_title = pd.read_csv(input_path+'titles.csv') å»é™¤ç©ºå€¼æ•°æ®è¡Œ df = df.dropna() æ ¹æ®ç‰¹å®šåˆ—æ•°æ®ç‰¹å¾åˆ é™¤æ•°æ®è¡Œä¾‹å¦‚ï¼Œåˆ é™¤unitåˆ—å€¼ä¸ºâ€™å‚è€ƒä»·â€™çš„è¡Œ df = df.drop(df[df['unit']=='å‚è€ƒä»·'].index) åˆå¹¶ä¸¤ä¸ªDataframeç¬¬ä¸€ä¸ªdf df id anchor target context score 0 37d61fd2272659b1 abatement abatement of pollution A47 0.50 ... ... ... ... ... ... ç¬¬äºŒä¸ªdf df_title code title section class subclass group main_group 0 A HUMAN NECESSITIES A NaN NaN NaN NaN ... ... ... ... ... ... ... ... å°†å®ƒä»¬åˆ†åˆ«æŒ‰ç…§contextåˆ—å†…å®¹å’Œcodeåˆ—å†…å®¹å¯¹åº”ç›¸ç­‰è¿›è¡Œæ‹¼æ¥ï¼Œdfåœ¨å·¦ï¼Œdftitleï¼ˆcodeå€¼å”¯ä¸€ï¼‰å¯é‡å¤ä½¿ç”¨ï¼Œç›¸å½“äºæŸ¥è¡¨ã€‚ df = df.merge(df_title, how='left', left_on='context', right_on='code') df = df[['id', 'anchor', 'target', 'context', 'score', 'title']] æ‹¼æ¥å®Œæˆ df id anchor target context score title 0 37d61fd2272659b1 abatement abatement of pollution A47 0.50 FURNITURE; DOMESTIC ARTICLES OR APPLIANCES; COâ€¦ â€¦ â€¦ â€¦ â€¦ â€¦ â€¦ â€¦ ","date":"2022-05-23","objectID":"/pandas/:1:2","series":["python_data_analysis"],"tags":["tools","py"],"title":"Pandasçš„ä½¿ç”¨æ–¹æ³•","uri":"/pandas/#å»é™¤ç©ºå€¼æ•°æ®è¡Œ"},{"categories":[],"content":" å½¢çŠ¶å¤„ç† æ‰“å°å¼€å¤´å‡ è¡Œæ•°æ® df.head() input_path = 'data/contest_data/' #input need be adjusted df = pd.read_csv(input_path+'train.csv') df_title = pd.read_csv(input_path+'titles.csv') å»é™¤ç©ºå€¼æ•°æ®è¡Œ df = df.dropna() æ ¹æ®ç‰¹å®šåˆ—æ•°æ®ç‰¹å¾åˆ é™¤æ•°æ®è¡Œä¾‹å¦‚ï¼Œåˆ é™¤unitåˆ—å€¼ä¸ºâ€™å‚è€ƒä»·â€™çš„è¡Œ df = df.drop(df[df['unit']=='å‚è€ƒä»·'].index) åˆå¹¶ä¸¤ä¸ªDataframeç¬¬ä¸€ä¸ªdf df id anchor target context score 0 37d61fd2272659b1 abatement abatement of pollution A47 0.50 ... ... ... ... ... ... ç¬¬äºŒä¸ªdf df_title code title section class subclass group main_group 0 A HUMAN NECESSITIES A NaN NaN NaN NaN ... ... ... ... ... ... ... ... å°†å®ƒä»¬åˆ†åˆ«æŒ‰ç…§contextåˆ—å†…å®¹å’Œcodeåˆ—å†…å®¹å¯¹åº”ç›¸ç­‰è¿›è¡Œæ‹¼æ¥ï¼Œdfåœ¨å·¦ï¼Œdftitleï¼ˆcodeå€¼å”¯ä¸€ï¼‰å¯é‡å¤ä½¿ç”¨ï¼Œç›¸å½“äºæŸ¥è¡¨ã€‚ df = df.merge(df_title, how='left', left_on='context', right_on='code') df = df[['id', 'anchor', 'target', 'context', 'score', 'title']] æ‹¼æ¥å®Œæˆ df id anchor target context score title 0 37d61fd2272659b1 abatement abatement of pollution A47 0.50 FURNITURE; DOMESTIC ARTICLES OR APPLIANCES; COâ€¦ â€¦ â€¦ â€¦ â€¦ â€¦ â€¦ â€¦ ","date":"2022-05-23","objectID":"/pandas/:1:2","series":["python_data_analysis"],"tags":["tools","py"],"title":"Pandasçš„ä½¿ç”¨æ–¹æ³•","uri":"/pandas/#æ ¹æ®ç‰¹å®šåˆ—æ•°æ®ç‰¹å¾åˆ é™¤æ•°æ®è¡Œ"},{"categories":[],"content":" å½¢çŠ¶å¤„ç† æ‰“å°å¼€å¤´å‡ è¡Œæ•°æ® df.head() input_path = 'data/contest_data/' #input need be adjusted df = pd.read_csv(input_path+'train.csv') df_title = pd.read_csv(input_path+'titles.csv') å»é™¤ç©ºå€¼æ•°æ®è¡Œ df = df.dropna() æ ¹æ®ç‰¹å®šåˆ—æ•°æ®ç‰¹å¾åˆ é™¤æ•°æ®è¡Œä¾‹å¦‚ï¼Œåˆ é™¤unitåˆ—å€¼ä¸ºâ€™å‚è€ƒä»·â€™çš„è¡Œ df = df.drop(df[df['unit']=='å‚è€ƒä»·'].index) åˆå¹¶ä¸¤ä¸ªDataframeç¬¬ä¸€ä¸ªdf df id anchor target context score 0 37d61fd2272659b1 abatement abatement of pollution A47 0.50 ... ... ... ... ... ... ç¬¬äºŒä¸ªdf df_title code title section class subclass group main_group 0 A HUMAN NECESSITIES A NaN NaN NaN NaN ... ... ... ... ... ... ... ... å°†å®ƒä»¬åˆ†åˆ«æŒ‰ç…§contextåˆ—å†…å®¹å’Œcodeåˆ—å†…å®¹å¯¹åº”ç›¸ç­‰è¿›è¡Œæ‹¼æ¥ï¼Œdfåœ¨å·¦ï¼Œdftitleï¼ˆcodeå€¼å”¯ä¸€ï¼‰å¯é‡å¤ä½¿ç”¨ï¼Œç›¸å½“äºæŸ¥è¡¨ã€‚ df = df.merge(df_title, how='left', left_on='context', right_on='code') df = df[['id', 'anchor', 'target', 'context', 'score', 'title']] æ‹¼æ¥å®Œæˆ df id anchor target context score title 0 37d61fd2272659b1 abatement abatement of pollution A47 0.50 FURNITURE; DOMESTIC ARTICLES OR APPLIANCES; COâ€¦ â€¦ â€¦ â€¦ â€¦ â€¦ â€¦ â€¦ ","date":"2022-05-23","objectID":"/pandas/:1:2","series":["python_data_analysis"],"tags":["tools","py"],"title":"Pandasçš„ä½¿ç”¨æ–¹æ³•","uri":"/pandas/#åˆå¹¶ä¸¤ä¸ªdataframe"},{"categories":[],"content":" æ•°æ®å¤„ç† éšå‡½æ•°æ–¹æ³•ä¸¾ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼Œtotalé‡Œéƒ½æ˜¯899ä¸‡å…ƒçš„å½¢å¼ï¼ŒæŠŠä¸‡å…ƒæ›¿æ¢æ‰ï¼Œå¹¶è½¬ä¸ºfloatæ ¼å¼ï¼Œå…¶å®éšå‡½æ•°å¹²çš„è¿œä¸æ­¢è¿™äº›â€¦â€¦ format_fun = lambda x: float(x.replace('ä¸‡å…ƒ', '')) df[\"price\"] = df[\"total\"].apply(format_fun) åˆå¹¶ä¸¤åˆ—å­—ç¬¦ä¸² df[\"Full Name\"] = df[\"province\"].map(str) +','+ df[\"city\"] city_lis = list(set(list(df['Full Name'].values))) print(city_lis[:3]) ['å±±ä¸œ,é’å²›', 'æ±Ÿè¥¿,èµ£å·', 'ç”˜è‚ƒ,å…°å·'] ç›¸åŒåŠŸèƒ½ df[\"Full Name\"] = df[\"First\"] + \" \" + df[\"Last\"] df['Full Name'] = df[['First', 'Last']].apply(' '.join, axis=1) df['Full Name'] = df['First'].str.cat(df['Last'],sep=\" \") df['Full Name'] = df[['First', 'Last']].agg(' '.join, axis=1) åˆ—é—´æ•°æ®è®¡ç®—ä¸¾ä¸ªä¾‹å­ï¼Œé€šè¿‡æ€»ä»·å’Œé¢ç§¯å¾—åˆ°å•ä»·åˆ— df[\"total_price\"] = df[\"total\"].apply(lambda x: float(x.replace('ä¸‡å…ƒ', ''))) df['area_num'] = df[\"area\"].apply(lambda x: float(x.replace('ã¡', ''))) df['unit_pice'] = df['total_price'].map(float) / df['area_num'] * 10000 åˆ†ç»„æ•°æ®è®¡ç®— è®¡ç®—å‡å€¼ä¸¾ä¾‹ï¼ŒæŒ‰åˆ—Full Name åˆ†ç»„ï¼Œè®¡ç®—å„ç»„çš„unit_priceå‡å€¼ df.groupby('Full Name')['unit_pice'].mean() æ•°æ®è½¬æ¢å¼ºè½¬å°±å¥½äº†dict(),int(),float()â€¦â€¦ dic = dict(df.groupby('Full Name')['unit_pice'].mean()) è½¬åŒ–ä¸ºnumpy.ndarray array array = df['text'].values array = df['text'].values.astype(str) locæ–¹æ³•å¦‚æœä¸å­˜åœ¨foldåˆ—ï¼Œæ–°å»ºâ€™foldâ€™åˆ—ï¼Œå¹¶åœ¨ä½ç½®[0, 5]ä¸Šèµ‹å€¼ä¸º1ã€‚ import pandas as pd df = pd.DataFrame({\"featrues\": [\"long\", \"high\", \"long\", \"short\", \"big\", \"small\"], \"labels\": [\"1\", \"1\", \"1\", \"0\", \"1\", \"0\"]}) df.loc[[0, 5], 'fold'] = 1 df featrues labels fold 0 long 1 1.0 1 high 1 NaN 2 long 1 NaN 3 short 0 NaN 4 big 1 NaN ","date":"2022-05-23","objectID":"/pandas/:1:3","series":["python_data_analysis"],"tags":["tools","py"],"title":"Pandasçš„ä½¿ç”¨æ–¹æ³•","uri":"/pandas/#æ•°æ®å¤„ç†"},{"categories":[],"content":" æ•°æ®å¤„ç† éšå‡½æ•°æ–¹æ³•ä¸¾ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼Œtotalé‡Œéƒ½æ˜¯899ä¸‡å…ƒçš„å½¢å¼ï¼ŒæŠŠä¸‡å…ƒæ›¿æ¢æ‰ï¼Œå¹¶è½¬ä¸ºfloatæ ¼å¼ï¼Œå…¶å®éšå‡½æ•°å¹²çš„è¿œä¸æ­¢è¿™äº›â€¦â€¦ format_fun = lambda x: float(x.replace('ä¸‡å…ƒ', '')) df[\"price\"] = df[\"total\"].apply(format_fun) åˆå¹¶ä¸¤åˆ—å­—ç¬¦ä¸² df[\"Full Name\"] = df[\"province\"].map(str) +','+ df[\"city\"] city_lis = list(set(list(df['Full Name'].values))) print(city_lis[:3]) ['å±±ä¸œ,é’å²›', 'æ±Ÿè¥¿,èµ£å·', 'ç”˜è‚ƒ,å…°å·'] ç›¸åŒåŠŸèƒ½ df[\"Full Name\"] = df[\"First\"] + \" \" + df[\"Last\"] df['Full Name'] = df[['First', 'Last']].apply(' '.join, axis=1) df['Full Name'] = df['First'].str.cat(df['Last'],sep=\" \") df['Full Name'] = df[['First', 'Last']].agg(' '.join, axis=1) åˆ—é—´æ•°æ®è®¡ç®—ä¸¾ä¸ªä¾‹å­ï¼Œé€šè¿‡æ€»ä»·å’Œé¢ç§¯å¾—åˆ°å•ä»·åˆ— df[\"total_price\"] = df[\"total\"].apply(lambda x: float(x.replace('ä¸‡å…ƒ', ''))) df['area_num'] = df[\"area\"].apply(lambda x: float(x.replace('ã¡', ''))) df['unit_pice'] = df['total_price'].map(float) / df['area_num'] * 10000 åˆ†ç»„æ•°æ®è®¡ç®— è®¡ç®—å‡å€¼ä¸¾ä¾‹ï¼ŒæŒ‰åˆ—Full Name åˆ†ç»„ï¼Œè®¡ç®—å„ç»„çš„unit_priceå‡å€¼ df.groupby('Full Name')['unit_pice'].mean() æ•°æ®è½¬æ¢å¼ºè½¬å°±å¥½äº†dict(),int(),float()â€¦â€¦ dic = dict(df.groupby('Full Name')['unit_pice'].mean()) è½¬åŒ–ä¸ºnumpy.ndarray array array = df['text'].values array = df['text'].values.astype(str) locæ–¹æ³•å¦‚æœä¸å­˜åœ¨foldåˆ—ï¼Œæ–°å»ºâ€™foldâ€™åˆ—ï¼Œå¹¶åœ¨ä½ç½®[0, 5]ä¸Šèµ‹å€¼ä¸º1ã€‚ import pandas as pd df = pd.DataFrame({\"featrues\": [\"long\", \"high\", \"long\", \"short\", \"big\", \"small\"], \"labels\": [\"1\", \"1\", \"1\", \"0\", \"1\", \"0\"]}) df.loc[[0, 5], 'fold'] = 1 df featrues labels fold 0 long 1 1.0 1 high 1 NaN 2 long 1 NaN 3 short 0 NaN 4 big 1 NaN ","date":"2022-05-23","objectID":"/pandas/:1:3","series":["python_data_analysis"],"tags":["tools","py"],"title":"Pandasçš„ä½¿ç”¨æ–¹æ³•","uri":"/pandas/#éšå‡½æ•°æ–¹æ³•"},{"categories":[],"content":" æ•°æ®å¤„ç† éšå‡½æ•°æ–¹æ³•ä¸¾ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼Œtotalé‡Œéƒ½æ˜¯899ä¸‡å…ƒçš„å½¢å¼ï¼ŒæŠŠä¸‡å…ƒæ›¿æ¢æ‰ï¼Œå¹¶è½¬ä¸ºfloatæ ¼å¼ï¼Œå…¶å®éšå‡½æ•°å¹²çš„è¿œä¸æ­¢è¿™äº›â€¦â€¦ format_fun = lambda x: float(x.replace('ä¸‡å…ƒ', '')) df[\"price\"] = df[\"total\"].apply(format_fun) åˆå¹¶ä¸¤åˆ—å­—ç¬¦ä¸² df[\"Full Name\"] = df[\"province\"].map(str) +','+ df[\"city\"] city_lis = list(set(list(df['Full Name'].values))) print(city_lis[:3]) ['å±±ä¸œ,é’å²›', 'æ±Ÿè¥¿,èµ£å·', 'ç”˜è‚ƒ,å…°å·'] ç›¸åŒåŠŸèƒ½ df[\"Full Name\"] = df[\"First\"] + \" \" + df[\"Last\"] df['Full Name'] = df[['First', 'Last']].apply(' '.join, axis=1) df['Full Name'] = df['First'].str.cat(df['Last'],sep=\" \") df['Full Name'] = df[['First', 'Last']].agg(' '.join, axis=1) åˆ—é—´æ•°æ®è®¡ç®—ä¸¾ä¸ªä¾‹å­ï¼Œé€šè¿‡æ€»ä»·å’Œé¢ç§¯å¾—åˆ°å•ä»·åˆ— df[\"total_price\"] = df[\"total\"].apply(lambda x: float(x.replace('ä¸‡å…ƒ', ''))) df['area_num'] = df[\"area\"].apply(lambda x: float(x.replace('ã¡', ''))) df['unit_pice'] = df['total_price'].map(float) / df['area_num'] * 10000 åˆ†ç»„æ•°æ®è®¡ç®— è®¡ç®—å‡å€¼ä¸¾ä¾‹ï¼ŒæŒ‰åˆ—Full Name åˆ†ç»„ï¼Œè®¡ç®—å„ç»„çš„unit_priceå‡å€¼ df.groupby('Full Name')['unit_pice'].mean() æ•°æ®è½¬æ¢å¼ºè½¬å°±å¥½äº†dict(),int(),float()â€¦â€¦ dic = dict(df.groupby('Full Name')['unit_pice'].mean()) è½¬åŒ–ä¸ºnumpy.ndarray array array = df['text'].values array = df['text'].values.astype(str) locæ–¹æ³•å¦‚æœä¸å­˜åœ¨foldåˆ—ï¼Œæ–°å»ºâ€™foldâ€™åˆ—ï¼Œå¹¶åœ¨ä½ç½®[0, 5]ä¸Šèµ‹å€¼ä¸º1ã€‚ import pandas as pd df = pd.DataFrame({\"featrues\": [\"long\", \"high\", \"long\", \"short\", \"big\", \"small\"], \"labels\": [\"1\", \"1\", \"1\", \"0\", \"1\", \"0\"]}) df.loc[[0, 5], 'fold'] = 1 df featrues labels fold 0 long 1 1.0 1 high 1 NaN 2 long 1 NaN 3 short 0 NaN 4 big 1 NaN ","date":"2022-05-23","objectID":"/pandas/:1:3","series":["python_data_analysis"],"tags":["tools","py"],"title":"Pandasçš„ä½¿ç”¨æ–¹æ³•","uri":"/pandas/#åˆå¹¶ä¸¤åˆ—å­—ç¬¦ä¸²"},{"categories":[],"content":" æ•°æ®å¤„ç† éšå‡½æ•°æ–¹æ³•ä¸¾ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼Œtotalé‡Œéƒ½æ˜¯899ä¸‡å…ƒçš„å½¢å¼ï¼ŒæŠŠä¸‡å…ƒæ›¿æ¢æ‰ï¼Œå¹¶è½¬ä¸ºfloatæ ¼å¼ï¼Œå…¶å®éšå‡½æ•°å¹²çš„è¿œä¸æ­¢è¿™äº›â€¦â€¦ format_fun = lambda x: float(x.replace('ä¸‡å…ƒ', '')) df[\"price\"] = df[\"total\"].apply(format_fun) åˆå¹¶ä¸¤åˆ—å­—ç¬¦ä¸² df[\"Full Name\"] = df[\"province\"].map(str) +','+ df[\"city\"] city_lis = list(set(list(df['Full Name'].values))) print(city_lis[:3]) ['å±±ä¸œ,é’å²›', 'æ±Ÿè¥¿,èµ£å·', 'ç”˜è‚ƒ,å…°å·'] ç›¸åŒåŠŸèƒ½ df[\"Full Name\"] = df[\"First\"] + \" \" + df[\"Last\"] df['Full Name'] = df[['First', 'Last']].apply(' '.join, axis=1) df['Full Name'] = df['First'].str.cat(df['Last'],sep=\" \") df['Full Name'] = df[['First', 'Last']].agg(' '.join, axis=1) åˆ—é—´æ•°æ®è®¡ç®—ä¸¾ä¸ªä¾‹å­ï¼Œé€šè¿‡æ€»ä»·å’Œé¢ç§¯å¾—åˆ°å•ä»·åˆ— df[\"total_price\"] = df[\"total\"].apply(lambda x: float(x.replace('ä¸‡å…ƒ', ''))) df['area_num'] = df[\"area\"].apply(lambda x: float(x.replace('ã¡', ''))) df['unit_pice'] = df['total_price'].map(float) / df['area_num'] * 10000 åˆ†ç»„æ•°æ®è®¡ç®— è®¡ç®—å‡å€¼ä¸¾ä¾‹ï¼ŒæŒ‰åˆ—Full Name åˆ†ç»„ï¼Œè®¡ç®—å„ç»„çš„unit_priceå‡å€¼ df.groupby('Full Name')['unit_pice'].mean() æ•°æ®è½¬æ¢å¼ºè½¬å°±å¥½äº†dict(),int(),float()â€¦â€¦ dic = dict(df.groupby('Full Name')['unit_pice'].mean()) è½¬åŒ–ä¸ºnumpy.ndarray array array = df['text'].values array = df['text'].values.astype(str) locæ–¹æ³•å¦‚æœä¸å­˜åœ¨foldåˆ—ï¼Œæ–°å»ºâ€™foldâ€™åˆ—ï¼Œå¹¶åœ¨ä½ç½®[0, 5]ä¸Šèµ‹å€¼ä¸º1ã€‚ import pandas as pd df = pd.DataFrame({\"featrues\": [\"long\", \"high\", \"long\", \"short\", \"big\", \"small\"], \"labels\": [\"1\", \"1\", \"1\", \"0\", \"1\", \"0\"]}) df.loc[[0, 5], 'fold'] = 1 df featrues labels fold 0 long 1 1.0 1 high 1 NaN 2 long 1 NaN 3 short 0 NaN 4 big 1 NaN ","date":"2022-05-23","objectID":"/pandas/:1:3","series":["python_data_analysis"],"tags":["tools","py"],"title":"Pandasçš„ä½¿ç”¨æ–¹æ³•","uri":"/pandas/#åˆ—é—´æ•°æ®è®¡ç®—"},{"categories":[],"content":" æ•°æ®å¤„ç† éšå‡½æ•°æ–¹æ³•ä¸¾ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼Œtotalé‡Œéƒ½æ˜¯899ä¸‡å…ƒçš„å½¢å¼ï¼ŒæŠŠä¸‡å…ƒæ›¿æ¢æ‰ï¼Œå¹¶è½¬ä¸ºfloatæ ¼å¼ï¼Œå…¶å®éšå‡½æ•°å¹²çš„è¿œä¸æ­¢è¿™äº›â€¦â€¦ format_fun = lambda x: float(x.replace('ä¸‡å…ƒ', '')) df[\"price\"] = df[\"total\"].apply(format_fun) åˆå¹¶ä¸¤åˆ—å­—ç¬¦ä¸² df[\"Full Name\"] = df[\"province\"].map(str) +','+ df[\"city\"] city_lis = list(set(list(df['Full Name'].values))) print(city_lis[:3]) ['å±±ä¸œ,é’å²›', 'æ±Ÿè¥¿,èµ£å·', 'ç”˜è‚ƒ,å…°å·'] ç›¸åŒåŠŸèƒ½ df[\"Full Name\"] = df[\"First\"] + \" \" + df[\"Last\"] df['Full Name'] = df[['First', 'Last']].apply(' '.join, axis=1) df['Full Name'] = df['First'].str.cat(df['Last'],sep=\" \") df['Full Name'] = df[['First', 'Last']].agg(' '.join, axis=1) åˆ—é—´æ•°æ®è®¡ç®—ä¸¾ä¸ªä¾‹å­ï¼Œé€šè¿‡æ€»ä»·å’Œé¢ç§¯å¾—åˆ°å•ä»·åˆ— df[\"total_price\"] = df[\"total\"].apply(lambda x: float(x.replace('ä¸‡å…ƒ', ''))) df['area_num'] = df[\"area\"].apply(lambda x: float(x.replace('ã¡', ''))) df['unit_pice'] = df['total_price'].map(float) / df['area_num'] * 10000 åˆ†ç»„æ•°æ®è®¡ç®— è®¡ç®—å‡å€¼ä¸¾ä¾‹ï¼ŒæŒ‰åˆ—Full Name åˆ†ç»„ï¼Œè®¡ç®—å„ç»„çš„unit_priceå‡å€¼ df.groupby('Full Name')['unit_pice'].mean() æ•°æ®è½¬æ¢å¼ºè½¬å°±å¥½äº†dict(),int(),float()â€¦â€¦ dic = dict(df.groupby('Full Name')['unit_pice'].mean()) è½¬åŒ–ä¸ºnumpy.ndarray array array = df['text'].values array = df['text'].values.astype(str) locæ–¹æ³•å¦‚æœä¸å­˜åœ¨foldåˆ—ï¼Œæ–°å»ºâ€™foldâ€™åˆ—ï¼Œå¹¶åœ¨ä½ç½®[0, 5]ä¸Šèµ‹å€¼ä¸º1ã€‚ import pandas as pd df = pd.DataFrame({\"featrues\": [\"long\", \"high\", \"long\", \"short\", \"big\", \"small\"], \"labels\": [\"1\", \"1\", \"1\", \"0\", \"1\", \"0\"]}) df.loc[[0, 5], 'fold'] = 1 df featrues labels fold 0 long 1 1.0 1 high 1 NaN 2 long 1 NaN 3 short 0 NaN 4 big 1 NaN ","date":"2022-05-23","objectID":"/pandas/:1:3","series":["python_data_analysis"],"tags":["tools","py"],"title":"Pandasçš„ä½¿ç”¨æ–¹æ³•","uri":"/pandas/#åˆ†ç»„æ•°æ®è®¡ç®—"},{"categories":[],"content":" æ•°æ®å¤„ç† éšå‡½æ•°æ–¹æ³•ä¸¾ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼Œtotalé‡Œéƒ½æ˜¯899ä¸‡å…ƒçš„å½¢å¼ï¼ŒæŠŠä¸‡å…ƒæ›¿æ¢æ‰ï¼Œå¹¶è½¬ä¸ºfloatæ ¼å¼ï¼Œå…¶å®éšå‡½æ•°å¹²çš„è¿œä¸æ­¢è¿™äº›â€¦â€¦ format_fun = lambda x: float(x.replace('ä¸‡å…ƒ', '')) df[\"price\"] = df[\"total\"].apply(format_fun) åˆå¹¶ä¸¤åˆ—å­—ç¬¦ä¸² df[\"Full Name\"] = df[\"province\"].map(str) +','+ df[\"city\"] city_lis = list(set(list(df['Full Name'].values))) print(city_lis[:3]) ['å±±ä¸œ,é’å²›', 'æ±Ÿè¥¿,èµ£å·', 'ç”˜è‚ƒ,å…°å·'] ç›¸åŒåŠŸèƒ½ df[\"Full Name\"] = df[\"First\"] + \" \" + df[\"Last\"] df['Full Name'] = df[['First', 'Last']].apply(' '.join, axis=1) df['Full Name'] = df['First'].str.cat(df['Last'],sep=\" \") df['Full Name'] = df[['First', 'Last']].agg(' '.join, axis=1) åˆ—é—´æ•°æ®è®¡ç®—ä¸¾ä¸ªä¾‹å­ï¼Œé€šè¿‡æ€»ä»·å’Œé¢ç§¯å¾—åˆ°å•ä»·åˆ— df[\"total_price\"] = df[\"total\"].apply(lambda x: float(x.replace('ä¸‡å…ƒ', ''))) df['area_num'] = df[\"area\"].apply(lambda x: float(x.replace('ã¡', ''))) df['unit_pice'] = df['total_price'].map(float) / df['area_num'] * 10000 åˆ†ç»„æ•°æ®è®¡ç®— è®¡ç®—å‡å€¼ä¸¾ä¾‹ï¼ŒæŒ‰åˆ—Full Name åˆ†ç»„ï¼Œè®¡ç®—å„ç»„çš„unit_priceå‡å€¼ df.groupby('Full Name')['unit_pice'].mean() æ•°æ®è½¬æ¢å¼ºè½¬å°±å¥½äº†dict(),int(),float()â€¦â€¦ dic = dict(df.groupby('Full Name')['unit_pice'].mean()) è½¬åŒ–ä¸ºnumpy.ndarray array array = df['text'].values array = df['text'].values.astype(str) locæ–¹æ³•å¦‚æœä¸å­˜åœ¨foldåˆ—ï¼Œæ–°å»ºâ€™foldâ€™åˆ—ï¼Œå¹¶åœ¨ä½ç½®[0, 5]ä¸Šèµ‹å€¼ä¸º1ã€‚ import pandas as pd df = pd.DataFrame({\"featrues\": [\"long\", \"high\", \"long\", \"short\", \"big\", \"small\"], \"labels\": [\"1\", \"1\", \"1\", \"0\", \"1\", \"0\"]}) df.loc[[0, 5], 'fold'] = 1 df featrues labels fold 0 long 1 1.0 1 high 1 NaN 2 long 1 NaN 3 short 0 NaN 4 big 1 NaN ","date":"2022-05-23","objectID":"/pandas/:1:3","series":["python_data_analysis"],"tags":["tools","py"],"title":"Pandasçš„ä½¿ç”¨æ–¹æ³•","uri":"/pandas/#è®¡ç®—å‡å€¼"},{"categories":[],"content":" æ•°æ®å¤„ç† éšå‡½æ•°æ–¹æ³•ä¸¾ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼Œtotalé‡Œéƒ½æ˜¯899ä¸‡å…ƒçš„å½¢å¼ï¼ŒæŠŠä¸‡å…ƒæ›¿æ¢æ‰ï¼Œå¹¶è½¬ä¸ºfloatæ ¼å¼ï¼Œå…¶å®éšå‡½æ•°å¹²çš„è¿œä¸æ­¢è¿™äº›â€¦â€¦ format_fun = lambda x: float(x.replace('ä¸‡å…ƒ', '')) df[\"price\"] = df[\"total\"].apply(format_fun) åˆå¹¶ä¸¤åˆ—å­—ç¬¦ä¸² df[\"Full Name\"] = df[\"province\"].map(str) +','+ df[\"city\"] city_lis = list(set(list(df['Full Name'].values))) print(city_lis[:3]) ['å±±ä¸œ,é’å²›', 'æ±Ÿè¥¿,èµ£å·', 'ç”˜è‚ƒ,å…°å·'] ç›¸åŒåŠŸèƒ½ df[\"Full Name\"] = df[\"First\"] + \" \" + df[\"Last\"] df['Full Name'] = df[['First', 'Last']].apply(' '.join, axis=1) df['Full Name'] = df['First'].str.cat(df['Last'],sep=\" \") df['Full Name'] = df[['First', 'Last']].agg(' '.join, axis=1) åˆ—é—´æ•°æ®è®¡ç®—ä¸¾ä¸ªä¾‹å­ï¼Œé€šè¿‡æ€»ä»·å’Œé¢ç§¯å¾—åˆ°å•ä»·åˆ— df[\"total_price\"] = df[\"total\"].apply(lambda x: float(x.replace('ä¸‡å…ƒ', ''))) df['area_num'] = df[\"area\"].apply(lambda x: float(x.replace('ã¡', ''))) df['unit_pice'] = df['total_price'].map(float) / df['area_num'] * 10000 åˆ†ç»„æ•°æ®è®¡ç®— è®¡ç®—å‡å€¼ä¸¾ä¾‹ï¼ŒæŒ‰åˆ—Full Name åˆ†ç»„ï¼Œè®¡ç®—å„ç»„çš„unit_priceå‡å€¼ df.groupby('Full Name')['unit_pice'].mean() æ•°æ®è½¬æ¢å¼ºè½¬å°±å¥½äº†dict(),int(),float()â€¦â€¦ dic = dict(df.groupby('Full Name')['unit_pice'].mean()) è½¬åŒ–ä¸ºnumpy.ndarray array array = df['text'].values array = df['text'].values.astype(str) locæ–¹æ³•å¦‚æœä¸å­˜åœ¨foldåˆ—ï¼Œæ–°å»ºâ€™foldâ€™åˆ—ï¼Œå¹¶åœ¨ä½ç½®[0, 5]ä¸Šèµ‹å€¼ä¸º1ã€‚ import pandas as pd df = pd.DataFrame({\"featrues\": [\"long\", \"high\", \"long\", \"short\", \"big\", \"small\"], \"labels\": [\"1\", \"1\", \"1\", \"0\", \"1\", \"0\"]}) df.loc[[0, 5], 'fold'] = 1 df featrues labels fold 0 long 1 1.0 1 high 1 NaN 2 long 1 NaN 3 short 0 NaN 4 big 1 NaN ","date":"2022-05-23","objectID":"/pandas/:1:3","series":["python_data_analysis"],"tags":["tools","py"],"title":"Pandasçš„ä½¿ç”¨æ–¹æ³•","uri":"/pandas/#æ•°æ®è½¬æ¢"},{"categories":[],"content":" æ•°æ®å¤„ç† éšå‡½æ•°æ–¹æ³•ä¸¾ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼Œtotalé‡Œéƒ½æ˜¯899ä¸‡å…ƒçš„å½¢å¼ï¼ŒæŠŠä¸‡å…ƒæ›¿æ¢æ‰ï¼Œå¹¶è½¬ä¸ºfloatæ ¼å¼ï¼Œå…¶å®éšå‡½æ•°å¹²çš„è¿œä¸æ­¢è¿™äº›â€¦â€¦ format_fun = lambda x: float(x.replace('ä¸‡å…ƒ', '')) df[\"price\"] = df[\"total\"].apply(format_fun) åˆå¹¶ä¸¤åˆ—å­—ç¬¦ä¸² df[\"Full Name\"] = df[\"province\"].map(str) +','+ df[\"city\"] city_lis = list(set(list(df['Full Name'].values))) print(city_lis[:3]) ['å±±ä¸œ,é’å²›', 'æ±Ÿè¥¿,èµ£å·', 'ç”˜è‚ƒ,å…°å·'] ç›¸åŒåŠŸèƒ½ df[\"Full Name\"] = df[\"First\"] + \" \" + df[\"Last\"] df['Full Name'] = df[['First', 'Last']].apply(' '.join, axis=1) df['Full Name'] = df['First'].str.cat(df['Last'],sep=\" \") df['Full Name'] = df[['First', 'Last']].agg(' '.join, axis=1) åˆ—é—´æ•°æ®è®¡ç®—ä¸¾ä¸ªä¾‹å­ï¼Œé€šè¿‡æ€»ä»·å’Œé¢ç§¯å¾—åˆ°å•ä»·åˆ— df[\"total_price\"] = df[\"total\"].apply(lambda x: float(x.replace('ä¸‡å…ƒ', ''))) df['area_num'] = df[\"area\"].apply(lambda x: float(x.replace('ã¡', ''))) df['unit_pice'] = df['total_price'].map(float) / df['area_num'] * 10000 åˆ†ç»„æ•°æ®è®¡ç®— è®¡ç®—å‡å€¼ä¸¾ä¾‹ï¼ŒæŒ‰åˆ—Full Name åˆ†ç»„ï¼Œè®¡ç®—å„ç»„çš„unit_priceå‡å€¼ df.groupby('Full Name')['unit_pice'].mean() æ•°æ®è½¬æ¢å¼ºè½¬å°±å¥½äº†dict(),int(),float()â€¦â€¦ dic = dict(df.groupby('Full Name')['unit_pice'].mean()) è½¬åŒ–ä¸ºnumpy.ndarray array array = df['text'].values array = df['text'].values.astype(str) locæ–¹æ³•å¦‚æœä¸å­˜åœ¨foldåˆ—ï¼Œæ–°å»ºâ€™foldâ€™åˆ—ï¼Œå¹¶åœ¨ä½ç½®[0, 5]ä¸Šèµ‹å€¼ä¸º1ã€‚ import pandas as pd df = pd.DataFrame({\"featrues\": [\"long\", \"high\", \"long\", \"short\", \"big\", \"small\"], \"labels\": [\"1\", \"1\", \"1\", \"0\", \"1\", \"0\"]}) df.loc[[0, 5], 'fold'] = 1 df featrues labels fold 0 long 1 1.0 1 high 1 NaN 2 long 1 NaN 3 short 0 NaN 4 big 1 NaN ","date":"2022-05-23","objectID":"/pandas/:1:3","series":["python_data_analysis"],"tags":["tools","py"],"title":"Pandasçš„ä½¿ç”¨æ–¹æ³•","uri":"/pandas/#locæ–¹æ³•"},{"categories":[],"content":" æ‰“å°å±æ€§ æ˜¾ç¤ºæ‰€æœ‰è¡Œå’Œåˆ— #æ˜¾ç¤ºæ‰€æœ‰åˆ— pd.set_option('display.max_columns', None) #æ˜¾ç¤ºæ‰€æœ‰è¡Œ pd.set_option('display.max_rows', None) #è®¾ç½®valueçš„æ˜¾ç¤ºé•¿åº¦ä¸º100ï¼Œé»˜è®¤ä¸º50 pd.set_option('max_colwidth',100) ","date":"2022-05-23","objectID":"/pandas/:1:4","series":["python_data_analysis"],"tags":["tools","py"],"title":"Pandasçš„ä½¿ç”¨æ–¹æ³•","uri":"/pandas/#æ‰“å°å±æ€§"},{"categories":[],"content":" æ‰“å°å±æ€§ æ˜¾ç¤ºæ‰€æœ‰è¡Œå’Œåˆ— #æ˜¾ç¤ºæ‰€æœ‰åˆ— pd.set_option('display.max_columns', None) #æ˜¾ç¤ºæ‰€æœ‰è¡Œ pd.set_option('display.max_rows', None) #è®¾ç½®valueçš„æ˜¾ç¤ºé•¿åº¦ä¸º100ï¼Œé»˜è®¤ä¸º50 pd.set_option('max_colwidth',100) ","date":"2022-05-23","objectID":"/pandas/:1:4","series":["python_data_analysis"],"tags":["tools","py"],"title":"Pandasçš„ä½¿ç”¨æ–¹æ³•","uri":"/pandas/#æ˜¾ç¤ºæ‰€æœ‰è¡Œå’Œåˆ—"},{"categories":[],"content":" é‡‡æ ·æ–¹æ³• éšæœºé‡‡æ · # éšæœºé‡‡æ ·100ä¸ª \u003e\u003e\u003e df_sampled = df.sample(n=100) # éšæœºé‡‡æ ·50%çš„æ ·æœ¬ \u003e\u003e\u003e df_sampled = df.sample(frac=0.5) æ¡ä»¶é‡‡æ · # é€‰è‹¹æœçš„è¡Œ \u003e\u003e\u003e df_sampled = df[df['fruit'] == 'apple'] åˆ†ç»„é‡‡æ · \u003e\u003e\u003e df = pd.DataFrame( ... {\"a\": [\"red\"] * 2 + [\"blue\"] * 2 + [\"black\"] * 2, \"b\": range(6)} ... ) \u003e\u003e\u003e df a b 0 red 0 1 red 1 2 blue 2 3 blue 3 4 black 4 5 black 5 # æ¯ç»„é‡Œå¤´é‡‡æ ·ä¸€ä¸ªæ•°æ® \u003e\u003e\u003e df.groupby(\"a\").sample(n=1, random_state=1) a b 4 black 4 2 blue 2 1 red 1 # æŒ‰åˆ—\"a\"çš„å€¼åˆ†ç»„é‡‡æ ·ï¼Œåªä¿ç•™åˆ—\"b\"çš„å€¼ \u003e\u003e\u003e df.groupby(\"a\")[\"b\"].sample(frac=0.5, random_state=2) 5 5 2 2 0 0 Name: b, dtype: int64 # ä¸ºæ¯ä¸ªæ ·æœ¬èµ‹äºˆé‡‡æ ·æƒé‡ \u003e\u003e\u003e df.groupby(\"a\").sample( ... n=1, ... weights=[1, 1, 1, 0, 0, 1], ... random_state=1, ... ) a b 5 black 5 2 blue 2 0 red 0 ","date":"2022-05-23","objectID":"/pandas/:1:5","series":["python_data_analysis"],"tags":["tools","py"],"title":"Pandasçš„ä½¿ç”¨æ–¹æ³•","uri":"/pandas/#é‡‡æ ·æ–¹æ³•"},{"categories":[],"content":" é‡‡æ ·æ–¹æ³• éšæœºé‡‡æ · # éšæœºé‡‡æ ·100ä¸ª \u003e\u003e\u003e df_sampled = df.sample(n=100) # éšæœºé‡‡æ ·50%çš„æ ·æœ¬ \u003e\u003e\u003e df_sampled = df.sample(frac=0.5) æ¡ä»¶é‡‡æ · # é€‰è‹¹æœçš„è¡Œ \u003e\u003e\u003e df_sampled = df[df['fruit'] == 'apple'] åˆ†ç»„é‡‡æ · \u003e\u003e\u003e df = pd.DataFrame( ... {\"a\": [\"red\"] * 2 + [\"blue\"] * 2 + [\"black\"] * 2, \"b\": range(6)} ... ) \u003e\u003e\u003e df a b 0 red 0 1 red 1 2 blue 2 3 blue 3 4 black 4 5 black 5 # æ¯ç»„é‡Œå¤´é‡‡æ ·ä¸€ä¸ªæ•°æ® \u003e\u003e\u003e df.groupby(\"a\").sample(n=1, random_state=1) a b 4 black 4 2 blue 2 1 red 1 # æŒ‰åˆ—\"a\"çš„å€¼åˆ†ç»„é‡‡æ ·ï¼Œåªä¿ç•™åˆ—\"b\"çš„å€¼ \u003e\u003e\u003e df.groupby(\"a\")[\"b\"].sample(frac=0.5, random_state=2) 5 5 2 2 0 0 Name: b, dtype: int64 # ä¸ºæ¯ä¸ªæ ·æœ¬èµ‹äºˆé‡‡æ ·æƒé‡ \u003e\u003e\u003e df.groupby(\"a\").sample( ... n=1, ... weights=[1, 1, 1, 0, 0, 1], ... random_state=1, ... ) a b 5 black 5 2 blue 2 0 red 0 ","date":"2022-05-23","objectID":"/pandas/:1:5","series":["python_data_analysis"],"tags":["tools","py"],"title":"Pandasçš„ä½¿ç”¨æ–¹æ³•","uri":"/pandas/#éšæœºé‡‡æ ·"},{"categories":[],"content":" é‡‡æ ·æ–¹æ³• éšæœºé‡‡æ · # éšæœºé‡‡æ ·100ä¸ª \u003e\u003e\u003e df_sampled = df.sample(n=100) # éšæœºé‡‡æ ·50%çš„æ ·æœ¬ \u003e\u003e\u003e df_sampled = df.sample(frac=0.5) æ¡ä»¶é‡‡æ · # é€‰è‹¹æœçš„è¡Œ \u003e\u003e\u003e df_sampled = df[df['fruit'] == 'apple'] åˆ†ç»„é‡‡æ · \u003e\u003e\u003e df = pd.DataFrame( ... {\"a\": [\"red\"] * 2 + [\"blue\"] * 2 + [\"black\"] * 2, \"b\": range(6)} ... ) \u003e\u003e\u003e df a b 0 red 0 1 red 1 2 blue 2 3 blue 3 4 black 4 5 black 5 # æ¯ç»„é‡Œå¤´é‡‡æ ·ä¸€ä¸ªæ•°æ® \u003e\u003e\u003e df.groupby(\"a\").sample(n=1, random_state=1) a b 4 black 4 2 blue 2 1 red 1 # æŒ‰åˆ—\"a\"çš„å€¼åˆ†ç»„é‡‡æ ·ï¼Œåªä¿ç•™åˆ—\"b\"çš„å€¼ \u003e\u003e\u003e df.groupby(\"a\")[\"b\"].sample(frac=0.5, random_state=2) 5 5 2 2 0 0 Name: b, dtype: int64 # ä¸ºæ¯ä¸ªæ ·æœ¬èµ‹äºˆé‡‡æ ·æƒé‡ \u003e\u003e\u003e df.groupby(\"a\").sample( ... n=1, ... weights=[1, 1, 1, 0, 0, 1], ... random_state=1, ... ) a b 5 black 5 2 blue 2 0 red 0 ","date":"2022-05-23","objectID":"/pandas/:1:5","series":["python_data_analysis"],"tags":["tools","py"],"title":"Pandasçš„ä½¿ç”¨æ–¹æ³•","uri":"/pandas/#æ¡ä»¶é‡‡æ ·"},{"categories":[],"content":" é‡‡æ ·æ–¹æ³• éšæœºé‡‡æ · # éšæœºé‡‡æ ·100ä¸ª \u003e\u003e\u003e df_sampled = df.sample(n=100) # éšæœºé‡‡æ ·50%çš„æ ·æœ¬ \u003e\u003e\u003e df_sampled = df.sample(frac=0.5) æ¡ä»¶é‡‡æ · # é€‰è‹¹æœçš„è¡Œ \u003e\u003e\u003e df_sampled = df[df['fruit'] == 'apple'] åˆ†ç»„é‡‡æ · \u003e\u003e\u003e df = pd.DataFrame( ... {\"a\": [\"red\"] * 2 + [\"blue\"] * 2 + [\"black\"] * 2, \"b\": range(6)} ... ) \u003e\u003e\u003e df a b 0 red 0 1 red 1 2 blue 2 3 blue 3 4 black 4 5 black 5 # æ¯ç»„é‡Œå¤´é‡‡æ ·ä¸€ä¸ªæ•°æ® \u003e\u003e\u003e df.groupby(\"a\").sample(n=1, random_state=1) a b 4 black 4 2 blue 2 1 red 1 # æŒ‰åˆ—\"a\"çš„å€¼åˆ†ç»„é‡‡æ ·ï¼Œåªä¿ç•™åˆ—\"b\"çš„å€¼ \u003e\u003e\u003e df.groupby(\"a\")[\"b\"].sample(frac=0.5, random_state=2) 5 5 2 2 0 0 Name: b, dtype: int64 # ä¸ºæ¯ä¸ªæ ·æœ¬èµ‹äºˆé‡‡æ ·æƒé‡ \u003e\u003e\u003e df.groupby(\"a\").sample( ... n=1, ... weights=[1, 1, 1, 0, 0, 1], ... random_state=1, ... ) a b 5 black 5 2 blue 2 0 red 0 ","date":"2022-05-23","objectID":"/pandas/:1:5","series":["python_data_analysis"],"tags":["tools","py"],"title":"Pandasçš„ä½¿ç”¨æ–¹æ³•","uri":"/pandas/#åˆ†ç»„é‡‡æ ·"},{"categories":[],"content":" è·å–ç´¢å¼• æŒ‰ç…§æ¡ä»¶å–ç‰¹å®šè¡Œçš„ç´¢å¼• pandas 1.5.2 fruit = [\"apple\", \"peach\", \"peach\", \"watermelon\"] \u003e\u003e\u003e df = pd.DataFrame({ ... \"fruit\": fruit ... }) \u003e\u003e\u003e idx = df.index[df[\"fruit\"]==\"peach\"] \u003e\u003e\u003e print(id) Int64Index([1, 2], dtype='int64') \u003e\u003e\u003e print(idx.tolist()) [1, 2] ","date":"2022-05-23","objectID":"/pandas/:1:6","series":["python_data_analysis"],"tags":["tools","py"],"title":"Pandasçš„ä½¿ç”¨æ–¹æ³•","uri":"/pandas/#è·å–ç´¢å¼•"},{"categories":[],"content":" ç´¢å¼•å–å€¼ æ ¹æ®pandasç´¢å¼•ç±»å‹æˆ–listç±»å‹çš„ç´¢å¼•å–å€¼ï¼Œå¯ä»¥å¤šä¸ª pandas 1.5.2 fruit = [\"apple\", \"peach\", \"peach\", \"watermelon\"] \u003e\u003e\u003e df = pd.DataFrame({ ... \"fruit\": fruit ... }) \u003e\u003e\u003e idx = df.index[df[\"fruit\"]==\"peach\"] \u003e\u003e\u003e print(df.loc[idx]) fruit 1 peach 2 peach \u003e\u003e\u003e print(df.loc[idx.tolist()]) fruit 1 peach 2 peach ","date":"2022-05-23","objectID":"/pandas/:1:7","series":["python_data_analysis"],"tags":["tools","py"],"title":"Pandasçš„ä½¿ç”¨æ–¹æ³•","uri":"/pandas/#ç´¢å¼•å–å€¼"},{"categories":["nlp"],"content":" Task Description link SNLI Stanford language inference task. æ–¯å¦ç¦å¤§å­¦è¯­è¨€æ¨ç†ä»»åŠ¡ã€‚ç»™å®šä¸€ä¸ªå‰æå’Œä¸€ä¸ªå‡è®¾ï¼Œç›®æ ‡æ˜¯é¢„æµ‹å‡è®¾ä¸å‰æçš„å…³ç³»æ˜¯åŒ…å«çš„ã€ä¸­æ€§çš„ï¼Œè¿˜æ˜¯çŸ›ç›¾çš„ã€‚ MNLI Language inference dataset on multigenre texts.å¤šç±»å‹æ–‡æœ¬çš„è¯­è¨€æ¨æ–­æ•°æ®é›†ï¼ŒåŒ…æ‹¬è½¬å½•è¯­éŸ³ã€æµè¡Œå°è¯´å’Œæ”¿åºœæŠ¥å‘Š(Wilmamsç­‰äººï¼Œ2018)ï¼Œå¥å­å¯¹ï¼Œä¸€ä¸ªå‰æï¼Œä¸€ä¸ªæ˜¯å‡è®¾ã€‚å‰æå’Œå‡è®¾çš„å…³ç³»æœ‰ä¸‰ç§æƒ…å†µï¼šè•´å«ï¼ˆentailmentï¼‰ï¼ŒçŸ›ç›¾ï¼ˆcontradictionï¼‰ï¼Œä¸­ç«‹ï¼ˆneutralï¼‰ã€‚å¥å­å¯¹ä¸‰åˆ†ç±»é—®é¢˜ã€‚ä¸SNLIæ•°æ®é›†ç›¸æ¯”ï¼Œä¸åŒçš„å†™ä½œå’Œå£è¯­é£æ ¼æ–‡æœ¬æ›´ä¸ºå¤æ‚ï¼ŒåŒ…æ‹¬ä¸è®­ç»ƒåŸŸåŒ¹é…çš„éªŒè¯æ•°æ®å’Œä¸è®­ç»ƒåŸŸä¸åŒ¹é…çš„éªŒè¯æ•°æ®ï¼ˆä¸€ä¸ªæ˜¯matched(m)ï¼Œå¦ä¸€ä¸ªæ˜¯mismatchedï¼ˆmmï¼‰å³è®­ç»ƒå’ŒéªŒè¯ä¸åœ¨åŒä¸€ä¸ªæ•°æ®é›†ä¸Šè¿›è¡Œæ¯”å¦‚è¯­éŸ³å’Œå°è¯´ç­‰ï¼‰ã€‚ Yelp(Yelp Polarity) Document-level sentiment classification on positive and negative reviews. IMDB Document-level sentiment classification dataset on positive and negative movie reviews, where the average sequence length is longer than the Yelp dataset.ç¯‡ç« çº§åˆ«çš„å½±è¯„ï¼Œåˆ¤æ–­è¯„è®ºä¸ºæ­£å‘æˆ–è€…è´Ÿå‘ã€‚ Click here to download AG(AGâ€™s News) Setence-level classification with regard to four news topics: World, Sports, Business, and Science/Technology. Click here to download(Kaggle) Fake(Fake News Detection) Document-level classification on whether a news article is fake or not. The datasetcomes from the Kaggle Fake News Challenge Click here to download(Kaggle) ","date":"2022-05-23","objectID":"/nlp_task/:0:0","series":[],"tags":["task"],"title":"è‡ªç„¶è¯­è¨€å¤„ç†ç›¸å…³ä»»åŠ¡ä¸æ•°æ®é›†","uri":"/nlp_task/#"},{"categories":["tutorial"],"content":"Jupyter å·²ç»è¢«äººä»¬å¹¿æ³›ä½¿ç”¨æ¥ä½œä¸ºç”Ÿäº§åŠ›å·¥å…·ï¼Œç”±äºå…¶èƒ½å¤Ÿæ­¥è¿è¡Œå’Œå¯è§†åŒ–ç­‰ï¼Œå¸¦æ¥äº†è‰¯å¥½çš„æ•™å­¦å’Œäº¤äº’ä½“éªŒã€‚ ","date":"2022-05-22","objectID":"/jupyter/:0:0","series":["jupyter"],"tags":["py","tools"],"title":"Jupyterä½¿ç”¨æ•™ç¨‹","uri":"/jupyter/#"},{"categories":["tutorial"],"content":" Jupyter Lab","date":"2022-05-22","objectID":"/jupyter/:1:0","series":["jupyter"],"tags":["py","tools"],"title":"Jupyterä½¿ç”¨æ•™ç¨‹","uri":"/jupyter/#jupyter-lab"},{"categories":["tutorial"],"content":" å®‰è£…å’Œé…ç½® å®‰è£… pip install jupyterlab é…ç½® å‘½ä»¤è¡ŒæŒ‡å®š jupyter lab --allow-root # å…è®¸rootæƒé™ --no-browser # å¯åŠ¨ä¸æ‰“å¼€çª—å£ --ip '*' # ä¸æŒ‡å®šIP --port '8889' # æŒ‡å®šå¼€æ”¾ç«¯å£ /home/oliver/CONTEST/kaggle_patent_phrase_matching2022 # æŒ‡å®šå¯åŠ¨ç›®å½• --config='~/.jupyter/jupyter_notebook_config_special.py' # æŒ‡å®šé…ç½®æ–‡ä»¶(ä»¥ä¸Šé…ç½®éƒ½å¯ä»¥å†™å…¥æ­¤) è®¾ç½®ç™»å½•å¯†ç  jupyter lab password ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼Œè¿è¡Œåä¸€èˆ¬åœ¨~/.jupyterç›®å½•ä¸‹ä¼šç”Ÿæˆ jupyter lab --generate-config jupyterlabé…ç½®æ–‡ä»¶è®¾ç½® c.ServerApp.allow_remote_access = True # å…è®¸è¿œç¨‹ç™»å½• c.ServerApp.ip = '*' # ä¸æŒ‡å®šip c.LabApp.open_browser = False c.ServerApp.allow_root = True c.NotebookApp.notebook_dir = '/home/' # å¯åŠ¨ç›®å½•ï¼Œè¿™ä¸ªè¦ç”¨å‘½ä»¤è¡ŒæŒ‡å®šæ‰æœ‰æ•ˆ \"\"\" \u003e\u003e\u003e from notebook.auth import passwd \u003e\u003e\u003e passwd() Enter password: Verify password: 'argon2:$argon2id$v=19$m=10240,t=10,p=8$jlFeqL9E3EPEFV2CyPETWQ$lzw9f8pTcjmXCW1uh0K0mzeQqZsGbHeaQSv4/6BJ0ys' \"\"\" c.NotebookApp.password = u'argon2:$argon2id......(æ¢æˆä½ çš„ç§˜é’¥)' #å°±æ˜¯æŠŠç”Ÿæˆçš„å¯†ç jsonæ–‡ä»¶é‡Œé¢çš„ä¸€ä¸²å¯†ç æ”¾è¿™é‡Œ ç»™å®ƒé…ä¸€ä¸ªæœåŠ¡ sudo vi /etc/systemd/system/jupyterlab.service å†™å…¥ä»¥ä¸‹å†…å®¹ [Unit] Description=contest jupyterlab service After=network.target [Service] Type=simple User=oliver ExecStart=/home/oliver/.pyenv/versions/patent_phrase/bin/jupyter-lab --allow-root --no-browser --ip '*' --port '8889' --config='/home/oliver/.jupyter/jupyter_notebook_config_special.py' /home/oliver Restart=on-failure RestartPreventExitStatus=23 [Install] WantedBy=multi-user.target è®©è¿™ä¸ªæœåŠ¡å¼€æœºå¯åŠ¨ sudo systemctl daemon-reload sudo systemctl enable jupyterlab sudo systemctl start jupyterlab sudo systemctl status jupyterlab ","date":"2022-05-22","objectID":"/jupyter/:1:1","series":["jupyter"],"tags":["py","tools"],"title":"Jupyterä½¿ç”¨æ•™ç¨‹","uri":"/jupyter/#å®‰è£…å’Œé…ç½®"},{"categories":["tutorial"],"content":" å®‰è£…å’Œé…ç½® å®‰è£… pip install jupyterlab é…ç½® å‘½ä»¤è¡ŒæŒ‡å®š jupyter lab --allow-root # å…è®¸rootæƒé™ --no-browser # å¯åŠ¨ä¸æ‰“å¼€çª—å£ --ip '*' # ä¸æŒ‡å®šIP --port '8889' # æŒ‡å®šå¼€æ”¾ç«¯å£ /home/oliver/CONTEST/kaggle_patent_phrase_matching2022 # æŒ‡å®šå¯åŠ¨ç›®å½• --config='~/.jupyter/jupyter_notebook_config_special.py' # æŒ‡å®šé…ç½®æ–‡ä»¶(ä»¥ä¸Šé…ç½®éƒ½å¯ä»¥å†™å…¥æ­¤) è®¾ç½®ç™»å½•å¯†ç  jupyter lab password ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼Œè¿è¡Œåä¸€èˆ¬åœ¨~/.jupyterç›®å½•ä¸‹ä¼šç”Ÿæˆ jupyter lab --generate-config jupyterlabé…ç½®æ–‡ä»¶è®¾ç½® c.ServerApp.allow_remote_access = True # å…è®¸è¿œç¨‹ç™»å½• c.ServerApp.ip = '*' # ä¸æŒ‡å®šip c.LabApp.open_browser = False c.ServerApp.allow_root = True c.NotebookApp.notebook_dir = '/home/' # å¯åŠ¨ç›®å½•ï¼Œè¿™ä¸ªè¦ç”¨å‘½ä»¤è¡ŒæŒ‡å®šæ‰æœ‰æ•ˆ \"\"\" \u003e\u003e\u003e from notebook.auth import passwd \u003e\u003e\u003e passwd() Enter password: Verify password: 'argon2:$argon2id$v=19$m=10240,t=10,p=8$jlFeqL9E3EPEFV2CyPETWQ$lzw9f8pTcjmXCW1uh0K0mzeQqZsGbHeaQSv4/6BJ0ys' \"\"\" c.NotebookApp.password = u'argon2:$argon2id......(æ¢æˆä½ çš„ç§˜é’¥)' #å°±æ˜¯æŠŠç”Ÿæˆçš„å¯†ç jsonæ–‡ä»¶é‡Œé¢çš„ä¸€ä¸²å¯†ç æ”¾è¿™é‡Œ ç»™å®ƒé…ä¸€ä¸ªæœåŠ¡ sudo vi /etc/systemd/system/jupyterlab.service å†™å…¥ä»¥ä¸‹å†…å®¹ [Unit] Description=contest jupyterlab service After=network.target [Service] Type=simple User=oliver ExecStart=/home/oliver/.pyenv/versions/patent_phrase/bin/jupyter-lab --allow-root --no-browser --ip '*' --port '8889' --config='/home/oliver/.jupyter/jupyter_notebook_config_special.py' /home/oliver Restart=on-failure RestartPreventExitStatus=23 [Install] WantedBy=multi-user.target è®©è¿™ä¸ªæœåŠ¡å¼€æœºå¯åŠ¨ sudo systemctl daemon-reload sudo systemctl enable jupyterlab sudo systemctl start jupyterlab sudo systemctl status jupyterlab ","date":"2022-05-22","objectID":"/jupyter/:1:1","series":["jupyter"],"tags":["py","tools"],"title":"Jupyterä½¿ç”¨æ•™ç¨‹","uri":"/jupyter/#å®‰è£…"},{"categories":["tutorial"],"content":" å®‰è£…å’Œé…ç½® å®‰è£… pip install jupyterlab é…ç½® å‘½ä»¤è¡ŒæŒ‡å®š jupyter lab --allow-root # å…è®¸rootæƒé™ --no-browser # å¯åŠ¨ä¸æ‰“å¼€çª—å£ --ip '*' # ä¸æŒ‡å®šIP --port '8889' # æŒ‡å®šå¼€æ”¾ç«¯å£ /home/oliver/CONTEST/kaggle_patent_phrase_matching2022 # æŒ‡å®šå¯åŠ¨ç›®å½• --config='~/.jupyter/jupyter_notebook_config_special.py' # æŒ‡å®šé…ç½®æ–‡ä»¶(ä»¥ä¸Šé…ç½®éƒ½å¯ä»¥å†™å…¥æ­¤) è®¾ç½®ç™»å½•å¯†ç  jupyter lab password ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼Œè¿è¡Œåä¸€èˆ¬åœ¨~/.jupyterç›®å½•ä¸‹ä¼šç”Ÿæˆ jupyter lab --generate-config jupyterlabé…ç½®æ–‡ä»¶è®¾ç½® c.ServerApp.allow_remote_access = True # å…è®¸è¿œç¨‹ç™»å½• c.ServerApp.ip = '*' # ä¸æŒ‡å®šip c.LabApp.open_browser = False c.ServerApp.allow_root = True c.NotebookApp.notebook_dir = '/home/' # å¯åŠ¨ç›®å½•ï¼Œè¿™ä¸ªè¦ç”¨å‘½ä»¤è¡ŒæŒ‡å®šæ‰æœ‰æ•ˆ \"\"\" \u003e\u003e\u003e from notebook.auth import passwd \u003e\u003e\u003e passwd() Enter password: Verify password: 'argon2:$argon2id$v=19$m=10240,t=10,p=8$jlFeqL9E3EPEFV2CyPETWQ$lzw9f8pTcjmXCW1uh0K0mzeQqZsGbHeaQSv4/6BJ0ys' \"\"\" c.NotebookApp.password = u'argon2:$argon2id......(æ¢æˆä½ çš„ç§˜é’¥)' #å°±æ˜¯æŠŠç”Ÿæˆçš„å¯†ç jsonæ–‡ä»¶é‡Œé¢çš„ä¸€ä¸²å¯†ç æ”¾è¿™é‡Œ ç»™å®ƒé…ä¸€ä¸ªæœåŠ¡ sudo vi /etc/systemd/system/jupyterlab.service å†™å…¥ä»¥ä¸‹å†…å®¹ [Unit] Description=contest jupyterlab service After=network.target [Service] Type=simple User=oliver ExecStart=/home/oliver/.pyenv/versions/patent_phrase/bin/jupyter-lab --allow-root --no-browser --ip '*' --port '8889' --config='/home/oliver/.jupyter/jupyter_notebook_config_special.py' /home/oliver Restart=on-failure RestartPreventExitStatus=23 [Install] WantedBy=multi-user.target è®©è¿™ä¸ªæœåŠ¡å¼€æœºå¯åŠ¨ sudo systemctl daemon-reload sudo systemctl enable jupyterlab sudo systemctl start jupyterlab sudo systemctl status jupyterlab ","date":"2022-05-22","objectID":"/jupyter/:1:1","series":["jupyter"],"tags":["py","tools"],"title":"Jupyterä½¿ç”¨æ•™ç¨‹","uri":"/jupyter/#é…ç½®"},{"categories":["tutorial"],"content":" è®¾ç½®ä»£ç† æ–¹æ³•ä¸€ï¼ˆä¾¿æ·æŒ‡æ•°1ï¼‰ä¸éš¾çŸ¥é“ï¼Œç›´æ¥åœ¨jupyterçš„å¼€å¤´å†™ä¸Šè¿™å¥æœ‰æ•ˆã€‚ import os os.environ['HTTP_PROXY']=\"http://127.0.0.1:7890\" os.environ['HTTPS_PROXY']=\"http://127.0.0.1:7890\" import requests requests.get(\"http://google.com\") \u003cResponse [200]\u003e okï¼Œæ­£å¸¸è®¿é—®ã€‚ æ–¹æ³•äºŒï¼ˆä¾¿æ·æŒ‡æ•°2ï¼‰æ­¤æ–¹æ³•è®¾ç½®å®Œæˆåéœ€è¦é‡æ–°å¯åŠ¨jupyterç¨‹åºã€‚ å°†è¿™å‡ è¡Œä»£ç å†™å…¥jupyterå¯¹åº”çš„é…ç½®æ–‡ä»¶ã€‚ vi ~/.jupyter/jupyter_lab_config.py import os os.environ['HTTP_PROXY']=\"http://127.0.0.1:7890\" os.environ['HTTPS_PROXY']=\"http://127.0.0.1:7890\" æ–¹æ³•ä¸‰ï¼ˆä¾¿æ·æŒ‡æ•°3ï¼‰æ¥æº æ‰¾äº†å¾ˆå¤šå®ç°æ–¹æ³•ï¼Œä»¥ä¸‹æ–¹æ³•æœ‰æ•ˆã€‚ å› ä¸ºjupyteræ˜¯åŸºäºipythonæ¨¡å¼çš„ï¼Œæ‰€ä»¥åœ¨ipythonçš„å¯åŠ¨æ–‡ä»¶ä¸­åˆ›å»ºå¦‚ä¸‹æ–‡ä»¶ï¼Œå‰ç¼€è¶Šå°ä»£è¡¨ä¼˜å…ˆçº§è¶Šé«˜ã€‚ vi ~/.ipython/profile_default/startup/00-first.py å‘å…¶ä¸­å†™å…¥ import os os.environ['HTTP_PROXY']=\"http://127.0.0.1:7890\" os.environ['HTTPS_PROXY']=\"http://127.0.0.1:7890\" ç„¶åé‡æ–°è¿è¡Œnotebookï¼Œæ³¨æ„è¦æŠŠkernelå…³æ‰é‡å¼€ï¼Œå¦åˆ™ä¸ä¼šæ‰§è¡Œæ­¤æ–‡ä»¶ã€‚ ç„¶åæ¯æ¬¡å¯åŠ¨notebookä¹‹å‰å°±ä¼šè¿è¡Œè¿™ä¸ªæ–‡ä»¶ã€‚ ","date":"2022-05-22","objectID":"/jupyter/:1:2","series":["jupyter"],"tags":["py","tools"],"title":"Jupyterä½¿ç”¨æ•™ç¨‹","uri":"/jupyter/#è®¾ç½®ä»£ç†"},{"categories":["tutorial"],"content":" è®¾ç½®ä»£ç† æ–¹æ³•ä¸€ï¼ˆä¾¿æ·æŒ‡æ•°1ï¼‰ä¸éš¾çŸ¥é“ï¼Œç›´æ¥åœ¨jupyterçš„å¼€å¤´å†™ä¸Šè¿™å¥æœ‰æ•ˆã€‚ import os os.environ['HTTP_PROXY']=\"http://127.0.0.1:7890\" os.environ['HTTPS_PROXY']=\"http://127.0.0.1:7890\" import requests requests.get(\"http://google.com\") okï¼Œæ­£å¸¸è®¿é—®ã€‚ æ–¹æ³•äºŒï¼ˆä¾¿æ·æŒ‡æ•°2ï¼‰æ­¤æ–¹æ³•è®¾ç½®å®Œæˆåéœ€è¦é‡æ–°å¯åŠ¨jupyterç¨‹åºã€‚ å°†è¿™å‡ è¡Œä»£ç å†™å…¥jupyterå¯¹åº”çš„é…ç½®æ–‡ä»¶ã€‚ vi ~/.jupyter/jupyter_lab_config.py import os os.environ['HTTP_PROXY']=\"http://127.0.0.1:7890\" os.environ['HTTPS_PROXY']=\"http://127.0.0.1:7890\" æ–¹æ³•ä¸‰ï¼ˆä¾¿æ·æŒ‡æ•°3ï¼‰æ¥æº æ‰¾äº†å¾ˆå¤šå®ç°æ–¹æ³•ï¼Œä»¥ä¸‹æ–¹æ³•æœ‰æ•ˆã€‚ å› ä¸ºjupyteræ˜¯åŸºäºipythonæ¨¡å¼çš„ï¼Œæ‰€ä»¥åœ¨ipythonçš„å¯åŠ¨æ–‡ä»¶ä¸­åˆ›å»ºå¦‚ä¸‹æ–‡ä»¶ï¼Œå‰ç¼€è¶Šå°ä»£è¡¨ä¼˜å…ˆçº§è¶Šé«˜ã€‚ vi ~/.ipython/profile_default/startup/00-first.py å‘å…¶ä¸­å†™å…¥ import os os.environ['HTTP_PROXY']=\"http://127.0.0.1:7890\" os.environ['HTTPS_PROXY']=\"http://127.0.0.1:7890\" ç„¶åé‡æ–°è¿è¡Œnotebookï¼Œæ³¨æ„è¦æŠŠkernelå…³æ‰é‡å¼€ï¼Œå¦åˆ™ä¸ä¼šæ‰§è¡Œæ­¤æ–‡ä»¶ã€‚ ç„¶åæ¯æ¬¡å¯åŠ¨notebookä¹‹å‰å°±ä¼šè¿è¡Œè¿™ä¸ªæ–‡ä»¶ã€‚ ","date":"2022-05-22","objectID":"/jupyter/:1:2","series":["jupyter"],"tags":["py","tools"],"title":"Jupyterä½¿ç”¨æ•™ç¨‹","uri":"/jupyter/#æ–¹æ³•ä¸€ä¾¿æ·æŒ‡æ•°1"},{"categories":["tutorial"],"content":" è®¾ç½®ä»£ç† æ–¹æ³•ä¸€ï¼ˆä¾¿æ·æŒ‡æ•°1ï¼‰ä¸éš¾çŸ¥é“ï¼Œç›´æ¥åœ¨jupyterçš„å¼€å¤´å†™ä¸Šè¿™å¥æœ‰æ•ˆã€‚ import os os.environ['HTTP_PROXY']=\"http://127.0.0.1:7890\" os.environ['HTTPS_PROXY']=\"http://127.0.0.1:7890\" import requests requests.get(\"http://google.com\") okï¼Œæ­£å¸¸è®¿é—®ã€‚ æ–¹æ³•äºŒï¼ˆä¾¿æ·æŒ‡æ•°2ï¼‰æ­¤æ–¹æ³•è®¾ç½®å®Œæˆåéœ€è¦é‡æ–°å¯åŠ¨jupyterç¨‹åºã€‚ å°†è¿™å‡ è¡Œä»£ç å†™å…¥jupyterå¯¹åº”çš„é…ç½®æ–‡ä»¶ã€‚ vi ~/.jupyter/jupyter_lab_config.py import os os.environ['HTTP_PROXY']=\"http://127.0.0.1:7890\" os.environ['HTTPS_PROXY']=\"http://127.0.0.1:7890\" æ–¹æ³•ä¸‰ï¼ˆä¾¿æ·æŒ‡æ•°3ï¼‰æ¥æº æ‰¾äº†å¾ˆå¤šå®ç°æ–¹æ³•ï¼Œä»¥ä¸‹æ–¹æ³•æœ‰æ•ˆã€‚ å› ä¸ºjupyteræ˜¯åŸºäºipythonæ¨¡å¼çš„ï¼Œæ‰€ä»¥åœ¨ipythonçš„å¯åŠ¨æ–‡ä»¶ä¸­åˆ›å»ºå¦‚ä¸‹æ–‡ä»¶ï¼Œå‰ç¼€è¶Šå°ä»£è¡¨ä¼˜å…ˆçº§è¶Šé«˜ã€‚ vi ~/.ipython/profile_default/startup/00-first.py å‘å…¶ä¸­å†™å…¥ import os os.environ['HTTP_PROXY']=\"http://127.0.0.1:7890\" os.environ['HTTPS_PROXY']=\"http://127.0.0.1:7890\" ç„¶åé‡æ–°è¿è¡Œnotebookï¼Œæ³¨æ„è¦æŠŠkernelå…³æ‰é‡å¼€ï¼Œå¦åˆ™ä¸ä¼šæ‰§è¡Œæ­¤æ–‡ä»¶ã€‚ ç„¶åæ¯æ¬¡å¯åŠ¨notebookä¹‹å‰å°±ä¼šè¿è¡Œè¿™ä¸ªæ–‡ä»¶ã€‚ ","date":"2022-05-22","objectID":"/jupyter/:1:2","series":["jupyter"],"tags":["py","tools"],"title":"Jupyterä½¿ç”¨æ•™ç¨‹","uri":"/jupyter/#æ–¹æ³•äºŒä¾¿æ·æŒ‡æ•°2"},{"categories":["tutorial"],"content":" è®¾ç½®ä»£ç† æ–¹æ³•ä¸€ï¼ˆä¾¿æ·æŒ‡æ•°1ï¼‰ä¸éš¾çŸ¥é“ï¼Œç›´æ¥åœ¨jupyterçš„å¼€å¤´å†™ä¸Šè¿™å¥æœ‰æ•ˆã€‚ import os os.environ['HTTP_PROXY']=\"http://127.0.0.1:7890\" os.environ['HTTPS_PROXY']=\"http://127.0.0.1:7890\" import requests requests.get(\"http://google.com\") okï¼Œæ­£å¸¸è®¿é—®ã€‚ æ–¹æ³•äºŒï¼ˆä¾¿æ·æŒ‡æ•°2ï¼‰æ­¤æ–¹æ³•è®¾ç½®å®Œæˆåéœ€è¦é‡æ–°å¯åŠ¨jupyterç¨‹åºã€‚ å°†è¿™å‡ è¡Œä»£ç å†™å…¥jupyterå¯¹åº”çš„é…ç½®æ–‡ä»¶ã€‚ vi ~/.jupyter/jupyter_lab_config.py import os os.environ['HTTP_PROXY']=\"http://127.0.0.1:7890\" os.environ['HTTPS_PROXY']=\"http://127.0.0.1:7890\" æ–¹æ³•ä¸‰ï¼ˆä¾¿æ·æŒ‡æ•°3ï¼‰æ¥æº æ‰¾äº†å¾ˆå¤šå®ç°æ–¹æ³•ï¼Œä»¥ä¸‹æ–¹æ³•æœ‰æ•ˆã€‚ å› ä¸ºjupyteræ˜¯åŸºäºipythonæ¨¡å¼çš„ï¼Œæ‰€ä»¥åœ¨ipythonçš„å¯åŠ¨æ–‡ä»¶ä¸­åˆ›å»ºå¦‚ä¸‹æ–‡ä»¶ï¼Œå‰ç¼€è¶Šå°ä»£è¡¨ä¼˜å…ˆçº§è¶Šé«˜ã€‚ vi ~/.ipython/profile_default/startup/00-first.py å‘å…¶ä¸­å†™å…¥ import os os.environ['HTTP_PROXY']=\"http://127.0.0.1:7890\" os.environ['HTTPS_PROXY']=\"http://127.0.0.1:7890\" ç„¶åé‡æ–°è¿è¡Œnotebookï¼Œæ³¨æ„è¦æŠŠkernelå…³æ‰é‡å¼€ï¼Œå¦åˆ™ä¸ä¼šæ‰§è¡Œæ­¤æ–‡ä»¶ã€‚ ç„¶åæ¯æ¬¡å¯åŠ¨notebookä¹‹å‰å°±ä¼šè¿è¡Œè¿™ä¸ªæ–‡ä»¶ã€‚ ","date":"2022-05-22","objectID":"/jupyter/:1:2","series":["jupyter"],"tags":["py","tools"],"title":"Jupyterä½¿ç”¨æ•™ç¨‹","uri":"/jupyter/#æ–¹æ³•ä¸‰ä¾¿æ·æŒ‡æ•°3"},{"categories":["tutorial"],"content":" å°†ipynbæ–‡ä»¶è¾“å‡ºä¸ºå…¶ä»–æ ¼å¼æ–‡ä»¶ Html jupyter nbconvert --to html notebook.ipynb åªå±•ç¤ºmarkdownï¼Œé€‚ç”¨äºç”Ÿæˆæ•°æ®åˆ†ææŠ¥å‘Š jupyter nbconvert --to html --no-input data_analy_4.ipynb Markdown jupyter nbconvert --to markdown notebook.ipynb PDF jupyter nbconvert --to pdf notebook.ipynb ","date":"2022-05-22","objectID":"/jupyter/:1:3","series":["jupyter"],"tags":["py","tools"],"title":"Jupyterä½¿ç”¨æ•™ç¨‹","uri":"/jupyter/#å°†ipynbæ–‡ä»¶è¾“å‡ºä¸ºå…¶ä»–æ ¼å¼æ–‡ä»¶"},{"categories":["tutorial"],"content":" å°†ipynbæ–‡ä»¶è¾“å‡ºä¸ºå…¶ä»–æ ¼å¼æ–‡ä»¶ Html jupyter nbconvert --to html notebook.ipynb åªå±•ç¤ºmarkdownï¼Œé€‚ç”¨äºç”Ÿæˆæ•°æ®åˆ†ææŠ¥å‘Š jupyter nbconvert --to html --no-input data_analy_4.ipynb Markdown jupyter nbconvert --to markdown notebook.ipynb PDF jupyter nbconvert --to pdf notebook.ipynb ","date":"2022-05-22","objectID":"/jupyter/:1:3","series":["jupyter"],"tags":["py","tools"],"title":"Jupyterä½¿ç”¨æ•™ç¨‹","uri":"/jupyter/#html"},{"categories":["tutorial"],"content":" å°†ipynbæ–‡ä»¶è¾“å‡ºä¸ºå…¶ä»–æ ¼å¼æ–‡ä»¶ Html jupyter nbconvert --to html notebook.ipynb åªå±•ç¤ºmarkdownï¼Œé€‚ç”¨äºç”Ÿæˆæ•°æ®åˆ†ææŠ¥å‘Š jupyter nbconvert --to html --no-input data_analy_4.ipynb Markdown jupyter nbconvert --to markdown notebook.ipynb PDF jupyter nbconvert --to pdf notebook.ipynb ","date":"2022-05-22","objectID":"/jupyter/:1:3","series":["jupyter"],"tags":["py","tools"],"title":"Jupyterä½¿ç”¨æ•™ç¨‹","uri":"/jupyter/#markdown"},{"categories":["tutorial"],"content":" å°†ipynbæ–‡ä»¶è¾“å‡ºä¸ºå…¶ä»–æ ¼å¼æ–‡ä»¶ Html jupyter nbconvert --to html notebook.ipynb åªå±•ç¤ºmarkdownï¼Œé€‚ç”¨äºç”Ÿæˆæ•°æ®åˆ†ææŠ¥å‘Š jupyter nbconvert --to html --no-input data_analy_4.ipynb Markdown jupyter nbconvert --to markdown notebook.ipynb PDF jupyter nbconvert --to pdf notebook.ipynb ","date":"2022-05-22","objectID":"/jupyter/:1:3","series":["jupyter"],"tags":["py","tools"],"title":"Jupyterä½¿ç”¨æ•™ç¨‹","uri":"/jupyter/#pdf"},{"categories":["technology_log"],"content":" è¯´æ˜é€šå¸¸ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ï¼Œéœ€è¦æŠŠä»£ç æ–‡ä»¶ä½œä¸ºä¸€ä¸ªåŒ…æ¥ç”¨ï¼Œæ¯”å¦‚ä»£ç æ–‡ä»¶æ˜¯codeæ–‡ä»¶å¤¹ï¼Œå¦‚æœä½¿ç”¨Pycharmç­‰IDEï¼Œåªéœ€è¦åœ¨é‡Œé¢åŠ å…¥ä¸€ä¸ªç©ºçš„æ–‡ä»¶æ¥è¯´æ˜è¿™æ˜¯ä¸€ä¸ªåŒ…æ–‡ä»¶ï¼Œå°±èƒ½åœ¨ä¸codeæ–‡ä»¶å¤¹çš„åŒçº§ç›®å½•ä¸‹import codeäº†ï¼Œç„¶è€Œï¼Œ å¦‚æœç›´æ¥åœ¨ç³»ç»Ÿç¯å¢ƒä¸‹ï¼Œå´å¸¸å¸¸ä¼šæŠ¥æ‰¾ä¸åˆ°è¿™ä¸ªåŒ…ï¼Œè§£å†³æ–¹æ³•å¦‚ä¸‹ ","date":"2022-05-20","objectID":"/py_project_env/:1:0","series":[],"tags":["py","linux"],"title":"Pythoné¡¹ç›®åŒ…å¼•ç”¨ä¸ç¯å¢ƒè®¾ç½®","uri":"/py_project_env/#è¯´æ˜"},{"categories":["technology_log"],"content":" é¡¹ç›®å…¥å£æ˜¯pyæ–‡ä»¶åœ¨pyæ–‡ä»¶é¡¶ç«¯åŠ å…¥å¦‚ä¸‹ä»£ç  import sys project_path = '/home/mw/project' # è¿™é‡Œè®¾ç½®è‡ªå·±çš„é¡¹ç›®è·¯å¾„ sys.path.append(project_path) from code import * import code å¦‚æœæŠ¥é”™ï¼šModuleNotFoundError: No module named code code is not a packageï¼Œåœ¨è€ƒè™‘æœ‰æ²¡æœ‰è¿›å…¥codeåŒçº§ç›®å½•ä¸‹çš„åŒæ—¶ï¼Œæ˜¯å¦ç³»ç»Ÿç¯å¢ƒä¸­å«æœ‰codeåå­—å†²çªç­‰ã€‚ éªŒè¯æ˜¯å¦å­˜åœ¨codeåŒ…æ€è·¯ import code print(code.__file__) å¦‚æœå­˜åœ¨ï¼Œæœ‰ä¸¤ç§æ€è·¯ 1.æ›´æ¢è‡ªå·±çš„ä»£ç æ–‡ä»¶å¤¹codeä¸ºmycodeç­‰åå­—æ¥è§£å†³ã€‚ import sys project_path = '/home/mw/project' # è¿™é‡Œè®¾ç½®è‡ªå·±çš„é¡¹ç›®è·¯å¾„ sys.path.append(project_path) from mycode import * import mycode 2.æŒ‡å®šä¸Šçº§ç›®å½•è¿›è¡Œå¯¼åŒ… æ¯”å¦‚ç›®å½•æ ‘æ˜¯è¿™æ ·å­ import sys project_path = '/home/GAIIC2022-64_1700' # è¿™é‡Œè®¾ç½®è‡ªå·±çš„é¡¹ç›®è·¯å¾„ sys.path.append(project_path) from project.code import xxx ","date":"2022-05-20","objectID":"/py_project_env/:2:0","series":[],"tags":["py","linux"],"title":"Pythoné¡¹ç›®åŒ…å¼•ç”¨ä¸ç¯å¢ƒè®¾ç½®","uri":"/py_project_env/#é¡¹ç›®å…¥å£æ˜¯pyæ–‡ä»¶"},{"categories":["technology_log"],"content":" é¡¹ç›®å…¥å£æ˜¯shæ–‡ä»¶åœ¨shæ–‡ä»¶é¡¶éƒ¨åŠ ä¸Šå¦‚ä¸‹ä»£ç ï¼Œå°†å½“å‰é¡¹ç›®ç›®å½•åŠ å…¥PYTHONç¯å¢ƒå˜é‡ã€‚ # å¯¼å…¥å½“å‰é¡¹ç›®ä½œä¸ºç¯å¢ƒå˜é‡ project_path=\"$(pwd)\" export PYTHONPATH=$project_path:$PYTHONPATH echo $PYTHONPATH source $HOME/.bashrc ","date":"2022-05-20","objectID":"/py_project_env/:3:0","series":[],"tags":["py","linux"],"title":"Pythoné¡¹ç›®åŒ…å¼•ç”¨ä¸ç¯å¢ƒè®¾ç½®","uri":"/py_project_env/#é¡¹ç›®å…¥å£æ˜¯shæ–‡ä»¶"},{"categories":["technology_log"],"content":"ä»Šå¤©æ˜¯2022å¹´5æœˆ19æ—¥ï¼Œå¿™ç¢Œäº†ä¸€ä¸Šåˆçš„å°å¼Ÿæ¿€åŠ¨åœ°å¼€å§‹trainäº†ï¼Œç»“æœï¼Œæœ¬æ¥äº”åˆ†é’Ÿä¸€è½®çš„ä¹–å„¿å­ï¼Œ å˜æˆäº†ä¸¤ä¸ªå¤šå°æ—¶ï¼ŒWhatï¼Ÿï¼ï¼å„¿å­æ„Ÿå†’äº†å—ï¼Ÿ æŸ¥çœ‹å„¿å­å ç”¨æƒ…å†µã€‚ nvidia-smi Failed to initialize NVML: Driver/library version mismatch Whatï¼Ÿï¼ï¼çœ‹çœ‹å„¿å­çš„å†…æ ¸ç‰ˆæœ¬ cat /proc/driver/nvidia/version NVRM version: NVIDIA UNIX x86_64 Kernel Module 510.60.02 Wed Mar 16 11:24:05 UTC 2022 GCC version: gcc version 11.2.0 (Ubuntu 11.2.0-7ubuntu2) çœ‹çœ‹å„¿å­ç¿»æ»šæ—¥è®° cat /var/log/dpkg.log | grep nvidia 2022-05-19 06:04:29 upgrade nvidia-driver-510:amd64 510.60.02-0ubuntu0.21.10.2 510.73.05-0ubuntu0.21.10.1 2022-05-19 06:04:29 status half-configured nvidia-driver-510:amd64 510.60.02-0ubuntu0.21.10.2 2022-05-19 06:04:29 status unpacked nvidia-driver-510:amd64 510.60.02-0ubuntu0.21.10.2 2022-05-19 06:04:29 status half-installed nvidia-driver-510:amd64 510.60.02-0ubuntu0.21.10.2 2022-05-19 06:04:29 status unpacked nvidia-driver-510:amd64 510.73.05-0ubuntu0.21.10.1 2022-05-19 06:04:29 upgrade libnvidia-gl-510:amd64 510.60.02-0ubuntu0.21.10.2 510.73.05-0ubuntu0.21.10.1 2022-05-19 06:04:29 status half-configured libnvidia-gl-510:amd64 510.60.02-0ubuntu0.21.10.2 2022-05-19 06:04:29 status unpacked libnvidia-gl-510:amd64 510.60.02-0ubuntu0.21.10.2 2022-05-19 06:04:29 status half-configured libnvidia-gl-510:i386 510.60.02-0ubuntu0.21.10.2 2022-05-19 06:04:29 status half-installed libnvidia-gl-510:amd64 510.60.02-0ubuntu0.21.10.2 2022-05-19 06:04:30 status unpacked libnvidia-gl-510:amd64 510.73.05-0ubuntu0.21.10.1 2022-05-19 06:04:30 upgrade libnvidia-gl-510:i386 510.60.02-0ubuntu0.21.10.2 510.73.05-0ubuntu0.21.10.1 2022-05-19 06:04:30 status unpacked libnvidia-gl-510:i386 510.60.02-0ubuntu0.21.10.2 2022-05-19 06:04:30 status half-installed libnvidia-gl-510:i386 510.60.02-0ubuntu0.21.10.2 2022-05-19 06:04:31 status unpacked libnvidia-gl-510:i386 510.73.05-0ubuntu0.21.10.1 2022-05-19 06:04:31 upgrade nvidia-dkms-510:amd64 510.60.02-0ubuntu0.21.10.2 510.73.05-0ubuntu0.21.10.1 2022-05-19 06:04:31 status half-configured nvidia-dkms-510:amd64 510.60.02-0ubuntu0.21.10.2 2022-05-19 06:04:41 status unpacked nvidia-dkms-510:amd64 510.60.02-0ubuntu0.21.10.2 2022-05-19 06:04:41 status half-installed nvidia-dkms-510:amd64 510.60.02-0ubuntu0.21.10.2 2022-05-19 06:04:41 status unpacked nvidia-dkms-510:amd64 510.73.05-0ubuntu0.21.10.1 2022-05-19 06:04:41 upgrade nvidia-kernel-source-510:amd64 510.60.02-0ubuntu0.21.10.2 510.73.05-0ubuntu0.21.10.1 2022-05-19 06:04:41 status half-configured nvidia-kernel-source-510:amd64 510.60.02-0ubuntu0.21.10.2 2022-05-19 06:04:41 status unpacked nvidia-kernel-source-510:amd64 510.60.02-0ubuntu0.21.10.2 2022-05-19 06:04:41 status half-installed nvidia-kernel-source-510:amd64 510.60.02-0ubuntu0.21.10.2 2022-05-19 06:04:41 status unpacked nvidia-kernel-source-510:amd64 510.73.05-0ubuntu0.21.10.1 2022-05-19 06:04:41 upgrade nvidia-kernel-common-510:amd64 510.60.02-0ubuntu0.21.10.2 510.73.05-0ubuntu0.21.10.1 2022-05-19 06:04:41 status half-configured nvidia-kernel-common-510:amd64 510.60.02-0ubuntu0.21.10.2 2022-05-19 06:04:41 status unpacked nvidia-kernel-common-510:amd64 510.60.02-0ubuntu0.21.10.2 2022-05-19 06:04:41 status half-installed nvidia-kernel-common-510:amd64 510.60.02-0ubuntu0.21.10.2 2022-05-19 06:04:41 status unpacked nvidia-kernel-common-510:amd64 510.73.05-0ubuntu0.21.10.1 2022-05-19 06:04:41 upgrade libnvidia-decode-510:i386 510.60.02-0ubuntu0.21.10.2 510.73.05-0ubuntu0.21.10.1 2022-05-19 06:04:41 status half-configured libnvidia-decode-510:i386 510.60.02-0ubuntu0.21.10.2 2022-05-19 06:04:41 status unpacked libnvidia-decode-510:i386 510.60.02-0ubuntu0.21.10.2 2022-05-19 06:04:41 status half-configured libnvidia-decode-510:amd64 510.60.02-0ubuntu0.21.10.2 2022-05-19 06:04:41 status half-installed libnvidia-decode-510:i386 510.60.02-0ubuntu0.21.10.2 2022-05-19 06:04:41 status unpacked libnvidia-decode-510:i386 510.73.05-0ubuntu0.21.10.1 2022-05-19 06:04:41 upgrade libnvidia-decode-510:amd64 510.60.02-0ubuntu0.21.10.2 510.73.05-0ubuntu0.21.10.1 2022-05-19 06:04:41 status unpacked libnvidia-decode-510:amd64 510.60.02-0ubun","date":"2022-05-19","objectID":"/production_catastrophe/:0:0","series":[],"tags":["linux"],"title":"è®°ä¸€æ¬¡ç”Ÿäº§äº‹æ•…","uri":"/production_catastrophe/#"},{"categories":["machine_learning"],"content":" è®­ç»ƒä¼˜åŒ–ç­–ç•¥","date":"2022-05-18","objectID":"/deep_learning_optimize/:1:0","series":[],"tags":[],"title":"æ·±åº¦å­¦ä¹ ä¼˜åŒ–ç­–ç•¥","uri":"/deep_learning_optimize/#è®­ç»ƒä¼˜åŒ–ç­–ç•¥"},{"categories":["machine_learning"],"content":" æ¢¯åº¦è£å‰ªæ¢¯åº¦è£å‰ªç­–ç•¥æ˜¯è§£å†³æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­æ¢¯åº¦çˆ†ç‚¸ç­–ç•¥çš„ä¸€ä¸ªæœ‰æ•ˆæ–¹æ³•ï¼Œä¸ºä»€ä¹ˆä¼šå¯¼è‡´æ¢¯åº¦çˆ†ç‚¸å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“ï¼Œå¦‚æœæ¨¡å‹å¦‚ä¸‹ $$ f(x)=wx+b $$ çœç•¥bçš„æƒ…å†µä¸‹ï¼Œæ¢¯åº¦$\\Delta = x$,å½“$x$å€¼è¿‡å¤§æƒ…å†µä¸‹ï¼Œåˆ™å¯èƒ½ä¼šå‘ç”Ÿæ¢¯åº¦çˆ†ç‚¸ç°è±¡ï¼Œè¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ¢¯åº¦è¿›è¡Œè£å‰ªï¼Œä½¿ä¹‹è§„èŒƒåœ¨æŒ‡å®šèŒƒå›´å†…ï¼Œå¦‚æ­¤ä¸€æ¥å¯é¿å…ç±»ä¼¼ç°è±¡ã€‚ ","date":"2022-05-18","objectID":"/deep_learning_optimize/:1:1","series":[],"tags":[],"title":"æ·±åº¦å­¦ä¹ ä¼˜åŒ–ç­–ç•¥","uri":"/deep_learning_optimize/#æ¢¯åº¦è£å‰ª"},{"categories":[],"content":" *args å’Œ **kwargsä¼ å‚æ–¹æ³•","date":"2022-05-18","objectID":"/python_using/:1:0","series":[],"tags":["py"],"title":"Pythonä¸­ä¸€äº›è¯­æ³•çš„ä½¿ç”¨","uri":"/python_using/#args-å’Œ-kwargsä¼ å‚æ–¹æ³•"},{"categories":[],"content":" *argså…ƒç»„ä¼ å‚ def add(*args): print(args, type(args)) add(2, 3) (2, 3) \u003cclass 'tuple'\u003e def add(*numbers): total = 0 for num in numbers: total += num return total print(add(2, 3)) print(add(2, 3, 5)) print(add(2, 3, 5, 7)) print(add(2, 3, 5, 7, 9)) 5 10 17 26 ","date":"2022-05-18","objectID":"/python_using/:1:1","series":[],"tags":["py"],"title":"Pythonä¸­ä¸€äº›è¯­æ³•çš„ä½¿ç”¨","uri":"/python_using/#args"},{"categories":[],"content":" **kwargså­—å…¸ä¼ å‚ def total_fruits(**kwargs): print(kwargs, type(kwargs)) total_fruits(banana=5, mango=7, apple=8) {'banana': 5, 'mango': 7, 'apple': 8} \u003cclass 'dict'\u003e def total_fruits(**fruits): total = 0 for amount in fruits.values(): total += amount return total print(total_fruits(banana=5, mango=7, apple=8)) print(total_fruits(banana=5, mango=7, apple=8, oranges=10)) print(total_fruits(banana=5, mango=7)) 20 30 12 ","date":"2022-05-18","objectID":"/python_using/:1:2","series":[],"tags":["py"],"title":"Pythonä¸­ä¸€äº›è¯­æ³•çš„ä½¿ç”¨","uri":"/python_using/#kwargs"},{"categories":[],"content":" yeildè¿”å›æ–¹æ³•å’Œreturnè¿”å›ä¸åŒï¼Œyeildè¿”å›çš„æ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡next(yeildè¿”å›object)æ¥å–ä¸‹ä¸€ä¸ªå…ƒç´  def test_yield(): for i in range(10): yield i print(type(test_yield())) _iter = test_yield() print(next(_iter)) print(next(_iter)) print(next(_iter)) \u003cclass 'generator'\u003e 0 1 2 def test_yield(): for i in [3, 5, 6, 1, 3, 516, 6321, 1]: yield i _iter = test_yield() num = 0 try: while True: num += 1 print(next(_iter)) except Exception as ex: pass print(\"åˆ—è¡¨çš„å…ƒç´ ä¸ªæ•°%d\" % num) 3 5 6 1 3 516 6321 1 åˆ—è¡¨çš„å…ƒç´ ä¸ªæ•°9 ==é—®ï¼Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆå¹²ï¼Œç›´æ¥len()ä¸å°±å¥½äº†å—ï¼Ÿç­”ï¼Œé™¤äº†è·å–é•¿åº¦ï¼Œè¿˜å¯ä»¥è¿›è¡Œå…¶ä»–æ“ä½œï¼Œè€Œä¸ç”¨å…ˆè·å–åˆ—è¡¨é•¿åº¦è¿›è¡Œã€‚== ","date":"2022-05-18","objectID":"/python_using/:2:0","series":[],"tags":["py"],"title":"Pythonä¸­ä¸€äº›è¯­æ³•çš„ä½¿ç”¨","uri":"/python_using/#yeildè¿”å›æ–¹æ³•"},{"categories":[],"content":" æ•°æ®ç±»å‹è½¬æ¢","date":"2022-05-18","objectID":"/python_using/:3:0","series":[],"tags":["py"],"title":"Pythonä¸­ä¸€äº›è¯­æ³•çš„ä½¿ç”¨","uri":"/python_using/#æ•°æ®ç±»å‹è½¬æ¢"},{"categories":[],"content":" åˆ—è¡¨å†…è½¬æ¢æ•°æ®ç±»å‹ \u003e\u003e\u003e # è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ \u003e\u003e\u003e var = map(str, [3, 1, 2]) \u003e\u003e\u003e print(list(var)) \u003e\u003e\u003e print(list(var)) # è¿­ä»£å™¨èµ°å®Œå°±æ²¡æœ‰å€¼äº† \u003e\u003e\u003e begin = time.time() # è®°å½•è½¬æ¢è€—æ—¶ \u003e\u003e\u003e # è¿”å›ä¸€ä¸ªåˆ—è¡¨(æ¨èä½¿ç”¨ï¼Œé€Ÿåº¦æ›´å¿«ï¼Œå› æœªå‡ºç°æ˜¾å¼å¾ªç¯) \u003e\u003e\u003e var_s = list(map(str, [3, 1, 2])) \u003e\u003e\u003e print(var_s, \"è½¬æ¢è€—æ—¶: \", time.time()-begin) \u003e\u003e\u003e begin = time.time() # è®°å½•è½¬æ¢è€—æ—¶ \u003e\u003e\u003e # è¿”å›ä¸€ä¸ªåˆ—è¡¨ \u003e\u003e\u003e var_s = [str(i) for i in [3, 1, 2]] \u003e\u003e\u003e print(var_s, \"è½¬æ¢è€—æ—¶: \", time.time()-begin) ['3', '1', '2'] [] ['3', '1', '2'] è½¬æ¢è€—æ—¶: 1.430511474609375e-06 ['3', '1', '2'] è½¬æ¢è€—æ—¶: 1.6689300537109375e-06 ","date":"2022-05-18","objectID":"/python_using/:3:1","series":[],"tags":["py"],"title":"Pythonä¸­ä¸€äº›è¯­æ³•çš„ä½¿ç”¨","uri":"/python_using/#åˆ—è¡¨å†…è½¬æ¢æ•°æ®ç±»å‹"},{"categories":[],"content":" è°¨æ…çš„èµ‹å€¼pythonçš„æ‰§è¡Œä¸­ï¼Œç­‰å·å³è¾¹å…ˆæ‰§è¡Œï¼Œå¦‚ä¸‹ä»£ç ä¸­ï¼Œpythonå…ˆåˆ›å»ºå‡ºæ•°ç»„ç„¶åå†è®©aæŒ‡å‘è¯¥æ•°ç»„ï¼Œå¦‚æœç®€å•ç”¨ç­‰å·å°†a èµ‹å€¼ç»™bï¼Œåˆ™bä¹ŸæŒ‡å‘è¯¥æ•°ç»„ï¼Œä¿®æ”¹bçš„åŒæ—¶ï¼ŒåŸæ¥çš„aä¹Ÿä¼šéšä¹‹æ”¹å˜ï¼Œå¦‚æœä¸æƒ³è¦a å‘ç”Ÿæ”¹å˜ï¼Œéœ€ä½¿ç”¨b = a.copy() \u003e\u003e\u003e # ç¬¬ä¸€ç§èµ‹å€¼æ–¹å¼ \u003e\u003e\u003e a = [3, 1, 2] \u003e\u003e\u003e b = a \u003e\u003e\u003e b[0] = 0 \u003e\u003e\u003e print(a, b) \u003e\u003e\u003e # ç¬¬äºŒç§èµ‹å€¼æ–¹å¼ \u003e\u003e\u003e a = [3, 1, 2] \u003e\u003e\u003e b = a.copy() # å¤åˆ¶æ³• \u003e\u003e\u003e b[0] = 0 \u003e\u003e\u003e print(a, b) out: [0, 1, 2] [0, 1, 2] [3, 1, 2] [0, 1, 2] ","date":"2022-05-18","objectID":"/python_using/:4:0","series":[],"tags":["py"],"title":"Pythonä¸­ä¸€äº›è¯­æ³•çš„ä½¿ç”¨","uri":"/python_using/#è°¨æ…çš„èµ‹å€¼"},{"categories":[],"content":" æ¼‚äº®çš„è¡¨æ ¼å•çº¯è¾“å‡ºåˆ—è¡¨æ•ˆæœä¸å¥½çœ‹ï¼Œå¯ä»¥åšæˆè¡¨æ ¼å½¢å¼ã€‚ \u003e\u003e\u003e # åˆ—è¡¨æ˜¾ç¤ºä¸ºè¡¨æ ¼ \u003e\u003e\u003e from prettytable import PrettyTable \u003e\u003e\u003e fruit = [['apple', 'red', '100g'], ['banana', 'yellow', '80g']] \u003e\u003e\u003e print(\"ç›´æ¥æ‰“å°åˆ—è¡¨\\n\", fruit) \u003e\u003e\u003e x = PrettyTable() # åˆ›å»ºè¡¨æ ¼å®ä¾‹ \u003e\u003e\u003e x.field_names = ['fruit', 'color', 'weight'] # å®šä¹‰è¡¨å¤´ \u003e\u003e\u003e x.add_rows(fruit) \u003e\u003e\u003e print(\"æ‰“å°æˆè¡¨æ ¼\\n\", x) out: ç›´æ¥æ‰“å°åˆ—è¡¨ [['apple', 'red', '100g'], ['banana', 'yellow', '80g']] æ‰“å°æˆè¡¨æ ¼ +--------+--------+--------+ | fruit | color | weight | +--------+--------+--------+ | apple | red | 100g | | banana | yellow | 80g | +--------+--------+--------+ ","date":"2022-05-18","objectID":"/python_using/:5:0","series":[],"tags":["py"],"title":"Pythonä¸­ä¸€äº›è¯­æ³•çš„ä½¿ç”¨","uri":"/python_using/#æ¼‚äº®çš„è¡¨æ ¼"},{"categories":[],"content":" zipçš„å¦™ç”¨ \u003e\u003e\u003e a = [[1, 2], [3, 4], [5, 6]] \u003e\u003e\u003e print(*a) \u003e\u003e\u003e print(zip(*a)) \u003e\u003e\u003e print(list(zip(*a))) out: [1, 2] [3, 4] [5, 6] \u003czip object at 0x7fb6cd7e7f00\u003e [(1, 3, 5), (2, 4, 6)] ","date":"2022-05-18","objectID":"/python_using/:6:0","series":[],"tags":["py"],"title":"Pythonä¸­ä¸€äº›è¯­æ³•çš„ä½¿ç”¨","uri":"/python_using/#zipçš„å¦™ç”¨"},{"categories":[],"content":" å†…ç½®filterå¿«é€Ÿç­›é€‰å‡ºåˆ—è¡¨ä¸­çš„ä¸€ç±»å€¼ \u003e\u003e\u003e a = [3, 2, None, \"\", 0] \u003e\u003e\u003e # å‰”é™¤å‡å€¼ï¼ˆpythonä¸­,Noneã€0ã€\"\" éƒ½ä¸ºå‡â€ï¼‰ \u003e\u003e\u003e print(list(filter(bool, a))) \u003e\u003e\u003e # å‰”é™¤ 3 \u003e\u003e\u003e print(list(filter(lambda i: i != 3, a))) # ç­›é€‰å‡ºå¥‡æ•° b = [1, 2, 3, 4, 5] print(list(filter(lambda i: i % 2, b))) out: [3, 2] [2, None, '', 0] [1, 3, 5] ","date":"2022-05-18","objectID":"/python_using/:7:0","series":[],"tags":["py"],"title":"Pythonä¸­ä¸€äº›è¯­æ³•çš„ä½¿ç”¨","uri":"/python_using/#å†…ç½®filterå¿«é€Ÿç­›é€‰å‡ºåˆ—è¡¨ä¸­çš„ä¸€ç±»å€¼"},{"categories":[],"content":" æŸ¥çœ‹å˜é‡å ç”¨çš„å†…å­˜ç©ºé—´ \u003e\u003e\u003e import sys \u003e\u003e\u003e a = [3, 2, None, \"\", 0] \u003e\u003e\u003e b = 9 \u003e\u003e\u003e c = \"python\" \u003e\u003e\u003e print(\"å˜é‡aå ç”¨çš„å†…å­˜ç©ºé—´ä¸º{}å­—èŠ‚ï¼Œ\\nå˜é‡bå ç”¨çš„å†…å­˜ç©ºé—´ä¸º{}å­—èŠ‚ï¼Œ\\nå˜é‡cå ç”¨å†…å­˜ç©ºé—´ä¸º{}å­— èŠ‚ã€‚\".format( \u003e\u003e\u003e sys.getsizeof(a), \u003e\u003e\u003e sys.getsizeof(b), \u003e\u003e\u003e sys.getsizeof(c), \u003e\u003e\u003e )) out: å˜é‡aå ç”¨çš„å†…å­˜ç©ºé—´ä¸º112å­—èŠ‚ï¼Œ å˜é‡bå ç”¨çš„å†…å­˜ç©ºé—´ä¸º28å­—èŠ‚ï¼Œ å˜é‡cå ç”¨å†…å­˜ç©ºé—´ä¸º55å­—èŠ‚ã€‚ ","date":"2022-05-18","objectID":"/python_using/:8:0","series":[],"tags":["py"],"title":"Pythonä¸­ä¸€äº›è¯­æ³•çš„ä½¿ç”¨","uri":"/python_using/#æŸ¥çœ‹å˜é‡å ç”¨çš„å†…å­˜ç©ºé—´"},{"categories":[],"content":" ä¸¥æ ¼æ§åˆ¶æ‰“å°å°æ•°ç‚¹åä¸¤ä½ \u003e\u003e\u003e print(f\"{5/2:.2f}\") out: 2.50 ","date":"2022-05-18","objectID":"/python_using/:9:0","series":[],"tags":["py"],"title":"Pythonä¸­ä¸€äº›è¯­æ³•çš„ä½¿ç”¨","uri":"/python_using/#ä¸¥æ ¼æ§åˆ¶æ‰“å°å°æ•°ç‚¹åä¸¤ä½"},{"categories":[],"content":" æ•ˆç‡çš„æ³¨é‡æ³•åˆ™","date":"2022-05-18","objectID":"/python_using/:10:0","series":[],"tags":["py"],"title":"Pythonä¸­ä¸€äº›è¯­æ³•çš„ä½¿ç”¨","uri":"/python_using/#æ•ˆç‡çš„æ³¨é‡æ³•åˆ™"},{"categories":[],"content":" æ³•åˆ™ä¸€ï¼šå°½é‡å°‘å†™æ˜¾å¼å¾ªç¯ import time s = time.time() np.sum(distance) print(f\"npæ±‚å’Œè€—æ—¶ {time.time() - s}\") sum = 0 total = distance.shape[0] s = time.time() for i in range(total): sum += distance[i] print(f\"å¾ªç¯æ±‚å’Œè€—æ—¶ {time.time() - s}\") npæ±‚å’Œè€—æ—¶ 0.00003552436828613281e-05 å¾ªç¯æ±‚å’Œè€—æ—¶ 0.0009284019470214844 æ³•åˆ™äºŒï¼šæ’åºç®—æ³•æœ€å¥½ä¸ŠGPU distance = np.random.random((7532, 11314)) import time s = time.time() sort_idx = np.argsort(distance, axis=-1) # ç‹¬ç«‹å°†æ¯ä¸€è¡Œå…ƒç´ ä»å°åˆ°è¾¾æ’åˆ—ï¼ˆå³ç›¸ä¼¼æ€§ä»å¤§åˆ°å°ï¼‰çš„ä¸‹æ ‡ (7532, 11314) print(f\"npæ’åºè€—æ—¶{time.time() - s}\") s = time.time() sort_idx = np.array(torch.argsort(torch.tensor(distance).cuda(), dim=-1).detach().cpu().numpy()) print(f\"tensoræ’åºè€—æ—¶{time.time() - s}\") npæ’åºè€—æ—¶3.7687795162200928 tensoræ’åºè€—æ—¶3.2619576454162598 ","date":"2022-05-18","objectID":"/python_using/:10:1","series":[],"tags":["py"],"title":"Pythonä¸­ä¸€äº›è¯­æ³•çš„ä½¿ç”¨","uri":"/python_using/#æ³•åˆ™ä¸€å°½é‡å°‘å†™æ˜¾å¼å¾ªç¯"},{"categories":[],"content":" æ³•åˆ™ä¸€ï¼šå°½é‡å°‘å†™æ˜¾å¼å¾ªç¯ import time s = time.time() np.sum(distance) print(f\"npæ±‚å’Œè€—æ—¶ {time.time() - s}\") sum = 0 total = distance.shape[0] s = time.time() for i in range(total): sum += distance[i] print(f\"å¾ªç¯æ±‚å’Œè€—æ—¶ {time.time() - s}\") npæ±‚å’Œè€—æ—¶ 0.00003552436828613281e-05 å¾ªç¯æ±‚å’Œè€—æ—¶ 0.0009284019470214844 æ³•åˆ™äºŒï¼šæ’åºç®—æ³•æœ€å¥½ä¸ŠGPU distance = np.random.random((7532, 11314)) import time s = time.time() sort_idx = np.argsort(distance, axis=-1) # ç‹¬ç«‹å°†æ¯ä¸€è¡Œå…ƒç´ ä»å°åˆ°è¾¾æ’åˆ—ï¼ˆå³ç›¸ä¼¼æ€§ä»å¤§åˆ°å°ï¼‰çš„ä¸‹æ ‡ (7532, 11314) print(f\"npæ’åºè€—æ—¶{time.time() - s}\") s = time.time() sort_idx = np.array(torch.argsort(torch.tensor(distance).cuda(), dim=-1).detach().cpu().numpy()) print(f\"tensoræ’åºè€—æ—¶{time.time() - s}\") npæ’åºè€—æ—¶3.7687795162200928 tensoræ’åºè€—æ—¶3.2619576454162598 ","date":"2022-05-18","objectID":"/python_using/:10:1","series":[],"tags":["py"],"title":"Pythonä¸­ä¸€äº›è¯­æ³•çš„ä½¿ç”¨","uri":"/python_using/#æ³•åˆ™äºŒæ’åºç®—æ³•æœ€å¥½ä¸Šgpu"},{"categories":[],"content":" reç”¨æ³•ç¤ºä¾‹ # è¿‡å¤šæ¢è¡Œæ›¿æ¢ä¸º'ï¿¥ï¿¥ï¿¥ä¸­English$$$' sub_text = re.sub(r'\\n{2,}','ï¿¥ï¿¥ï¿¥ä¸­English$$$',sub_text) # æ‰¾åˆ° chapter_con ä¸­çš„section_pattern_extraæ¨¡å¼ä¸² _section_title = re.findall(section_pattern_extra,chapter_con) ","date":"2022-05-13","objectID":"/regular_expression/:1:0","series":[],"tags":[],"title":"æ­£åˆ™è¡¨è¾¾å¼","uri":"/regular_expression/#reç”¨æ³•ç¤ºä¾‹"},{"categories":[],"content":" é€šè¿‡å¼€å¤´ç»“å°¾åŒ¹é… # (?=ã€ˆæ›´).*?(?=\\\\) åŒ¹é…ä»¥â€œã€ˆæ›´â€å¼€å¤´ï¼Œâ€œ\\â€ç»“å°¾çš„å­—ç¬¦ä¸²ï¼ŒåŒ…å«å¼€å¤´ï¼Œä¸åŒ…å«ç»“å°¾ # (?\u003c=ã€ˆæ›´).*?(?=\\\\) åŒ¹é…ä»¥â€œã€ˆæ›´â€å¼€å¤´ï¼Œâ€œ\\â€ç»“å°¾çš„å­—ç¬¦ä¸²ï¼Œä¸åŒ…å«å¼€å¤´ï¼Œä¸åŒ…å«ç»“å°¾ chapter_pattern_extra = r'\\nç¬¬[\\u4e00-\\u9fa5]{1,2}ç« .*\\n' #å‰åæ¢è¡Œï¼Œåœ¨ç¬¬ å’Œ ç« ä¹‹é—´æœ‰ä¸€åˆ°ä¸¤ä¸ªä¸­æ–‡å­—ç¬¦ ","date":"2022-05-13","objectID":"/regular_expression/:2:0","series":[],"tags":[],"title":"æ­£åˆ™è¡¨è¾¾å¼","uri":"/regular_expression/#é€šè¿‡å¼€å¤´ç»“å°¾åŒ¹é…"},{"categories":["machine_learning"],"content":" ç»å…¸æŸå¤±å‡½æ•°","date":"2022-04-29","objectID":"/loss_function/:1:0","series":[],"tags":["math"],"title":"æŸå¤±å‡½æ•°","uri":"/loss_function/#ç»å…¸æŸå¤±å‡½æ•°"},{"categories":["machine_learning"],"content":" è·ç¦»åº¦é‡ F èŒƒæ•°ï¼ˆFrobenius èŒƒæ•°ï¼‰çŸ©é˜µæ‰€æœ‰å…ƒç´ çš„å¹³æ–¹å’Œå†å¼€æ–¹ï¼Œä»–æ˜¯æ˜¯å‘é‡äºŒèŒƒå¼çš„æ‹“å±•ç±»æ¯”ã€‚ $$ ||A||_F = \\sqrt{\\sum a_{ij}^2} $$ å¦‚ä½•ä½œä¸ºè·ç¦»åº¦é‡å‘¢ï¼Ÿ å¯ä»¥åˆ©ç”¨å¦‚ä¸‹æ–¹å¼ï¼Œå¦‚æœæ ‡ç­¾çŸ©é˜µä¸º$B$ï¼ˆé€šå¸¸ä¸ºä¸€ä¸ªbatché‡Œçš„å¤šä¸ªæ ·æœ¬æ ‡ç­¾å‘é‡ç»„æˆï¼Œå¦‚æ ‡ç­¾å‘é‡ä¸º4ç»´ï¼Œbatch_size ä¸º128ï¼‰åˆ™$B$çš„å½¢çŠ¶ä¸ºï¼ˆ128ï¼Œ4ï¼‰ï¼‰ï¼Œè·ç¦»åº¦é‡å…¬å¼ä¸º $$ \\mathcal L_F = ||A-B|| $$ æ ¸èŒƒæ•°ï¼ˆnuclear normï¼‰ä½œä¸ºè·ç¦»åº¦é‡æ–¹å¼ä¸è¯¦ $$ \\begin{aligned} ||A||_*=\\operatorname{tr}\\left(\\sqrt{A^{T} A}\\right) \u0026=\\operatorname{tr}\\left(\\sqrt{\\left(U \\Sigma V^{T}\\right)^{T} U \\Sigma V^{T}}\\right) \\ \u0026=\\operatorname{tr}\\left(\\sqrt{V \\Sigma^{T} U^{T} U \\Sigma V^{T}}\\right) \\ \u0026=\\operatorname{tr}\\left(\\sqrt{V \\Sigma^{2} V^{T}}\\right)\\left(\\Sigma^{T}=\\Sigma\\right) \\ \u0026=\\operatorname{tr}\\left(\\sqrt{V^{T} V \\Sigma^{2}}\\right) \\ \u0026=\\operatorname{tr}(\\Sigma) \\end{aligned} $$ å‚è€ƒä»£ç  import torch label = np.array([[1, 2, 3, 4], [1, 2, 3, 4]]) pred = np.array([[2, 3, 4, 5], [2, 3, 4, 5]]) print(\"FèŒƒæ•°çŸ©é˜µ\") print(torch.norm(torch.from_numpy(pred - label).type(torch.cuda.FloatTensor), p=\"fro\", dim=-1)) print(\"2èŒƒæ•°çŸ©é˜µ\") print(torch.norm(torch.from_numpy(pred - label).type(torch.cuda.FloatTensor), p=2, dim=-1)) print(\"æ ¸èŒƒæ•°çŸ©é˜µ\") # æ ¸èŒƒæ•°ä½œä¸ºLossä½¿ç”¨æ–¹æ³•ä¸è¯¦ print(torch.norm(torch.from_numpy(pred - label).type(torch.cuda.FloatTensor), p=\"nuc\")) print(\"å¹³å‡æŸå¤±è®¡ç®—ï¼šæ¯ä¸ªæ ·æœ¬çš„æŸå¤±ç›¸åŠ ï¼Œå†é™¤ä»¥æ€»æ ·æœ¬æ•°\") print(torch.norm(torch.from_numpy(pred - label).type(torch.cuda.FloatTensor), p=\"fro\", dim=-1).sum() / label.shape[0]) print(torch.norm(torch.from_numpy(pred - label).type(torch.cuda.FloatTensor), p=2, dim=-1).sum() / label.shape[0]) è¾“å‡ºï¼š FèŒƒæ•°çŸ©é˜µ tensor([2., 2.], device='cuda:0') 2èŒƒæ•°çŸ©é˜µ tensor([2., 2.], device='cuda:0') æ ¸èŒƒæ•°çŸ©é˜µ tensor(2.8284, device='cuda:0') å¹³å‡æŸå¤±è®¡ç®—ï¼šæ¯ä¸ªæ ·æœ¬çš„æŸå¤±ç›¸åŠ ï¼Œå†é™¤ä»¥æ€»æ ·æœ¬æ•° tensor(2., device='cuda:0') tensor(2., device='cuda:0') Process finished with exit code 0 \u003e\u003e\u003e # ä¸åŒshapeçš„æ¬§è·è®¡ç®— ä½œè€…ï¼šhttps://blog.csdn.net/sinat_24899403/article/details/119249822 \u003e\u003e\u003e import torch \u003e\u003e\u003e from torch import nn \u003e\u003e\u003e a=torch.tensor([[1,1,1], [2,2,2]]) \u003e\u003e\u003e b=torch.tensor([[2,2,2], [1,1,1], [2,2,2], [1,1,1], [2,2,2]]) \u003e\u003e\u003e def pdist(a: torch.Tensor, b: torch.Tensor, p: int = 2) -\u003e torch.Tensor: return (a-b).abs().pow(p).sum(-1).pow(1/p) \u003e\u003e\u003e a_=a.unsqueeze(1) \u003e\u003e\u003e b_=b.unsqueeze(0) \u003e\u003e\u003e print(pdist(a_,b_)) tensor([[1.7321, 0.0000, 1.7321, 0.0000, 1.7321], [0.0000, 1.7321, 0.0000, 1.7321, 0.0000]]) æ±‰æ˜è·ç¦» å¦‚æœæ˜¯å¤šå¯¹å¤šï¼Œä¸”shapeä¸ä¸€è‡´ï¼Œä½¿ç”¨numpyè®¡ç®—æ˜¯æœ€å¿«çš„ï¼Œè€ƒè™‘åŸå› å¯èƒ½æ˜¯torchæœªå°è£…intç±»å‹çš„ä¸åŒshapeæ•°æ®çš„è®¡ç®—æ–¹å¼ï¼Œå¦‚æœshapeç›¸åŒå¯ä»¥ä½¿ç”¨pairwiseçš„æ–¹æ³• å½¢çŠ¶ç›¸åŒï¼ˆç”¨äºæ ‡ç­¾é¢„æµ‹ï¼‰ \u003e\u003e\u003e b = torch.tensor([[0, 0, 1], [0, 1, 0] ]) \u003e\u003e\u003e c = torch.tensor([[1, 0, 1], [0, 1, 0] ]) \u003e\u003e\u003e metric = BinaryHammingDistance(multidim_average='samplewise') \u003e\u003e\u003e print(metric(b, c)) tensor([0.3333, 0.0000]) å½¢çŠ¶ä¸åŒï¼ˆç”¨äºæ£€ç´¢ï¼‰ \u003e\u003e\u003e from sklearn.neighbors import DistanceMetric \u003e\u003e\u003e import time \u003e\u003e\u003e a = np.array([[0, 0, 2],]) \u003e\u003e\u003e b = np.array([[0, 0, 1], [0, 1, 0] ]) \u003e\u003e\u003e s1 = time.time() \u003e\u003e\u003e print(DistanceMetric.get_metric(\"hamming\").pairwise(a,b)) \u003e\u003e\u003e print(f\"è€—æ—¶{time.time()-s1}\") [[0.33333333 0.66666667]] è€—æ—¶0.0003008842468261719 \u003e\u003e\u003e a_tensor = torch.as_tensor(a, dtype=torch.float) \u003e\u003e\u003e b_tensor = torch.as_tensor(b, dtype=torch.float) \u003e\u003e\u003e s2 = time.time() \u003e\u003e\u003e print(torch.cdist(a_tensor, b_tensor, p=0)) \u003e\u003e\u003e print(f\"è€—æ—¶{time.time()-s2}\") tensor([[1., 2.]]) è€—æ—¶0.0003383159637451172 \u003e\u003e\u003e a_tensor = torch.as_tensor(a, dtype=torch.float).cuda() \u003e\u003e\u003e b_tensor = torch.as_tensor(b, dtype=torch.float).cuda() \u003e\u003e\u003e s3 = time.time() \u003e\u003e\u003e print(torch.cdist(a_tensor, b_tensor, p=0)) \u003e\u003e\u003e print(f\"è€—æ—¶{time.time()-s3}\") tensor([[1., 2.]], device='cuda:0') è€—æ—¶0.0015494823455810547 ","date":"2022-04-29","objectID":"/loss_function/:1:1","series":[],"tags":["math"],"title":"æŸå¤±å‡½æ•°","uri":"/loss_function/#è·ç¦»åº¦é‡"},{"categories":["machine_learning"],"content":" è·ç¦»åº¦é‡ F èŒƒæ•°ï¼ˆFrobenius èŒƒæ•°ï¼‰çŸ©é˜µæ‰€æœ‰å…ƒç´ çš„å¹³æ–¹å’Œå†å¼€æ–¹ï¼Œä»–æ˜¯æ˜¯å‘é‡äºŒèŒƒå¼çš„æ‹“å±•ç±»æ¯”ã€‚ $$ ||A||_F = \\sqrt{\\sum a_{ij}^2} $$ å¦‚ä½•ä½œä¸ºè·ç¦»åº¦é‡å‘¢ï¼Ÿ å¯ä»¥åˆ©ç”¨å¦‚ä¸‹æ–¹å¼ï¼Œå¦‚æœæ ‡ç­¾çŸ©é˜µä¸º$B$ï¼ˆé€šå¸¸ä¸ºä¸€ä¸ªbatché‡Œçš„å¤šä¸ªæ ·æœ¬æ ‡ç­¾å‘é‡ç»„æˆï¼Œå¦‚æ ‡ç­¾å‘é‡ä¸º4ç»´ï¼Œbatch_size ä¸º128ï¼‰åˆ™$B$çš„å½¢çŠ¶ä¸ºï¼ˆ128ï¼Œ4ï¼‰ï¼‰ï¼Œè·ç¦»åº¦é‡å…¬å¼ä¸º $$ \\mathcal L_F = ||A-B|| $$ æ ¸èŒƒæ•°ï¼ˆnuclear normï¼‰ä½œä¸ºè·ç¦»åº¦é‡æ–¹å¼ä¸è¯¦ $$ \\begin{aligned} ||A||_*=\\operatorname{tr}\\left(\\sqrt{A^{T} A}\\right) \u0026=\\operatorname{tr}\\left(\\sqrt{\\left(U \\Sigma V^{T}\\right)^{T} U \\Sigma V^{T}}\\right) \\ \u0026=\\operatorname{tr}\\left(\\sqrt{V \\Sigma^{T} U^{T} U \\Sigma V^{T}}\\right) \\ \u0026=\\operatorname{tr}\\left(\\sqrt{V \\Sigma^{2} V^{T}}\\right)\\left(\\Sigma^{T}=\\Sigma\\right) \\ \u0026=\\operatorname{tr}\\left(\\sqrt{V^{T} V \\Sigma^{2}}\\right) \\ \u0026=\\operatorname{tr}(\\Sigma) \\end{aligned} $$ å‚è€ƒä»£ç  import torch label = np.array([[1, 2, 3, 4], [1, 2, 3, 4]]) pred = np.array([[2, 3, 4, 5], [2, 3, 4, 5]]) print(\"FèŒƒæ•°çŸ©é˜µ\") print(torch.norm(torch.from_numpy(pred - label).type(torch.cuda.FloatTensor), p=\"fro\", dim=-1)) print(\"2èŒƒæ•°çŸ©é˜µ\") print(torch.norm(torch.from_numpy(pred - label).type(torch.cuda.FloatTensor), p=2, dim=-1)) print(\"æ ¸èŒƒæ•°çŸ©é˜µ\") # æ ¸èŒƒæ•°ä½œä¸ºLossä½¿ç”¨æ–¹æ³•ä¸è¯¦ print(torch.norm(torch.from_numpy(pred - label).type(torch.cuda.FloatTensor), p=\"nuc\")) print(\"å¹³å‡æŸå¤±è®¡ç®—ï¼šæ¯ä¸ªæ ·æœ¬çš„æŸå¤±ç›¸åŠ ï¼Œå†é™¤ä»¥æ€»æ ·æœ¬æ•°\") print(torch.norm(torch.from_numpy(pred - label).type(torch.cuda.FloatTensor), p=\"fro\", dim=-1).sum() / label.shape[0]) print(torch.norm(torch.from_numpy(pred - label).type(torch.cuda.FloatTensor), p=2, dim=-1).sum() / label.shape[0]) è¾“å‡ºï¼š FèŒƒæ•°çŸ©é˜µ tensor([2., 2.], device='cuda:0') 2èŒƒæ•°çŸ©é˜µ tensor([2., 2.], device='cuda:0') æ ¸èŒƒæ•°çŸ©é˜µ tensor(2.8284, device='cuda:0') å¹³å‡æŸå¤±è®¡ç®—ï¼šæ¯ä¸ªæ ·æœ¬çš„æŸå¤±ç›¸åŠ ï¼Œå†é™¤ä»¥æ€»æ ·æœ¬æ•° tensor(2., device='cuda:0') tensor(2., device='cuda:0') Process finished with exit code 0 \u003e\u003e\u003e # ä¸åŒshapeçš„æ¬§è·è®¡ç®— ä½œè€…ï¼šhttps://blog.csdn.net/sinat_24899403/article/details/119249822 \u003e\u003e\u003e import torch \u003e\u003e\u003e from torch import nn \u003e\u003e\u003e a=torch.tensor([[1,1,1], [2,2,2]]) \u003e\u003e\u003e b=torch.tensor([[2,2,2], [1,1,1], [2,2,2], [1,1,1], [2,2,2]]) \u003e\u003e\u003e def pdist(a: torch.Tensor, b: torch.Tensor, p: int = 2) -\u003e torch.Tensor: return (a-b).abs().pow(p).sum(-1).pow(1/p) \u003e\u003e\u003e a_=a.unsqueeze(1) \u003e\u003e\u003e b_=b.unsqueeze(0) \u003e\u003e\u003e print(pdist(a_,b_)) tensor([[1.7321, 0.0000, 1.7321, 0.0000, 1.7321], [0.0000, 1.7321, 0.0000, 1.7321, 0.0000]]) æ±‰æ˜è·ç¦» å¦‚æœæ˜¯å¤šå¯¹å¤šï¼Œä¸”shapeä¸ä¸€è‡´ï¼Œä½¿ç”¨numpyè®¡ç®—æ˜¯æœ€å¿«çš„ï¼Œè€ƒè™‘åŸå› å¯èƒ½æ˜¯torchæœªå°è£…intç±»å‹çš„ä¸åŒshapeæ•°æ®çš„è®¡ç®—æ–¹å¼ï¼Œå¦‚æœshapeç›¸åŒå¯ä»¥ä½¿ç”¨pairwiseçš„æ–¹æ³• å½¢çŠ¶ç›¸åŒï¼ˆç”¨äºæ ‡ç­¾é¢„æµ‹ï¼‰ \u003e\u003e\u003e b = torch.tensor([[0, 0, 1], [0, 1, 0] ]) \u003e\u003e\u003e c = torch.tensor([[1, 0, 1], [0, 1, 0] ]) \u003e\u003e\u003e metric = BinaryHammingDistance(multidim_average='samplewise') \u003e\u003e\u003e print(metric(b, c)) tensor([0.3333, 0.0000]) å½¢çŠ¶ä¸åŒï¼ˆç”¨äºæ£€ç´¢ï¼‰ \u003e\u003e\u003e from sklearn.neighbors import DistanceMetric \u003e\u003e\u003e import time \u003e\u003e\u003e a = np.array([[0, 0, 2],]) \u003e\u003e\u003e b = np.array([[0, 0, 1], [0, 1, 0] ]) \u003e\u003e\u003e s1 = time.time() \u003e\u003e\u003e print(DistanceMetric.get_metric(\"hamming\").pairwise(a,b)) \u003e\u003e\u003e print(f\"è€—æ—¶{time.time()-s1}\") [[0.33333333 0.66666667]] è€—æ—¶0.0003008842468261719 \u003e\u003e\u003e a_tensor = torch.as_tensor(a, dtype=torch.float) \u003e\u003e\u003e b_tensor = torch.as_tensor(b, dtype=torch.float) \u003e\u003e\u003e s2 = time.time() \u003e\u003e\u003e print(torch.cdist(a_tensor, b_tensor, p=0)) \u003e\u003e\u003e print(f\"è€—æ—¶{time.time()-s2}\") tensor([[1., 2.]]) è€—æ—¶0.0003383159637451172 \u003e\u003e\u003e a_tensor = torch.as_tensor(a, dtype=torch.float).cuda() \u003e\u003e\u003e b_tensor = torch.as_tensor(b, dtype=torch.float).cuda() \u003e\u003e\u003e s3 = time.time() \u003e\u003e\u003e print(torch.cdist(a_tensor, b_tensor, p=0)) \u003e\u003e\u003e print(f\"è€—æ—¶{time.time()-s3}\") tensor([[1., 2.]], device='cuda:0') è€—æ—¶0.0015494823455810547 ","date":"2022-04-29","objectID":"/loss_function/:1:1","series":[],"tags":["math"],"title":"æŸå¤±å‡½æ•°","uri":"/loss_function/#f-èŒƒæ•°frobenius-èŒƒæ•°"},{"categories":["machine_learning"],"content":" è·ç¦»åº¦é‡ F èŒƒæ•°ï¼ˆFrobenius èŒƒæ•°ï¼‰çŸ©é˜µæ‰€æœ‰å…ƒç´ çš„å¹³æ–¹å’Œå†å¼€æ–¹ï¼Œä»–æ˜¯æ˜¯å‘é‡äºŒèŒƒå¼çš„æ‹“å±•ç±»æ¯”ã€‚ $$ ||A||_F = \\sqrt{\\sum a_{ij}^2} $$ å¦‚ä½•ä½œä¸ºè·ç¦»åº¦é‡å‘¢ï¼Ÿ å¯ä»¥åˆ©ç”¨å¦‚ä¸‹æ–¹å¼ï¼Œå¦‚æœæ ‡ç­¾çŸ©é˜µä¸º$B$ï¼ˆé€šå¸¸ä¸ºä¸€ä¸ªbatché‡Œçš„å¤šä¸ªæ ·æœ¬æ ‡ç­¾å‘é‡ç»„æˆï¼Œå¦‚æ ‡ç­¾å‘é‡ä¸º4ç»´ï¼Œbatch_size ä¸º128ï¼‰åˆ™$B$çš„å½¢çŠ¶ä¸ºï¼ˆ128ï¼Œ4ï¼‰ï¼‰ï¼Œè·ç¦»åº¦é‡å…¬å¼ä¸º $$ \\mathcal L_F = ||A-B|| $$ æ ¸èŒƒæ•°ï¼ˆnuclear normï¼‰ä½œä¸ºè·ç¦»åº¦é‡æ–¹å¼ä¸è¯¦ $$ \\begin{aligned} ||A||_*=\\operatorname{tr}\\left(\\sqrt{A^{T} A}\\right) \u0026=\\operatorname{tr}\\left(\\sqrt{\\left(U \\Sigma V^{T}\\right)^{T} U \\Sigma V^{T}}\\right) \\ \u0026=\\operatorname{tr}\\left(\\sqrt{V \\Sigma^{T} U^{T} U \\Sigma V^{T}}\\right) \\ \u0026=\\operatorname{tr}\\left(\\sqrt{V \\Sigma^{2} V^{T}}\\right)\\left(\\Sigma^{T}=\\Sigma\\right) \\ \u0026=\\operatorname{tr}\\left(\\sqrt{V^{T} V \\Sigma^{2}}\\right) \\ \u0026=\\operatorname{tr}(\\Sigma) \\end{aligned} $$ å‚è€ƒä»£ç  import torch label = np.array([[1, 2, 3, 4], [1, 2, 3, 4]]) pred = np.array([[2, 3, 4, 5], [2, 3, 4, 5]]) print(\"FèŒƒæ•°çŸ©é˜µ\") print(torch.norm(torch.from_numpy(pred - label).type(torch.cuda.FloatTensor), p=\"fro\", dim=-1)) print(\"2èŒƒæ•°çŸ©é˜µ\") print(torch.norm(torch.from_numpy(pred - label).type(torch.cuda.FloatTensor), p=2, dim=-1)) print(\"æ ¸èŒƒæ•°çŸ©é˜µ\") # æ ¸èŒƒæ•°ä½œä¸ºLossä½¿ç”¨æ–¹æ³•ä¸è¯¦ print(torch.norm(torch.from_numpy(pred - label).type(torch.cuda.FloatTensor), p=\"nuc\")) print(\"å¹³å‡æŸå¤±è®¡ç®—ï¼šæ¯ä¸ªæ ·æœ¬çš„æŸå¤±ç›¸åŠ ï¼Œå†é™¤ä»¥æ€»æ ·æœ¬æ•°\") print(torch.norm(torch.from_numpy(pred - label).type(torch.cuda.FloatTensor), p=\"fro\", dim=-1).sum() / label.shape[0]) print(torch.norm(torch.from_numpy(pred - label).type(torch.cuda.FloatTensor), p=2, dim=-1).sum() / label.shape[0]) è¾“å‡ºï¼š FèŒƒæ•°çŸ©é˜µ tensor([2., 2.], device='cuda:0') 2èŒƒæ•°çŸ©é˜µ tensor([2., 2.], device='cuda:0') æ ¸èŒƒæ•°çŸ©é˜µ tensor(2.8284, device='cuda:0') å¹³å‡æŸå¤±è®¡ç®—ï¼šæ¯ä¸ªæ ·æœ¬çš„æŸå¤±ç›¸åŠ ï¼Œå†é™¤ä»¥æ€»æ ·æœ¬æ•° tensor(2., device='cuda:0') tensor(2., device='cuda:0') Process finished with exit code 0 \u003e\u003e\u003e # ä¸åŒshapeçš„æ¬§è·è®¡ç®— ä½œè€…ï¼šhttps://blog.csdn.net/sinat_24899403/article/details/119249822 \u003e\u003e\u003e import torch \u003e\u003e\u003e from torch import nn \u003e\u003e\u003e a=torch.tensor([[1,1,1], [2,2,2]]) \u003e\u003e\u003e b=torch.tensor([[2,2,2], [1,1,1], [2,2,2], [1,1,1], [2,2,2]]) \u003e\u003e\u003e def pdist(a: torch.Tensor, b: torch.Tensor, p: int = 2) -\u003e torch.Tensor: return (a-b).abs().pow(p).sum(-1).pow(1/p) \u003e\u003e\u003e a_=a.unsqueeze(1) \u003e\u003e\u003e b_=b.unsqueeze(0) \u003e\u003e\u003e print(pdist(a_,b_)) tensor([[1.7321, 0.0000, 1.7321, 0.0000, 1.7321], [0.0000, 1.7321, 0.0000, 1.7321, 0.0000]]) æ±‰æ˜è·ç¦» å¦‚æœæ˜¯å¤šå¯¹å¤šï¼Œä¸”shapeä¸ä¸€è‡´ï¼Œä½¿ç”¨numpyè®¡ç®—æ˜¯æœ€å¿«çš„ï¼Œè€ƒè™‘åŸå› å¯èƒ½æ˜¯torchæœªå°è£…intç±»å‹çš„ä¸åŒshapeæ•°æ®çš„è®¡ç®—æ–¹å¼ï¼Œå¦‚æœshapeç›¸åŒå¯ä»¥ä½¿ç”¨pairwiseçš„æ–¹æ³• å½¢çŠ¶ç›¸åŒï¼ˆç”¨äºæ ‡ç­¾é¢„æµ‹ï¼‰ \u003e\u003e\u003e b = torch.tensor([[0, 0, 1], [0, 1, 0] ]) \u003e\u003e\u003e c = torch.tensor([[1, 0, 1], [0, 1, 0] ]) \u003e\u003e\u003e metric = BinaryHammingDistance(multidim_average='samplewise') \u003e\u003e\u003e print(metric(b, c)) tensor([0.3333, 0.0000]) å½¢çŠ¶ä¸åŒï¼ˆç”¨äºæ£€ç´¢ï¼‰ \u003e\u003e\u003e from sklearn.neighbors import DistanceMetric \u003e\u003e\u003e import time \u003e\u003e\u003e a = np.array([[0, 0, 2],]) \u003e\u003e\u003e b = np.array([[0, 0, 1], [0, 1, 0] ]) \u003e\u003e\u003e s1 = time.time() \u003e\u003e\u003e print(DistanceMetric.get_metric(\"hamming\").pairwise(a,b)) \u003e\u003e\u003e print(f\"è€—æ—¶{time.time()-s1}\") [[0.33333333 0.66666667]] è€—æ—¶0.0003008842468261719 \u003e\u003e\u003e a_tensor = torch.as_tensor(a, dtype=torch.float) \u003e\u003e\u003e b_tensor = torch.as_tensor(b, dtype=torch.float) \u003e\u003e\u003e s2 = time.time() \u003e\u003e\u003e print(torch.cdist(a_tensor, b_tensor, p=0)) \u003e\u003e\u003e print(f\"è€—æ—¶{time.time()-s2}\") tensor([[1., 2.]]) è€—æ—¶0.0003383159637451172 \u003e\u003e\u003e a_tensor = torch.as_tensor(a, dtype=torch.float).cuda() \u003e\u003e\u003e b_tensor = torch.as_tensor(b, dtype=torch.float).cuda() \u003e\u003e\u003e s3 = time.time() \u003e\u003e\u003e print(torch.cdist(a_tensor, b_tensor, p=0)) \u003e\u003e\u003e print(f\"è€—æ—¶{time.time()-s3}\") tensor([[1., 2.]], device='cuda:0') è€—æ—¶0.0015494823455810547 ","date":"2022-04-29","objectID":"/loss_function/:1:1","series":[],"tags":["math"],"title":"æŸå¤±å‡½æ•°","uri":"/loss_function/#æ ¸èŒƒæ•°nuclear-norm"},{"categories":["machine_learning"],"content":" è·ç¦»åº¦é‡ F èŒƒæ•°ï¼ˆFrobenius èŒƒæ•°ï¼‰çŸ©é˜µæ‰€æœ‰å…ƒç´ çš„å¹³æ–¹å’Œå†å¼€æ–¹ï¼Œä»–æ˜¯æ˜¯å‘é‡äºŒèŒƒå¼çš„æ‹“å±•ç±»æ¯”ã€‚ $$ ||A||_F = \\sqrt{\\sum a_{ij}^2} $$ å¦‚ä½•ä½œä¸ºè·ç¦»åº¦é‡å‘¢ï¼Ÿ å¯ä»¥åˆ©ç”¨å¦‚ä¸‹æ–¹å¼ï¼Œå¦‚æœæ ‡ç­¾çŸ©é˜µä¸º$B$ï¼ˆé€šå¸¸ä¸ºä¸€ä¸ªbatché‡Œçš„å¤šä¸ªæ ·æœ¬æ ‡ç­¾å‘é‡ç»„æˆï¼Œå¦‚æ ‡ç­¾å‘é‡ä¸º4ç»´ï¼Œbatch_size ä¸º128ï¼‰åˆ™$B$çš„å½¢çŠ¶ä¸ºï¼ˆ128ï¼Œ4ï¼‰ï¼‰ï¼Œè·ç¦»åº¦é‡å…¬å¼ä¸º $$ \\mathcal L_F = ||A-B|| $$ æ ¸èŒƒæ•°ï¼ˆnuclear normï¼‰ä½œä¸ºè·ç¦»åº¦é‡æ–¹å¼ä¸è¯¦ $$ \\begin{aligned} ||A||_*=\\operatorname{tr}\\left(\\sqrt{A^{T} A}\\right) \u0026=\\operatorname{tr}\\left(\\sqrt{\\left(U \\Sigma V^{T}\\right)^{T} U \\Sigma V^{T}}\\right) \\ \u0026=\\operatorname{tr}\\left(\\sqrt{V \\Sigma^{T} U^{T} U \\Sigma V^{T}}\\right) \\ \u0026=\\operatorname{tr}\\left(\\sqrt{V \\Sigma^{2} V^{T}}\\right)\\left(\\Sigma^{T}=\\Sigma\\right) \\ \u0026=\\operatorname{tr}\\left(\\sqrt{V^{T} V \\Sigma^{2}}\\right) \\ \u0026=\\operatorname{tr}(\\Sigma) \\end{aligned} $$ å‚è€ƒä»£ç  import torch label = np.array([[1, 2, 3, 4], [1, 2, 3, 4]]) pred = np.array([[2, 3, 4, 5], [2, 3, 4, 5]]) print(\"FèŒƒæ•°çŸ©é˜µ\") print(torch.norm(torch.from_numpy(pred - label).type(torch.cuda.FloatTensor), p=\"fro\", dim=-1)) print(\"2èŒƒæ•°çŸ©é˜µ\") print(torch.norm(torch.from_numpy(pred - label).type(torch.cuda.FloatTensor), p=2, dim=-1)) print(\"æ ¸èŒƒæ•°çŸ©é˜µ\") # æ ¸èŒƒæ•°ä½œä¸ºLossä½¿ç”¨æ–¹æ³•ä¸è¯¦ print(torch.norm(torch.from_numpy(pred - label).type(torch.cuda.FloatTensor), p=\"nuc\")) print(\"å¹³å‡æŸå¤±è®¡ç®—ï¼šæ¯ä¸ªæ ·æœ¬çš„æŸå¤±ç›¸åŠ ï¼Œå†é™¤ä»¥æ€»æ ·æœ¬æ•°\") print(torch.norm(torch.from_numpy(pred - label).type(torch.cuda.FloatTensor), p=\"fro\", dim=-1).sum() / label.shape[0]) print(torch.norm(torch.from_numpy(pred - label).type(torch.cuda.FloatTensor), p=2, dim=-1).sum() / label.shape[0]) è¾“å‡ºï¼š FèŒƒæ•°çŸ©é˜µ tensor([2., 2.], device='cuda:0') 2èŒƒæ•°çŸ©é˜µ tensor([2., 2.], device='cuda:0') æ ¸èŒƒæ•°çŸ©é˜µ tensor(2.8284, device='cuda:0') å¹³å‡æŸå¤±è®¡ç®—ï¼šæ¯ä¸ªæ ·æœ¬çš„æŸå¤±ç›¸åŠ ï¼Œå†é™¤ä»¥æ€»æ ·æœ¬æ•° tensor(2., device='cuda:0') tensor(2., device='cuda:0') Process finished with exit code 0 \u003e\u003e\u003e # ä¸åŒshapeçš„æ¬§è·è®¡ç®— ä½œè€…ï¼šhttps://blog.csdn.net/sinat_24899403/article/details/119249822 \u003e\u003e\u003e import torch \u003e\u003e\u003e from torch import nn \u003e\u003e\u003e a=torch.tensor([[1,1,1], [2,2,2]]) \u003e\u003e\u003e b=torch.tensor([[2,2,2], [1,1,1], [2,2,2], [1,1,1], [2,2,2]]) \u003e\u003e\u003e def pdist(a: torch.Tensor, b: torch.Tensor, p: int = 2) -\u003e torch.Tensor: return (a-b).abs().pow(p).sum(-1).pow(1/p) \u003e\u003e\u003e a_=a.unsqueeze(1) \u003e\u003e\u003e b_=b.unsqueeze(0) \u003e\u003e\u003e print(pdist(a_,b_)) tensor([[1.7321, 0.0000, 1.7321, 0.0000, 1.7321], [0.0000, 1.7321, 0.0000, 1.7321, 0.0000]]) æ±‰æ˜è·ç¦» å¦‚æœæ˜¯å¤šå¯¹å¤šï¼Œä¸”shapeä¸ä¸€è‡´ï¼Œä½¿ç”¨numpyè®¡ç®—æ˜¯æœ€å¿«çš„ï¼Œè€ƒè™‘åŸå› å¯èƒ½æ˜¯torchæœªå°è£…intç±»å‹çš„ä¸åŒshapeæ•°æ®çš„è®¡ç®—æ–¹å¼ï¼Œå¦‚æœshapeç›¸åŒå¯ä»¥ä½¿ç”¨pairwiseçš„æ–¹æ³• å½¢çŠ¶ç›¸åŒï¼ˆç”¨äºæ ‡ç­¾é¢„æµ‹ï¼‰ \u003e\u003e\u003e b = torch.tensor([[0, 0, 1], [0, 1, 0] ]) \u003e\u003e\u003e c = torch.tensor([[1, 0, 1], [0, 1, 0] ]) \u003e\u003e\u003e metric = BinaryHammingDistance(multidim_average='samplewise') \u003e\u003e\u003e print(metric(b, c)) tensor([0.3333, 0.0000]) å½¢çŠ¶ä¸åŒï¼ˆç”¨äºæ£€ç´¢ï¼‰ \u003e\u003e\u003e from sklearn.neighbors import DistanceMetric \u003e\u003e\u003e import time \u003e\u003e\u003e a = np.array([[0, 0, 2],]) \u003e\u003e\u003e b = np.array([[0, 0, 1], [0, 1, 0] ]) \u003e\u003e\u003e s1 = time.time() \u003e\u003e\u003e print(DistanceMetric.get_metric(\"hamming\").pairwise(a,b)) \u003e\u003e\u003e print(f\"è€—æ—¶{time.time()-s1}\") [[0.33333333 0.66666667]] è€—æ—¶0.0003008842468261719 \u003e\u003e\u003e a_tensor = torch.as_tensor(a, dtype=torch.float) \u003e\u003e\u003e b_tensor = torch.as_tensor(b, dtype=torch.float) \u003e\u003e\u003e s2 = time.time() \u003e\u003e\u003e print(torch.cdist(a_tensor, b_tensor, p=0)) \u003e\u003e\u003e print(f\"è€—æ—¶{time.time()-s2}\") tensor([[1., 2.]]) è€—æ—¶0.0003383159637451172 \u003e\u003e\u003e a_tensor = torch.as_tensor(a, dtype=torch.float).cuda() \u003e\u003e\u003e b_tensor = torch.as_tensor(b, dtype=torch.float).cuda() \u003e\u003e\u003e s3 = time.time() \u003e\u003e\u003e print(torch.cdist(a_tensor, b_tensor, p=0)) \u003e\u003e\u003e print(f\"è€—æ—¶{time.time()-s3}\") tensor([[1., 2.]], device='cuda:0') è€—æ—¶0.0015494823455810547 ","date":"2022-04-29","objectID":"/loss_function/:1:1","series":[],"tags":["math"],"title":"æŸå¤±å‡½æ•°","uri":"/loss_function/#æ±‰æ˜è·ç¦»"},{"categories":["machine_learning"],"content":" ç›¸å¯¹ç†µï¼ˆä¹Ÿç§°KLæ•£åº¦ï¼‰ç»´åŸºç™¾ç§‘ï¼šKLæ•£åº¦ï¼ˆKullback-Leibler divergenceï¼Œç®€ç§°KLDï¼‰ï¼Œåœ¨è®¯æ¯ç³»ç»Ÿä¸­ç§°ä¸ºç›¸å¯¹ç†µï¼ˆrelative entropyï¼‰ï¼Œåœ¨è¿ç»­æ—¶é—´åºåˆ—ä¸­ç§°ä¸ºéšæœºæ€§ï¼ˆrandomnessï¼‰ï¼Œåœ¨ç»Ÿè®¡æ¨¡å‹æ¨æ–­ä¸­ç§°ä¸ºè®¯æ¯å¢ç›Šï¼ˆinformation gainï¼‰ã€‚ä¹Ÿç§°è®¯æ¯æ•£åº¦ï¼ˆinformation divergenceï¼‰ã€‚å®ƒæ˜¯ä¸¤ä¸ªå‡ ç‡åˆ†å¸ƒ$P$å’Œ$Q$å·®åˆ«çš„éå¯¹ç§°æ€§çš„åº¦é‡ã€‚ KLæ•£åº¦æ˜¯ç”¨æ¥åº¦é‡ä½¿ç”¨åŸºäº$Q$çš„åˆ†å¸ƒæ¥ç¼–ç æœä»$P$çš„åˆ†å¸ƒçš„æ ·æœ¬æ‰€éœ€çš„é¢å¤–çš„å¹³å‡æ¯”ç‰¹æ•°ï¼Œæ³¨æ„$P$,$Q$å…ˆåé¡ºåºã€‚å…¸å‹æƒ…å†µä¸‹ï¼ŒPè¡¨ç¤ºæ•°æ®çš„çœŸå®åˆ†å¸ƒï¼ŒQè¡¨ç¤ºæ•°æ®çš„ç†è®ºåˆ†å¸ƒã€ä¼°è®¡çš„æ¨¡å‹åˆ†å¸ƒã€æˆ–Pçš„è¿‘ä¼¼åˆ†å¸ƒã€‚ $$ \\begin{equation} \\begin{aligned} D_{KL}(P||Q) \u0026= -\\sum_iP(i)ln\\frac{Q(i)}{P(i)} \\\\ \u0026= \\sum_iP(i)ln\\frac{P(i)}{Q(i)} \\end{aligned} \\end{equation} $$ ç›¸å¯¹ç†µçš„å€¼ä¸ºéè´Ÿæ•°ï¼š $$ D_{KL}(P||Q)\\geq 0 $$ å¦ï¼Œæ¦‚ç‡éƒ½ä¸ºé›¶æ—¶å–é›¶ã€‚ ","date":"2022-04-29","objectID":"/loss_function/:1:2","series":[],"tags":["math"],"title":"æŸå¤±å‡½æ•°","uri":"/loss_function/#ç›¸å¯¹ç†µä¹Ÿç§°klæ•£åº¦"},{"categories":["machine_learning"],"content":" äº¤å‰ç†µâ€”â€”Cross Entropyç»´åŸºç™¾ç§‘ï¼šåœ¨ä¿¡æ¯è®ºä¸­ï¼ŒåŸºäºç›¸åŒäº‹ä»¶æµ‹åº¦çš„ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒ$p$å’Œ$q$çš„äº¤å‰ç†µæ˜¯æŒ‡ï¼Œå½“åŸºäºä¸€ä¸ªâ€œéè‡ªç„¶â€ï¼ˆç›¸å¯¹äºâ€œçœŸå®â€åˆ†å¸ƒ$p$è€Œè¨€ï¼‰çš„æ¦‚ç‡åˆ†å¸ƒ$q$è¿›è¡Œç¼–ç æ—¶ï¼Œåœ¨äº‹ä»¶é›†åˆä¸­å”¯ä¸€æ ‡è¯†ä¸€ä¸ªäº‹ä»¶æ‰€éœ€è¦çš„å¹³å‡æ¯”ç‰¹æ•°ï¼ˆbitï¼‰ã€‚ ç»™å®šä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒ$p$å’Œ$q$ï¼Œ$p$ç›¸å¯¹äº$q$çš„äº¤å‰ç†µå®šä¹‰ä¸ºï¼š $$ H(p,q) = E_p[-\\log q] = H(p) + D_{KL}(p||q), $$ å…¶ä¸­ï¼Œ$H(p)$æ˜¯$p$çš„ç†µï¼Œ$D_{KL}(p||q)$æ˜¯ä»$p$ä¸$q$çš„KLæ•£åº¦ï¼ˆä¹Ÿè¢«ç§°ä¸º$p$ï¼Œç›¸å¯¹äº$q$çš„ç›¸å¯¹ç†µï¼‰ã€‚ å¯¹äºç¦»æ•£åˆ†å¸ƒ$p$å’Œ$q$ï¼Œäº¤å‰ç†µå¯ä»¥å®šä¹‰ä¸ºï¼š $$ H(p,q)=-\\sum_xp(x)\\log q(x). $$ å…¶ä¸­æ±‚å’Œæ˜¯æŒ‡åœ¨æ ·æœ¬ç©ºé—´è¿›è¡Œè®¡ç®—æ±‚å’Œã€‚è®°ä½è¿™ä¸ªè®¡ç®—æ–¹æ³•ï¼Œå› ä¸ºåç»­ä»‹ç»åˆ†ç±»ä»»åŠ¡çš„äº¤å‰ç†µæŸå¤±æ˜¯åŸºäºæ­¤çš„ã€‚ äºŒåˆ†ç±»äº¤å‰ç†µå‡è®¾åœ¨äºŒåˆ†ç±»ä»»åŠ¡æ—¶ï¼ŒçœŸå®æ ‡ç­¾$y$å’Œé¢„æµ‹æ ‡ç­¾$\\hat{y}$å–å€¼ç©ºé—´ä¸º${0,1}$ã€‚æ ¹æ®äº¤å‰ç†µå®šä¹‰ï¼Œå¯ä»¥å°†äº¤å‰ç†µæŸå¤±å‡½æ•°å®šä¹‰å¦‚ä¸‹ã€‚ $$ J=-\\frac{1}{N}\\sum_{i=1}^{N}[y\\log\\hat{y}+(1-y)\\log(1-\\hat{y})] $$ å‡è®¾çœŸå®åˆ†å¸ƒä¸º$p(i)$(çœŸå®æ ‡ç­¾$y$çš„åˆ†å¸ƒ)ï¼Œæ¨¡å‹é¢„æµ‹çš„åˆ†å¸ƒä¸º$q(i)$(é¢„æµ‹æ ‡ç­¾$\\hat{y}$çš„åˆ†å¸ƒï¼Œæ¨å¯¼å¦‚ä¸‹ï¼Œ $$ \\begin{equation} \\begin{aligned} H(p,q) \u0026=-\\sum_x p(x)\\cdot \\log({q(x)}) \\\\ \u0026=\\sum_x p(x)\\cdot \\log(\\frac{1}{q(x)})\\\\ \u0026=\\sum_x p_{(y=0|x)} \\cdot \\log(\\frac{1}{q_{(y=0|x)} }) + p_{(y=1|x)} \\cdot \\log(\\frac{1}{q_{(y=1|x)}})\\\\ \u0026=\\sum_x y\\log(\\frac{1}{\\hat{y}}) + (1-y)\\log(\\frac{1}{1-\\hat{y}})\\\\ \u0026=-\\sum_x [y\\log \\hat{y} + (1-y)\\log(1-\\hat{y})] \\end{aligned} \\end{equation} $$ æœ€åä¹˜ä¸Š$\\frac{1}{N}$è¿›è¡Œå¹³å‡æ“ä½œã€‚ ","date":"2022-04-29","objectID":"/loss_function/:1:3","series":[],"tags":["math"],"title":"æŸå¤±å‡½æ•°","uri":"/loss_function/#äº¤å‰ç†µcross-entropy"},{"categories":["machine_learning"],"content":" äº¤å‰ç†µâ€”â€”Cross Entropyç»´åŸºç™¾ç§‘ï¼šåœ¨ä¿¡æ¯è®ºä¸­ï¼ŒåŸºäºç›¸åŒäº‹ä»¶æµ‹åº¦çš„ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒ$p$å’Œ$q$çš„äº¤å‰ç†µæ˜¯æŒ‡ï¼Œå½“åŸºäºä¸€ä¸ªâ€œéè‡ªç„¶â€ï¼ˆç›¸å¯¹äºâ€œçœŸå®â€åˆ†å¸ƒ$p$è€Œè¨€ï¼‰çš„æ¦‚ç‡åˆ†å¸ƒ$q$è¿›è¡Œç¼–ç æ—¶ï¼Œåœ¨äº‹ä»¶é›†åˆä¸­å”¯ä¸€æ ‡è¯†ä¸€ä¸ªäº‹ä»¶æ‰€éœ€è¦çš„å¹³å‡æ¯”ç‰¹æ•°ï¼ˆbitï¼‰ã€‚ ç»™å®šä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒ$p$å’Œ$q$ï¼Œ$p$ç›¸å¯¹äº$q$çš„äº¤å‰ç†µå®šä¹‰ä¸ºï¼š $$ H(p,q) = E_p[-\\log q] = H(p) + D_{KL}(p||q), $$ å…¶ä¸­ï¼Œ$H(p)$æ˜¯$p$çš„ç†µï¼Œ$D_{KL}(p||q)$æ˜¯ä»$p$ä¸$q$çš„KLæ•£åº¦ï¼ˆä¹Ÿè¢«ç§°ä¸º$p$ï¼Œç›¸å¯¹äº$q$çš„ç›¸å¯¹ç†µï¼‰ã€‚ å¯¹äºç¦»æ•£åˆ†å¸ƒ$p$å’Œ$q$ï¼Œäº¤å‰ç†µå¯ä»¥å®šä¹‰ä¸ºï¼š $$ H(p,q)=-\\sum_xp(x)\\log q(x). $$ å…¶ä¸­æ±‚å’Œæ˜¯æŒ‡åœ¨æ ·æœ¬ç©ºé—´è¿›è¡Œè®¡ç®—æ±‚å’Œã€‚è®°ä½è¿™ä¸ªè®¡ç®—æ–¹æ³•ï¼Œå› ä¸ºåç»­ä»‹ç»åˆ†ç±»ä»»åŠ¡çš„äº¤å‰ç†µæŸå¤±æ˜¯åŸºäºæ­¤çš„ã€‚ äºŒåˆ†ç±»äº¤å‰ç†µå‡è®¾åœ¨äºŒåˆ†ç±»ä»»åŠ¡æ—¶ï¼ŒçœŸå®æ ‡ç­¾$y$å’Œé¢„æµ‹æ ‡ç­¾$\\hat{y}$å–å€¼ç©ºé—´ä¸º${0,1}$ã€‚æ ¹æ®äº¤å‰ç†µå®šä¹‰ï¼Œå¯ä»¥å°†äº¤å‰ç†µæŸå¤±å‡½æ•°å®šä¹‰å¦‚ä¸‹ã€‚ $$ J=-\\frac{1}{N}\\sum_{i=1}^{N}[y\\log\\hat{y}+(1-y)\\log(1-\\hat{y})] $$ å‡è®¾çœŸå®åˆ†å¸ƒä¸º$p(i)$(çœŸå®æ ‡ç­¾$y$çš„åˆ†å¸ƒ)ï¼Œæ¨¡å‹é¢„æµ‹çš„åˆ†å¸ƒä¸º$q(i)$(é¢„æµ‹æ ‡ç­¾$\\hat{y}$çš„åˆ†å¸ƒï¼Œæ¨å¯¼å¦‚ä¸‹ï¼Œ $$ \\begin{equation} \\begin{aligned} H(p,q) \u0026=-\\sum_x p(x)\\cdot \\log({q(x)}) \\\\ \u0026=\\sum_x p(x)\\cdot \\log(\\frac{1}{q(x)})\\\\ \u0026=\\sum_x p_{(y=0|x)} \\cdot \\log(\\frac{1}{q_{(y=0|x)} }) + p_{(y=1|x)} \\cdot \\log(\\frac{1}{q_{(y=1|x)}})\\\\ \u0026=\\sum_x y\\log(\\frac{1}{\\hat{y}}) + (1-y)\\log(\\frac{1}{1-\\hat{y}})\\\\ \u0026=-\\sum_x [y\\log \\hat{y} + (1-y)\\log(1-\\hat{y})] \\end{aligned} \\end{equation} $$ æœ€åä¹˜ä¸Š$\\frac{1}{N}$è¿›è¡Œå¹³å‡æ“ä½œã€‚ ","date":"2022-04-29","objectID":"/loss_function/:1:3","series":[],"tags":["math"],"title":"æŸå¤±å‡½æ•°","uri":"/loss_function/#äºŒåˆ†ç±»äº¤å‰ç†µ"},{"categories":["machine_learning"],"content":" å¤šåˆ†ç±»äº¤å‰ç†µä¸äºŒåˆ†ç±»äº¤å‰ç†µç±»ä¼¼ï¼Œå¤šåˆ†ç±»äº¤å‰ç†µåŒæ ·æ˜¯è®¡ç®—æ ‡ç­¾åˆ†å¸ƒçš„ç†µå€¼ï¼ŒåŸºäºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦æŠŠå¤šåˆ†ç±»è€ƒè™‘åœ¨å†…ï¼Œä¹Ÿå°±æ˜¯å¤šä¸€æ­¥æ±‚å’Œï¼Œå³æ¯ä¸ªç±»åˆ«ä¸Šçš„äº¤å‰ç†µæ±‚å’Œå¹¶åœ¨æ ·æœ¬ç©ºé—´ä¸Šè¿›è¡Œæ±‚å’Œï¼ŒåŸºäºäºŒåˆ†ç±»äº¤å‰ç†µçš„å‚æ•°å®šä¹‰ï¼Œå®šä¹‰åˆ†ç±»çš„æ ‡ç­¾ç§ç±»ä¸º$n$ï¼Œåˆ™å¤šåˆ†ç±»äº¤å‰ç†µæŸå¤±å¯ä»¥è¡¨ç¤ºå¦‚ä¸‹ $$ \\begin{equation} \\mathcal L = -\\frac{1}{N}\\sum_{i=1}^N\\sum_{j=1}^ny_j^{(i)}\\cdot \\log\\hat{y}_j^{(i)} \\end{equation} $$ å…¶ä¸­,$n$ä¸ºåˆ†ç±»ä¸ªæ•°ï¼Œå³æ ‡ç­¾å‘é‡ç»´åº¦ã€‚$N$ä¸ºæ ·æœ¬ä¸ªæ•°ã€‚ ","date":"2022-04-29","objectID":"/loss_function/:1:4","series":[],"tags":["math"],"title":"æŸå¤±å‡½æ•°","uri":"/loss_function/#å¤šåˆ†ç±»äº¤å‰ç†µ"},{"categories":["machine_learning"],"content":" å¯¹æ¯”æŸå¤± ä¸‰å…ƒæŸå¤± ç»™å®šanchor $p$ï¼Œä»¥æ¬§è·ä¸ºä¾‹ï¼Œè¡¡é‡ç›¸ä¼¼åº¦ï¼Œå…¶æ­£æ ·æœ¬ä¸º$q$ï¼Œè´Ÿæ ·æœ¬ä¸º$r$ã€‚ $$ \\begin{equation} \\begin{aligned} \\mathcal L = max(||\\boldsymbol p-\\boldsymbol q||^2-||\\boldsymbol p-\\boldsymbol r||^2+\\epsilon,0) \\end{aligned} \\end{equation} $$ ä»£ç å®ç° \"\"\" loss class \"\"\" class triplet_loss(nn.Module): def __init__(self): super(triplet_loss, self).__init__() self.margin = 0.2 def forward(self, anchor, positive, negative): pos_dist = (anchor - positive).pow(2).sum(1) neg_dist = (anchor - negative).pow(2).sum(1) loss = F.relu(pos_dist - neg_dist + self.margin) return loss.mean()#we can also use #torch.nn.functional.pairwise_distance(anchor,positive, keep_dims=True), which #computes the euclidean distance. \"\"\" training part \"\"\" loss_fun = triplet_loss() optimizer = Adam(custom_model.parameters(), lr = 0.001) for epoch in range(30): total_loss = 0 for i, (anchor, positive, negative) in enumerate(custom_loader): anchor = anchor['image'].to(device) positive = positive['image'].to(device) negative = negative['image'].to(device) anchor_feature = custom_model(anchor) positive_feature = custom_model(positive) negative_feature = custom_model(negative) optimizer.zero_grad() loss = loss_fun(anchor_feature, positive_feature, negative_feature) loss.backward() optimizer.step() å‚è€ƒé“¾æ¥https://zhuanlan.zhihu.com/p/414327252?ivk_sa=1024320u æ›´å¤šå¯¹æ¯”æŸå¤± https://lilianweng.github.io/posts/2021-05-31-contrastive/ ","date":"2022-04-29","objectID":"/loss_function/:1:5","series":[],"tags":["math"],"title":"æŸå¤±å‡½æ•°","uri":"/loss_function/#å¯¹æ¯”æŸå¤±"},{"categories":["machine_learning"],"content":" å¯¹æ¯”æŸå¤± ä¸‰å…ƒæŸå¤± ç»™å®šanchor $p$ï¼Œä»¥æ¬§è·ä¸ºä¾‹ï¼Œè¡¡é‡ç›¸ä¼¼åº¦ï¼Œå…¶æ­£æ ·æœ¬ä¸º$q$ï¼Œè´Ÿæ ·æœ¬ä¸º$r$ã€‚ $$ \\begin{equation} \\begin{aligned} \\mathcal L = max(||\\boldsymbol p-\\boldsymbol q||^2-||\\boldsymbol p-\\boldsymbol r||^2+\\epsilon,0) \\end{aligned} \\end{equation} $$ ä»£ç å®ç° \"\"\" loss class \"\"\" class triplet_loss(nn.Module): def __init__(self): super(triplet_loss, self).__init__() self.margin = 0.2 def forward(self, anchor, positive, negative): pos_dist = (anchor - positive).pow(2).sum(1) neg_dist = (anchor - negative).pow(2).sum(1) loss = F.relu(pos_dist - neg_dist + self.margin) return loss.mean()#we can also use #torch.nn.functional.pairwise_distance(anchor,positive, keep_dims=True), which #computes the euclidean distance. \"\"\" training part \"\"\" loss_fun = triplet_loss() optimizer = Adam(custom_model.parameters(), lr = 0.001) for epoch in range(30): total_loss = 0 for i, (anchor, positive, negative) in enumerate(custom_loader): anchor = anchor['image'].to(device) positive = positive['image'].to(device) negative = negative['image'].to(device) anchor_feature = custom_model(anchor) positive_feature = custom_model(positive) negative_feature = custom_model(negative) optimizer.zero_grad() loss = loss_fun(anchor_feature, positive_feature, negative_feature) loss.backward() optimizer.step() å‚è€ƒé“¾æ¥https://zhuanlan.zhihu.com/p/414327252?ivk_sa=1024320u æ›´å¤šå¯¹æ¯”æŸå¤± https://lilianweng.github.io/posts/2021-05-31-contrastive/ ","date":"2022-04-29","objectID":"/loss_function/:1:5","series":[],"tags":["math"],"title":"æŸå¤±å‡½æ•°","uri":"/loss_function/#ä¸‰å…ƒæŸå¤±"},{"categories":["machine_learning"],"content":" å¯¹æ¯”æŸå¤± ä¸‰å…ƒæŸå¤± ç»™å®šanchor $p$ï¼Œä»¥æ¬§è·ä¸ºä¾‹ï¼Œè¡¡é‡ç›¸ä¼¼åº¦ï¼Œå…¶æ­£æ ·æœ¬ä¸º$q$ï¼Œè´Ÿæ ·æœ¬ä¸º$r$ã€‚ $$ \\begin{equation} \\begin{aligned} \\mathcal L = max(||\\boldsymbol p-\\boldsymbol q||^2-||\\boldsymbol p-\\boldsymbol r||^2+\\epsilon,0) \\end{aligned} \\end{equation} $$ ä»£ç å®ç° \"\"\" loss class \"\"\" class triplet_loss(nn.Module): def __init__(self): super(triplet_loss, self).__init__() self.margin = 0.2 def forward(self, anchor, positive, negative): pos_dist = (anchor - positive).pow(2).sum(1) neg_dist = (anchor - negative).pow(2).sum(1) loss = F.relu(pos_dist - neg_dist + self.margin) return loss.mean()#we can also use #torch.nn.functional.pairwise_distance(anchor,positive, keep_dims=True), which #computes the euclidean distance. \"\"\" training part \"\"\" loss_fun = triplet_loss() optimizer = Adam(custom_model.parameters(), lr = 0.001) for epoch in range(30): total_loss = 0 for i, (anchor, positive, negative) in enumerate(custom_loader): anchor = anchor['image'].to(device) positive = positive['image'].to(device) negative = negative['image'].to(device) anchor_feature = custom_model(anchor) positive_feature = custom_model(positive) negative_feature = custom_model(negative) optimizer.zero_grad() loss = loss_fun(anchor_feature, positive_feature, negative_feature) loss.backward() optimizer.step() å‚è€ƒé“¾æ¥https://zhuanlan.zhihu.com/p/414327252?ivk_sa=1024320u æ›´å¤šå¯¹æ¯”æŸå¤± https://lilianweng.github.io/posts/2021-05-31-contrastive/ ","date":"2022-04-29","objectID":"/loss_function/:1:5","series":[],"tags":["math"],"title":"æŸå¤±å‡½æ•°","uri":"/loss_function/#å‚è€ƒé“¾æ¥"},{"categories":[],"content":" æ’åº","date":"2022-04-26","objectID":"/basic_algorithm/:1:0","series":[],"tags":["py"],"title":"å¥½ç”¨çš„PythonåŸºç¡€ç®—æ³•åº”ç”¨æŠ€å·§","uri":"/basic_algorithm/#æ’åº"},{"categories":[],"content":" åˆ—è¡¨ å†…ç½®æ’åºæ–¹æ³• sort() lis = [4,2,3,1] lis.sort() print(lis) [1, 2, 3, 4] sorted() lis = [4,2,3,1] sorted(lis) print(lis) lis = sorted(lis) print(lis) lis.reverse() print(lis) [4, 2, 3, 1] [1, 2, 3, 4] [4, 3, 2, 1] å¸¦åŸç´¢å¼•ä¸€èµ·æ’åºè¿™ç§æ–¹æ³•çš„å¥½å¤„æ˜¯ï¼Œå¦‚æœä½ æœ‰ä¸¤ä¸ªåˆ—è¡¨ï¼Œä¸€ä¸€å¯¹åº”ï¼Œä½ æƒ³åœ¨å˜åŒ–å…¶ä¸­ä¸€ä¸ªçš„æ—¶å€™å¸Œæœ›å¦ä¸€ä¸ªè·Ÿç€å˜åŠ¨ç›¸åŒçš„ç´¢å¼•ï¼Œä½ ä¾¿éœ€è¦ç”¨åˆ°ã€‚ lis_a = [4,2,3,1] lis_b = [3,4,1,2] new_lis_a = [] new_lis_b = [] c = sorted(enumerate(lis_a),key = lambda x:x[1]) # x[1] æ ¹æ®å…ƒç»„çš„ç¬¬äºŒä¸ªå…ƒç´ æ’åº for i in range(len(c)): new_lis_a.append(c[i][1]) new_lis_b.append(lis_b[c[i][0]]) print(new_lis_a) print(new_lis_b) [1, 2, 3, 4] [2, 4, 1, 3] å‘ç°äº†å‰é¢ä¸¤ä¸ªåˆ—è¡¨å¯¹åº”çš„ä½ç½®éƒ½æ˜¯ä¸€æ ·çš„å…ƒç´ äº†ä¹ˆï¼Ÿeasy ","date":"2022-04-26","objectID":"/basic_algorithm/:1:1","series":[],"tags":["py"],"title":"å¥½ç”¨çš„PythonåŸºç¡€ç®—æ³•åº”ç”¨æŠ€å·§","uri":"/basic_algorithm/#åˆ—è¡¨"},{"categories":[],"content":" åˆ—è¡¨ å†…ç½®æ’åºæ–¹æ³• sort() lis = [4,2,3,1] lis.sort() print(lis) [1, 2, 3, 4] sorted() lis = [4,2,3,1] sorted(lis) print(lis) lis = sorted(lis) print(lis) lis.reverse() print(lis) [4, 2, 3, 1] [1, 2, 3, 4] [4, 3, 2, 1] å¸¦åŸç´¢å¼•ä¸€èµ·æ’åºè¿™ç§æ–¹æ³•çš„å¥½å¤„æ˜¯ï¼Œå¦‚æœä½ æœ‰ä¸¤ä¸ªåˆ—è¡¨ï¼Œä¸€ä¸€å¯¹åº”ï¼Œä½ æƒ³åœ¨å˜åŒ–å…¶ä¸­ä¸€ä¸ªçš„æ—¶å€™å¸Œæœ›å¦ä¸€ä¸ªè·Ÿç€å˜åŠ¨ç›¸åŒçš„ç´¢å¼•ï¼Œä½ ä¾¿éœ€è¦ç”¨åˆ°ã€‚ lis_a = [4,2,3,1] lis_b = [3,4,1,2] new_lis_a = [] new_lis_b = [] c = sorted(enumerate(lis_a),key = lambda x:x[1]) # x[1] æ ¹æ®å…ƒç»„çš„ç¬¬äºŒä¸ªå…ƒç´ æ’åº for i in range(len(c)): new_lis_a.append(c[i][1]) new_lis_b.append(lis_b[c[i][0]]) print(new_lis_a) print(new_lis_b) [1, 2, 3, 4] [2, 4, 1, 3] å‘ç°äº†å‰é¢ä¸¤ä¸ªåˆ—è¡¨å¯¹åº”çš„ä½ç½®éƒ½æ˜¯ä¸€æ ·çš„å…ƒç´ äº†ä¹ˆï¼Ÿeasy ","date":"2022-04-26","objectID":"/basic_algorithm/:1:1","series":[],"tags":["py"],"title":"å¥½ç”¨çš„PythonåŸºç¡€ç®—æ³•åº”ç”¨æŠ€å·§","uri":"/basic_algorithm/#å†…ç½®æ’åºæ–¹æ³•"},{"categories":[],"content":" åˆ—è¡¨ å†…ç½®æ’åºæ–¹æ³• sort() lis = [4,2,3,1] lis.sort() print(lis) [1, 2, 3, 4] sorted() lis = [4,2,3,1] sorted(lis) print(lis) lis = sorted(lis) print(lis) lis.reverse() print(lis) [4, 2, 3, 1] [1, 2, 3, 4] [4, 3, 2, 1] å¸¦åŸç´¢å¼•ä¸€èµ·æ’åºè¿™ç§æ–¹æ³•çš„å¥½å¤„æ˜¯ï¼Œå¦‚æœä½ æœ‰ä¸¤ä¸ªåˆ—è¡¨ï¼Œä¸€ä¸€å¯¹åº”ï¼Œä½ æƒ³åœ¨å˜åŒ–å…¶ä¸­ä¸€ä¸ªçš„æ—¶å€™å¸Œæœ›å¦ä¸€ä¸ªè·Ÿç€å˜åŠ¨ç›¸åŒçš„ç´¢å¼•ï¼Œä½ ä¾¿éœ€è¦ç”¨åˆ°ã€‚ lis_a = [4,2,3,1] lis_b = [3,4,1,2] new_lis_a = [] new_lis_b = [] c = sorted(enumerate(lis_a),key = lambda x:x[1]) # x[1] æ ¹æ®å…ƒç»„çš„ç¬¬äºŒä¸ªå…ƒç´ æ’åº for i in range(len(c)): new_lis_a.append(c[i][1]) new_lis_b.append(lis_b[c[i][0]]) print(new_lis_a) print(new_lis_b) [1, 2, 3, 4] [2, 4, 1, 3] å‘ç°äº†å‰é¢ä¸¤ä¸ªåˆ—è¡¨å¯¹åº”çš„ä½ç½®éƒ½æ˜¯ä¸€æ ·çš„å…ƒç´ äº†ä¹ˆï¼Ÿeasy ","date":"2022-04-26","objectID":"/basic_algorithm/:1:1","series":[],"tags":["py"],"title":"å¥½ç”¨çš„PythonåŸºç¡€ç®—æ³•åº”ç”¨æŠ€å·§","uri":"/basic_algorithm/#å¸¦åŸç´¢å¼•ä¸€èµ·æ’åº"},{"categories":["tutorial"],"content":"å®¤å‹å¸®å¿™å¼„çš„clashåˆä¸è¡Œäº†ï¼Œä»Šå¤©æ‰“ç®—è‡ªå·±ä¿®ä¿®ï¼ˆé‡è£…ï¼‰è¿™ä¸ªæ¢¯å­è½¯ä»¶ï¼Œè®°å½•ä¸€ä¸‹ã€‚ ç°åœ¨çš„ç—…æƒ…å°±æ˜¯è°·æ­Œä¸Šä¸å»ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ clashçš„ç½‘é¡µé…ç½®ç«¯å£ä¹Ÿä¸Šä¸å»ã€‚ ","date":"2022-04-24","objectID":"/clash/:0:0","series":[],"tags":["linux","tools"],"title":"è®°ä¸€æ¬¡Clash for Linux çš„é…ç½®","uri":"/clash/#"},{"categories":["tutorial"],"content":" å‡†å¤‡å·¥å…·é¦–å…ˆæˆ‘ä»¬è¦ä½¿ç”¨ä¸€å°èƒ½å¤Ÿè®¿é—®å¤–ç½‘çš„æœºå™¨æ¥ä¸‹è½½å¿…è¦çš„æ–‡ä»¶ï¼Œç»å…¸æ‚–è®ºï¼Œæ²¡é”™ï¼Œä¸Šå¤–ç½‘ä¸‹clashç”¨æ¥ä¸Šå¤–ç½‘ï¼Œä¸è¿‡githubè¿˜æ˜¯æœ‰å‡ ç‡èƒ½ä¸Šå»çš„ã€‚ åˆ°clashå¼€æºå·¥å…·(go å†™çš„)çš„repoåœ°å€ä¸‹è½½æœ€æ–°çš„releaseï¼Œæ¯”å¦‚æˆ‘æœ¬æ¬¡ä¸‹è½½çš„æ˜¯ç‰ˆæœ¬ã€‚ä¼ é€é—¨ æ‰€ä½¿ç”¨çš„Linuxç³»ç»Ÿæ˜¯ lsb_release -a ","date":"2022-04-24","objectID":"/clash/:1:0","series":[],"tags":["linux","tools"],"title":"è®°ä¸€æ¬¡Clash for Linux çš„é…ç½®","uri":"/clash/#å‡†å¤‡å·¥å…·"},{"categories":["tutorial"],"content":" å¼€å§‹å®‰è£…é¦–å…ˆè§£å‹ä¸‹è½½çš„releaseæ–‡ä»¶åœ¨ä½ æƒ³è¦çš„ç›®å½•ã€‚æ¯”å¦‚æˆ‘çš„åœ¨å®¶ç›®å½•çš„clashæ–‡ä»¶å¤¹ä¸‹ã€‚ gunzip clash-linux-amd64-v1.10.0.gz ç„¶åè¿›è¡Œç¬¬ä¸€æ¬¡è¿è¡Œclash chmod +x clash-linux-amd64-v1.10.0(æ¢æˆè‡ªå·±çš„clashç‰ˆæœ¬) ./clash-linux-amd64-v1.10.0(æ¢æˆè‡ªå·±çš„clashç‰ˆæœ¬) ç«¯å£è¢«å ç”¨äº†â€¦â€¦ æŸ¥çœ‹æ˜¯å“ªä¸ªè¿›ç¨‹å ç”¨äº†ç«¯å£å¹¶kill sudo lsof -i tcp:7890 kill 11556(æ¢æˆä½ è‡ªå·±æ‰¾åˆ°çš„PID) å†è¯•ä¸€æ¬¡ï¼Œokå¯åŠ¨äº†â€¦â€¦ è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç”¨æˆ·å®¶ç›®å½•çš„.config/æ–‡ä»¶å¤¹ä¸‹æ‰¾åˆ°è‡ªåŠ¨ç”Ÿæˆçš„clashæ–‡ä»¶å¤¹ ","date":"2022-04-24","objectID":"/clash/:2:0","series":[],"tags":["linux","tools"],"title":"è®°ä¸€æ¬¡Clash for Linux çš„é…ç½®","uri":"/clash/#å¼€å§‹å®‰è£…"},{"categories":["tutorial"],"content":" åç»­æ›´æ–°URLä»è¿™é‡Œå¼€å§‹ç„¶åæˆ‘ä»¬ä½¿ç”¨è¿è¥å•†ç»™çš„è®¢é˜…é“¾æ¥è¾“å…¥æµè§ˆå™¨ç½‘å€ï¼ŒæŠŠå†…å®¹å…¨éƒ¨å¤åˆ¶åˆ°config.yamlæ–‡ä»¶é‡Œ vi ~/.config/clash/config.yamlï¼ˆä¸æ¨èç›´æ¥å¤åˆ¶ç²˜è´´ç½‘é¡µå†…å®¹ï¼Œå»ºè®®å¾€åçœ‹ï¼‰ è¿™ç§æ–¹å¼éå¸¸æ…¢ï¼Œç”±äºé¡µé¢æ–‡æœ¬è¾ƒé•¿ï¼Œé•¿æ—¶é—´åœ¨ç²˜è´´â€¦â€¦ æœæ–­å…³æ‰é‡æ¥ï¼Œæˆ‘ä»¬å°†åˆšåˆšé“¾æ¥æ‰“å¼€çš„ç½‘é¡µå³é”®å¦å­˜ä¸ºä¸€ä¸ªæ–‡ä»¶ ç„¶åé‡å®šå‘å†™å…¥config.yamlæ–‡ä»¶ï¼Œä¸€ç§’é’Ÿæå®š cat ~/sub.txt \u003e ~/.config/clash/config.yaml ","date":"2022-04-24","objectID":"/clash/:3:0","series":[],"tags":["linux","tools"],"title":"è®°ä¸€æ¬¡Clash for Linux çš„é…ç½®","uri":"/clash/#åç»­æ›´æ–°urlä»è¿™é‡Œå¼€å§‹"},{"categories":["tutorial"],"content":" æ”¹å®Œconfigä¹‹åï¼Œåç»­æ›´æ–°URLçš„æ“ä½œè‡³æ­¤å®Œæˆå†™å¥½äº†configæ–‡ä»¶ä¹‹åï¼Œæˆ‘ä»¬å¯åŠ¨è¯•è¯•ã€‚é¡ºä¾¿å…ˆåœ¨å¯¹åº”ç›®å½•ä¸‹ç»™clashçš„å¯æ‰§è¡Œæ–‡ä»¶æ”¹ä¸ªå mv clash-linux-amd64-v1.10.0 clash ./clash ä½¿ç”¨è°·æ­Œæµè§ˆå™¨çš„ç«¯å£ä»£ç†æ’ä»¶è®¾ç½®ç½‘é¡µä»£ç†ç«¯å£ä¸ºè‡ªå·±ä¸»æœºçš„7890å¦‚ä¸‹ è®¿é—®Google OKæ­£å¸¸ å¦‚æœä½ æƒ³ä½¿ç”¨æœ¬æœºç«¯å£æœåŠ¡åšä»£ç†ç„¶ååœ¨å‘½ä»¤è¡Œè¿›è¡Œè®¿é—®ï¼Œå¯ä»¥ä½¿ç”¨ export http_proxy=http://127.0.0.1:7890 export https_proxy=http://127.0.0.1:7890 # éšä¾¿ä½¿ç”¨å‘½ä»¤è¡Œgitä¸Šä¸‹è½½ä¸€ä¸ªåŒ…è¯•è¯• wget https://github.com/pyenv/pyenv/archive/refs/tags/v2.2.5.zip å¥½ä½¿ ","date":"2022-04-24","objectID":"/clash/:3:1","series":[],"tags":["linux","tools"],"title":"è®°ä¸€æ¬¡Clash for Linux çš„é…ç½®","uri":"/clash/#æ”¹å®Œconfigä¹‹ååç»­æ›´æ–°urlçš„æ“ä½œè‡³æ­¤å®Œæˆ"},{"categories":["tutorial"],"content":" åŸºæœ¬åŠŸèƒ½å®Œæˆï¼Œåç»­è®¾ç½®å¼€æœºå¯åŠ¨ã€‚å°†åŠŸèƒ½è®¾ç½®ä¸ºä¸€ä¸ªservice å¢åŠ systemé…ç½® sudo vi /etc/systemd/system/clash.service å†™å…¥ä»¥ä¸‹å†…å®¹ [Unit] Description=Clash service After=network.target [Service] Type=simple User=oliver #æ¢æˆä½ è‡ªå·±ç”¨æˆ·å WorkingDirectory=**** # ä½ å¸Œæœ›è¿™ä¸ªæœåŠ¡åœ¨å“ªä¸ªæ–‡ä»¶å¤¹ä¸‹è¿è¡Œ ExecStart=/home/oliver/clash/clash -d /home/oliver/.config/clash/ #æ¢æˆä½ è‡ªå·±clashç›®å½•ï¼Œæ³¨æ„ï¼Œå‰åŠéƒ¨åˆ†ä¸€å®šè¦è¿æ¥åˆ°æ–‡ä»¶ï¼ä¸èƒ½åªåˆ°ç›®å½• Restart=on-failure RestartPreventExitStatus=23 [Install] WantedBy=multi-user.target sudo systemctl daemon-reload sudo systemctl enable clash sudo systemctl start clash sudo systemctl status clash OKï¼ŒæˆåŠŸäº†ï¼Œå›¾ä¸­ç«¯å£9090æ˜¯UIçš„ç«¯å£ï¼Œæ„å‘³ç€è®¿é—®http://127.0.0.1:9090å°±èƒ½å‡ºç°å¦‚ä¸‹ç•Œé¢ ","date":"2022-04-24","objectID":"/clash/:4:0","series":[],"tags":["linux","tools"],"title":"è®°ä¸€æ¬¡Clash for Linux çš„é…ç½®","uri":"/clash/#åŸºæœ¬åŠŸèƒ½å®Œæˆåç»­è®¾ç½®å¼€æœºå¯åŠ¨"},{"categories":["tutorial"],"content":" é…ç½®å®šæ—¶æ›´æ–°è®¢é˜…åˆ›å»ºconfig.yamlæ›´æ–°è„šæœ¬ vi /home/oliver/.config/clash/get_clash_config.py import requests # è®¢é˜…é“¾æ¥ url = 'https://xxxx.com' head = {'User-Agent': \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_3) AppleWebKit/537.75.14 (KHTML, like Gecko) Version/7.0.3 Safari/7046A194A\"} config_yaml_content = requests.get(url, headers=head).text # å†™å…¥æ–‡ä»¶ config_yaml_path = '/home/oliver/.config/clash/config.yaml' f = open(config_yaml_path, 'w', encoding='utf-8') f.write(config_yaml_content) f.close() æ¯å¤©æ›´æ–° sudo vi /etc/cron.daily/clash.sh å‘å…¶ä¸­å†™å…¥å¦‚ä¸‹è„šæœ¬ #!/bin/bash systemctl stop clash python3 /home/oliver/.config/clash/get_clash_config.py systemctl start clash sudo chmod +x /etc/cron.daily/clash.sh ","date":"2022-04-24","objectID":"/clash/:4:1","series":[],"tags":["linux","tools"],"title":"è®°ä¸€æ¬¡Clash for Linux çš„é…ç½®","uri":"/clash/#é…ç½®å®šæ—¶æ›´æ–°è®¢é˜…"},{"categories":["tutorial"],"content":" é…ç½®å®šæ—¶æ›´æ–°è®¢é˜…åˆ›å»ºconfig.yamlæ›´æ–°è„šæœ¬ vi /home/oliver/.config/clash/get_clash_config.py import requests # è®¢é˜…é“¾æ¥ url = 'https://xxxx.com' head = {'User-Agent': \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_3) AppleWebKit/537.75.14 (KHTML, like Gecko) Version/7.0.3 Safari/7046A194A\"} config_yaml_content = requests.get(url, headers=head).text # å†™å…¥æ–‡ä»¶ config_yaml_path = '/home/oliver/.config/clash/config.yaml' f = open(config_yaml_path, 'w', encoding='utf-8') f.write(config_yaml_content) f.close() æ¯å¤©æ›´æ–° sudo vi /etc/cron.daily/clash.sh å‘å…¶ä¸­å†™å…¥å¦‚ä¸‹è„šæœ¬ #!/bin/bash systemctl stop clash python3 /home/oliver/.config/clash/get_clash_config.py systemctl start clash sudo chmod +x /etc/cron.daily/clash.sh ","date":"2022-04-24","objectID":"/clash/:4:1","series":[],"tags":["linux","tools"],"title":"è®°ä¸€æ¬¡Clash for Linux çš„é…ç½®","uri":"/clash/#æ¯å¤©æ›´æ–°"},{"categories":["tutorial"],"content":" é…ç½®clash for windows çš„linuxç‰ˆæœ¬ï¼Œå’Œæˆ‘ä¸€æ ·æ€•éº»çƒ¦çš„è·³åˆ°è¿™é‡Œï¼ˆ2022å¹´10æœˆ4æ—¥æ›´æ–°ï¼‰è¿™æ ‡é¢˜æœ‰ç‚¹ç»•ï¼Œè¯´ç™½äº†å°±æ˜¯ä½ ä¼šå¾—åˆ°clashçš„windowsä¸‹çš„ç›¸åŒç•Œé¢ã€‚ é¦–å…ˆï¼Œä½ éœ€è¦åœ¨clash for windowsçš„é¡¹ç›®åœ°å€ä¸‹è½½å®‰è£…åŒ…ï¼Œåœ°å€æ˜¯https://github.com/Fndroid/clash_for_windows_pkg/releases æ ¹æ®cpuæ¶æ„2é€‰1 ç„¶åï¼Œè§£å‹åè¿›å…¥è¯¥æ–‡ä»¶å¤¹ï¼Œè¿è¡Œå¦‚ä¸‹å‘½ä»¤ ./cfw å°±èƒ½æ‰“å¼€ç•Œé¢äº† æœ€åå¯¼å…¥yamlæ–‡ä»¶å³å¯ è¾ƒä¸ºç®€æ˜“ è‡³æ­¤ç»“æŸ~ echo \"è‡³æ­¤ç»“æŸ~\" ","date":"2022-04-24","objectID":"/clash/:5:0","series":[],"tags":["linux","tools"],"title":"è®°ä¸€æ¬¡Clash for Linux çš„é…ç½®","uri":"/clash/#é…ç½®clash-for-windows-çš„linuxç‰ˆæœ¬å’Œæˆ‘ä¸€æ ·æ€•éº»çƒ¦çš„è·³åˆ°è¿™é‡Œ2022å¹´10æœˆ4æ—¥æ›´æ–°"},{"categories":[],"content":" æ¨¡å‹æƒé‡ä¿å­˜é‡è½½ç¤ºä¾‹ # è‡ªå·±å®šä¹‰çš„ç½‘ç»œ ## æ–¹æ³•ä¸€ï¼šåªä¿å­˜æƒé‡ encoder = BertModel.from_pretrained(bert_model_path) model = EffiGlobalPointer(encoder, ENT_CLS_NUM, args.pointer_num).to(device) torch.save(best_model.state_dict(), \"data/model_data/best.pth\") prev_state_dict = torch.load('data/model_data/best.pth') model.load_state_dict(prev_state_dict) ## æ–¹æ³•äºŒï¼šä¿å­˜æ‰€æœ‰çš„ torch.save(best_model, \"data/model_data/best.pt\") model = torch.load('data/model_data/best_state_dict.pt') # BertModelå†…ç½®æ–¹æ³• # æ³¨æ„ç‰¹å®šçš„æ¨¡å‹ç§ç±»éœ€è¦ä½¿ç”¨ä¸åŒçš„from_pretrainedæ–¹æ³•ï¼Œå¦åˆ™æŸäº›æƒé‡å¯èƒ½ä¸åŠ è½½,å…·ä½“æŸ¥çœ‹æ¨¡å‹ç±» model = BertModel() model.save_pretrained('./output/bert_saved') model = BertModel.from_pretrained() æŸ¥è¯¢æ–¹å¼ æƒé‡æ–‡ä»¶å†…éƒ¨æ˜¯è¿™æ ·çš„ï¼Œç†Ÿæ‚‰çš„Wå’Œbã€‚ ","date":"2022-04-18","objectID":"/lm_pretraining/:0:0","series":[],"tags":["nlp"],"title":"è¯­è¨€æ¨¡å‹é¢„è®­ç»ƒæ–¹æ³•","uri":"/lm_pretraining/#æ¨¡å‹æƒé‡ä¿å­˜é‡è½½ç¤ºä¾‹"},{"categories":[],"content":" BERT","date":"2022-04-18","objectID":"/lm_pretraining/:0:0","series":[],"tags":["nlp"],"title":"è¯­è¨€æ¨¡å‹é¢„è®­ç»ƒæ–¹æ³•","uri":"/lm_pretraining/#bert"},{"categories":[],"content":" huggingfaceå®˜æ–¹ç¤ºä¾‹å¯ä»¥åˆ°https://github.com/huggingface/transformers/ä¸‹çš„ä¾‹å­æ–‡ä»¶ä¸­å¯»æ‰¾demoï¼Œç”±äºå®˜æ–¹æ›´æ–°é€Ÿåº¦å¿«ï¼Œå…·ä½“è·¯å¾„è¯·è‡ªè¡Œå®šä½è‡³examplesæ–‡ä»¶å¤¹~ ä»¥pytorchç‰ˆæœ¬çš„masked language modelä¸ºä¾‹ åªéœ€è¦è¿è¡Œä»¥ä¸‹è„šæœ¬å³å¯ python run_mlm.py \\ --model_name_or_path roberta-base \\ --dataset_name wikitext \\ --dataset_config_name wikitext-2-raw-v1 \\ --per_device_train_batch_size 8 \\ --per_device_eval_batch_size 8 \\ --do_train \\ --do_eval \\ --output_dir /tmp/test-mlm å…¶ä¸­ dataset_nameä¸ºè¯­æ–™æ–‡ä»¶ï¼Œå¯ä»¥æ˜¯txtæ ¼å¼çš„,æ¯è¡Œä¸€ä¸ªæ–‡æœ¬åºåˆ— ","date":"2022-04-18","objectID":"/lm_pretraining/:1:0","series":[],"tags":["nlp"],"title":"è¯­è¨€æ¨¡å‹é¢„è®­ç»ƒæ–¹æ³•","uri":"/lm_pretraining/#huggingfaceå®˜æ–¹ç¤ºä¾‹"},{"categories":[],"content":" nezha","date":"2022-04-18","objectID":"/lm_pretraining/:0:0","series":[],"tags":["nlp"],"title":"è¯­è¨€æ¨¡å‹é¢„è®­ç»ƒæ–¹æ³•","uri":"/lm_pretraining/#nezha"},{"categories":[],"content":" æ¥æºç½‘ç»œ import sys import os import csv from transformers import BertTokenizer, WEIGHTS_NAME,TrainingArguments,BertForMaskedLM,BertConfig import tokenizers import torch # from configuration_nezha import NeZhaConfig from model.modeling_nezha import NeZhaForMaskedLM from model.configuration_nezha import NeZhaConfig os.environ[\"CUDA_VISIBLE_DEVICES\"] = '0' from transformers import ( CONFIG_MAPPING, MODEL_FOR_MASKED_LM_MAPPING, AutoConfig, AutoModelForMaskedLM, AutoTokenizer, DataCollatorForLanguageModeling, HfArgumentParser, Trainer, TrainingArguments, set_seed, LineByLineTextDataset, BertTokenizerFast ) model_path = '../nezha-base-www' tokenizer = BertTokenizerFast.from_pretrained(model_path, do_lower_case=True) config = NeZhaConfig.from_pretrained(model_path, num_labels=52) model = NeZhaForMaskedLM.from_pretrained(model_path, config=config) train_dataset=LineByLineTextDataset(tokenizer=tokenizer,file_path='../pretrain_unlabel_dataset/train_data/unlabeled_train_data.txt',block_size=128) data_collator = DataCollatorForLanguageModeling(tokenizer=tokenizer, mlm=True, mlm_probability=0.15) pretrain_batch_size=128 num_train_epochs=30 training_args = TrainingArguments( output_dir='./pretrained_nezha', overwrite_output_dir=True, num_train_epochs=num_train_epochs, learning_rate=6e-5, per_device_train_batch_size=pretrain_batch_size, save_total_limit=10, logging_dir='./pretrained_nezha_log', logging_steps=10000, no_cuda=False)# save_steps=10000 trainer = Trainer( model=model, args=training_args, data_collator=data_collator, train_dataset=train_dataset) trainer.train() trainer.save_model('./pretrained_nezha') for i in range(100): torch.cuda.empty_cache() ","date":"2022-04-18","objectID":"/lm_pretraining/:1:0","series":[],"tags":["nlp"],"title":"è¯­è¨€æ¨¡å‹é¢„è®­ç»ƒæ–¹æ³•","uri":"/lm_pretraining/#æ¥æºç½‘ç»œ"},{"categories":["tutorial"],"content":"Scrapyä¿¡æ¯æ£€ç´¢å¤§ä½œä¸šé©±åŠ¨ï¼Œçˆ¬è™«åº”è¯¥æ˜¯pythonä½¿ç”¨è€…æ¯”è¾ƒé‡è¦çš„ä¸€é—¨æŠ€èƒ½ï¼Œå­¦ä¼šè¿™ä¸ªä¹Ÿèƒ½è¿›å‚äº†ï¼Œæœ¬é¡¹ç›®è¾ƒä¸ºè¯¦ç»†ï¼Œå®ç°ä¸äº†ä½ æ‰“æˆ‘ã€‚","date":"2022-04-09","objectID":"/scrapy/","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/"},{"categories":["tutorial"],"content":" Scrapyæ¡†æ¶æ¦‚è§ˆScrapyä½¿ç”¨äº†Twistedå¼‚æ­¥ç½‘ç»œæ¡†æ¶æ¥å¤„ç†ç½‘ç»œé€šè®¯ï¼Œå¯ä»¥åŠ å¿«æˆ‘ä»¬çš„ä¸‹è½½é€Ÿåº¦ï¼Œä¸ç”¨è‡ªå·±å»å®ç°å¼‚æ­¥æ¡†æ¶ï¼Œå¹¶ä¸”åŒ…å«äº†å„ç§ä¸­é—´ä»¶æ¥å£ï¼Œå¯ä»¥çµæ´»å®Œæˆå„ç§éœ€æ±‚ã€‚ ","date":"2022-04-09","objectID":"/scrapy/:1:0","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#scrapyæ¡†æ¶æ¦‚è§ˆ"},{"categories":["tutorial"],"content":" Scrapyç»“æ„ç»„æˆ Components Introduction Scrapy Engine Scrapyå¼•æ“è´Ÿè´£æ§åˆ¶å„ç»„ä»¶ä¹‹é—´çš„æ‰€æœ‰æ•°æ®æµï¼Œå¹¶åœ¨ç‰¹å®šåŠ¨ä½œå‘ç”Ÿæ—¶è§¦å‘äº‹ä»¶ã€‚ Scheduler è°ƒåº¦å™¨æ¥æ”¶æ¥è‡ªå¼•æ“çš„è¯·æ±‚å¹¶å°†å®ƒä»¬æŒ‰ä¸€å®šè¦æ±‚æ’å…¥é˜Ÿåˆ—ä»¥ä¾¿åç»­å“åº”å¼•æ“ã€‚ï¼ˆçˆ¬è™«æ‰§è¡Œè¿‡ç¨‹éœ€è¦æ—¶é—´ï¼Œä¸èƒ½åŒæ—¶å®Œæˆæ‰€æœ‰ä»»åŠ¡ï¼Œå› è€Œéœ€è¦ä»»åŠ¡é˜Ÿåˆ—ã€‚ï¼‰ Downloader ä¸‹è½½å™¨è´Ÿè´£æŠ“å–ç½‘é¡µå¹¶å°†å®ƒä»¬å–‚ç»™å¼•æ“ï¼Œå¼•æ“è½¬è€Œå–‚ç»™Spiderçˆ¬è™«ç¨‹åºã€‚ Spider çˆ¬è™«æ˜¯ç”±Scrapyç”¨æˆ·è‡ªè¡Œç¼–å†™çš„å®¢åˆ¶åŒ–ç±»ï¼Œç”¨æ¥è§£æå“åº”ä»¥åŠæå–ç½‘é¡µæ•°æ®é¡¹æˆ–å…¶ä»–è¯·æ±‚ã€‚ Item Pipline è´Ÿè´£å¤„ç†ç”±çˆ¬è™«æå–çš„itemsã€‚å…¸å‹ä»»åŠ¡åŒ…æ‹¬æ¸…ç†æ•°æ®ï¼ŒéªŒè¯æ•°æ®ä»¥åŠæŒç»­åŒ–å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ç­‰ã€‚ Downloader middlewares ä¸‹è½½ä¸­é—´ä»¶æ˜¯ä½äºå¼•æ“å’Œä¸‹è½½å™¨ä¹‹é—´çš„ç‰¹å®šé’©å­ç¨‹åºï¼ˆå¯ä»¥ç†è§£ä¸ºè¿æ¥ç‚¹ï¼‰ï¼Œç”¨æ¥å¤„ç†ç”±å¼•æ“å‘å¾€ä¸‹è½½å™¨çš„è¯·æ±‚å·²ç»æ¥è‡ªä¸‹è½½å™¨å‘å›å¼•æ“çš„å“åº”ã€‚ä½¿ç”¨ä¸‹è½½ä¸­é—´ä»¶çš„æƒ…æ™¯å¦‚ä¸‹ï¼š- åœ¨è¯·æ±‚å‘é€ç»™ä¸‹è½½å™¨ä¹‹å‰è¿›è¡Œå¤„ç†ï¼ˆæ¯”å¦‚å°±åœ¨Scrapyå‘ç½‘é¡µå‘é€è¯·æ±‚æ—¶ï¼‰- åœ¨å“åº”å‘å¾€çˆ¬è™«ç¨‹åºæ—¶ï¼Œæ”¹å†™å¾—åˆ°çš„å“åº”ã€‚- å‘é€ä¸€ä¸ªæ–°çš„è¯·æ±‚è€Œä¸æ˜¯å°†å¾—åˆ°çš„å“åº”å‘ç»™çˆ¬è™«ç¨‹åºã€‚- åœ¨ä¸æŠ“å–ç½‘é¡µçš„æƒ…å†µä¸‹å‘çˆ¬è™«ä¼ é€’ä¸€ä¸ªå“åº”ã€‚- é™é»˜ä¸¢å¼ƒä¸€äº›è¯·æ±‚ã€‚ Spider middlewares çˆ¬è™«ç¨‹åºä¸­é—´ä»¶æ˜¯ä½äºå¼•æ“å’Œçˆ¬è™«ç¨‹åºä¹‹é—´çš„ç‰¹å®šçš„é’©å­ç¨‹åºï¼Œå®ƒèƒ½å¤Ÿå¤„ç†çˆ¬è™«ç¨‹åºçš„è¾“å…¥ï¼ˆå‘å¾€çˆ¬è™«ç¨‹åºçš„å“åº”ï¼‰ä»¥åŠçˆ¬è™«ç¨‹åºå¾—åˆ°çš„è¾“å‡ºï¼ˆæ•°æ®é¡¹å’Œè¯·æ±‚ï¼‰ã€‚ä½¿ç”¨çˆ¬è™«ç¨‹åºä¸­é—´ä»¶çš„æƒ…æ™¯å¦‚ä¸‹ï¼š- åå¤„ç†çˆ¬è™«ç¨‹åºå›è°ƒçš„è¾“å‡º - æ›´æ”¹/æ·»åŠ /åˆ é™¤è¯·æ±‚æˆ–itemï¼›- åå¤„ç†å¯åŠ¨è¯·æ±‚ï¼›- å¤„ç†çˆ¬è™«ç¨‹åºå¼‚å¸¸ï¼›- å¯¹äºä¸€äº›åŸºäºå“åº”å†…å®¹çš„è¯·æ±‚ï¼Œè°ƒç”¨errbackè€Œä¸æ˜¯callbackã€‚ ","date":"2022-04-09","objectID":"/scrapy/:1:1","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#scrapyç»“æ„ç»„æˆ"},{"categories":["tutorial"],"content":" Scrapyå·¥ä½œæ•°æ®æµ ç®€ç•¥æ¡†æ¶ è¯¦ç»†æ¡†æ¶ Scrapy çš„æ•°æ®æµç”±æ‰§è¡Œå¼•æ“è¿›è¡Œæ§åˆ¶ï¼Œè¿›è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼ˆæ­¥éª¤åºå·å¯¹åº”ä¸Šå›¾ï¼‰ï¼š æµç¨‹å¼€å§‹ï¼Œå¼•æ“ä»çˆ¬è™«ç¨‹åºå¾—åˆ°åˆå§‹çš„çˆ¬å–è¯·æ±‚ã€‚ å¼•æ“å°†Requestsæ”¾å…¥è°ƒåº¦å™¨å¹¶è¯·æ±‚è¿›è¡Œä¸‹ä¸€ä¸ªçˆ¬å–çš„Requestsã€‚ è°ƒåº¦å™¨è¿”å›ä¸‹ä¸€ä¸ªRequestsç»™å¼•æ“ã€‚ å¼•æ“å°†å¾—åˆ°çš„Requestså‘é€ç»™ä¸‹è½½å™¨ï¼Œé€”å¾„ä¸‹è½½å™¨ä¸­é—´ä»¶ã€‚ åœ¨ç½‘é¡µå®Œæˆä¸‹è½½çš„åŒæ—¶ï¼Œç”Ÿæˆé¡µé¢çš„å“åº”å¹¶å°†å®ƒå‘é€ç»™å¼•æ“ï¼Œé€”å¾„ä¸‹è½½å™¨ä¸­é—´ä»¶ã€‚ å¼•æ“æ”¶åˆ°æ¥è‡ªä¸‹è½½å™¨çš„å“åº”å¹¶å°†å…¶å‘é€ç»™çˆ¬è™«ç¨‹åºå¤„ç†ï¼Œé€”å¾„çˆ¬è™«ç¨‹åºä¸­é—´ä»¶ã€‚ çˆ¬è™«ç¨‹åºå¤„ç†å¾—åˆ°çš„å“åº”å¹¶å°†æŠ“å–çš„itemså’Œæ–°çš„Requestsè¿”å›ç»™å¼•æ“ï¼Œé€”å¾„çˆ¬è™«ä¸­é—´ä»¶ã€‚ å¼•æ“å‘é€å¤„ç†å¥½çš„itemså‘é€ç»™Item Piplinesï¼Œå¹¶å°†å‘é€å¤„ç†å¥½çš„Requestsç»™è°ƒåº¦å™¨å¹¶è¯·æ±‚ä¸‹ä¸€ä¸ªçˆ¬å–çš„Requestsã€‚ é‡å¤æ­¥éª¤3ç›´åˆ°è°ƒåº¦å™¨é‡Œæ²¡æœ‰æ›´å¤šçš„Requestsï¼Œæµç¨‹ç»“æŸã€‚ ","date":"2022-04-09","objectID":"/scrapy/:1:2","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#scrapyå·¥ä½œæ•°æ®æµ"},{"categories":["tutorial"],"content":" Scrapy å®‰è£…","date":"2022-04-09","objectID":"/scrapy/:2:0","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#scrapy-å®‰è£…"},{"categories":["tutorial"],"content":" æ–‡æ¡£å®˜æ–¹æ–‡æ¡£ï¼šhttps://docs.scrapy.org/en/latest ä¸­æ–‡ç»´æŠ¤ï¼šhttp://scrapy-chs.readthedocs.io/zh_CN/latest/index.html ","date":"2022-04-09","objectID":"/scrapy/:2:1","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#æ–‡æ¡£"},{"categories":["tutorial"],"content":" ç¯å¢ƒä»‹ç»Ubuntu 21.10, Python3.10.3ï¼Œpyenv ","date":"2022-04-09","objectID":"/scrapy/:2:2","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#ç¯å¢ƒä»‹ç»"},{"categories":["tutorial"],"content":" å®‰è£…æµç¨‹pip æ›´æ–° python -m pip install --upgrade pip å®‰è£…scrapy pip install scrapy ","date":"2022-04-09","objectID":"/scrapy/:2:3","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#å®‰è£…æµç¨‹"},{"categories":["tutorial"],"content":" ScrapyåŸºæœ¬ä½¿ç”¨æœ¬æ¬¡å®è·µçš„æ˜¯æˆ¿å¤©ä¸‹ç½‘ç«™ï¼Œä»…ç”¨äºå­¦ä¹ äº¤æµï¼Œä¸ä½œä»»ä½•å•†ä¸šç”¨é€”ï¼Œæ¯”å¦‚å°±ä»¥äºŒæ‰‹æˆ¿ä¸ºä¾‹ã€‚ st=\u003estart: å¼€å§‹ op1=\u003eoperation: è¿›å…¥åŸå¸‚åˆ—è¡¨é¡µï¼Œè·å–æ¯ä¸ªåŸå¸‚æˆ¿æºçš„è¿›å…¥é“¾æ¥ op2=\u003eoperation: è¿›å…¥æ¯ä¸ªåŸå¸‚å¯¹åº”çš„äºŒæ‰‹æˆ¿æºåˆ—è¡¨é¡µé¢ã€‚ op3=\u003eoperation: è¿›å…¥åˆ—è¡¨é¡µæ¯ä¸ªäºŒæ‰‹æˆ¿çš„è¯¦æƒ…é¡µã€‚ e=\u003eend: ç»“æŸ st-\u003eop1-\u003eop2-\u003eop3-\u003ee ","date":"2022-04-09","objectID":"/scrapy/:3:0","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#scrapyåŸºæœ¬ä½¿ç”¨"},{"categories":["tutorial"],"content":" åˆ›å»ºscrapyé¡¹ç›® cd ~ scrapy startproject scrapy_fang ","date":"2022-04-09","objectID":"/scrapy/:3:1","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#åˆ›å»ºscrapyé¡¹ç›®"},{"categories":["tutorial"],"content":" åˆ›å»ºçˆ¬è™«ï¼Œæ³¨æ„çˆ¬è™«åå­—ä¸è¦å’Œé¡¹ç›®åŸŸåç›¸åŒ cd scrapy_fang scrapy genspider esf esf.fang.com ","date":"2022-04-09","objectID":"/scrapy/:3:2","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#åˆ›å»ºçˆ¬è™«æ³¨æ„çˆ¬è™«åå­—ä¸è¦å’Œé¡¹ç›®åŸŸåç›¸åŒ"},{"categories":["tutorial"],"content":" åŸºæœ¬ä½¿ç”¨å‘½ä»¤è¡Œè¾“å…¥scrapyè¿›è¡ŒæŸ¥çœ‹ scrapy Scrapy 2.6.1 - project: scrapy_fang Usage: scrapy [options] [args] Available commands: bench Run quick benchmark test check Check spider contracts commands crawl Run a spider edit Edit spider fetch Fetch a URL using the Scrapy downloader genspider Generate new spider using pre-defined templates list List available spiders parse Parse URL (using its spider) and print the results runspider Run a self-contained spider (without creating a project) settings Get settings values shell Interactive scraping console startproject Create new project version Print Scrapy version view Open URL in browser, as seen by Scrapy Use â€œscrapy -hâ€ to see more info about a command ","date":"2022-04-09","objectID":"/scrapy/:3:3","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#åŸºæœ¬ä½¿ç”¨"},{"categories":["tutorial"],"content":" æ¨¡æ‹Ÿæµè§ˆå™¨è®¿é—®è®¾ç½®è¯·æ±‚å¤´(æ¨¡æ‹Ÿæµè§ˆå™¨è®¿é—®)ï¼Œåœ¨settings.pyä¸‹æ·»åŠ ï¼Œå¯ä»¥æ›´æ¢ï¼Œéšä¾¿æ‰“å¼€ä¸€ä¸ªç½‘é¡µï¼ŒF12æŸ¥çœ‹networkï¼Œç„¶åæ‰¾ä¸€ä¸‹User-Agentå†…å®¹ã€‚ USER_AGENT = 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36' æˆ–è€…åœ¨ä¸‹è½½å™¨ä¸­é—´ä»¶å†™å…¥å¦‚ä¸‹ç±»ï¼Œéšæœºè¯·æ±‚å¤´ class UserAgentDownloadMiddleware(object): def __int__(self): self.User_Agents = [ 'Mozilla/5.0 (X11; Linux i686; rv:64.0) Gecko/20100101 Firefox/64.0', 'Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.13; ko; rv:1.9.1b2) Gecko/2008' '1201 Firefox/60.0', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko)' ' Chrome/70.0.3538.77 Safari/537.36', 'Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.36 (KHTML like Gecko) Chrome' '/44.0.2403.155 Safari/537.36', ] def process_request(self, request, spider): USER_AGENT = random.choice(self.User_Agents) request.headers['User-Agent'] = USER_AGENT **==ä¸è¦å¿˜è®°==**åœ¨settings.pyé‡Œå¤´æŒ‡å®šè¯¥ç±»ä¸ºä¸‹è½½å™¨ä¸­é—´ä»¶ï¼Œå¦åˆ™æ— æ•ˆï¼Œæ•°å­—543ç­‰æŒ‡å®šä¼˜å…ˆçº§ï¼Œè¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ã€‚ DOWNLOADER_MIDDLEWARES = { 'scrapy_fang.middlewares.UserAgentDownloadMiddleware': 543, } ","date":"2022-04-09","objectID":"/scrapy/:3:4","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#æ¨¡æ‹Ÿæµè§ˆå™¨è®¿é—®"},{"categories":["tutorial"],"content":" è¯·æ±‚å’Œä¸‹è½½è®¾å®šåœ¨settings.pyä¸­å†™å…¥å¦‚ä¸‹ # é™åˆ¶å¹¶å‘Requestsæ•°é‡ï¼Œé»˜è®¤æ˜¯16 CONCURRENT_REQUESTS = 32 # å»¶æ—¶æœ€ä½ä¸º2s DOWNLOAD_DELAY = 1 # å¯åŠ¨[è‡ªåŠ¨é™é€Ÿ] AUTOTHROTTLE_ENABLED = True # å¼€å¯[è‡ªåŠ¨é™é€Ÿ]çš„debug AUTOTHROTTLE_DEBUG = True # è®¾ç½®æœ€å¤§ä¸‹è½½å»¶æ—¶ AUTOTHROTTLE_MAX_DELAY = 10 # è®¾ç½®ä¸‹è½½è¶…æ—¶ DOWNLOAD_TIMEOUT = 15 # é™åˆ¶å¯¹è¯¥ç½‘ç«™çš„å¹¶å‘è¯·æ±‚æ•° CONCURRENT_REQUESTS_PER_DOMAIN = 4 ","date":"2022-04-09","objectID":"/scrapy/:3:5","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#è¯·æ±‚å’Œä¸‹è½½è®¾å®š"},{"categories":["tutorial"],"content":" äºŒæ‰‹æˆ¿é“¾æ¥è·å–çˆ¬è™«","date":"2022-04-09","objectID":"/scrapy/:4:0","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#äºŒæ‰‹æˆ¿é“¾æ¥è·å–çˆ¬è™«"},{"categories":["tutorial"],"content":" è¿›å…¥é“¾æ¥å…¥å£é¡µé¢https://www.fang.com/SoufunFamily.htm ï¼Œæµ‹è¯•æ’ä»¶æ˜¯xpath helper æ­£ç¡®å®šä½åˆ°å„åŸå¸‚å…¥å£é¡µé¢ //*[@id='senfe']//tr æµ‹è¯•ç¨‹åºé‡Œçš„xpathè·¯å¾„æ˜¯å¦èƒ½æŠ“åˆ°ä¸œè¥¿ã€‚ scrapy shell http://www.fang.com/SoufunFamily.htm [s] Available Scrapy objects: [s] scrapy scrapy module (contains scrapy.Request, scrapy.Selector, etc) [s] crawler \u003cscrapy.crawler.Crawler object at 0x7f34bb89eaa0\u003e [s] item {} [s] request \u003cGET http://www.fang.com/SoufunFamily.htm\u003e [s] response \u003c200 https://www.fang.com/SoufunFamily.htm\u003e [s] settings \u003cscrapy.settings.Settings object at 0x7f34bb89f3a0\u003e [s] spider \u003cDefaultSpider â€˜defaultâ€™ at 0x7f34bb2bc760\u003e [s] Useful shortcuts: [s] fetch(url[, redirect=True]) Fetch URL and update local objects (by default, redirects are followed) [s] fetch(req) Fetch a scrapy.Request and update local objects [s] shelp() Shell help (print this help) [s] view(response) View response in a browser \u003e\u003e\u003eresponse.xpath(\"//*[@id='senfe']//tr\") [, , , â€¦â€¦ æŠ“å–æˆåŠŸï¼Œæƒ³è¦æŠ“å–htmlé‡Œçš„å…¶ä»–å†…å®¹ä¹Ÿå¯ä»¥è¿›è¡Œç±»ä¼¼çš„æ“ä½œï¼Œæ­¤å¤„ä¸ä¸€ä¸€åˆ—ä¸¾ã€‚ æ³¨æ„xpathè¿”å›çš„æ˜¯xpathå¯¹è±¡ç»„æˆçš„åˆ—è¡¨ï¼Œè€Œä¸æ˜¯å•çº¯çš„ç½‘é¡µæºç æ–‡æœ¬ï¼Œè¦æƒ³è·å¾—å†…å®¹éœ€è¦.extrract() \u003e\u003e\u003eresponse.xpath(\"//*[@id='senfe']//tr\").extract() [â€™\\r\\n\\t\\t\\t\\t\\xa0\\r\\n\\t\\t\\t\\tç›´è¾–å¸‚\\r\\n\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\tåŒ—äº¬ \\r\\n\\t\\t\\t\\t\\tä¸Šæµ· \\r\\n\\t\\t\\tå¤©æ´¥ \\r\\n\\t\\t\\t\\t\\té‡åº†\\r\\n\\t\\t\\t\\t\\r\\n\\t\\t\\tâ€™,â€¦â€¦ è¿™æ ·å°±å¾—åˆ°äº†æŠ“å–çš„ç½‘é¡µhtmlæºç ï¼Œæ¯ä¸ªtræ ‡ç­¾æ˜¯ä¸€ä¸ªåˆ—è¡¨é¡¹~ ","date":"2022-04-09","objectID":"/scrapy/:4:1","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#è¿›å…¥é“¾æ¥å…¥å£é¡µé¢"},{"categories":["tutorial"],"content":" ç¼–å†™items.py æŠ“å–åŸå¸‚å…¥å£é“¾æ¥æ•°æ®ç±»ç°åœ¨ï¼Œæ˜ç¡®æˆ‘ä»¬è¦ä»è¿™ä¸ªé¡µé¢è·å¾—ä»€ä¹ˆæ•°æ®ï¼Œæ˜¾ç„¶ï¼Œæˆ‘ä»¬éœ€è¦è·å–ï¼Œçœä»½ï¼ŒåŸå¸‚ï¼Œä»¥åŠè¯¥åŸå¸‚äºŒæ‰‹æˆ¿é¡µé¢è¿›å…¥çš„é“¾æ¥ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç¼–å†™itemç±»ï¼Œç”¨æ¥æš‚æ—¶å­˜æ”¾æˆ‘ä»¬æ¯ä¸ªå…ƒæ•°æ®çš„æ•°æ®å­—å…¸ï¼Œscrapyç»™æˆ‘ä»¬å®šä¹‰å¥½äº†ä¸€ä¸ªItemç±»ï¼Œå¯ä»¥ç”¨æ¥åˆ›å»ºç±»å­—å…¸çš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥å½“å­—å…¸ç”¨ï¼Œåç»­çœ‹ã€‚ class UrlItem(scrapy.Item): # çœä»½ province = scrapy.Field() # åŸå¸‚ city = scrapy.Field() # äºŒæ‰‹æˆ¿é“¾æ¥ esfhouse_url = scrapy.Field() ","date":"2022-04-09","objectID":"/scrapy/:4:2","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#ç¼–å†™itemspy"},{"categories":["tutorial"],"content":" ç¼–å†™items.py æŠ“å–åŸå¸‚å…¥å£é“¾æ¥æ•°æ®ç±»ç°åœ¨ï¼Œæ˜ç¡®æˆ‘ä»¬è¦ä»è¿™ä¸ªé¡µé¢è·å¾—ä»€ä¹ˆæ•°æ®ï¼Œæ˜¾ç„¶ï¼Œæˆ‘ä»¬éœ€è¦è·å–ï¼Œçœä»½ï¼ŒåŸå¸‚ï¼Œä»¥åŠè¯¥åŸå¸‚äºŒæ‰‹æˆ¿é¡µé¢è¿›å…¥çš„é“¾æ¥ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç¼–å†™itemç±»ï¼Œç”¨æ¥æš‚æ—¶å­˜æ”¾æˆ‘ä»¬æ¯ä¸ªå…ƒæ•°æ®çš„æ•°æ®å­—å…¸ï¼Œscrapyç»™æˆ‘ä»¬å®šä¹‰å¥½äº†ä¸€ä¸ªItemç±»ï¼Œå¯ä»¥ç”¨æ¥åˆ›å»ºç±»å­—å…¸çš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥å½“å­—å…¸ç”¨ï¼Œåç»­çœ‹ã€‚ class UrlItem(scrapy.Item): # çœä»½ province = scrapy.Field() # åŸå¸‚ city = scrapy.Field() # äºŒæ‰‹æˆ¿é“¾æ¥ esfhouse_url = scrapy.Field() ","date":"2022-04-09","objectID":"/scrapy/:4:2","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#æŠ“å–åŸå¸‚å…¥å£é“¾æ¥æ•°æ®ç±»"},{"categories":["tutorial"],"content":" å»ºç«‹å¹¶ç¼–å†™spidersç›®å½•ä¸‹çš„esf.pyä¸»è¦å±æ€§å’Œæ–¹æ³• name å®šä¹‰sipderåå­—çš„å­—ç¬¦ä¸²ï¼Œå¿…é¡»ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœspiderçˆ¬å–qq.comï¼Œè¯¥spiderçš„nameé€šå¸¸å®šä¹‰ä¸ºqq allowed_domains åŒ…å«äº†spiderå…è®¸çˆ¬å–çš„åŸŸååˆ—è¡¨ï¼Œå¯é€‰ã€‚ start_urls åˆå§‹URLåˆ—è¡¨ã€‚å½“æ²¡æœ‰åˆ¶å®šç‰¹å®šçš„URLæ—¶ï¼Œspiderå°†ä»è¯¥åˆ—è¡¨ä¸­è¿›è¡Œçˆ¬å–ï¼Œå¿…é€‰ã€‚ start_requests(self) è¯¥æ–¹æ³•å¿…é¡»è¿”å›ä¸€ä¸ªå¯è¿­ä»£ï¼ˆiterableï¼‰å¯¹è±¡ã€‚è¯¥å¯¹è±¡åŒ…å«äº†spiderç”¨äºçˆ¬å–ï¼ˆé»˜è®¤å®ç°æ˜¯ä½¿ç”¨start_urlsçš„urlï¼‰çš„ç¬¬ä¸€ä¸ªRequestã€‚ å½“spiderå¯åŠ¨çˆ¬å–å¹¶ä¸”æœªæŒ‡å®šstart_urlsï¼Œè¯¥æ–¹æ³•å°†è¢«è°ƒç”¨ã€‚ parse(self, response) å½“è¯·æ±‚urlè¿”å›ç½‘é¡µæ²¡æœ‰æŒ‡å®šå›è°ƒå‡½æ•°æ—¶ï¼Œé»˜è®¤çš„Requestså¯¹è±¡å›è°ƒå‡½æ•°æ˜¯parseã€‚ç”¨æ¥å¤„ç†ç½‘é¡µè¿”å›çš„responseï¼Œä»¥åŠç”Ÿæˆitemå’ŒRequestså¯¹è±¡ã€‚ log(self, message[, level, component]) ä½¿ç”¨scrapy.log.msg()æ–¹æ³•è®°å½•(log)messageã€‚ class EsfSpider(scrapy.Spider): # åˆ«åï¼Œåç»­ç”¨æ¥å…¶å¯åŠ¨çˆ¬è™« name = 'esf' # å…è®¸çˆ¬å–çš„é¡µé¢ allowed_domains = ['fang.com'] # å¯åŠ¨çˆ¬å–çš„é¡µé¢ start_urls = ['http://www.fang.com/SoufunFamily.htm'] # Scrapyæ¡†æ¶é»˜è®¤è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚response.bodyæ˜¯htmlæºç  def parse(self, response): item = UrlItem() # è·å–æ•°æ®çš„æ¯ä¸€è¡Œtrï¼Œå¯èƒ½ä¸€è¡Œçˆ²ä¸€å€‹çœä»½ï¼Œä¹Ÿå¯èƒ½å¤šè¡Œçˆ²ä¸€å€‹çœä»½ trs = response.xpath(\"//*[@id='senfe']//tr\") # print(trs) city_lis = [] for tr in trs: # è·å–çœä»½çš„td tds = tr.xpath(\".//td[not(@class)]\") # \"not(@class)\" ï¼šæ²¡æœ‰ä¸ºclassèµ‹å€¼çš„è¢«é€‰å– province_td = tds[0] # #è·å–çœä»½çš„å€¼ province_text = province_td.xpath(\".//text()\").get() # #ç»™çœä»½å»æ‰ å¤šä½™ç©ºæ ¼ province_text = re.sub(r'\\s', '', province_text) # åˆ¤æ–­çœä»½æ˜¯å¦ä¸ºç©ºçš„ if province_text: # å°†ä¸ä¸ºç©ºçš„çœä»½èµ‹å€¼ç»™province province = province_text # é™¤å»å›½å¤–çš„é“¾æ¥ if province == 'å…¶å®ƒ': break # é™¤å»ç›´è¾–å¸‚ä¸­çš„é‡åº†å’Œå¤©æ´¥ï¼Œå› ä¸ºåœ¨æ–‡ä¸­æœ‰å†™åˆ° if province == 'é‡åº†' or province == 'å¤©æ´¥': continue item['province'] = province # è·å–åŸå¸‚çš„td city_td = tds[1] # è·å–åˆ°åŸå¸‚çš„aå…ƒç´  city_links = city_td.xpath(\".//a\") for city_link in city_links: # åŸå¸‚ city = city_link.xpath(\".//text()\").get() # getæ–¹æ³•ç›¸å½“äºå–åˆ—è¡¨ç¬¬0ä¸ªå…ƒç´ .extract() item['city'] = city # åŸå¸‚çš„é“¾æ¥ city_url = city_link.xpath(\".//@href\").get() # ä»¥ç‚¹åˆ†å‰²åŸå¸‚çš„é“¾æ¥ city_url_list = city_url.split('.') # æ‹¼æ¥åŸå¸‚äºŒæ‰‹æˆ¿é“¾æ¥ esfhouse_url = city_url_list[0] + '.esf.' + city_url_list[1] + '.' + city_url_list[2] item['esfhouse_url'] = esfhouse_url # è¿™é‡Œdictæ¯”è¾ƒå…³é”®ï¼Œå› ä¸ºæˆ‘ä»¬åªåˆå§‹åŒ–äº†ä¸€æ¬¡item = UrlItem()ï¼Œå¯¹pythonåº•å±‚å®ç°ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œä½†å¦‚æœä¸è½¬åŒ–ä¼šé‡å¤appendç›¸åŒitemå¯¹è±¡ã€‚ city_lis.append(dict(item)) return city_lis æ‰€ä»¥è¿™é‡Œreturnç»™è°äº†å‘¢ï¼Ÿä¸Scrapyæ¡†æ¶å›¾å¯¹åº”èµ·æ¥ï¼Œreturnç»™äº†å¼•æ“ï¼Œå¯¹åº”ç¬¬7æ­¥ï¼Œå°è¯•åœ¨æ­¤ç›´æ¥è¾“å‡ºåˆ°æ–‡ä»¶è€Œ**==ä¸ç»è¿‡pipline==**ã€‚ ","date":"2022-04-09","objectID":"/scrapy/:4:3","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#å»ºç«‹å¹¶ç¼–å†™spidersç›®å½•ä¸‹çš„esfpy"},{"categories":["tutorial"],"content":" ç®€å•çˆ¬è™«çš„æŒä¹…åŒ–å­˜å‚¨ scrapy crawl esf -o esf_url.json æ‰“å¼€esf_url.jsonæŸ¥çœ‹å¦‚ä¸‹ï¼Œjsonåç¼€é»˜è®¤ä¸­æ–‡ä¸ºUnicodeç¼–ç æ ¼å¼ï¼Œcsvå’Œxmlé»˜è®¤ä¸ºutf-8ç¼–ç æ ¼å¼ [ {\"province\": \"\\u5b89\\u5fbd\", \"city\": \"\\u5408\\u80a5\", \"esfhouse_url\": \"http://hf.esf.fang.com/\"}, {\"province\": \"\\u5b89\\u5fbd\", \"city\": \"\\u829c\\u6e56\", \"esfhouse_url\": \"http://wuhu.esf.fang.com/\"}, {\"province\": \"\\u5b89\\u5fbd\", \"city\": \"\\u6dee\\u5357\", \"esfhouse_url\": \"http://huainan.esf.fang.com/\"}, {\"province\": \"\\u5b89\\u5fbd\", \"city\": \"\\u868c\\u57e0\", \"esfhouse_url\": \"http://bengbu.esf.fang.com/\"}, {\"province\": \"\\u5b89\\u5fbd\", \"city\": \"\\u961c\\u9633\", \"esfhouse_url\": \"http://fuyang.esf.fang.com/\"}, â€¦â€¦ ] scrapy crawl esf -o esf_url.csv city,esfhouse_url,province åŒ—äº¬,http://bj.esf.fang.com/,ç›´è¾–å¸‚ ä¸Šæµ·,http://sh.esf.fang.com/,ç›´è¾–å¸‚ â€¦â€¦ scrapy crawl esf -o esf_url.xml \u003c?xml version=\"1.0\" encoding=\"utf-8\"?\u003e \u003citems\u003e \u003citem\u003e\u003cprovince\u003eç›´è¾–å¸‚\u003c/province\u003e\u003ccity\u003eåŒ—äº¬\u003c/city\u003e\u003cesfhouse_url\u003ehttp://bj.esf.fang.com/\u003c/esfhouse_url\u003e\u003c/item\u003e \u003citem\u003e\u003cprovince\u003eç›´è¾–å¸‚\u003c/province\u003e\u003ccity\u003eä¸Šæµ·\u003c/city\u003e\u003cesfhouse_url\u003ehttp://sh.esf.fang.com/\u003c/esfhouse_url\u003e\u003c/item\u003e â€¦â€¦ è€è€å®å®å­˜ä¸‹æ¥äº†ï¼Œåœ¨æ­¤å…¶å®ä¸€ä¸ªç®€å•çš„çˆ¬è™«å°±å†™å¥½äº†ï¼Œå¦‚æœä½ åªæ˜¯è¦è¿™ä¸ªé¡µé¢ä¸Šçš„é“¾æ¥çš„è¯ï¼Œå·²ç»å®Œæˆäº†ï¼Œç„¶è€Œè¿™ç§å†™æ³•éš¾ä»¥è¿›è¡Œå†™å…¥æ•°æ®åº“ç­‰å­˜å‚¨æ“ä½œï¼Œåç»­å°±è¦ç”¨åˆ°Piplineæœºåˆ¶äº†ã€‚ ","date":"2022-04-09","objectID":"/scrapy/:4:4","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#ç®€å•çˆ¬è™«çš„æŒä¹…åŒ–å­˜å‚¨"},{"categories":["tutorial"],"content":" ä½¿ç”¨Scrapyçš„Piplineæœºåˆ¶è¿›è¡ŒæŒä¹…åŒ–å­˜å‚¨ã€‚æˆ‘ä»¬è¿™é‡Œå°è¯•ä½¿ç”¨yieldæ–¹æ³•è¿”å›itemï¼Œæ”¹å†™çˆ¬è™«ç±»ä¸­çš„parseæ–¹æ³•å¦‚ä¸‹ã€‚ï¼ˆyieldæ–¹æ³•çš„ä½¿ç”¨ä¸returnæ˜¾å¼åŒºåˆ«æ˜¯yieldä¸ä¼šç»ˆæ­¢æœ¬ç¨‹åºè¿è¡Œï¼Œå¦‚æœå‡½æ•°é‡Œæœ‰yieldï¼Œä¸”å®ƒåœ¨å¾ªç¯é‡Œï¼Œä¸‹æ¬¡è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œä¼šç›´æ¥ä»å¾ªç¯çš„ä¸‹ä¸€æ¬¡å¼€å§‹ï¼Œè€Œä¸æ˜¯åƒreturnä¸€æ ·ä»å‡½æ•°ä»å¤´åˆ°å°¾æ‰§è¡Œã€‚æ›´ä¸ºè¯¦ç»†çš„åŒºåˆ«å‚è€ƒCSDNä¸Šçš„è¿™ç¯‡åšå®¢ï¼‰ def parse(self, response): item = UrlItem() # è·å–æ•°æ®çš„æ¯ä¸€è¡Œtrï¼Œå¯èƒ½ä¸€è¡Œçˆ²ä¸€å€‹çœä»½ï¼Œä¹Ÿå¯èƒ½å¤šè¡Œçˆ²ä¸€å€‹çœä»½ trs = response.xpath(\"//*[@id='senfe']//tr\") # print(trs) for tr in trs: # è·å–çœä»½çš„td tds = tr.xpath(\".//td[not(@class)]\") # \"not(@class)\" ï¼šæ²¡æœ‰ä¸ºclassèµ‹å€¼çš„è¢«é€‰å– province_td = tds[0] # #è·å–çœä»½çš„å€¼ province_text = province_td.xpath(\".//text()\").get() # #ç»™çœä»½å»æ‰ å¤šä½™ç©ºæ ¼ province_text = re.sub(r'\\s', '', province_text) # åˆ¤æ–­çœä»½æ˜¯å¦ä¸ºç©ºçš„ if province_text: # å°†ä¸ä¸ºç©ºçš„çœä»½èµ‹å€¼ç»™province province = province_text # é™¤å»å›½å¤–çš„é“¾æ¥ if province == 'å…¶å®ƒ': break # é™¤å»ç›´è¾–å¸‚ä¸­çš„é‡åº†å’Œå¤©æ´¥ï¼Œå› ä¸ºåœ¨æ–‡ä¸­æœ‰å†™åˆ° if province == 'é‡åº†' or province == 'å¤©æ´¥': continue item['province'] = province # è·å–åŸå¸‚çš„td city_td = tds[1] # è·å–åˆ°åŸå¸‚çš„aå…ƒç´  city_links = city_td.xpath(\".//a\") for city_link in city_links: # åŸå¸‚ city = city_link.xpath(\".//text()\").get() # getæ–¹æ³•ç›¸å½“äºå–åˆ—è¡¨ç¬¬0ä¸ªå…ƒç´ .extract() item['city'] = city # åŸå¸‚çš„é“¾æ¥ city_url = city_link.xpath(\".//@href\").get() # ä»¥ç‚¹åˆ†å‰²åŸå¸‚çš„é“¾æ¥ city_url_list = city_url.split('.') # æ‹¼æ¥åŸå¸‚äºŒæ‰‹æˆ¿é“¾æ¥ esfhouse_url = city_url_list[0] + '.esf.' + city_url_list[1] + '.' + city_url_list[2] item['esfhouse_url'] = esfhouse_url # è¿”å›æå–åˆ°çš„æ¯ä¸ªitemç»™piplineï¼Œå¤„ç†å®Œæˆä¹‹åç»§ç»­æ‰§è¡Œåé¢ä»£ç ï¼ˆä¸‹ä¸€ä¸ªå¾ªç¯ï¼‰ yield item å†™piplineç±»ï¼Œå‘piplines.pyé‡Œå†™å…¥å¦‚ä¸‹å†…å®¹ from scrapy.exporters import CsvItemExporter class ScrapyFangPipeline(object): url_fp = open('esf_url.csv', 'wb') url_exporter = CsvItemExporter(url_fp) def process_item(self, item, spider): self.url_exporter.export_item(item) # è¿”å›itemå¯¹è±¡æ˜¯å¿…é¡»çš„ï¼Œå‘Šè¯‰å¼•æ“itemå·²ç»å¤„ç†å®Œæˆäº†ï¼Œå¯ä»¥ç»§ç»­æ‰§è¡Œåé¢ä»£ç ã€‚ return item def close_spider(self, spider): self.url_fp.close() å¯ç”¨piplineï¼Œåœ¨settings.pyä¸­å†™å…¥å¦‚ä¸‹ï¼Œ300ä¸ºä¼˜å…ˆçº§ï¼Œå¤šä¸ªç®¡é“ç¨‹åº(æ‰§è¡Œç±»ä¸­çš„process_itemæ–¹æ³•)æŒ‰ç…§ä¼˜å…ˆçº§ä¾æ¬¡è¿›è¡Œ ITEM_PIPELINES = { 'scrapy_fang.pipelines.ScrapyFangPipeline': 300, } scrapy crawl esf æŸ¥çœ‹ç”Ÿæˆçš„esf_url.csvå¦‚ä¸‹ city,esfhouse_url,province åŒ—äº¬,http://bj.esf.fang.com/,ç›´è¾–å¸‚ ä¸Šæµ·,http://sh.esf.fang.com/,ç›´è¾–å¸‚ å¤©æ´¥,http://tj.esf.fang.com/,ç›´è¾–å¸‚ é‡åº†,http://cq.esf.fang.com/,ç›´è¾–å¸‚ ","date":"2022-04-09","objectID":"/scrapy/:4:5","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#ä½¿ç”¨scrapyçš„piplineæœºåˆ¶è¿›è¡ŒæŒä¹…åŒ–å­˜å‚¨"},{"categories":["tutorial"],"content":" è‡³æ­¤å®ŒæˆåŸºæœ¬çš„Scrapyé¡¹ç›®åŸºæœ¬Scrapyæ¡†æ¶å®ç°å®Œæˆäº†å•ä¸ªé¡µé¢ä¸Šçš„æ•°æ®çˆ¬å–ï¼Œçœä»½ï¼ŒåŸå¸‚ï¼Œé“¾æ¥â€¦â€¦ ","date":"2022-04-09","objectID":"/scrapy/:4:6","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#è‡³æ­¤å®ŒæˆåŸºæœ¬çš„scrapyé¡¹ç›®"},{"categories":["tutorial"],"content":" ç‰¹å®šåŸå¸‚äºŒæ‰‹æˆ¿æ¦‚è¦ä¿¡æ¯çˆ¬è™«æˆ‘ä»¬åœ¨æœ¬æ¬¡å°è¯•ç›´æ¥æ‹¼æ¥é¡µç å¾—åˆ°urlï¼Œè§‚å¯Ÿå¾—åˆ°ï¼ŒåŒ—äº¬äºŒæ‰‹æˆ¿é¦–é¡µURLä¸ºhttp://bj.esf.fang.com/ï¼Œä¹Ÿå¯ä»¥åœ¨é¡µç ä¸­å†™ä¸ºhttps://bj.esf.fang.com/house/i31/ï¼Œç¬¬äºŒé¡µå°±æ˜¯https://bj.esf.fang.com/house/i32/ï¼Œä¾æ¬¡ç±»æ¨â€¦â€¦ åœ¨shellé‡Œé¢å°è¯•èƒ½å¦æŠ“åˆ°æ•°æ® scrapy shell https://bj.esf.fang.com/house/i31/ \u003e\u003e\u003eresponse.xpath(\"//dl[@dataflag='bg']\") [] æŠ“å–å¤±è´¥ï¼ˆè¿”å›ç©ºï¼‰ï¼Œåé¢åˆ†ææ˜¯URLé‡å®šå‘çš„åŸå› ï¼Œç½‘ç«™åšäº†é˜²æŠ¤ï¼Œè®©ç½‘é¡µé‡å®šå‘å»å¾€äº†å¦ä¸€ä¸ªURLã€‚åŒæ—¶ï¼Œæµ‹è¯•å‘ç°http://bj.esf.fang.com/ä¸ä¼šè¿›è¡Œé‡å®šå‘æ“ä½œï¼Œè€Œæƒ³è¦è®¿é—®è¿­ä»£çš„ç½‘å€https://bj.esf.fang.com/house/i31/ï¼Œ32ï¼Œ33ç­‰å´ä¼šè¿›è¡Œé‡å®šå‘ã€‚ ","date":"2022-04-09","objectID":"/scrapy/:5:0","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#ç‰¹å®šåŸå¸‚äºŒæ‰‹æˆ¿æ¦‚è¦ä¿¡æ¯çˆ¬è™«"},{"categories":["tutorial"],"content":" çŸ›ä¸ç›¾â€”â€”é‡å®šå‘åˆ†æè¿”å›çš„response \u003ca class=\"btn-redir\" style=\"font-size: 14pt;\" href=\"https://bj.esf.fang.com/house/i31/?rfss=1-a9078821a1b90b2a70-34\"\u003e\\xe7\\x82\\xb9\\xe5\\x87\\xbb\\xe8\\xb7\\xb3\\xe8\\xbd\\xac\u003c/a\u003e\\r\\n\u003c/div\u003e\\r\\n\u003c/div\u003e\\r\\n\u003cscript\u003e\\r\\n(function(){\\r\\n var secs=100,si=setInterval(function(){\\r\\n if(!--secs){\\r\\n //location.href=\"https://bj.esf.fang.com/house/i31/?rfss=1-a9078821a1b90b2a70-34\";\\r\\n clearInterval(si);\\r\\n }else{\\r\\n jQuery(\\'.second\\').text(secs);\\r\\n }\\r\\n }, 100)})();\\r\\n\u003c/script\u003e\\r\\n\u003c/div\u003e\\r\\n\u003c/div\u003e\\r\\n\\r\\n\u003cscript\u003e\\r\\n/* $(\".guan-intro\").mouseover(function(){\\r\\n\\t$(this).parents(\".guan-wrap\").siblings().show();\\r\\n}).mouseleave(function(){\\r\\n\\t$(this).parents(\".guan-wrap\").siblings().hide();\\r\\n}); */\\r\\n\\r\\nfunction showDiv(size,obj){\\r\\n\\tif(size\u003e32){\\r\\n\\t\\t$(obj).parents(\".guan-wrap\").siblings().show();\\r\\n\\t}\\r\\n}\\r\\nfunction hideDiv(size,obj){\\r\\n\\tif(size\u003e32){\\r\\n\\t\\t$(obj).parents(\".guan-wrap\").siblings().hide();\\r\\n\\t}\\r\\n}\\r\\n\u003c/script\u003e\\r\\n\u003c/body\u003e\\r\\n\u003c/html\u003e' å¯ä»¥çœ‹åˆ°ï¼Œè®¿é—®https://bj.esf.fang.com/house/i31/æ—¶ç½‘é¡µé‡å®šå‘å»äº†\"https://bj.esf.fang.com/house/i31/?rfss=1-a9078821a1b90b2a70-34\"è¿™ä¸ªç½‘å€ï¼Œæˆ‘ä»¬å°è¯•è·å–è¿™ä¸ªç½‘å€çš„responseã€‚ scrapy shell https://bj.esf.fang.com/house/i31/?rfss=1-a9078821a1b90b2a70-34 \u003e\u003e\u003eresponse.xpath(\"//dl[@dataflag='bg']\") [\u003cSelector xpath=\"//dl[@dataflag='bg']\" data='\u003cdl class=\"clearfix\" dataflag=\"bg\" da...'\u003e, \u003cSelector xpath=\"//dl[@dataflag='bg']\" data='\u003cdl class=\"clearfix\" dataflag=\"bg\" da...'\u003e, \u003cSelector xpath=\"//dl[@dataflag='bg']\" data='\u003cdl class=\"clearfix\" dataflag=\"bg\" da...'\u003e, \u003cSelector xpath=\"//dl[@dataflag='bg']\" data='\u003cdl class=\"clearfix\" dataflag=\"bg\" da...'\u003e, \u003cSelector â€¦â€¦] æŠ“å–æˆåŠŸäº†ï¼Œåç»­å°†æƒ³æ³•åœ¨ä¸­é—´ä»¶ä¸­å®ç°ã€‚ ","date":"2022-04-09","objectID":"/scrapy/:5:1","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#çŸ›ä¸ç›¾é‡å®šå‘"},{"categories":["tutorial"],"content":" Item.py #äºŒæ‰‹æˆ¿é¡µé¢çš„Item class EsfItem(scrapy.Item): # çœä»½ province = scrapy.Field() # åŸå¸‚ city = scrapy.Field() #äºŒæ‰‹æˆ¿çš„æ ‡é¢˜ title = scrapy.Field() # äºŒæ‰‹æˆ¿è¯¦ç»†ä¿¡æ¯çš„é“¾æ¥ esfhousenews_url = scrapy.Field() # æˆ·å‹ room_type = scrapy.Field() # é¢ç§¯ area = scrapy.Field() # æ¥¼å±‚ floor = scrapy.Field() # æœå‘ orientation = scrapy.Field() # å»ºç­‘æ—¶é—´ build_year = scrapy.Field() # å°åŒºåå­— village_name = scrapy.Field() # åœ°å€ address = scrapy.Field() # æ€»ä»· total = scrapy.Field() #æ¯å¹³ç±³çš„ä»·æ ¼ unit = scrapy.Field() ","date":"2022-04-09","objectID":"/scrapy/:5:2","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#itempy"},{"categories":["tutorial"],"content":" esf.py import scrapy import re from scrapy_fang.items import UrlItem, EsfItem class EsfSpider(scrapy.Spider): # åˆ«åï¼Œåç»­ç”¨æ¥å…¶å¯åŠ¨çˆ¬è™« name = 'esf' # å…è®¸çˆ¬å–çš„é¡µé¢ allowed_domains = ['fang.com'] # å¯åŠ¨çˆ¬å–çš„é¡µé¢ base_url = 'https://bj.esf.fang.com/house/i3%d/' offset = 1 start_urls = ['https://bj.esf.fang.com'] # æ€»é¡µæ•°ï¼Œè§£æèµ‹å€¼ page_num = 1 get_page_num_flag = True # Scrapyæ¡†æ¶é»˜è®¤è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚response.bodyæ˜¯htmlæºç  def parse(self, response): # åˆæ¬¡æ‰§è¡Œä¼šè¿›å…¥ï¼Œåç»­ä¸è¿›å…¥ if self.get_page_num_flag: # è·å–æ€»é¡µç  page_num_text = response.xpath(\"//div[@class='page_al']/span/text()\")[-1].get() # å°†ä¸æ˜¯æ•°å­—çš„æ›¿æ¢ä¸ºç©º page_num = re.sub('\\D', '', page_num_text) page_num = int(page_num) self.page_num = page_num self.get_page_num_flag = False print( \"-------------------------------------------------å¯¹äºäºŒæ‰‹æˆ¿é¡µé¢çš„è§£æ--------------------------------------------------\") dls = response.xpath(\"//dl[@class='clearfix']\") for dl in dls: item = EsfItem() item['province'] = 'ç›´è¾–å¸‚' item['city'] = 'åŒ—äº¬' item['build_year'] = '' # äºŒæ‰‹æˆ¿æ ‡é¢˜ title = dl.xpath(\".//h4[@class='clearfix']/a/@title\").get() item['title'] = title # äºŒæ‰‹æˆ¿è¯¦æƒ…é“¾æ¥ esfhousenews_url_text = dl.xpath(\".//h4[@class='clearfix']/a/@href\").get() esfhousenews_url = response.urljoin(esfhousenews_url_text) # print(esfhousenews_url) item['esfhousenews_url'] = esfhousenews_url # äºŒæ‰‹æˆ¿ä¿¡æ¯ lists = \"\".join(dl.xpath(\".//p[@class='tel_shop']/text()\").getall()).split() for list in lists: if 'å®¤' in list: # æˆ·å‹ item['room_type'] = list elif 'ã¡' in list: # é¢ç§¯ item['area'] = list elif 'å±‚' in list: # æ¥¼å±‚ item['floor'] = list elif 'å‘' in list: # æœå‘ item['orientation'] = list elif 'å¹´' in list: # å»ºç­‘æ—¶é—´ item['build_year'] = list # å°åŒºåå­— village_name = dl.xpath(\".//p[@class='add_shop']/a/@title\").get() item['village_name'] = village_name # åœ°å€ address = dl.xpath(\".//p[@class='add_shop']/span/text()\").get() item['address'] = address # æ€»ä»· total_price = dl.xpath(\".//dd[@class='price_right']/span[@class='red']/b/text()\").get() item['total'] = total_price unit_price = dl.xpath(\".//dd[@class='price_right']/span[not(@class)]/text()\").get() # æ¯å¹³æ–¹ç±³çš„ä»·æ ¼ item['unit'] = unit_price yield item # ä¸‹ä¸€é¡µçš„é“¾æ¥ if self.offset \u003c self.page_num: self.offset += 1 next_link = self.base_url % self.offset # è·³åˆ°ä¸‹ä¸€é¡µ yield scrapy.Request(url=next_link, callback=self.parse) ","date":"2022-04-09","objectID":"/scrapy/:5:3","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#esfpy"},{"categories":["tutorial"],"content":" middlewares.py import requests import random from scrapy.http import HtmlResponse # æ¨¡æ‹Ÿæµè§ˆå™¨è¯·æ±‚å¤´ class UserAgentDownloadMiddleware(object): User_Agents = [ 'Mozilla/5.0 (X11; Linux i686; rv:64.0) Gecko/20100101 Firefox/64.0', 'Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.13; ko; rv:1.9.1b2) Gecko/2008' '1201 Firefox/60.0', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko)' ' Chrome/70.0.3538.77 Safari/537.36', 'Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.36 (KHTML like Gecko) Chrome' '/44.0.2403.155 Safari/537.36', ] # éšæœºè¯·æ±‚å¤´ def process_request(self, request, spider): User_Agent = random.choice(self.User_Agents) request.headers['User-Agent'] = User_Agent return None # å¤„ç†URLé‡å®šå‘é—®é¢˜ class ProcessRedirectionMiddleware(object): User_Agents = [ 'Mozilla/5.0 (X11; Linux i686; rv:64.0) Gecko/20100101 Firefox/64.0', 'Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.13; ko; rv:1.9.1b2) Gecko/2008' '1201 Firefox/60.0', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko)' ' Chrome/70.0.3538.77 Safari/537.36', 'Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.36 (KHTML like Gecko) Chrome' '/44.0.2403.155 Safari/537.36', ] def process_response(self, request, response, spider): User_Agent = random.choice(self.User_Agents) # ä»responseçš„bodyä¸­æå–é‡å®šå‘çš„ç½‘å€ redirected_url = response.selector.xpath(\"//a[@class='btn-redir']//@href\").get() # å¦‚æœæŠ“å–æˆåŠŸï¼Œåˆ™è¯´æ˜è¿›è¡Œäº†é‡å®šå‘ï¼Œè¿”å›ç›®æ ‡ç½‘å€çš„response if redirected_url: response = requests.get(redirected_url, headers={'User_Agent': User_Agent}) # æ„é€ scrapyçš„responseå¯¹è±¡ã€‚ return HtmlResponse(url=redirected_url, body=response.content) # å¦åˆ™è¿”å›åŸresponse return response ","date":"2022-04-09","objectID":"/scrapy/:5:4","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#middlewarespy"},{"categories":["tutorial"],"content":" settings.py # ä¸‹è½½å™¨ä¸­é—´ä»¶ï¼Œæ·»åŠ è¯·æ±‚å¤´ï¼Œå¤„ç†é‡å®šå‘ DOWNLOADER_MIDDLEWARES = { 'scrapy_fang.middlewares.UserAgentDownloadMiddleware': 543, 'scrapy_fang.middlewares.ProcessRedirectionMiddleware': 553, } # æŒ‡å®šPiplineï¼Œæœ¬æµç¨‹ç”¨äºä¿å­˜yieldçš„itemæ•°æ® ITEM_PIPELINES = { 'scrapy_fang.pipelines.ScrapyFangPipeline': 300, } # å…è®¸çˆ¬è™«ç¼“å­˜ï¼ˆä¸ä¼šé‡å¤è¯·æ±‚ç›®æ ‡é¡µé¢ï¼Œä¸€æ¬¡è¯·æ±‚æˆåŠŸåï¼Œä¼šå­˜åœ¨ç¼“å­˜ä¸­ï¼Œå‡å°ç½‘ç«™å‹åŠ›ã€‚ï¼‰ HTTPCACHE_ENABLED = True HTTPCACHE_EXPIRATION_SECS = 0 HTTPCACHE_DIR = 'httpcache' HTTPCACHE_IGNORE_HTTP_CODES = [] HTTPCACHE_STORAGE = 'scrapy.extensions.httpcache.FilesystemCacheStorage' # æ˜¯å¦éµå¾ªrobotsåè®® ROBOTSTXT_OBEY = False # Configure maximum concurrent requests performed by Scrapy (default: 16) CONCURRENT_REQUESTS = 32 # å»¶æ—¶æœ€ä½ä¸º0 DOWNLOAD_DELAY = 0 ","date":"2022-04-09","objectID":"/scrapy/:5:5","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#settingspy"},{"categories":["tutorial"],"content":" pipelines.py from scrapy.exporters import CsvItemExporter class ScrapyFangPipeline(object): esf_info_fp = open('esf_info.csv', 'wb') esf_info_exporter = CsvItemExporter(esf_info_fp) def process_item(self, item, spider): self.esf_info_exporter.export_item(item) # è¿”å›æ˜¯å¿…é¡»çš„ï¼Œå‘Šè¯‰å¼•æ“itemå·²ç»å¤„ç†å®Œæˆäº†ï¼Œå¯ä»¥ç»§ç»­æ‰§è¡Œåé¢ä»£ç ã€‚ return item def close_spider(self, spider): self.esf_info_fp.close() ","date":"2022-04-09","objectID":"/scrapy/:5:6","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#pipelinespy"},{"categories":["tutorial"],"content":" å¯åŠ¨çˆ¬è™« scrapy crawl esf ","date":"2022-04-09","objectID":"/scrapy/:5:7","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#å¯åŠ¨çˆ¬è™«"},{"categories":["tutorial"],"content":" è·å¾—çˆ¬å¾—æ•°æ® ","date":"2022-04-09","objectID":"/scrapy/:5:8","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#è·å¾—çˆ¬å¾—æ•°æ®"},{"categories":["tutorial"],"content":" å¤šåŸå¸‚äºŒæ‰‹æˆ¿è¯¦æƒ…é¡µçˆ¬è™«","date":"2022-04-09","objectID":"/scrapy/:6:0","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#å¤šåŸå¸‚äºŒæ‰‹æˆ¿è¯¦æƒ…é¡µçˆ¬è™«"},{"categories":["tutorial"],"content":" å®Œæ•´çˆ¬å–æµç¨‹ä»åŸå¸‚é¡µæ‹¿åˆ°å„åŸå¸‚äºŒæ‰‹æˆ¿é“¾æ¥é¡µçš„åŸºç¡€URL è¿›å…¥åˆ—è¡¨é¡µæ‹¿åˆ°åŸºæœ¬ä¿¡æ¯ä»¥åŠæŒ‡å‘è¯¦æƒ…é¡µçš„URL ä»è¯¦æƒ…é¡µè·å–æœ‰å…³äºŒæ‰‹æˆ¿çš„è¯¦æƒ…ä¿¡æ¯ ","date":"2022-04-09","objectID":"/scrapy/:6:1","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#å®Œæ•´çˆ¬å–æµç¨‹"},{"categories":["tutorial"],"content":" çŸ›ä¸ç›¾ç”±äºç½‘ç«™çš„é˜²æŠ¤ï¼Œæˆ¿å¤©ä¸‹ç½‘ç«™æœ‰ä¸€ç³»åˆ—åçˆ¬æœºåˆ¶ï¼Œæœ‰äº›éšè—çš„å¾ˆæ·±ï¼Œä¹Ÿæ˜¯é€šè¿‡å®è·µæ‰å‘ç°çš„ã€‚æœ¬èŠ‚ä¸»è¦ä»‹ç»ä½œè€…å¯¹äºåçˆ¬éªŒè¯çš„ä¸»è¦è§£å†³æ–¹æ³•ï¼Œrobotåè®®ï¼Œå»¶æ—¶çˆ¬å–è¿™ç§å°±ä¸åœ¨è¿™é‡Œå±•å¼€è¯¦ç»†é˜è¿°äº†ã€‚ IPä»£ç†IPä»£ç†æ˜¯çˆ¬è™«çš„ä¸€ä¸ªå…³é”®æŠ€æœ¯ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œç½‘ç«™ä¼šé€šè¿‡åŒä¸€ä¸ªIPåœ°å€çš„å¹¶å‘è¯·æ±‚é‡æ¥åˆ¤æ–­è¿™æ˜¯å¦ä¸ºä¸€ä¸ªçˆ¬è™«ï¼Œå› æ­¤ï¼ŒIPä»£ç†ä¾¿å¯ä»¥ä½¿ç”¨å…¶ä»–ä»£ç†IPè¿›è¡Œè¯·æ±‚çš„è½¬å‘ï¼Œæ¥éšè—å‘å‡ºè¯·æ±‚çš„åŸå§‹IPï¼Œä»¥è¾¾åˆ°æŒç»­çˆ¬å–è€Œä¸è¢«æ£€æµ‹åˆ°çš„ç›®çš„ã€‚æ¥ä¸‹æ¥ä»‹ç»å°è¯•è¿‡çš„ä¸¤ç§IPä»£ç†æ–¹æ³•ã€‚ IPä»£ç†æ± æ–¹æ³• ç®€è¿°ï¼šé€šè¿‡å‘ä»£ç†å•†è·å–ä¸€å®šæ•°é‡çš„IPä½œä¸ºä»£ç†æ± ï¼Œæ¯æ¬¡è¯·æ±‚ä½¿ç”¨ä»£ç†æ± å…¶ä¸­çš„ä¸€ä¸ªIPè¿›è¡Œè½¬å‘ã€‚åœ¨è¯·æ±‚æ—¶è¿›è¡Œä»£ç†ï¼Œåˆ›å»ºIPä»£ç†ä¸­é—´ä»¶æ–¹æ³•å¦‚ä¸‹ class ProxyDownloaderMiddleware: def process_request(self, request, spider): proxy = pro.get_next_proxy() request.meta['proxy'] = \"http://%(proxy)s\" % {'proxy': proxy} print(\"*****************ä½¿ç”¨ä»£ç†*****************\") print(\"***\", proxy, \"***\") print(\"*****************************************\") # ç”¨æˆ·åå¯†ç è®¤è¯(ç§å¯†ä»£ç†/ç‹¬äº«ä»£ç†) request.headers['Proxy-Authorization'] = basic_auth_header('a15179737600', 'p8x7284f') # ç™½åå•è®¤è¯å¯æ³¨é‡Šæ­¤è¡Œ return None è·å–IPä»£ç†æ± ç¨‹åºï¼ˆæ¯è¿‡60sè·å–ä¸€æ¬¡ï¼‰ï¼Œä»æœåŠ¡å•†è·å–åˆ°å¯ç”¨çš„IPåˆ—è¡¨ä¹‹åï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªè¡Œè¿›è¡Œå¯ç”¨æ€§æ£€æµ‹ï¼Œä»¥å…æ‰€ä½¿ç”¨çš„ä»£ç†IPæ— æ•ˆã€‚æœ¬äººé‡‡ç”¨çš„æ–¹æ³•æ˜¯ä½¿ç”¨ä»£ç†IPè®¿é—®http://icanhazip.comï¼Œæ­¤ç½‘ç«™ä¼šè¿”å›å½“å‰çš„IPåœ°å€ï¼Œå¦‚æœçŠ¶æ€ç ä¸º200è¡¨æ˜æˆåŠŸè®¿é—®ï¼Œäºæ˜¯æˆåŠŸåŠ å…¥ä»£ç†æ± ã€‚ # -- coding: utf-8 -- import time import threading import requests from scrapy import signals # æå–ä»£ç†IPçš„api api_url = 'https://dps.kdlapi.com/api/getdps/?orderid=965208072230596\u0026num=10\u0026signature=bqcsohuyc0qcmz1446bn3jt234sbcezq\u0026pt=1\u0026format=json\u0026sep=1' foo = True class Proxy: def __init__(self, ): self.api_url = api_url self.username = 'a15179737600' self.password = 'p8x7284f' self._proxy_list = self.get_proxy_lis() def get_proxy_lis(self): print( \"-------------------------------------------------ä»ä»£ç†å•†è·å–IPä»£ç†æ± --------------------------------------------------\") proxy_lis = requests.get(self.api_url).json().get('data').get('proxy_list') print( \"-------------------------------------------------è·å–æˆåŠŸï¼Œå¼€å§‹æµ‹è¯•IPä»£ç†æ± --------------------------------------------------\") # æµ‹è¯•è¿é€šæ€§ proxy_lis = [proxy for proxy in proxy_lis if self.verification(proxy)] # å¯ç”¨ä»£ç†åˆ—è¡¨é•¿åº¦ä¸ºé›¶åˆ™é‡æ–°è·å– while not len(proxy_lis): print( \"-------------------------------------------------å¯ç”¨IPä»£ç†è·å–å¤±è´¥ï¼Œé‡æ–°è·å–ä¸­------------\\ --------------------------------------\") proxy_lis = requests.get(self.api_url).json().get('data').get('proxy_list') print( \"-------------------------------------------------å¼€å§‹æµ‹è¯•æ–°è·IPä»£ç†æ± --------------------------------------------------\") # æµ‹è¯•è¿é€šæ€§ proxy_lis = [proxy for proxy in proxy_lis if self.verification(proxy)] print( \"-------------------------------------------------æˆåŠŸè·å¾—å¯ç”¨IPä»£ç†æ± ï¼ˆå¤§å°ä¸º%dï¼‰å¦‚ä¸‹--------------------------------------------------\" % len(proxy_lis)) print(proxy_lis) self.index_ = 1 return proxy_lis def get_next_proxy(self): self.index_ += 1 proxy = self._proxy_list[self.index_ % len(self._proxy_list)] return proxy @property def proxy_list(self): return self._proxy_list @proxy_list.setter def proxy_list(self, list): self._proxy_list = list # æµ‹è¯•IPä»£ç†æ˜¯å¦æ­£å¸¸å“åº” def verification(self, proxy): head = { 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/50.0.2661.102 Safari/537.36', 'Connection': 'keep-alive'} '''http://icanhazip.comä¼šè¿”å›å½“å‰çš„IPåœ°å€''' proxies = { \"http\": \"http://%(user)s:%(pwd)s@%(proxy)s/\" % {\"user\": self.username, \"pwd\": self.password, \"proxy\": proxy}, \"https\": \"http://%(user)s:%(pwd)s@%(proxy)s/\" % {\"user\": self.username, \"pwd\": self.password, \"proxy\": proxy} } try: p = requests.get('http://icanhazip.com', headers=head, proxies=proxies, timeout=2) if p.status_code == 200: return True return False except: return False pro = Proxy() print(pro.proxy_list) class MyExtend: def __init__(self, crawler): self.crawler = crawler # å°†è‡ªå®šä¹‰æ–¹æ³•ç»‘å®šåˆ°scrapyä¿¡å·ä¸Š,ä½¿ç¨‹åºä¸spiderå¼•æ“åŒæ­¥å¯åŠ¨ä¸å…³é—­ # scrapyä¿¡å·æ–‡æ¡£: https://www.osgeo.cn/scrapy/topics/signals.html # scrapyè‡ªå®šä¹‰æ‹“å±•æ–‡æ¡£: https://www.osgeo.cn/scrapy/topics/extensions.html crawler.signals.connect(self.start, signals.engine_started) crawler.signals.connect(self.close, signals.spider_closed) @classmethod def from_crawler(cls, crawler): return cls(crawler) def start(self): t = threading.Thread(target=self.extract_proxy) t.start() def extract_proxy(self): while foo: # è®¾ç½®æ¯60ç§’æå–ä¸€æ¬¡ip time.sleep(60) pro.proxy_list = pro.get_proxy_lis() def close(self): global foo foo = False TUNéš§é“IPä»£ç†æ–¹æ³• éš§é“ä»£ç†æ˜¯é€šè¿‡ä»£ç†å•†çš„é“¾æ¥ç›´æ¥è·å–ä¸€ä¸ªä»£ç†IPï¼Œå¯ä»¥é€‰æ‹©æ¯æ¬¡è®¿é—®åˆ‡æ¢ä»¥åŠæ¯å‡ åˆ†é’Ÿåˆ‡æ¢IPç­‰ï¼Œä½¿ç”¨è¾ƒä¸ºä¾¿æ·ï¼Œä»¥ä¸‹æ˜¯ä¸­é—´ä»¶çš„ä»£ç†æ–¹æ³•å®ç°","date":"2022-04-09","objectID":"/scrapy/:6:2","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#çŸ›ä¸ç›¾"},{"categories":["tutorial"],"content":" çŸ›ä¸ç›¾ç”±äºç½‘ç«™çš„é˜²æŠ¤ï¼Œæˆ¿å¤©ä¸‹ç½‘ç«™æœ‰ä¸€ç³»åˆ—åçˆ¬æœºåˆ¶ï¼Œæœ‰äº›éšè—çš„å¾ˆæ·±ï¼Œä¹Ÿæ˜¯é€šè¿‡å®è·µæ‰å‘ç°çš„ã€‚æœ¬èŠ‚ä¸»è¦ä»‹ç»ä½œè€…å¯¹äºåçˆ¬éªŒè¯çš„ä¸»è¦è§£å†³æ–¹æ³•ï¼Œrobotåè®®ï¼Œå»¶æ—¶çˆ¬å–è¿™ç§å°±ä¸åœ¨è¿™é‡Œå±•å¼€è¯¦ç»†é˜è¿°äº†ã€‚ IPä»£ç†IPä»£ç†æ˜¯çˆ¬è™«çš„ä¸€ä¸ªå…³é”®æŠ€æœ¯ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œç½‘ç«™ä¼šé€šè¿‡åŒä¸€ä¸ªIPåœ°å€çš„å¹¶å‘è¯·æ±‚é‡æ¥åˆ¤æ–­è¿™æ˜¯å¦ä¸ºä¸€ä¸ªçˆ¬è™«ï¼Œå› æ­¤ï¼ŒIPä»£ç†ä¾¿å¯ä»¥ä½¿ç”¨å…¶ä»–ä»£ç†IPè¿›è¡Œè¯·æ±‚çš„è½¬å‘ï¼Œæ¥éšè—å‘å‡ºè¯·æ±‚çš„åŸå§‹IPï¼Œä»¥è¾¾åˆ°æŒç»­çˆ¬å–è€Œä¸è¢«æ£€æµ‹åˆ°çš„ç›®çš„ã€‚æ¥ä¸‹æ¥ä»‹ç»å°è¯•è¿‡çš„ä¸¤ç§IPä»£ç†æ–¹æ³•ã€‚ IPä»£ç†æ± æ–¹æ³• ç®€è¿°ï¼šé€šè¿‡å‘ä»£ç†å•†è·å–ä¸€å®šæ•°é‡çš„IPä½œä¸ºä»£ç†æ± ï¼Œæ¯æ¬¡è¯·æ±‚ä½¿ç”¨ä»£ç†æ± å…¶ä¸­çš„ä¸€ä¸ªIPè¿›è¡Œè½¬å‘ã€‚åœ¨è¯·æ±‚æ—¶è¿›è¡Œä»£ç†ï¼Œåˆ›å»ºIPä»£ç†ä¸­é—´ä»¶æ–¹æ³•å¦‚ä¸‹ class ProxyDownloaderMiddleware: def process_request(self, request, spider): proxy = pro.get_next_proxy() request.meta['proxy'] = \"http://%(proxy)s\" % {'proxy': proxy} print(\"*****************ä½¿ç”¨ä»£ç†*****************\") print(\"***\", proxy, \"***\") print(\"*****************************************\") # ç”¨æˆ·åå¯†ç è®¤è¯(ç§å¯†ä»£ç†/ç‹¬äº«ä»£ç†) request.headers['Proxy-Authorization'] = basic_auth_header('a15179737600', 'p8x7284f') # ç™½åå•è®¤è¯å¯æ³¨é‡Šæ­¤è¡Œ return None è·å–IPä»£ç†æ± ç¨‹åºï¼ˆæ¯è¿‡60sè·å–ä¸€æ¬¡ï¼‰ï¼Œä»æœåŠ¡å•†è·å–åˆ°å¯ç”¨çš„IPåˆ—è¡¨ä¹‹åï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªè¡Œè¿›è¡Œå¯ç”¨æ€§æ£€æµ‹ï¼Œä»¥å…æ‰€ä½¿ç”¨çš„ä»£ç†IPæ— æ•ˆã€‚æœ¬äººé‡‡ç”¨çš„æ–¹æ³•æ˜¯ä½¿ç”¨ä»£ç†IPè®¿é—®http://icanhazip.comï¼Œæ­¤ç½‘ç«™ä¼šè¿”å›å½“å‰çš„IPåœ°å€ï¼Œå¦‚æœçŠ¶æ€ç ä¸º200è¡¨æ˜æˆåŠŸè®¿é—®ï¼Œäºæ˜¯æˆåŠŸåŠ å…¥ä»£ç†æ± ã€‚ # -- coding: utf-8 -- import time import threading import requests from scrapy import signals # æå–ä»£ç†IPçš„api api_url = 'https://dps.kdlapi.com/api/getdps/?orderid=965208072230596\u0026num=10\u0026signature=bqcsohuyc0qcmz1446bn3jt234sbcezq\u0026pt=1\u0026format=json\u0026sep=1' foo = True class Proxy: def __init__(self, ): self.api_url = api_url self.username = 'a15179737600' self.password = 'p8x7284f' self._proxy_list = self.get_proxy_lis() def get_proxy_lis(self): print( \"-------------------------------------------------ä»ä»£ç†å•†è·å–IPä»£ç†æ± --------------------------------------------------\") proxy_lis = requests.get(self.api_url).json().get('data').get('proxy_list') print( \"-------------------------------------------------è·å–æˆåŠŸï¼Œå¼€å§‹æµ‹è¯•IPä»£ç†æ± --------------------------------------------------\") # æµ‹è¯•è¿é€šæ€§ proxy_lis = [proxy for proxy in proxy_lis if self.verification(proxy)] # å¯ç”¨ä»£ç†åˆ—è¡¨é•¿åº¦ä¸ºé›¶åˆ™é‡æ–°è·å– while not len(proxy_lis): print( \"-------------------------------------------------å¯ç”¨IPä»£ç†è·å–å¤±è´¥ï¼Œé‡æ–°è·å–ä¸­------------\\ --------------------------------------\") proxy_lis = requests.get(self.api_url).json().get('data').get('proxy_list') print( \"-------------------------------------------------å¼€å§‹æµ‹è¯•æ–°è·IPä»£ç†æ± --------------------------------------------------\") # æµ‹è¯•è¿é€šæ€§ proxy_lis = [proxy for proxy in proxy_lis if self.verification(proxy)] print( \"-------------------------------------------------æˆåŠŸè·å¾—å¯ç”¨IPä»£ç†æ± ï¼ˆå¤§å°ä¸º%dï¼‰å¦‚ä¸‹--------------------------------------------------\" % len(proxy_lis)) print(proxy_lis) self.index_ = 1 return proxy_lis def get_next_proxy(self): self.index_ += 1 proxy = self._proxy_list[self.index_ % len(self._proxy_list)] return proxy @property def proxy_list(self): return self._proxy_list @proxy_list.setter def proxy_list(self, list): self._proxy_list = list # æµ‹è¯•IPä»£ç†æ˜¯å¦æ­£å¸¸å“åº” def verification(self, proxy): head = { 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/50.0.2661.102 Safari/537.36', 'Connection': 'keep-alive'} '''http://icanhazip.comä¼šè¿”å›å½“å‰çš„IPåœ°å€''' proxies = { \"http\": \"http://%(user)s:%(pwd)s@%(proxy)s/\" % {\"user\": self.username, \"pwd\": self.password, \"proxy\": proxy}, \"https\": \"http://%(user)s:%(pwd)s@%(proxy)s/\" % {\"user\": self.username, \"pwd\": self.password, \"proxy\": proxy} } try: p = requests.get('http://icanhazip.com', headers=head, proxies=proxies, timeout=2) if p.status_code == 200: return True return False except: return False pro = Proxy() print(pro.proxy_list) class MyExtend: def __init__(self, crawler): self.crawler = crawler # å°†è‡ªå®šä¹‰æ–¹æ³•ç»‘å®šåˆ°scrapyä¿¡å·ä¸Š,ä½¿ç¨‹åºä¸spiderå¼•æ“åŒæ­¥å¯åŠ¨ä¸å…³é—­ # scrapyä¿¡å·æ–‡æ¡£: https://www.osgeo.cn/scrapy/topics/signals.html # scrapyè‡ªå®šä¹‰æ‹“å±•æ–‡æ¡£: https://www.osgeo.cn/scrapy/topics/extensions.html crawler.signals.connect(self.start, signals.engine_started) crawler.signals.connect(self.close, signals.spider_closed) @classmethod def from_crawler(cls, crawler): return cls(crawler) def start(self): t = threading.Thread(target=self.extract_proxy) t.start() def extract_proxy(self): while foo: # è®¾ç½®æ¯60ç§’æå–ä¸€æ¬¡ip time.sleep(60) pro.proxy_list = pro.get_proxy_lis() def close(self): global foo foo = False TUNéš§é“IPä»£ç†æ–¹æ³• éš§é“ä»£ç†æ˜¯é€šè¿‡ä»£ç†å•†çš„é“¾æ¥ç›´æ¥è·å–ä¸€ä¸ªä»£ç†IPï¼Œå¯ä»¥é€‰æ‹©æ¯æ¬¡è®¿é—®åˆ‡æ¢ä»¥åŠæ¯å‡ åˆ†é’Ÿåˆ‡æ¢IPç­‰ï¼Œä½¿ç”¨è¾ƒä¸ºä¾¿æ·ï¼Œä»¥ä¸‹æ˜¯ä¸­é—´ä»¶çš„ä»£ç†æ–¹æ³•å®ç°","date":"2022-04-09","objectID":"/scrapy/:6:2","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#ipä»£ç†"},{"categories":["tutorial"],"content":" çŸ›ä¸ç›¾ç”±äºç½‘ç«™çš„é˜²æŠ¤ï¼Œæˆ¿å¤©ä¸‹ç½‘ç«™æœ‰ä¸€ç³»åˆ—åçˆ¬æœºåˆ¶ï¼Œæœ‰äº›éšè—çš„å¾ˆæ·±ï¼Œä¹Ÿæ˜¯é€šè¿‡å®è·µæ‰å‘ç°çš„ã€‚æœ¬èŠ‚ä¸»è¦ä»‹ç»ä½œè€…å¯¹äºåçˆ¬éªŒè¯çš„ä¸»è¦è§£å†³æ–¹æ³•ï¼Œrobotåè®®ï¼Œå»¶æ—¶çˆ¬å–è¿™ç§å°±ä¸åœ¨è¿™é‡Œå±•å¼€è¯¦ç»†é˜è¿°äº†ã€‚ IPä»£ç†IPä»£ç†æ˜¯çˆ¬è™«çš„ä¸€ä¸ªå…³é”®æŠ€æœ¯ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œç½‘ç«™ä¼šé€šè¿‡åŒä¸€ä¸ªIPåœ°å€çš„å¹¶å‘è¯·æ±‚é‡æ¥åˆ¤æ–­è¿™æ˜¯å¦ä¸ºä¸€ä¸ªçˆ¬è™«ï¼Œå› æ­¤ï¼ŒIPä»£ç†ä¾¿å¯ä»¥ä½¿ç”¨å…¶ä»–ä»£ç†IPè¿›è¡Œè¯·æ±‚çš„è½¬å‘ï¼Œæ¥éšè—å‘å‡ºè¯·æ±‚çš„åŸå§‹IPï¼Œä»¥è¾¾åˆ°æŒç»­çˆ¬å–è€Œä¸è¢«æ£€æµ‹åˆ°çš„ç›®çš„ã€‚æ¥ä¸‹æ¥ä»‹ç»å°è¯•è¿‡çš„ä¸¤ç§IPä»£ç†æ–¹æ³•ã€‚ IPä»£ç†æ± æ–¹æ³• ç®€è¿°ï¼šé€šè¿‡å‘ä»£ç†å•†è·å–ä¸€å®šæ•°é‡çš„IPä½œä¸ºä»£ç†æ± ï¼Œæ¯æ¬¡è¯·æ±‚ä½¿ç”¨ä»£ç†æ± å…¶ä¸­çš„ä¸€ä¸ªIPè¿›è¡Œè½¬å‘ã€‚åœ¨è¯·æ±‚æ—¶è¿›è¡Œä»£ç†ï¼Œåˆ›å»ºIPä»£ç†ä¸­é—´ä»¶æ–¹æ³•å¦‚ä¸‹ class ProxyDownloaderMiddleware: def process_request(self, request, spider): proxy = pro.get_next_proxy() request.meta['proxy'] = \"http://%(proxy)s\" % {'proxy': proxy} print(\"*****************ä½¿ç”¨ä»£ç†*****************\") print(\"***\", proxy, \"***\") print(\"*****************************************\") # ç”¨æˆ·åå¯†ç è®¤è¯(ç§å¯†ä»£ç†/ç‹¬äº«ä»£ç†) request.headers['Proxy-Authorization'] = basic_auth_header('a15179737600', 'p8x7284f') # ç™½åå•è®¤è¯å¯æ³¨é‡Šæ­¤è¡Œ return None è·å–IPä»£ç†æ± ç¨‹åºï¼ˆæ¯è¿‡60sè·å–ä¸€æ¬¡ï¼‰ï¼Œä»æœåŠ¡å•†è·å–åˆ°å¯ç”¨çš„IPåˆ—è¡¨ä¹‹åï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªè¡Œè¿›è¡Œå¯ç”¨æ€§æ£€æµ‹ï¼Œä»¥å…æ‰€ä½¿ç”¨çš„ä»£ç†IPæ— æ•ˆã€‚æœ¬äººé‡‡ç”¨çš„æ–¹æ³•æ˜¯ä½¿ç”¨ä»£ç†IPè®¿é—®http://icanhazip.comï¼Œæ­¤ç½‘ç«™ä¼šè¿”å›å½“å‰çš„IPåœ°å€ï¼Œå¦‚æœçŠ¶æ€ç ä¸º200è¡¨æ˜æˆåŠŸè®¿é—®ï¼Œäºæ˜¯æˆåŠŸåŠ å…¥ä»£ç†æ± ã€‚ # -- coding: utf-8 -- import time import threading import requests from scrapy import signals # æå–ä»£ç†IPçš„api api_url = 'https://dps.kdlapi.com/api/getdps/?orderid=965208072230596\u0026num=10\u0026signature=bqcsohuyc0qcmz1446bn3jt234sbcezq\u0026pt=1\u0026format=json\u0026sep=1' foo = True class Proxy: def __init__(self, ): self.api_url = api_url self.username = 'a15179737600' self.password = 'p8x7284f' self._proxy_list = self.get_proxy_lis() def get_proxy_lis(self): print( \"-------------------------------------------------ä»ä»£ç†å•†è·å–IPä»£ç†æ± --------------------------------------------------\") proxy_lis = requests.get(self.api_url).json().get('data').get('proxy_list') print( \"-------------------------------------------------è·å–æˆåŠŸï¼Œå¼€å§‹æµ‹è¯•IPä»£ç†æ± --------------------------------------------------\") # æµ‹è¯•è¿é€šæ€§ proxy_lis = [proxy for proxy in proxy_lis if self.verification(proxy)] # å¯ç”¨ä»£ç†åˆ—è¡¨é•¿åº¦ä¸ºé›¶åˆ™é‡æ–°è·å– while not len(proxy_lis): print( \"-------------------------------------------------å¯ç”¨IPä»£ç†è·å–å¤±è´¥ï¼Œé‡æ–°è·å–ä¸­------------\\ --------------------------------------\") proxy_lis = requests.get(self.api_url).json().get('data').get('proxy_list') print( \"-------------------------------------------------å¼€å§‹æµ‹è¯•æ–°è·IPä»£ç†æ± --------------------------------------------------\") # æµ‹è¯•è¿é€šæ€§ proxy_lis = [proxy for proxy in proxy_lis if self.verification(proxy)] print( \"-------------------------------------------------æˆåŠŸè·å¾—å¯ç”¨IPä»£ç†æ± ï¼ˆå¤§å°ä¸º%dï¼‰å¦‚ä¸‹--------------------------------------------------\" % len(proxy_lis)) print(proxy_lis) self.index_ = 1 return proxy_lis def get_next_proxy(self): self.index_ += 1 proxy = self._proxy_list[self.index_ % len(self._proxy_list)] return proxy @property def proxy_list(self): return self._proxy_list @proxy_list.setter def proxy_list(self, list): self._proxy_list = list # æµ‹è¯•IPä»£ç†æ˜¯å¦æ­£å¸¸å“åº” def verification(self, proxy): head = { 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/50.0.2661.102 Safari/537.36', 'Connection': 'keep-alive'} '''http://icanhazip.comä¼šè¿”å›å½“å‰çš„IPåœ°å€''' proxies = { \"http\": \"http://%(user)s:%(pwd)s@%(proxy)s/\" % {\"user\": self.username, \"pwd\": self.password, \"proxy\": proxy}, \"https\": \"http://%(user)s:%(pwd)s@%(proxy)s/\" % {\"user\": self.username, \"pwd\": self.password, \"proxy\": proxy} } try: p = requests.get('http://icanhazip.com', headers=head, proxies=proxies, timeout=2) if p.status_code == 200: return True return False except: return False pro = Proxy() print(pro.proxy_list) class MyExtend: def __init__(self, crawler): self.crawler = crawler # å°†è‡ªå®šä¹‰æ–¹æ³•ç»‘å®šåˆ°scrapyä¿¡å·ä¸Š,ä½¿ç¨‹åºä¸spiderå¼•æ“åŒæ­¥å¯åŠ¨ä¸å…³é—­ # scrapyä¿¡å·æ–‡æ¡£: https://www.osgeo.cn/scrapy/topics/signals.html # scrapyè‡ªå®šä¹‰æ‹“å±•æ–‡æ¡£: https://www.osgeo.cn/scrapy/topics/extensions.html crawler.signals.connect(self.start, signals.engine_started) crawler.signals.connect(self.close, signals.spider_closed) @classmethod def from_crawler(cls, crawler): return cls(crawler) def start(self): t = threading.Thread(target=self.extract_proxy) t.start() def extract_proxy(self): while foo: # è®¾ç½®æ¯60ç§’æå–ä¸€æ¬¡ip time.sleep(60) pro.proxy_list = pro.get_proxy_lis() def close(self): global foo foo = False TUNéš§é“IPä»£ç†æ–¹æ³• éš§é“ä»£ç†æ˜¯é€šè¿‡ä»£ç†å•†çš„é“¾æ¥ç›´æ¥è·å–ä¸€ä¸ªä»£ç†IPï¼Œå¯ä»¥é€‰æ‹©æ¯æ¬¡è®¿é—®åˆ‡æ¢ä»¥åŠæ¯å‡ åˆ†é’Ÿåˆ‡æ¢IPç­‰ï¼Œä½¿ç”¨è¾ƒä¸ºä¾¿æ·ï¼Œä»¥ä¸‹æ˜¯ä¸­é—´ä»¶çš„ä»£ç†æ–¹æ³•å®ç°","date":"2022-04-09","objectID":"/scrapy/:6:2","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#seleniumæ¨¡æ‹Ÿæ‹–åŠ¨ç»•è¿‡éªŒè¯ç "},{"categories":["tutorial"],"content":" ä¸»è¦ç±»å®šä¹‰ çˆ¬è™«æ–‡ä»¶ class EsfSpider(scrapy.Spider): # åˆ«åï¼Œåç»­ç”¨æ¥å…¶å¯åŠ¨çˆ¬è™« name = 'esf' # å…è®¸çˆ¬å–çš„é¡µé¢ allowed_domains = ['fang.com'] # å¯åŠ¨çˆ¬å–çš„é¡µé¢ start_urls = ['https://www.fang.com/SoufunFamily.htm'] # è·å–éšæœºè¯·æ±‚å¤´ get_random_UserAgent = GetRandomUserAgent() # é‡å®šå‘é“¾æ¥è·å–æ–¹æ³• def get_redirected_url(self, url): head = self.get_random_UserAgent.agent_head() # æ„é€ scrapyçš„responseå¯¹è±¡ã€‚ req_response = requests.get(url, headers=head) response = HtmlResponse(url=url, body=req_response.content) # å¤„ç†é‡å®šå‘ redirected_url = response.xpath(\"//a[@class='btn-redir']//@href\").get() # å¦‚æœæŠ“å–æˆåŠŸï¼Œåˆ™è¯´æ˜è¿›è¡Œäº†é‡å®šå‘ï¼Œå‘é€ä¸€ä¸ªæ–°çš„è¯·æ±‚è€Œä¸æ˜¯å°†å¾—åˆ°çš„å“åº”å‘ç»™çˆ¬è™«ç¨‹åº if redirected_url: print(\"é‡å®šå‘\", redirected_url, \"*\" * 200) return redirected_url return url # Scrapyæ¡†æ¶é»˜è®¤è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚response.bodyæ˜¯htmlæºç  def parse(self, response): df = pd.read_csv('esf_info.csv') esfhousenews_urls = df[['esfhousenews_url']].values provinces = df[['province']].values cities = df[['city']].values k = 1 for u, p, c in zip(esfhousenews_urls, provinces, cities): if k \u003e 5: break esfhousenews_url = u[0] province = p[0] city = c[0] try: directed_url = self.get_redirected_url(esfhousenews_url) yield scrapy.Request(url=directed_url, callback=self.parse_esfhouseInfo, meta={\"info\": (province, city, directed_url)}, dont_filter=True) except Exception as ex: print(\"æ•è·å¼‚å¸¸%s\" % ex) # å¯¹äºäºŒæ‰‹æˆ¿è¯¦æƒ…é¡µé¢çš„è§£æ def parse_esfhouseInfo(self, response): province, city, esf_link = response.meta.get(\"info\") print( \"-------------------------------------------------å¯¹äº%säºŒæ‰‹æˆ¿ %s è¯¦æƒ…é¡µçš„è§£æ--------------------------------------------------\" % ( province + ' ' + city, esf_link)) # éªŒè¯ç  response_url = str(response.url) print(response) house_info_divs = response.xpath( \"//div[contains(@class, 'tr-line clearfix')]//div[contains(@class,'trl-item1')]\") if 'captcha' in response_url and not house_info_divs: with open('captcha.txt', 'a', encoding='utf-8') as f: f.write(response_url + '\\n') print('å¤„ç†éªŒè¯ç ', '*' * 200) deal_captcha = DealCaptcha(parse_target='EsfInfoItem', url=response_url) item = deal_captcha.run() if item: item['province'] = province item['city'] = city item['esf_link'] = esf_link return item elif house_info_divs: print('é“¾æ¥è§£ææˆåŠŸäº†', '*' * 200) item = EsfInfoItem() item['province'] = province item['city'] = city item['esf_link'] = esf_link title = response.xpath(\"//span[@class='tit_text']//text()\").get() if title: item['title'] = title.strip() if len(house_info_divs) == 6: # æˆ·å‹ room_type = house_info_divs[0].xpath(\".//div[@class='tt']//text()\").get() if room_type: item['room_type'] = room_type.strip() # é¢ç§¯ area = house_info_divs[1].xpath(\".//div[@class='tt']//text()\").get() if area: item['area'] = area.strip() # å•ä»· unit_price = house_info_divs[2].xpath(\".//div[@class='tt']//text()\").get() if unit_price: item['unit_price'] = unit_price.strip() # æœå‘ orientation = house_info_divs[3].xpath(\".//div[@class='tt']//text()\").get() if orientation: item['orientation'] = orientation.strip() # æ¥¼å±‚ floor_info = house_info_divs[4].xpath(\".//div[@class='tt']//text()\").get() floor_info_a = house_info_divs[4].xpath(\".//div[@class='tt']//a//text()\").get() floor_type = house_info_divs[4].xpath(\".//div[@class='font14']//text()\").get() if floor_info_a and floor_type: item['floor'] = floor_info_a.strip() + ',' + floor_type.strip() elif floor_info and floor_type: item['floor'] = floor_info.strip() + ',' + floor_type.strip() # è£…ä¿® decoration = house_info_divs[5].xpath(\".//div[@class='tt']//text()\").get() decoration_a = house_info_divs[5].xpath(\".//div[@class='tt']/a//text()\").get() if decoration_a: item['decoration'] = decoration_a.strip() elif decoration: item['decoration'] = decoration.strip() # æ€»ä»· total_price = response.xpath(\"//div[contains(@class, 'price_esf')]/i//text()\").get() if total_price: item['total_price'] = total_price.strip() + 'ä¸‡å…ƒ' # æˆ¿æºä¿¡æ¯ xpath_house_info_lis = response.xpath( \"//div[contains(@class, 'content-item fydes-item')]//div[contains(@class, 'cont clearfix')]//div\") for div in xpath_house_info_lis: if len(div.xpath(\".//span//text()\")) == 2: # å»ºç­‘å¹´ä»£ if div.xpath(\".//span//text()\")[0].get().strip()","date":"2022-04-09","objectID":"/scrapy/:6:3","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#ä¸»è¦ç±»å®šä¹‰"},{"categories":["tutorial"],"content":" ä¸»è¦ç±»å®šä¹‰ çˆ¬è™«æ–‡ä»¶ class EsfSpider(scrapy.Spider): # åˆ«åï¼Œåç»­ç”¨æ¥å…¶å¯åŠ¨çˆ¬è™« name = 'esf' # å…è®¸çˆ¬å–çš„é¡µé¢ allowed_domains = ['fang.com'] # å¯åŠ¨çˆ¬å–çš„é¡µé¢ start_urls = ['https://www.fang.com/SoufunFamily.htm'] # è·å–éšæœºè¯·æ±‚å¤´ get_random_UserAgent = GetRandomUserAgent() # é‡å®šå‘é“¾æ¥è·å–æ–¹æ³• def get_redirected_url(self, url): head = self.get_random_UserAgent.agent_head() # æ„é€ scrapyçš„responseå¯¹è±¡ã€‚ req_response = requests.get(url, headers=head) response = HtmlResponse(url=url, body=req_response.content) # å¤„ç†é‡å®šå‘ redirected_url = response.xpath(\"//a[@class='btn-redir']//@href\").get() # å¦‚æœæŠ“å–æˆåŠŸï¼Œåˆ™è¯´æ˜è¿›è¡Œäº†é‡å®šå‘ï¼Œå‘é€ä¸€ä¸ªæ–°çš„è¯·æ±‚è€Œä¸æ˜¯å°†å¾—åˆ°çš„å“åº”å‘ç»™çˆ¬è™«ç¨‹åº if redirected_url: print(\"é‡å®šå‘\", redirected_url, \"*\" * 200) return redirected_url return url # Scrapyæ¡†æ¶é»˜è®¤è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚response.bodyæ˜¯htmlæºç  def parse(self, response): df = pd.read_csv('esf_info.csv') esfhousenews_urls = df[['esfhousenews_url']].values provinces = df[['province']].values cities = df[['city']].values k = 1 for u, p, c in zip(esfhousenews_urls, provinces, cities): if k \u003e 5: break esfhousenews_url = u[0] province = p[0] city = c[0] try: directed_url = self.get_redirected_url(esfhousenews_url) yield scrapy.Request(url=directed_url, callback=self.parse_esfhouseInfo, meta={\"info\": (province, city, directed_url)}, dont_filter=True) except Exception as ex: print(\"æ•è·å¼‚å¸¸%s\" % ex) # å¯¹äºäºŒæ‰‹æˆ¿è¯¦æƒ…é¡µé¢çš„è§£æ def parse_esfhouseInfo(self, response): province, city, esf_link = response.meta.get(\"info\") print( \"-------------------------------------------------å¯¹äº%säºŒæ‰‹æˆ¿ %s è¯¦æƒ…é¡µçš„è§£æ--------------------------------------------------\" % ( province + ' ' + city, esf_link)) # éªŒè¯ç  response_url = str(response.url) print(response) house_info_divs = response.xpath( \"//div[contains(@class, 'tr-line clearfix')]//div[contains(@class,'trl-item1')]\") if 'captcha' in response_url and not house_info_divs: with open('captcha.txt', 'a', encoding='utf-8') as f: f.write(response_url + '\\n') print('å¤„ç†éªŒè¯ç ', '*' * 200) deal_captcha = DealCaptcha(parse_target='EsfInfoItem', url=response_url) item = deal_captcha.run() if item: item['province'] = province item['city'] = city item['esf_link'] = esf_link return item elif house_info_divs: print('é“¾æ¥è§£ææˆåŠŸäº†', '*' * 200) item = EsfInfoItem() item['province'] = province item['city'] = city item['esf_link'] = esf_link title = response.xpath(\"//span[@class='tit_text']//text()\").get() if title: item['title'] = title.strip() if len(house_info_divs) == 6: # æˆ·å‹ room_type = house_info_divs[0].xpath(\".//div[@class='tt']//text()\").get() if room_type: item['room_type'] = room_type.strip() # é¢ç§¯ area = house_info_divs[1].xpath(\".//div[@class='tt']//text()\").get() if area: item['area'] = area.strip() # å•ä»· unit_price = house_info_divs[2].xpath(\".//div[@class='tt']//text()\").get() if unit_price: item['unit_price'] = unit_price.strip() # æœå‘ orientation = house_info_divs[3].xpath(\".//div[@class='tt']//text()\").get() if orientation: item['orientation'] = orientation.strip() # æ¥¼å±‚ floor_info = house_info_divs[4].xpath(\".//div[@class='tt']//text()\").get() floor_info_a = house_info_divs[4].xpath(\".//div[@class='tt']//a//text()\").get() floor_type = house_info_divs[4].xpath(\".//div[@class='font14']//text()\").get() if floor_info_a and floor_type: item['floor'] = floor_info_a.strip() + ',' + floor_type.strip() elif floor_info and floor_type: item['floor'] = floor_info.strip() + ',' + floor_type.strip() # è£…ä¿® decoration = house_info_divs[5].xpath(\".//div[@class='tt']//text()\").get() decoration_a = house_info_divs[5].xpath(\".//div[@class='tt']/a//text()\").get() if decoration_a: item['decoration'] = decoration_a.strip() elif decoration: item['decoration'] = decoration.strip() # æ€»ä»· total_price = response.xpath(\"//div[contains(@class, 'price_esf')]/i//text()\").get() if total_price: item['total_price'] = total_price.strip() + 'ä¸‡å…ƒ' # æˆ¿æºä¿¡æ¯ xpath_house_info_lis = response.xpath( \"//div[contains(@class, 'content-item fydes-item')]//div[contains(@class, 'cont clearfix')]//div\") for div in xpath_house_info_lis: if len(div.xpath(\".//span//text()\")) == 2: # å»ºç­‘å¹´ä»£ if div.xpath(\".//span//text()\")[0].get().strip()","date":"2022-04-09","objectID":"/scrapy/:6:3","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#çˆ¬è™«æ–‡ä»¶"},{"categories":["tutorial"],"content":" ä¸»è¦ç±»å®šä¹‰ çˆ¬è™«æ–‡ä»¶ class EsfSpider(scrapy.Spider): # åˆ«åï¼Œåç»­ç”¨æ¥å…¶å¯åŠ¨çˆ¬è™« name = 'esf' # å…è®¸çˆ¬å–çš„é¡µé¢ allowed_domains = ['fang.com'] # å¯åŠ¨çˆ¬å–çš„é¡µé¢ start_urls = ['https://www.fang.com/SoufunFamily.htm'] # è·å–éšæœºè¯·æ±‚å¤´ get_random_UserAgent = GetRandomUserAgent() # é‡å®šå‘é“¾æ¥è·å–æ–¹æ³• def get_redirected_url(self, url): head = self.get_random_UserAgent.agent_head() # æ„é€ scrapyçš„responseå¯¹è±¡ã€‚ req_response = requests.get(url, headers=head) response = HtmlResponse(url=url, body=req_response.content) # å¤„ç†é‡å®šå‘ redirected_url = response.xpath(\"//a[@class='btn-redir']//@href\").get() # å¦‚æœæŠ“å–æˆåŠŸï¼Œåˆ™è¯´æ˜è¿›è¡Œäº†é‡å®šå‘ï¼Œå‘é€ä¸€ä¸ªæ–°çš„è¯·æ±‚è€Œä¸æ˜¯å°†å¾—åˆ°çš„å“åº”å‘ç»™çˆ¬è™«ç¨‹åº if redirected_url: print(\"é‡å®šå‘\", redirected_url, \"*\" * 200) return redirected_url return url # Scrapyæ¡†æ¶é»˜è®¤è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚response.bodyæ˜¯htmlæºç  def parse(self, response): df = pd.read_csv('esf_info.csv') esfhousenews_urls = df[['esfhousenews_url']].values provinces = df[['province']].values cities = df[['city']].values k = 1 for u, p, c in zip(esfhousenews_urls, provinces, cities): if k \u003e 5: break esfhousenews_url = u[0] province = p[0] city = c[0] try: directed_url = self.get_redirected_url(esfhousenews_url) yield scrapy.Request(url=directed_url, callback=self.parse_esfhouseInfo, meta={\"info\": (province, city, directed_url)}, dont_filter=True) except Exception as ex: print(\"æ•è·å¼‚å¸¸%s\" % ex) # å¯¹äºäºŒæ‰‹æˆ¿è¯¦æƒ…é¡µé¢çš„è§£æ def parse_esfhouseInfo(self, response): province, city, esf_link = response.meta.get(\"info\") print( \"-------------------------------------------------å¯¹äº%säºŒæ‰‹æˆ¿ %s è¯¦æƒ…é¡µçš„è§£æ--------------------------------------------------\" % ( province + ' ' + city, esf_link)) # éªŒè¯ç  response_url = str(response.url) print(response) house_info_divs = response.xpath( \"//div[contains(@class, 'tr-line clearfix')]//div[contains(@class,'trl-item1')]\") if 'captcha' in response_url and not house_info_divs: with open('captcha.txt', 'a', encoding='utf-8') as f: f.write(response_url + '\\n') print('å¤„ç†éªŒè¯ç ', '*' * 200) deal_captcha = DealCaptcha(parse_target='EsfInfoItem', url=response_url) item = deal_captcha.run() if item: item['province'] = province item['city'] = city item['esf_link'] = esf_link return item elif house_info_divs: print('é“¾æ¥è§£ææˆåŠŸäº†', '*' * 200) item = EsfInfoItem() item['province'] = province item['city'] = city item['esf_link'] = esf_link title = response.xpath(\"//span[@class='tit_text']//text()\").get() if title: item['title'] = title.strip() if len(house_info_divs) == 6: # æˆ·å‹ room_type = house_info_divs[0].xpath(\".//div[@class='tt']//text()\").get() if room_type: item['room_type'] = room_type.strip() # é¢ç§¯ area = house_info_divs[1].xpath(\".//div[@class='tt']//text()\").get() if area: item['area'] = area.strip() # å•ä»· unit_price = house_info_divs[2].xpath(\".//div[@class='tt']//text()\").get() if unit_price: item['unit_price'] = unit_price.strip() # æœå‘ orientation = house_info_divs[3].xpath(\".//div[@class='tt']//text()\").get() if orientation: item['orientation'] = orientation.strip() # æ¥¼å±‚ floor_info = house_info_divs[4].xpath(\".//div[@class='tt']//text()\").get() floor_info_a = house_info_divs[4].xpath(\".//div[@class='tt']//a//text()\").get() floor_type = house_info_divs[4].xpath(\".//div[@class='font14']//text()\").get() if floor_info_a and floor_type: item['floor'] = floor_info_a.strip() + ',' + floor_type.strip() elif floor_info and floor_type: item['floor'] = floor_info.strip() + ',' + floor_type.strip() # è£…ä¿® decoration = house_info_divs[5].xpath(\".//div[@class='tt']//text()\").get() decoration_a = house_info_divs[5].xpath(\".//div[@class='tt']/a//text()\").get() if decoration_a: item['decoration'] = decoration_a.strip() elif decoration: item['decoration'] = decoration.strip() # æ€»ä»· total_price = response.xpath(\"//div[contains(@class, 'price_esf')]/i//text()\").get() if total_price: item['total_price'] = total_price.strip() + 'ä¸‡å…ƒ' # æˆ¿æºä¿¡æ¯ xpath_house_info_lis = response.xpath( \"//div[contains(@class, 'content-item fydes-item')]//div[contains(@class, 'cont clearfix')]//div\") for div in xpath_house_info_lis: if len(div.xpath(\".//span//text()\")) == 2: # å»ºç­‘å¹´ä»£ if div.xpath(\".//span//text()\")[0].get().strip()","date":"2022-04-09","objectID":"/scrapy/:6:3","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#ç®¡é“æ–‡ä»¶"},{"categories":["tutorial"],"content":" ä¸»è¦ç±»å®šä¹‰ çˆ¬è™«æ–‡ä»¶ class EsfSpider(scrapy.Spider): # åˆ«åï¼Œåç»­ç”¨æ¥å…¶å¯åŠ¨çˆ¬è™« name = 'esf' # å…è®¸çˆ¬å–çš„é¡µé¢ allowed_domains = ['fang.com'] # å¯åŠ¨çˆ¬å–çš„é¡µé¢ start_urls = ['https://www.fang.com/SoufunFamily.htm'] # è·å–éšæœºè¯·æ±‚å¤´ get_random_UserAgent = GetRandomUserAgent() # é‡å®šå‘é“¾æ¥è·å–æ–¹æ³• def get_redirected_url(self, url): head = self.get_random_UserAgent.agent_head() # æ„é€ scrapyçš„responseå¯¹è±¡ã€‚ req_response = requests.get(url, headers=head) response = HtmlResponse(url=url, body=req_response.content) # å¤„ç†é‡å®šå‘ redirected_url = response.xpath(\"//a[@class='btn-redir']//@href\").get() # å¦‚æœæŠ“å–æˆåŠŸï¼Œåˆ™è¯´æ˜è¿›è¡Œäº†é‡å®šå‘ï¼Œå‘é€ä¸€ä¸ªæ–°çš„è¯·æ±‚è€Œä¸æ˜¯å°†å¾—åˆ°çš„å“åº”å‘ç»™çˆ¬è™«ç¨‹åº if redirected_url: print(\"é‡å®šå‘\", redirected_url, \"*\" * 200) return redirected_url return url # Scrapyæ¡†æ¶é»˜è®¤è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚response.bodyæ˜¯htmlæºç  def parse(self, response): df = pd.read_csv('esf_info.csv') esfhousenews_urls = df[['esfhousenews_url']].values provinces = df[['province']].values cities = df[['city']].values k = 1 for u, p, c in zip(esfhousenews_urls, provinces, cities): if k \u003e 5: break esfhousenews_url = u[0] province = p[0] city = c[0] try: directed_url = self.get_redirected_url(esfhousenews_url) yield scrapy.Request(url=directed_url, callback=self.parse_esfhouseInfo, meta={\"info\": (province, city, directed_url)}, dont_filter=True) except Exception as ex: print(\"æ•è·å¼‚å¸¸%s\" % ex) # å¯¹äºäºŒæ‰‹æˆ¿è¯¦æƒ…é¡µé¢çš„è§£æ def parse_esfhouseInfo(self, response): province, city, esf_link = response.meta.get(\"info\") print( \"-------------------------------------------------å¯¹äº%säºŒæ‰‹æˆ¿ %s è¯¦æƒ…é¡µçš„è§£æ--------------------------------------------------\" % ( province + ' ' + city, esf_link)) # éªŒè¯ç  response_url = str(response.url) print(response) house_info_divs = response.xpath( \"//div[contains(@class, 'tr-line clearfix')]//div[contains(@class,'trl-item1')]\") if 'captcha' in response_url and not house_info_divs: with open('captcha.txt', 'a', encoding='utf-8') as f: f.write(response_url + '\\n') print('å¤„ç†éªŒè¯ç ', '*' * 200) deal_captcha = DealCaptcha(parse_target='EsfInfoItem', url=response_url) item = deal_captcha.run() if item: item['province'] = province item['city'] = city item['esf_link'] = esf_link return item elif house_info_divs: print('é“¾æ¥è§£ææˆåŠŸäº†', '*' * 200) item = EsfInfoItem() item['province'] = province item['city'] = city item['esf_link'] = esf_link title = response.xpath(\"//span[@class='tit_text']//text()\").get() if title: item['title'] = title.strip() if len(house_info_divs) == 6: # æˆ·å‹ room_type = house_info_divs[0].xpath(\".//div[@class='tt']//text()\").get() if room_type: item['room_type'] = room_type.strip() # é¢ç§¯ area = house_info_divs[1].xpath(\".//div[@class='tt']//text()\").get() if area: item['area'] = area.strip() # å•ä»· unit_price = house_info_divs[2].xpath(\".//div[@class='tt']//text()\").get() if unit_price: item['unit_price'] = unit_price.strip() # æœå‘ orientation = house_info_divs[3].xpath(\".//div[@class='tt']//text()\").get() if orientation: item['orientation'] = orientation.strip() # æ¥¼å±‚ floor_info = house_info_divs[4].xpath(\".//div[@class='tt']//text()\").get() floor_info_a = house_info_divs[4].xpath(\".//div[@class='tt']//a//text()\").get() floor_type = house_info_divs[4].xpath(\".//div[@class='font14']//text()\").get() if floor_info_a and floor_type: item['floor'] = floor_info_a.strip() + ',' + floor_type.strip() elif floor_info and floor_type: item['floor'] = floor_info.strip() + ',' + floor_type.strip() # è£…ä¿® decoration = house_info_divs[5].xpath(\".//div[@class='tt']//text()\").get() decoration_a = house_info_divs[5].xpath(\".//div[@class='tt']/a//text()\").get() if decoration_a: item['decoration'] = decoration_a.strip() elif decoration: item['decoration'] = decoration.strip() # æ€»ä»· total_price = response.xpath(\"//div[contains(@class, 'price_esf')]/i//text()\").get() if total_price: item['total_price'] = total_price.strip() + 'ä¸‡å…ƒ' # æˆ¿æºä¿¡æ¯ xpath_house_info_lis = response.xpath( \"//div[contains(@class, 'content-item fydes-item')]//div[contains(@class, 'cont clearfix')]//div\") for div in xpath_house_info_lis: if len(div.xpath(\".//span//text()\")) == 2: # å»ºç­‘å¹´ä»£ if div.xpath(\".//span//text()\")[0].get().strip()","date":"2022-04-09","objectID":"/scrapy/:6:3","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#itemæ–‡ä»¶"},{"categories":["tutorial"],"content":" çˆ¬è™«ç¨‹åºè¿è¡Œç»“æœç¤ºä¾‹ è§£æç¤ºä¾‹ å…¥å£é¡µè§£æç¤ºä¾‹ åˆ—è¡¨é¡µè§£æç¤ºä¾‹ è¯¦æƒ…é¡µè§£æç¤ºä¾‹ éªŒè¯ç é€šè¿‡ç¤ºä¾‹ OpenCVç›®æ ‡å›¾åƒç¤ºä¾‹ ","date":"2022-04-09","objectID":"/scrapy/:6:4","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#çˆ¬è™«ç¨‹åºè¿è¡Œç»“æœç¤ºä¾‹"},{"categories":["tutorial"],"content":" çˆ¬è™«ç¨‹åºè¿è¡Œç»“æœç¤ºä¾‹ è§£æç¤ºä¾‹ å…¥å£é¡µè§£æç¤ºä¾‹ åˆ—è¡¨é¡µè§£æç¤ºä¾‹ è¯¦æƒ…é¡µè§£æç¤ºä¾‹ éªŒè¯ç é€šè¿‡ç¤ºä¾‹ OpenCVç›®æ ‡å›¾åƒç¤ºä¾‹ ","date":"2022-04-09","objectID":"/scrapy/:6:4","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#è§£æç¤ºä¾‹"},{"categories":["tutorial"],"content":" å‚è€ƒèµ„æ–™ https://www.bilibili.com/video/BV1jx411b7E3?p=1 ","date":"2022-04-09","objectID":"/scrapy/:0:0","series":null,"tags":["Scrapy2.6"],"title":"Scrapyå®æˆ˜æ¡ˆä¾‹â€”â€”æˆ¿å¤©ä¸‹","uri":"/scrapy/#å‚è€ƒèµ„æ–™"},{"categories":[],"content":" è¯—é›† ","date":"2022-04-04","objectID":"/collection/:0:0","series":[],"tags":[],"title":"æ”¶è—","uri":"/collection/#è¯—é›†"},{"categories":[],"content":" å¤–","date":"2022-04-04","objectID":"/collection/:1:0","series":[],"tags":[],"title":"æ”¶è—","uri":"/collection/#å¤–"},{"categories":[],"content":" è¿‘ As I Began to Love Myselfâ€œAs I began to love myself I found that anguish and emotional suffering are only warning signs that I was living against my own truth. Today, I know, this is â€œAUTHENTICITYâ€. As I began to love myself I understood how much it can offend somebody if I try to force my desires on this person, even though I knew the time was not right and the person was not ready for it, and even though this person was me. Today I call it â€œRESPECTâ€. As I began to love myself I stopped craving for a different life, and I could see that everything that surrounded me was inviting me to grow. Today I call it â€œMATURITYâ€. As I began to love myself I understood that at any circumstance, I am in the right place at the right time, and everything happens at the exactly right moment. So I could be calm. Today I call it â€œSELF-CONFIDENCEâ€. As I began to love myself I quit stealing my own time, and I stopped designing huge projects for the future. Today, I only do what brings me joy and happiness, things I love to do and that make my heart cheer, and I do them in my own way and in my own rhythm. Today I call it â€œSIMPLICITYâ€. As I began to love myself I freed myself of anything that is no good for my health â€“ food, people, things, situations, and everything that drew me down and away from myself. At first I called this attitude a healthy egoism. Today I know it is â€œLOVE OF ONESELFâ€. As I began to love myself I quit trying to always be right, and ever since I was wrong less of the time. Today I discovered that is â€œMODESTYâ€. As I began to love myself I refused to go on living in the past and worrying about the future. Now, I only live for the moment, where everything is happening. Today I live each day, day by day, and I call it â€œFULFILLMENTâ€. As I began to love myself I recognized that my mind can disturb me and it can make me sick. But as I connected it to my heart, my mind became a valuable ally. Today I call this connection â€œWISDOM OF THE HEARTâ€. We no longer need to fear arguments, confrontations or any kind of problems with ourselves or others. Even stars collide, and out of their crashing new worlds are born. Today I know â€œTHAT IS LIFEâ€!â€ â€• Charlie Chaplin å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±ï¼Œæˆ‘å‘ç°ç—›è‹¦å’Œæƒ…æ„Ÿçš„æŠ˜ç£¨ä»…ä»…æ˜¯æé†’çš„ä¿¡å·ï¼Œæé†’æˆ‘ï¼Œè‡ªå·±æ­£åœ¨èƒŒç¦»ç€çœŸå®çš„è‡ªå·±è€Œæ´»ã€‚å¦‚ä»Šï¼Œæˆ‘æ‡‚å¾—äº†ï¼Œè¿™å«åšï¼ŒçœŸå®ã€‚ å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±ï¼Œæˆ‘æ‡‚å¾—å¦‚æœæˆ‘è¯•ç€å°†æˆ‘çš„æ„å¿—å¼ºåŠ äºäººï¼Œè¿™å°†æ˜¯ä½•ç­‰çš„å†’çŠ¯ï¼Œå³ä¾¿åœ¨è¿™æ—¶æˆ‘çŸ¥é“ï¼Œæ—¶æœºå°šæœªæˆç†Ÿï¼Œè€Œä»–ï¼Œä¹Ÿå°šæœªåšå¥½å‡†å¤‡ï¼Œå³ä¾¿è¿™ä¸ªäººï¼Œå°±æ˜¯æˆ‘ã€‚ä»Šå¤©ï¼Œæˆ‘æŠŠå®ƒå«åšï¼Œå°Šé‡ã€‚ å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±ï¼Œæˆ‘ä¸å†æ¸´æ±‚ä¸€ä¸ªä¸ä¸€æ ·çš„äººç”Ÿï¼Œå¹¶ä¸”æˆ‘èƒ½å¤Ÿæ˜ç™½ï¼Œæ‰€æœ‰å‘ç”Ÿåœ¨æˆ‘èº«è¾¹çš„äº‹ï¼Œéƒ½æ˜¯å¯¹æˆ‘æˆé•¿çš„é‚€çº¦ã€‚å¦‚ä»Šï¼Œæˆ‘æŠŠå®ƒå«åšï¼Œæˆç†Ÿã€‚ å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±ï¼Œæˆ‘æ˜ç™½æ— è®ºåœ¨ä½•æ—¶ï¼Œæˆ‘éƒ½å¤„äºæ­£ç¡®çš„æ—¶é—´åœ¨æ­£ç¡®çš„åœ°ç‚¹ï¼Œæ‰€æœ‰ä¸€åˆ‡å‘ç”Ÿçš„æ—¶æœºéƒ½æ°åˆ°å¥½å¤„ã€‚å¦‚ä»Šï¼Œæˆ‘ç§°ä¹‹ä¸ºï¼Œè‡ªä¿¡ã€‚ å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±ï¼Œæˆ‘ä¸å†æµªè´¹è‡ªå·±çš„æ—¶é—´ï¼Œå¹¶åœæ­¢å¯¹æœªæ¥è¿œå¤§çƒ™é¥¼çš„è®¾è®¡ã€‚å¦‚ä»Šï¼Œæˆ‘ä»…ä»…åšèƒ½å¤Ÿä¸ºæˆ‘å¸¦æ¥æ„‰æ‚¦å’Œå¹¸ç¦çš„äº‹æƒ…ï¼Œæˆ‘ä¹æ„å»åšï¼Œå¹¶èƒ½å¤Ÿä½¿æˆ‘çš„å¿ƒä¸ºä¹‹é¼“èˆçš„äº‹æƒ…ï¼Œç”¨æˆ‘è‡ªå·±çš„æ–¹å¼ï¼Œä¿æŒæˆ‘è‡ªå·±çš„èŠ‚å¥ã€‚ä»Šå¤©ï¼Œæˆ‘ç§°ä¹‹ä¸ºï¼Œç®€å•ã€‚ å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±ï¼Œæˆ‘ä½¿è‡ªå·±è¿œç¦»æ‰€æœ‰æœ‰å®³å¥åº·çš„ä¸œè¥¿â€”â€”é£Ÿç‰©ï¼Œäººï¼Œäº‹æƒ…ï¼Œåœºæ™¯ï¼Œä»¥åŠä¸€åˆ‡æ‹–ç´¯æˆ‘ï¼ŒèƒŒç¦»çœŸæˆ‘çš„ä¸œè¥¿ã€‚èµ·åˆï¼Œæˆ‘æŠŠå®ƒå«åšå¥åº·çš„åˆ©å·±ä¸»ä¹‰ã€‚å¦‚ä»Šæˆ‘æ‡‚å¾—ï¼Œè¿™æ˜¯ è‡ªçˆ±ã€‚ å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±ï¼Œæˆ‘åœæ­¢å°è¯•æ°¸ä¸å¤±è´¥çš„è¡Œä¸ºï¼Œè€Œè‡ªæ­¤æˆ‘åè€Œæ›´å°‘çŠ¯é”™äº†ã€‚å¦‚ä»Šï¼Œæˆ‘ç§°ä¹‹ä¸ºï¼Œè°¦é€Šã€‚ å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±ï¼Œæˆ‘æ‹’ç»æ´»åœ¨è¿‡å»æˆ–å¯¹æœªæ¥æ»¡å¿ƒç„¦è™‘ã€‚ç°åœ¨ï¼Œæˆ‘åªæ´»åœ¨å½“ä¸‹ï¼Œä¸€åˆ‡æ­£åœ¨å‘ç”Ÿçš„åœ°æ–¹ã€‚ä»Šå¤©ï¼Œæˆ‘è¿‡å¥½æ¯ä¸€å¤©ï¼Œæ—¥å¤ä¸€æ—¥ï¼Œè€Œæˆ‘ç§°ä¹‹ä¸ºï¼Œå¯Œè¶³ã€‚ å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±ï¼Œæˆ‘æ„è¯†åˆ°ï¼Œæˆ‘çš„æ€æƒ³å¯ä»¥æ‰°ä¹±æˆ‘ï¼Œå¹¶èƒ½ä½¿æˆ‘å¤±å»æ´»åŠ›ã€‚ä½†å½“æˆ‘å°†å®ƒä¸æˆ‘çš„å¿ƒçµç›¸è¿ï¼Œ æˆ‘çš„æ€ç»ªæ‘‡èº«ä¸€å˜ï¼Œæˆä¸ºäº†æˆ‘å®è´µçš„ç›Ÿå‹ã€‚ä»Šå¤©æˆ‘ç§°è¿™ç§è¿ç»“ä¸ºï¼Œå¿ƒçµçš„æ™ºæ…§ã€‚ æˆ‘ä»¬å†ä¹Ÿæ— éœ€å®³æ€•äº‰æ‰§ï¼Œå¯¹æŠ—ï¼Œæˆ–è€…å…¶ä»–ä½•ç§ä¸æˆ‘ä»¬è‡ªå·±æˆ–ä»–äººä¹‹é—´çš„é—®é¢˜ã€‚å³ä¾¿æ˜¯è¡Œæ˜Ÿç¢°æ’ï¼Œä¹Ÿä¼šåœ¨ä»–ä»¬çš„æ’å‡»è¿‡åï¼Œå‚¬ç”Ÿå‡ºä¸€ä¸ªå…¨æ–°çš„ä¸–ç•Œã€‚ä»Šå¤©æˆ‘æ˜ç™½äº†ï¼Œè¿™å°±æ˜¯ç”Ÿæ´»ï¼ â€”â€”æŸ¥ç†Â·å“åˆ«æ— (dp0dè¯‘) ","date":"2022-04-04","objectID":"/collection/:1:1","series":[],"tags":[],"title":"æ”¶è—","uri":"/collection/#è¿‘"},{"categories":[],"content":" è¿‘ As I Began to Love Myselfâ€œAs I began to love myself I found that anguish and emotional suffering are only warning signs that I was living against my own truth. Today, I know, this is â€œAUTHENTICITYâ€. As I began to love myself I understood how much it can offend somebody if I try to force my desires on this person, even though I knew the time was not right and the person was not ready for it, and even though this person was me. Today I call it â€œRESPECTâ€. As I began to love myself I stopped craving for a different life, and I could see that everything that surrounded me was inviting me to grow. Today I call it â€œMATURITYâ€. As I began to love myself I understood that at any circumstance, I am in the right place at the right time, and everything happens at the exactly right moment. So I could be calm. Today I call it â€œSELF-CONFIDENCEâ€. As I began to love myself I quit stealing my own time, and I stopped designing huge projects for the future. Today, I only do what brings me joy and happiness, things I love to do and that make my heart cheer, and I do them in my own way and in my own rhythm. Today I call it â€œSIMPLICITYâ€. As I began to love myself I freed myself of anything that is no good for my health â€“ food, people, things, situations, and everything that drew me down and away from myself. At first I called this attitude a healthy egoism. Today I know it is â€œLOVE OF ONESELFâ€. As I began to love myself I quit trying to always be right, and ever since I was wrong less of the time. Today I discovered that is â€œMODESTYâ€. As I began to love myself I refused to go on living in the past and worrying about the future. Now, I only live for the moment, where everything is happening. Today I live each day, day by day, and I call it â€œFULFILLMENTâ€. As I began to love myself I recognized that my mind can disturb me and it can make me sick. But as I connected it to my heart, my mind became a valuable ally. Today I call this connection â€œWISDOM OF THE HEARTâ€. We no longer need to fear arguments, confrontations or any kind of problems with ourselves or others. Even stars collide, and out of their crashing new worlds are born. Today I know â€œTHAT IS LIFEâ€!â€ â€• Charlie Chaplin å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±ï¼Œæˆ‘å‘ç°ç—›è‹¦å’Œæƒ…æ„Ÿçš„æŠ˜ç£¨ä»…ä»…æ˜¯æé†’çš„ä¿¡å·ï¼Œæé†’æˆ‘ï¼Œè‡ªå·±æ­£åœ¨èƒŒç¦»ç€çœŸå®çš„è‡ªå·±è€Œæ´»ã€‚å¦‚ä»Šï¼Œæˆ‘æ‡‚å¾—äº†ï¼Œè¿™å«åšï¼ŒçœŸå®ã€‚ å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±ï¼Œæˆ‘æ‡‚å¾—å¦‚æœæˆ‘è¯•ç€å°†æˆ‘çš„æ„å¿—å¼ºåŠ äºäººï¼Œè¿™å°†æ˜¯ä½•ç­‰çš„å†’çŠ¯ï¼Œå³ä¾¿åœ¨è¿™æ—¶æˆ‘çŸ¥é“ï¼Œæ—¶æœºå°šæœªæˆç†Ÿï¼Œè€Œä»–ï¼Œä¹Ÿå°šæœªåšå¥½å‡†å¤‡ï¼Œå³ä¾¿è¿™ä¸ªäººï¼Œå°±æ˜¯æˆ‘ã€‚ä»Šå¤©ï¼Œæˆ‘æŠŠå®ƒå«åšï¼Œå°Šé‡ã€‚ å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±ï¼Œæˆ‘ä¸å†æ¸´æ±‚ä¸€ä¸ªä¸ä¸€æ ·çš„äººç”Ÿï¼Œå¹¶ä¸”æˆ‘èƒ½å¤Ÿæ˜ç™½ï¼Œæ‰€æœ‰å‘ç”Ÿåœ¨æˆ‘èº«è¾¹çš„äº‹ï¼Œéƒ½æ˜¯å¯¹æˆ‘æˆé•¿çš„é‚€çº¦ã€‚å¦‚ä»Šï¼Œæˆ‘æŠŠå®ƒå«åšï¼Œæˆç†Ÿã€‚ å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±ï¼Œæˆ‘æ˜ç™½æ— è®ºåœ¨ä½•æ—¶ï¼Œæˆ‘éƒ½å¤„äºæ­£ç¡®çš„æ—¶é—´åœ¨æ­£ç¡®çš„åœ°ç‚¹ï¼Œæ‰€æœ‰ä¸€åˆ‡å‘ç”Ÿçš„æ—¶æœºéƒ½æ°åˆ°å¥½å¤„ã€‚å¦‚ä»Šï¼Œæˆ‘ç§°ä¹‹ä¸ºï¼Œè‡ªä¿¡ã€‚ å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±ï¼Œæˆ‘ä¸å†æµªè´¹è‡ªå·±çš„æ—¶é—´ï¼Œå¹¶åœæ­¢å¯¹æœªæ¥è¿œå¤§çƒ™é¥¼çš„è®¾è®¡ã€‚å¦‚ä»Šï¼Œæˆ‘ä»…ä»…åšèƒ½å¤Ÿä¸ºæˆ‘å¸¦æ¥æ„‰æ‚¦å’Œå¹¸ç¦çš„äº‹æƒ…ï¼Œæˆ‘ä¹æ„å»åšï¼Œå¹¶èƒ½å¤Ÿä½¿æˆ‘çš„å¿ƒä¸ºä¹‹é¼“èˆçš„äº‹æƒ…ï¼Œç”¨æˆ‘è‡ªå·±çš„æ–¹å¼ï¼Œä¿æŒæˆ‘è‡ªå·±çš„èŠ‚å¥ã€‚ä»Šå¤©ï¼Œæˆ‘ç§°ä¹‹ä¸ºï¼Œç®€å•ã€‚ å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±ï¼Œæˆ‘ä½¿è‡ªå·±è¿œç¦»æ‰€æœ‰æœ‰å®³å¥åº·çš„ä¸œè¥¿â€”â€”é£Ÿç‰©ï¼Œäººï¼Œäº‹æƒ…ï¼Œåœºæ™¯ï¼Œä»¥åŠä¸€åˆ‡æ‹–ç´¯æˆ‘ï¼ŒèƒŒç¦»çœŸæˆ‘çš„ä¸œè¥¿ã€‚èµ·åˆï¼Œæˆ‘æŠŠå®ƒå«åšå¥åº·çš„åˆ©å·±ä¸»ä¹‰ã€‚å¦‚ä»Šæˆ‘æ‡‚å¾—ï¼Œè¿™æ˜¯ è‡ªçˆ±ã€‚ å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±ï¼Œæˆ‘åœæ­¢å°è¯•æ°¸ä¸å¤±è´¥çš„è¡Œä¸ºï¼Œè€Œè‡ªæ­¤æˆ‘åè€Œæ›´å°‘çŠ¯é”™äº†ã€‚å¦‚ä»Šï¼Œæˆ‘ç§°ä¹‹ä¸ºï¼Œè°¦é€Šã€‚ å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±ï¼Œæˆ‘æ‹’ç»æ´»åœ¨è¿‡å»æˆ–å¯¹æœªæ¥æ»¡å¿ƒç„¦è™‘ã€‚ç°åœ¨ï¼Œæˆ‘åªæ´»åœ¨å½“ä¸‹ï¼Œä¸€åˆ‡æ­£åœ¨å‘ç”Ÿçš„åœ°æ–¹ã€‚ä»Šå¤©ï¼Œæˆ‘è¿‡å¥½æ¯ä¸€å¤©ï¼Œæ—¥å¤ä¸€æ—¥ï¼Œè€Œæˆ‘ç§°ä¹‹ä¸ºï¼Œå¯Œè¶³ã€‚ å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±ï¼Œæˆ‘æ„è¯†åˆ°ï¼Œæˆ‘çš„æ€æƒ³å¯ä»¥æ‰°ä¹±æˆ‘ï¼Œå¹¶èƒ½ä½¿æˆ‘å¤±å»æ´»åŠ›ã€‚ä½†å½“æˆ‘å°†å®ƒä¸æˆ‘çš„å¿ƒçµç›¸è¿ï¼Œ æˆ‘çš„æ€ç»ªæ‘‡èº«ä¸€å˜ï¼Œæˆä¸ºäº†æˆ‘å®è´µçš„ç›Ÿå‹ã€‚ä»Šå¤©æˆ‘ç§°è¿™ç§è¿ç»“ä¸ºï¼Œå¿ƒçµçš„æ™ºæ…§ã€‚ æˆ‘ä»¬å†ä¹Ÿæ— éœ€å®³æ€•äº‰æ‰§ï¼Œå¯¹æŠ—ï¼Œæˆ–è€…å…¶ä»–ä½•ç§ä¸æˆ‘ä»¬è‡ªå·±æˆ–ä»–äººä¹‹é—´çš„é—®é¢˜ã€‚å³ä¾¿æ˜¯è¡Œæ˜Ÿç¢°æ’ï¼Œä¹Ÿä¼šåœ¨ä»–ä»¬çš„æ’å‡»è¿‡åï¼Œå‚¬ç”Ÿå‡ºä¸€ä¸ªå…¨æ–°çš„ä¸–ç•Œã€‚ä»Šå¤©æˆ‘æ˜ç™½äº†ï¼Œè¿™å°±æ˜¯ç”Ÿæ´»ï¼ â€”â€”æŸ¥ç†Â·å“åˆ«æ— (dp0dè¯‘) ","date":"2022-04-04","objectID":"/collection/:1:1","series":[],"tags":[],"title":"æ”¶è—","uri":"/collection/#as-i-began-to-love-myself"},{"categories":[],"content":" è¿‘ As I Began to Love Myselfâ€œAs I began to love myself I found that anguish and emotional suffering are only warning signs that I was living against my own truth. Today, I know, this is â€œAUTHENTICITYâ€. As I began to love myself I understood how much it can offend somebody if I try to force my desires on this person, even though I knew the time was not right and the person was not ready for it, and even though this person was me. Today I call it â€œRESPECTâ€. As I began to love myself I stopped craving for a different life, and I could see that everything that surrounded me was inviting me to grow. Today I call it â€œMATURITYâ€. As I began to love myself I understood that at any circumstance, I am in the right place at the right time, and everything happens at the exactly right moment. So I could be calm. Today I call it â€œSELF-CONFIDENCEâ€. As I began to love myself I quit stealing my own time, and I stopped designing huge projects for the future. Today, I only do what brings me joy and happiness, things I love to do and that make my heart cheer, and I do them in my own way and in my own rhythm. Today I call it â€œSIMPLICITYâ€. As I began to love myself I freed myself of anything that is no good for my health â€“ food, people, things, situations, and everything that drew me down and away from myself. At first I called this attitude a healthy egoism. Today I know it is â€œLOVE OF ONESELFâ€. As I began to love myself I quit trying to always be right, and ever since I was wrong less of the time. Today I discovered that is â€œMODESTYâ€. As I began to love myself I refused to go on living in the past and worrying about the future. Now, I only live for the moment, where everything is happening. Today I live each day, day by day, and I call it â€œFULFILLMENTâ€. As I began to love myself I recognized that my mind can disturb me and it can make me sick. But as I connected it to my heart, my mind became a valuable ally. Today I call this connection â€œWISDOM OF THE HEARTâ€. We no longer need to fear arguments, confrontations or any kind of problems with ourselves or others. Even stars collide, and out of their crashing new worlds are born. Today I know â€œTHAT IS LIFEâ€!â€ â€• Charlie Chaplin å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±ï¼Œæˆ‘å‘ç°ç—›è‹¦å’Œæƒ…æ„Ÿçš„æŠ˜ç£¨ä»…ä»…æ˜¯æé†’çš„ä¿¡å·ï¼Œæé†’æˆ‘ï¼Œè‡ªå·±æ­£åœ¨èƒŒç¦»ç€çœŸå®çš„è‡ªå·±è€Œæ´»ã€‚å¦‚ä»Šï¼Œæˆ‘æ‡‚å¾—äº†ï¼Œè¿™å«åšï¼ŒçœŸå®ã€‚ å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±ï¼Œæˆ‘æ‡‚å¾—å¦‚æœæˆ‘è¯•ç€å°†æˆ‘çš„æ„å¿—å¼ºåŠ äºäººï¼Œè¿™å°†æ˜¯ä½•ç­‰çš„å†’çŠ¯ï¼Œå³ä¾¿åœ¨è¿™æ—¶æˆ‘çŸ¥é“ï¼Œæ—¶æœºå°šæœªæˆç†Ÿï¼Œè€Œä»–ï¼Œä¹Ÿå°šæœªåšå¥½å‡†å¤‡ï¼Œå³ä¾¿è¿™ä¸ªäººï¼Œå°±æ˜¯æˆ‘ã€‚ä»Šå¤©ï¼Œæˆ‘æŠŠå®ƒå«åšï¼Œå°Šé‡ã€‚ å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±ï¼Œæˆ‘ä¸å†æ¸´æ±‚ä¸€ä¸ªä¸ä¸€æ ·çš„äººç”Ÿï¼Œå¹¶ä¸”æˆ‘èƒ½å¤Ÿæ˜ç™½ï¼Œæ‰€æœ‰å‘ç”Ÿåœ¨æˆ‘èº«è¾¹çš„äº‹ï¼Œéƒ½æ˜¯å¯¹æˆ‘æˆé•¿çš„é‚€çº¦ã€‚å¦‚ä»Šï¼Œæˆ‘æŠŠå®ƒå«åšï¼Œæˆç†Ÿã€‚ å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±ï¼Œæˆ‘æ˜ç™½æ— è®ºåœ¨ä½•æ—¶ï¼Œæˆ‘éƒ½å¤„äºæ­£ç¡®çš„æ—¶é—´åœ¨æ­£ç¡®çš„åœ°ç‚¹ï¼Œæ‰€æœ‰ä¸€åˆ‡å‘ç”Ÿçš„æ—¶æœºéƒ½æ°åˆ°å¥½å¤„ã€‚å¦‚ä»Šï¼Œæˆ‘ç§°ä¹‹ä¸ºï¼Œè‡ªä¿¡ã€‚ å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±ï¼Œæˆ‘ä¸å†æµªè´¹è‡ªå·±çš„æ—¶é—´ï¼Œå¹¶åœæ­¢å¯¹æœªæ¥è¿œå¤§çƒ™é¥¼çš„è®¾è®¡ã€‚å¦‚ä»Šï¼Œæˆ‘ä»…ä»…åšèƒ½å¤Ÿä¸ºæˆ‘å¸¦æ¥æ„‰æ‚¦å’Œå¹¸ç¦çš„äº‹æƒ…ï¼Œæˆ‘ä¹æ„å»åšï¼Œå¹¶èƒ½å¤Ÿä½¿æˆ‘çš„å¿ƒä¸ºä¹‹é¼“èˆçš„äº‹æƒ…ï¼Œç”¨æˆ‘è‡ªå·±çš„æ–¹å¼ï¼Œä¿æŒæˆ‘è‡ªå·±çš„èŠ‚å¥ã€‚ä»Šå¤©ï¼Œæˆ‘ç§°ä¹‹ä¸ºï¼Œç®€å•ã€‚ å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±ï¼Œæˆ‘ä½¿è‡ªå·±è¿œç¦»æ‰€æœ‰æœ‰å®³å¥åº·çš„ä¸œè¥¿â€”â€”é£Ÿç‰©ï¼Œäººï¼Œäº‹æƒ…ï¼Œåœºæ™¯ï¼Œä»¥åŠä¸€åˆ‡æ‹–ç´¯æˆ‘ï¼ŒèƒŒç¦»çœŸæˆ‘çš„ä¸œè¥¿ã€‚èµ·åˆï¼Œæˆ‘æŠŠå®ƒå«åšå¥åº·çš„åˆ©å·±ä¸»ä¹‰ã€‚å¦‚ä»Šæˆ‘æ‡‚å¾—ï¼Œè¿™æ˜¯ è‡ªçˆ±ã€‚ å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±ï¼Œæˆ‘åœæ­¢å°è¯•æ°¸ä¸å¤±è´¥çš„è¡Œä¸ºï¼Œè€Œè‡ªæ­¤æˆ‘åè€Œæ›´å°‘çŠ¯é”™äº†ã€‚å¦‚ä»Šï¼Œæˆ‘ç§°ä¹‹ä¸ºï¼Œè°¦é€Šã€‚ å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±ï¼Œæˆ‘æ‹’ç»æ´»åœ¨è¿‡å»æˆ–å¯¹æœªæ¥æ»¡å¿ƒç„¦è™‘ã€‚ç°åœ¨ï¼Œæˆ‘åªæ´»åœ¨å½“ä¸‹ï¼Œä¸€åˆ‡æ­£åœ¨å‘ç”Ÿçš„åœ°æ–¹ã€‚ä»Šå¤©ï¼Œæˆ‘è¿‡å¥½æ¯ä¸€å¤©ï¼Œæ—¥å¤ä¸€æ—¥ï¼Œè€Œæˆ‘ç§°ä¹‹ä¸ºï¼Œå¯Œè¶³ã€‚ å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±ï¼Œæˆ‘æ„è¯†åˆ°ï¼Œæˆ‘çš„æ€æƒ³å¯ä»¥æ‰°ä¹±æˆ‘ï¼Œå¹¶èƒ½ä½¿æˆ‘å¤±å»æ´»åŠ›ã€‚ä½†å½“æˆ‘å°†å®ƒä¸æˆ‘çš„å¿ƒçµç›¸è¿ï¼Œ æˆ‘çš„æ€ç»ªæ‘‡èº«ä¸€å˜ï¼Œæˆä¸ºäº†æˆ‘å®è´µçš„ç›Ÿå‹ã€‚ä»Šå¤©æˆ‘ç§°è¿™ç§è¿ç»“ä¸ºï¼Œå¿ƒçµçš„æ™ºæ…§ã€‚ æˆ‘ä»¬å†ä¹Ÿæ— éœ€å®³æ€•äº‰æ‰§ï¼Œå¯¹æŠ—ï¼Œæˆ–è€…å…¶ä»–ä½•ç§ä¸æˆ‘ä»¬è‡ªå·±æˆ–ä»–äººä¹‹é—´çš„é—®é¢˜ã€‚å³ä¾¿æ˜¯è¡Œæ˜Ÿç¢°æ’ï¼Œä¹Ÿä¼šåœ¨ä»–ä»¬çš„æ’å‡»è¿‡åï¼Œå‚¬ç”Ÿå‡ºä¸€ä¸ªå…¨æ–°çš„ä¸–ç•Œã€‚ä»Šå¤©æˆ‘æ˜ç™½äº†ï¼Œè¿™å°±æ˜¯ç”Ÿæ´»ï¼ â€”â€”æŸ¥ç†Â·å“åˆ«æ— (dp0dè¯‘) ","date":"2022-04-04","objectID":"/collection/:1:1","series":[],"tags":[],"title":"æ”¶è—","uri":"/collection/#å½“æˆ‘å¼€å§‹çˆ±è‡ªå·±"},{"categories":null,"content":" æœ¬ç«™ç‰ˆæƒæœ¬ç«™å†…å®¹æ¬¢è¿å¤§å®¶è½¬è½½å’Œåˆ†äº«ï¼Œä¸æ­¤åŒæ—¶ï¼Œè¯·åœ¨å†…å®¹ä¸Šä¸‹æ–‡æ³¨æ˜ä½œè€…ï¼Œå¹¶å°†é“¾æ¥æŒ‡å‘æœ¬ç«™ï¼Œè°¢è°¢ã€‚ ","date":"2022-04-03","objectID":"/copyright/:1:0","series":null,"tags":null,"title":"å…³äºç‰ˆæƒ","uri":"/copyright/#æœ¬ç«™ç‰ˆæƒ"},{"categories":null,"content":" ä¾µæƒé—®é¢˜å¦‚å†…å®¹å¯¹æ‚¨å­˜åœ¨ä¾µæƒï¼Œåšä¸»åœ¨æ­¤è¡¨ç¤ºæ­‰æ„ï¼Œè¯·é™„ç›¸å…³è¯æ˜æ–‡ä»¶è”ç³»åˆ°æˆ‘ï¼Œæœ¬äººä¼šç¬¬ä¸€æ—¶é—´è¿›è¡Œåˆ å¸–ã€‚ é‚®ç®± draftpaperofgod@gmail.com If the content is infringing to you, sincerely apologizes. Please do contact me with the relevant supporting documents, and I will delete the post as soon as possible. email draftpaperofgod@gmail.com ","date":"2022-04-03","objectID":"/copyright/:2:0","series":null,"tags":null,"title":"å…³äºç‰ˆæƒ","uri":"/copyright/#ä¾µæƒé—®é¢˜"},{"categories":[],"content":"è¦è®¿é—®å†…ç½‘èµ„æºï¼Œå†…ç½‘èµ„æºç¼ºå°‘å…¬ç½‘ipè¢«å¢™ï¼Œç°åœ¨æˆ‘ä»¬å‡è®¾éœ€è¦åœ¨å†…ç½‘ä¸»æœºä¸Šè¿è¡Œpythonï¼Œæˆ‘ä»¬éœ€è¦åœ¨å…¬ç½‘è®¿é—®åˆ°å®ƒï¼Œå¹¶è€ƒè™‘å®‰å…¨æ€§ã€‚ ","date":"2022-03-27","objectID":"/frp_by_docker/:0:0","series":[],"tags":["linux"],"title":"Linuxä¸‹é…ç½®frpå†…ç½‘ç©¿é€","uri":"/frp_by_docker/#"},{"categories":[],"content":" åŸç†å›¾ ","date":"2022-03-27","objectID":"/frp_by_docker/:0:0","series":[],"tags":["linux"],"title":"Linuxä¸‹é…ç½®frpå†…ç½‘ç©¿é€","uri":"/frp_by_docker/#åŸç†å›¾"},{"categories":[],"content":" å‡†å¤‡å·¥ä½œ ä¸€å°å…¬ç½‘æœåŠ¡å™¨ï¼Œä»¥åŠæœ¬åœ°å†…ç½‘éœ€è¦ç©¿é€åˆ°çš„ä¸»æœº ä¸€ä¸ªåŸŸåï¼Œæœ¬æ¬¡é…ç½®ä¸­çš„webæœåŠ¡éœ€è¦æ³¨å†ŒåŸŸå ä¸‹è½½å¥½äº†æœ€æ–°ç‰ˆæœ¬çš„frp å‘å¸ƒï¼Œå¦‚ï¼šåšä¸»ä½¿ç”¨çš„æ˜¯v0.41.0ğŸ‘‡(ç°é˜¶æ®µgithubè¢«å¢™ï¼Œç§‘å­¦ä¸Šç½‘æˆ–ä½¿ç”¨å…¶ä»–æ–¹å¼ä¸‹è½½) wget https://github.com/fatedier/frp/releases/download/v0.41.0/frp_0.41.0_linux_amd64.tar.gz â€‹ ç›®å½•æ ‘ğŸ‘‡ ä¿è¯åœ¨å…¬ç½‘æœåŠ¡å™¨ä¸Šç»è¿‡è®¾ç½®çš„æ‰€æœ‰ç«¯å£ä¸è¢«é˜²ç«å¢™é™åˆ¶ã€‚ ","date":"2022-03-27","objectID":"/frp_by_docker/:0:0","series":[],"tags":["linux"],"title":"Linuxä¸‹é…ç½®frpå†…ç½‘ç©¿é€","uri":"/frp_by_docker/#å‡†å¤‡å·¥ä½œ"},{"categories":[],"content":" æ­å»ºæµç¨‹","date":"2022-03-27","objectID":"/frp_by_docker/:0:0","series":[],"tags":["linux"],"title":"Linuxä¸‹é…ç½®frpå†…ç½‘ç©¿é€","uri":"/frp_by_docker/#æ­å»ºæµç¨‹"},{"categories":[],"content":" 1.webæœåŠ¡åŸºç¡€ç‰ˆ å¦‚æœéœ€è¦æ­å»ºsshæœåŠ¡ç­‰æ“ä½œç±»ä¼¼ï¼ŒDemoè¯¦æƒ…è§å®˜æ–¹æ–‡æ¡£ï¼Œæ­¤å¤„åšä¸»ä»…è¿›è¡ŒwebæœåŠ¡æ­å»ºã€‚ ","date":"2022-03-27","objectID":"/frp_by_docker/:1:0","series":[],"tags":["linux"],"title":"Linuxä¸‹é…ç½®frpå†…ç½‘ç©¿é€","uri":"/frp_by_docker/#1webæœåŠ¡åŸºç¡€ç‰ˆ"},{"categories":[],"content":" å«æœ‰å…¬ç½‘ipçš„æœåŠ¡å™¨ç«¯å°†åˆšåˆšä¸‹è½½çš„æ–‡ä»¶è§£å‹åˆ°~/frpsä¸‹ğŸ‘‡ mkdir ~/frp tar zxvf frp_0.41.0_linux_amd64.tar.gz -C ~/frp cd ~/frp/frp_0.41.0_linux_amd64 ç„¶åç¼–è¾‘æ–‡ä»¶frps.iniï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹ğŸ‘‡ [common] ;å…¬ç½‘æœåŠ¡å™¨ä¸å†…ç½‘ä¸»æœºé€šä¿¡çš„ç«¯å£ bind_port = 1234 ;è®¿é—®å…¬ç½‘æœåŠ¡å™¨ç«¯å£ vhost_http_port = 4231 å¯åŠ¨frpsæœåŠ¡ğŸ‘‡ ./frps -c ./frps.ini å¦‚æ˜¾ç¤ºfrps started successfullyå³ä¸ºæˆåŠŸï¼Œç«¯å£ä¹Ÿä¼šå†™æ˜ ","date":"2022-03-27","objectID":"/frp_by_docker/:1:1","series":[],"tags":["linux"],"title":"Linuxä¸‹é…ç½®frpå†…ç½‘ç©¿é€","uri":"/frp_by_docker/#å«æœ‰å…¬ç½‘ipçš„æœåŠ¡å™¨ç«¯"},{"categories":[],"content":" å†…ç½‘ä¸»æœºç«¯å°†åˆšåˆšä¸‹è½½çš„æ–‡ä»¶è§£å‹åˆ°~/frpsä¸‹ğŸ‘‡ mkdir ~/frp tar zxvf frp_0.41.0_linux_amd64.tar.gz -C ~/frp cd ~/frp/frp_0.41.0_linux_amd64 ç„¶åç¼–è¾‘æ–‡ä»¶frpc.iniï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹ğŸ‘‡ [common] ;ä½ çš„æœåŠ¡å™¨ip server_addr = xx.xx.xx.xx ;å…¬ç½‘æœåŠ¡å™¨ä¸ä¸»æœºé€šä¿¡çš„ç«¯å£(å’ŒæœåŠ¡å™¨ç«¯çš„vhost_http_portä¸€è‡´) server_port = 1234 [web] type = http ;ä½ æƒ³è¦æ˜ å°„åˆ°çš„å†…ç½‘ä¸»æœºç«¯å£ï¼Œå¸¸ç”¨çš„æœ‰22ï¼ˆsshç«¯å£ï¼‰ã€443ç­‰ local_port = 8888 ;ä½ çš„æœåŠ¡å™¨åŸŸå custom_domains = xxxx.com å¯åŠ¨frpcæœåŠ¡ğŸ‘‡ ./frpc -c ./frpc.ini æœåŠ¡å™¨ç«¯ååº”ğŸ‘‡ æµè§ˆå™¨è®¿é—®å…¬ç½‘åŸŸåhttp://xxxx.com:vhost_http_portç«¯å£å·ğŸ‘‡ ","date":"2022-03-27","objectID":"/frp_by_docker/:1:2","series":[],"tags":["linux"],"title":"Linuxä¸‹é…ç½®frpå†…ç½‘ç©¿é€","uri":"/frp_by_docker/#å†…ç½‘ä¸»æœºç«¯"},{"categories":[],"content":" 2.webæœåŠ¡Dockerç‰ˆï¼ˆJupyter labæ¬¾ï¼‰ åŠ¨æœºï¼šä½¿ç”¨dockeræä¾›æœåŠ¡ï¼Œå¤–ç½‘è®¿é—®çš„æœåŠ¡åœ¨å†…ç½‘ä¸»æœºçš„dockerå†…è¿è¡Œï¼Œç›¸å½“äºåšäº†ä¸€å±‚å†…ç½‘éš”ç¦»ï¼Œè¾ƒä¸ºå®‰å…¨ã€‚ é…ç½®æ¡ä»¶åŒåŸºç¡€ç‰ˆ ä¸€å°å…¬ç½‘æœåŠ¡å™¨ï¼Œä»¥åŠæœ¬åœ°å†…ç½‘éœ€è¦ç©¿é€åˆ°çš„ä¸»æœº ä¸€ä¸ªåŸŸåï¼Œæœ¬æ¬¡é…ç½®ä¸­çš„webæœåŠ¡éœ€è¦æ³¨å†ŒåŸŸå ä¸‹è½½å¥½äº†æœ€æ–°ç‰ˆæœ¬çš„frp å‘å¸ƒï¼Œå¦‚ï¼šåšä¸»ä½¿ç”¨çš„æ˜¯v0.41.0ğŸ‘‡(ç°é˜¶æ®µgithubè¢«å¢™ï¼Œç§‘å­¦ä¸Šç½‘æˆ–ä½¿ç”¨å…¶ä»–æ–¹å¼ä¸‹è½½) wget https://github.com/fatedier/frp/releases/download/v0.41.0/frp_0.41.0_linux_amd64.tar.gz ä¿è¯åœ¨å…¬ç½‘æœåŠ¡å™¨ä¸Šç»è¿‡è®¾ç½®çš„æ‰€æœ‰ç«¯å£ä¸è¢«é˜²ç«å¢™é™åˆ¶ã€‚ å¦ï¼šéœ€è¦åœ¨å†…ç½‘ä¸»æœºå®‰è£…dockerç¯å¢ƒ å®˜ç½‘å®‰è£…åœ°å€ å®‰è£…éœ€è¦ç”¨æ¥ä½¿ç”¨httpsåˆ©ç”¨ä»“åº“çš„åŒ… sudo apt-get update sudo apt-get install \\ ca-certificates \\ curl \\ gnupg \\ lsb-release è®¾ç½®ç¨³å®šå­˜å‚¨åº“ echo \\ \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \\ $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list \u003e /dev/null å®‰è£…docker engine sudo apt-get install docker ","date":"2022-03-27","objectID":"/frp_by_docker/:2:0","series":[],"tags":["linux"],"title":"Linuxä¸‹é…ç½®frpå†…ç½‘ç©¿é€","uri":"/frp_by_docker/#2webæœåŠ¡dockerç‰ˆjupyter-labæ¬¾"},{"categories":[],"content":" å«æœ‰å…¬ç½‘ipçš„æœåŠ¡å™¨ç«¯(ä¸åŸºç¡€ç‰ˆä¸€è‡´)å°†åˆšåˆšä¸‹è½½çš„æ–‡ä»¶è§£å‹åˆ°~/frpsä¸‹ğŸ‘‡ mkdir ~/frp tar zxvf frp_0.41.0_linux_amd64.tar.gz -C ~/frp cd ~/frp/frp_0.41.0_linux_amd64 ç„¶åç¼–è¾‘æ–‡ä»¶frps.iniï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹ğŸ‘‡ [common] ;å…¬ç½‘æœåŠ¡å™¨ä¸å†…ç½‘ä¸»æœºé€šä¿¡çš„ç«¯å£ bind_port = 1234 ;è®¿é—®å…¬ç½‘æœåŠ¡å™¨ç«¯å£ vhost_http_port = 4231 å¯åŠ¨frpsæœåŠ¡ğŸ‘‡ ./frps -c ./frps.ini å¦‚æ˜¾ç¤ºfrps started successfullyå³ä¸ºæˆåŠŸï¼Œç«¯å£ä¹Ÿä¼šå†™æ˜ ","date":"2022-03-27","objectID":"/frp_by_docker/:2:1","series":[],"tags":["linux"],"title":"Linuxä¸‹é…ç½®frpå†…ç½‘ç©¿é€","uri":"/frp_by_docker/#å«æœ‰å…¬ç½‘ipçš„æœåŠ¡å™¨ç«¯ä¸åŸºç¡€ç‰ˆä¸€è‡´"},{"categories":[],"content":" å†…ç½‘ä¸»æœºç«¯ åˆ°dockerhubå¯»æ‰¾åˆé€‚çš„ä»“åº“dockerhubè¿™é‡Œé€‰æ‹©unbuntuä½œä¸ºæˆ‘ä»¬çš„åŸºç¡€é•œåƒ sudo docker pull python sudo docker pull ubuntu æœ¬æ–‡ä¸­docker ä½¿ç”¨çš„ä¸€äº›å‘½ä»¤ æ‹‰å–é•œåƒå‘½ä»¤ sudo docker pull é•œåƒå é€šè¿‡Dockerfileæ„å»ºé•œåƒå‘½ä»¤ sudo docker build -t æŸ¥çœ‹é•œåƒå‘½ä»¤ ç›®æ ‡é•œåƒå . sudo docker images åˆ é™¤é•œåƒå‘½ä»¤ sudo docker image rm é•œåƒå è¿›å…¥è¿è¡Œä¸­çš„docker å®¹å™¨ï¼Œé€€å‡ºæ—¶ä¸å…³é—­å®¹å™¨ sudo docker exec -it å®¹å™¨å /bin/sh å…¶ä¸­ bin/shæ˜¯æŒ‡ä»¤è¿è¡Œå™¨åœ¨é•œåƒä¸­çš„ä½ç½®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ sudo docker inspect å®¹å™¨å æˆ–è€… é•œåƒå åˆ é™¤æ‰€æœ‰å®¹å™¨ sudo docker container prune sudo docker system prune â€“volumes sudo docker system prune â€“all åœç”¨æ‰€æœ‰å¹¶åˆ é™¤æ‰€æœ‰ï¼Œä¸Šé¢é‚£æ¡å‘½ä»¤åˆ é™¤ä¸äº†åœ¨è¿è¡Œçš„å®¹å™¨(éœ€è¦å¤šé‡å¤è¿è¡Œå›è½¦å‡ æ¬¡å°±å¹²å‡€äº†) sudo docker stop $(sudo docker ps -q) \u0026 sudo docker rm $(sudo docker ps -aq) ä½¿ç”¨è¯¥é•œåƒåˆ›å»ºå®¹å™¨ï¼Œèµ·åä¸ºjupyterlabï¼Œå¹¶å°†8888ç«¯å£æ˜ å°„åˆ°å†…ç½‘ä¸»æœº sudo docker run -p 8888:8888 --name jupyterlab -itd python æ³¨:-då¯ä»¥çœç•¥æ¥è°ƒè¯•æ— æ³•å¯åŠ¨çš„ä¿¡æ¯ï¼Œæ­£å¼ä½¿ç”¨åœ¨æœ¬æ¬¡é…ç½®ä¸­éœ€è¦åŠ ä¸Šã€‚ æŸ¥çœ‹æ˜¯å¦åœ¨è¿è¡Œ sudo docker ps -a Upè¡¨ç¤ºåœ¨æ­£å¸¸è¿è¡Œ è¿›å…¥å®¹å™¨å†… sudo docker exec -it jupyterlab /bin/bash æºæ›´æ–° apt-get update å®‰è£…åŸºç¡€å·¥å…· apt install git vim curl nodejs å®‰è£…pythonä¾èµ– ç”±äºé€‰æ‹©çš„æ˜¯pythonä»“åº“ï¼Œä¸éœ€è¦è€ƒè™‘pythonçš„ä¾èµ–é—®é¢˜ åœ¨å®¹å™¨å†…å®‰è£…pyenv curl -L https://github.com/pyenv/pyenv-installer/raw/master/bin/pyenv-installer | bash é‡å¯shell exec $SHELL é…ç½®pyenvç¯å¢ƒ echo 'export PATH=\"$HOME/.pyenv/bin:$PATH\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv init -)\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv virtualenv-init -)\"' \u003e\u003e ~/.bashrc source ~/.bashrc ä½¿ç”¨pyenvå®‰è£…python3.4.10å¹¶å»ºç«‹jupyterlabè™šæ‹Ÿç¯å¢ƒï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæ¨èä½¿ç”¨çš„pythonç¯å¢ƒç®¡ç†è½¯ä»¶ï¼Œä¹‹å‰çš„åšå®¢ä¸­æœ‰ä»‹ç»ä½¿ç”¨ã€‚(ä¼ é€é—¨) æŸ¥çœ‹å¯å®‰è£…çš„pythonç‰ˆæœ¬å‘½ä»¤ pyenv install -l pyenv install 3.10.4 pyenv virtualenv 3.10.4 jupyterlab pyenv global jupyterlab pip install update pip pip install jupyterlab ç”Ÿæˆjupyter labçš„ç™»é™†å£ä»¤ jupyter lab password è¾“å…¥ä½ æƒ³è¦çš„å£ä»¤ï¼Œå¦‚ï¼š2933194thg309rgbn13495y1tb1 å¯åŠ¨jupyter lab, è®©å®ƒåœ¨åå°è¿è¡Œ ï½ nohup jupyter lab --allow-root --no-browser --ip '*' --port '8888' \u003e ~/.jupyter/jupyterlab.log 2\u003e\u00261 \u0026 æŸ¥çœ‹å®ƒçš„è¿è¡ŒçŠ¶æ€ ps -a ä¹–ä¹–åœ¨åå°å‘†ç€ æ›´å¥½ä¸€ç‚¹ï¼Œè®¾ç½®jupyteræœåŠ¡å¹¶è®©å®ƒå¼€æœºè‡ªå¯åŠ¨ å¢åŠ systemé…ç½®ï¼Œåˆ›å»ºå¹¶ç¼–è¾‘åä¸ºjupyterlabçš„æœåŠ¡ sudo vi /etc/systemd/system/jupyterlab.service æ³¨æ„ExecStartä¸€å®šè¦ç²¾ç¡®åˆ°jupyterlabçš„æ‰§è¡Œæ–‡ä»¶ï¼Œåç»­å¯ä»¥è‡ªè¡Œæ·»åŠ æŒ‡å®šç«¯å£ç­‰å‘½ä»¤-pç­‰ï¼ŒæŒ‡å®šå¯åŠ¨è·¯å¾„ç›´æ¥è·Ÿåœ¨åé¢å°±å¥½äº†ã€‚ [Unit] Description=jupyterlab service After=network.target [Service] Type=simple User=oliver ExecStart=/home/oliver/.pyenv/versions/jupyterlab/bin/jupyter-lab p 9001 /home/ Restart=on-failure RestartPreventExitStatus=23 [Install] WantedBy=multi-user.target ç„¶åä¿å­˜é€€å‡ºï¼Œç»§ç»­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ sudo systemctl daemon-reload sudo systemctl enable jupyterlab sudo systemctl start jupyterlab sudo systemctl status jupyterlab okï¼ŒæœåŠ¡è®¾ç½®å®Œæˆ ç„¶åé€€å‡ºä½†ä¸å…³é—­è¿™ä¸ªå®¹å™¨ï¼Œä½¿ç”¨å¿«æ·é”®Ctrl+Q+P æµè§ˆå™¨è®¿é—®127.0.0.1:8888 è¾“å…¥åˆšåˆšçš„å¯†ç 2933194thg309rgbn13495y1tb1 è¿›æ¥äº†ï¼Œè¯æ˜è¿™æ—¶æˆ‘ä»¬çš„jupyterè¿˜åœ¨å®¹å™¨åå°ä¹–ä¹–å‘†ç€ã€‚ï¼Œå› ä¸ºç«¯å£æ˜ å°„å‡ºæ¥äº†ï¼Œè®¿é—®åœ¨ä¸»æœº8888ç«¯å£ç›¸å½“äºè®¿é—®dockerå®¹å™¨çš„8888ç«¯å£ã€‚ ç»§ç»­é…ç½®æˆ‘ä»¬çš„frpc frpc.inié‡Œçš„é…ç½®å’ŒåŸºç¡€ç‰ˆçš„ä¸€æ · cd ~/frp/frp_0.41.0_linux_amd64/ ./frpc -c ./frpc.ini ok,æœåŠ¡èµ·æ¥äº† åœ¨ç½‘å€ä¸­è¾“å…¥æˆ‘ä»¬çš„http://åŸŸåxxx.com:4321 ok,è®¿é—®åˆ°äº† ç„¶åè¾“å…¥æˆ‘ä»¬çš„jupyterå£ä»¤2933194thg309rgbn13495y1tb1 OKï¼Œé€šäº† å¤§åŠŸå‘Šæˆï½ é™„åŠ ç¯‡ï¼ŒæŒ‰éœ€å–ç”¨https://blog.csdn.net/weixin_43975924/article/details/104046790 SSHæ˜ å°„æƒ…æ™¯1ï¼šç”¨æˆ·é€šè¿‡ä¸»æœºAè®¿é—®C å¾…ç»­â€¦â€¦ ","date":"2022-03-27","objectID":"/frp_by_docker/:2:2","series":[],"tags":["linux"],"title":"Linuxä¸‹é…ç½®frpå†…ç½‘ç©¿é€","uri":"/frp_by_docker/#å†…ç½‘ä¸»æœºç«¯-1"},{"categories":[],"content":" å†…ç½‘ä¸»æœºç«¯ åˆ°dockerhubå¯»æ‰¾åˆé€‚çš„ä»“åº“dockerhubè¿™é‡Œé€‰æ‹©unbuntuä½œä¸ºæˆ‘ä»¬çš„åŸºç¡€é•œåƒ sudo docker pull python sudo docker pull ubuntu æœ¬æ–‡ä¸­docker ä½¿ç”¨çš„ä¸€äº›å‘½ä»¤ æ‹‰å–é•œåƒå‘½ä»¤ sudo docker pull é•œåƒå é€šè¿‡Dockerfileæ„å»ºé•œåƒå‘½ä»¤ sudo docker build -t æŸ¥çœ‹é•œåƒå‘½ä»¤ ç›®æ ‡é•œåƒå . sudo docker images åˆ é™¤é•œåƒå‘½ä»¤ sudo docker image rm é•œåƒå è¿›å…¥è¿è¡Œä¸­çš„docker å®¹å™¨ï¼Œé€€å‡ºæ—¶ä¸å…³é—­å®¹å™¨ sudo docker exec -it å®¹å™¨å /bin/sh å…¶ä¸­ bin/shæ˜¯æŒ‡ä»¤è¿è¡Œå™¨åœ¨é•œåƒä¸­çš„ä½ç½®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ sudo docker inspect å®¹å™¨å æˆ–è€… é•œåƒå åˆ é™¤æ‰€æœ‰å®¹å™¨ sudo docker container prune sudo docker system prune â€“volumes sudo docker system prune â€“all åœç”¨æ‰€æœ‰å¹¶åˆ é™¤æ‰€æœ‰ï¼Œä¸Šé¢é‚£æ¡å‘½ä»¤åˆ é™¤ä¸äº†åœ¨è¿è¡Œçš„å®¹å™¨(éœ€è¦å¤šé‡å¤è¿è¡Œå›è½¦å‡ æ¬¡å°±å¹²å‡€äº†) sudo docker stop $(sudo docker ps -q) \u0026 sudo docker rm $(sudo docker ps -aq) ä½¿ç”¨è¯¥é•œåƒåˆ›å»ºå®¹å™¨ï¼Œèµ·åä¸ºjupyterlabï¼Œå¹¶å°†8888ç«¯å£æ˜ å°„åˆ°å†…ç½‘ä¸»æœº sudo docker run -p 8888:8888 --name jupyterlab -itd python æ³¨:-då¯ä»¥çœç•¥æ¥è°ƒè¯•æ— æ³•å¯åŠ¨çš„ä¿¡æ¯ï¼Œæ­£å¼ä½¿ç”¨åœ¨æœ¬æ¬¡é…ç½®ä¸­éœ€è¦åŠ ä¸Šã€‚ æŸ¥çœ‹æ˜¯å¦åœ¨è¿è¡Œ sudo docker ps -a Upè¡¨ç¤ºåœ¨æ­£å¸¸è¿è¡Œ è¿›å…¥å®¹å™¨å†… sudo docker exec -it jupyterlab /bin/bash æºæ›´æ–° apt-get update å®‰è£…åŸºç¡€å·¥å…· apt install git vim curl nodejs å®‰è£…pythonä¾èµ– ç”±äºé€‰æ‹©çš„æ˜¯pythonä»“åº“ï¼Œä¸éœ€è¦è€ƒè™‘pythonçš„ä¾èµ–é—®é¢˜ åœ¨å®¹å™¨å†…å®‰è£…pyenv curl -L https://github.com/pyenv/pyenv-installer/raw/master/bin/pyenv-installer | bash é‡å¯shell exec $SHELL é…ç½®pyenvç¯å¢ƒ echo 'export PATH=\"$HOME/.pyenv/bin:$PATH\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv init -)\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv virtualenv-init -)\"' \u003e\u003e ~/.bashrc source ~/.bashrc ä½¿ç”¨pyenvå®‰è£…python3.4.10å¹¶å»ºç«‹jupyterlabè™šæ‹Ÿç¯å¢ƒï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæ¨èä½¿ç”¨çš„pythonç¯å¢ƒç®¡ç†è½¯ä»¶ï¼Œä¹‹å‰çš„åšå®¢ä¸­æœ‰ä»‹ç»ä½¿ç”¨ã€‚(ä¼ é€é—¨) æŸ¥çœ‹å¯å®‰è£…çš„pythonç‰ˆæœ¬å‘½ä»¤ pyenv install -l pyenv install 3.10.4 pyenv virtualenv 3.10.4 jupyterlab pyenv global jupyterlab pip install update pip pip install jupyterlab ç”Ÿæˆjupyter labçš„ç™»é™†å£ä»¤ jupyter lab password è¾“å…¥ä½ æƒ³è¦çš„å£ä»¤ï¼Œå¦‚ï¼š2933194thg309rgbn13495y1tb1 å¯åŠ¨jupyter lab, è®©å®ƒåœ¨åå°è¿è¡Œ ï½ nohup jupyter lab --allow-root --no-browser --ip '*' --port '8888' \u003e ~/.jupyter/jupyterlab.log 2\u003e\u00261 \u0026 æŸ¥çœ‹å®ƒçš„è¿è¡ŒçŠ¶æ€ ps -a ä¹–ä¹–åœ¨åå°å‘†ç€ æ›´å¥½ä¸€ç‚¹ï¼Œè®¾ç½®jupyteræœåŠ¡å¹¶è®©å®ƒå¼€æœºè‡ªå¯åŠ¨ å¢åŠ systemé…ç½®ï¼Œåˆ›å»ºå¹¶ç¼–è¾‘åä¸ºjupyterlabçš„æœåŠ¡ sudo vi /etc/systemd/system/jupyterlab.service æ³¨æ„ExecStartä¸€å®šè¦ç²¾ç¡®åˆ°jupyterlabçš„æ‰§è¡Œæ–‡ä»¶ï¼Œåç»­å¯ä»¥è‡ªè¡Œæ·»åŠ æŒ‡å®šç«¯å£ç­‰å‘½ä»¤-pç­‰ï¼ŒæŒ‡å®šå¯åŠ¨è·¯å¾„ç›´æ¥è·Ÿåœ¨åé¢å°±å¥½äº†ã€‚ [Unit] Description=jupyterlab service After=network.target [Service] Type=simple User=oliver ExecStart=/home/oliver/.pyenv/versions/jupyterlab/bin/jupyter-lab p 9001 /home/ Restart=on-failure RestartPreventExitStatus=23 [Install] WantedBy=multi-user.target ç„¶åä¿å­˜é€€å‡ºï¼Œç»§ç»­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ sudo systemctl daemon-reload sudo systemctl enable jupyterlab sudo systemctl start jupyterlab sudo systemctl status jupyterlab okï¼ŒæœåŠ¡è®¾ç½®å®Œæˆ ç„¶åé€€å‡ºä½†ä¸å…³é—­è¿™ä¸ªå®¹å™¨ï¼Œä½¿ç”¨å¿«æ·é”®Ctrl+Q+P æµè§ˆå™¨è®¿é—®127.0.0.1:8888 è¾“å…¥åˆšåˆšçš„å¯†ç 2933194thg309rgbn13495y1tb1 è¿›æ¥äº†ï¼Œè¯æ˜è¿™æ—¶æˆ‘ä»¬çš„jupyterè¿˜åœ¨å®¹å™¨åå°ä¹–ä¹–å‘†ç€ã€‚ï¼Œå› ä¸ºç«¯å£æ˜ å°„å‡ºæ¥äº†ï¼Œè®¿é—®åœ¨ä¸»æœº8888ç«¯å£ç›¸å½“äºè®¿é—®dockerå®¹å™¨çš„8888ç«¯å£ã€‚ ç»§ç»­é…ç½®æˆ‘ä»¬çš„frpc frpc.inié‡Œçš„é…ç½®å’ŒåŸºç¡€ç‰ˆçš„ä¸€æ · cd ~/frp/frp_0.41.0_linux_amd64/ ./frpc -c ./frpc.ini ok,æœåŠ¡èµ·æ¥äº† åœ¨ç½‘å€ä¸­è¾“å…¥æˆ‘ä»¬çš„http://åŸŸåxxx.com:4321 ok,è®¿é—®åˆ°äº† ç„¶åè¾“å…¥æˆ‘ä»¬çš„jupyterå£ä»¤2933194thg309rgbn13495y1tb1 OKï¼Œé€šäº† å¤§åŠŸå‘Šæˆï½ é™„åŠ ç¯‡ï¼ŒæŒ‰éœ€å–ç”¨https://blog.csdn.net/weixin_43975924/article/details/104046790 SSHæ˜ å°„æƒ…æ™¯1ï¼šç”¨æˆ·é€šè¿‡ä¸»æœºAè®¿é—®C å¾…ç»­â€¦â€¦ ","date":"2022-03-27","objectID":"/frp_by_docker/:2:2","series":[],"tags":["linux"],"title":"Linuxä¸‹é…ç½®frpå†…ç½‘ç©¿é€","uri":"/frp_by_docker/#åˆ°dockerhubå¯»æ‰¾åˆé€‚çš„ä»“åº“dockerhubhttpshubdockercom"},{"categories":[],"content":" å†…ç½‘ä¸»æœºç«¯ åˆ°dockerhubå¯»æ‰¾åˆé€‚çš„ä»“åº“dockerhubè¿™é‡Œé€‰æ‹©unbuntuä½œä¸ºæˆ‘ä»¬çš„åŸºç¡€é•œåƒ sudo docker pull python sudo docker pull ubuntu æœ¬æ–‡ä¸­docker ä½¿ç”¨çš„ä¸€äº›å‘½ä»¤ æ‹‰å–é•œåƒå‘½ä»¤ sudo docker pull é•œåƒå é€šè¿‡Dockerfileæ„å»ºé•œåƒå‘½ä»¤ sudo docker build -t æŸ¥çœ‹é•œåƒå‘½ä»¤ ç›®æ ‡é•œåƒå . sudo docker images åˆ é™¤é•œåƒå‘½ä»¤ sudo docker image rm é•œåƒå è¿›å…¥è¿è¡Œä¸­çš„docker å®¹å™¨ï¼Œé€€å‡ºæ—¶ä¸å…³é—­å®¹å™¨ sudo docker exec -it å®¹å™¨å /bin/sh å…¶ä¸­ bin/shæ˜¯æŒ‡ä»¤è¿è¡Œå™¨åœ¨é•œåƒä¸­çš„ä½ç½®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ sudo docker inspect å®¹å™¨å æˆ–è€… é•œåƒå åˆ é™¤æ‰€æœ‰å®¹å™¨ sudo docker container prune sudo docker system prune â€“volumes sudo docker system prune â€“all åœç”¨æ‰€æœ‰å¹¶åˆ é™¤æ‰€æœ‰ï¼Œä¸Šé¢é‚£æ¡å‘½ä»¤åˆ é™¤ä¸äº†åœ¨è¿è¡Œçš„å®¹å™¨(éœ€è¦å¤šé‡å¤è¿è¡Œå›è½¦å‡ æ¬¡å°±å¹²å‡€äº†) sudo docker stop $(sudo docker ps -q) \u0026 sudo docker rm $(sudo docker ps -aq) ä½¿ç”¨è¯¥é•œåƒåˆ›å»ºå®¹å™¨ï¼Œèµ·åä¸ºjupyterlabï¼Œå¹¶å°†8888ç«¯å£æ˜ å°„åˆ°å†…ç½‘ä¸»æœº sudo docker run -p 8888:8888 --name jupyterlab -itd python æ³¨:-då¯ä»¥çœç•¥æ¥è°ƒè¯•æ— æ³•å¯åŠ¨çš„ä¿¡æ¯ï¼Œæ­£å¼ä½¿ç”¨åœ¨æœ¬æ¬¡é…ç½®ä¸­éœ€è¦åŠ ä¸Šã€‚ æŸ¥çœ‹æ˜¯å¦åœ¨è¿è¡Œ sudo docker ps -a Upè¡¨ç¤ºåœ¨æ­£å¸¸è¿è¡Œ è¿›å…¥å®¹å™¨å†… sudo docker exec -it jupyterlab /bin/bash æºæ›´æ–° apt-get update å®‰è£…åŸºç¡€å·¥å…· apt install git vim curl nodejs å®‰è£…pythonä¾èµ– ç”±äºé€‰æ‹©çš„æ˜¯pythonä»“åº“ï¼Œä¸éœ€è¦è€ƒè™‘pythonçš„ä¾èµ–é—®é¢˜ åœ¨å®¹å™¨å†…å®‰è£…pyenv curl -L https://github.com/pyenv/pyenv-installer/raw/master/bin/pyenv-installer | bash é‡å¯shell exec $SHELL é…ç½®pyenvç¯å¢ƒ echo 'export PATH=\"$HOME/.pyenv/bin:$PATH\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv init -)\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv virtualenv-init -)\"' \u003e\u003e ~/.bashrc source ~/.bashrc ä½¿ç”¨pyenvå®‰è£…python3.4.10å¹¶å»ºç«‹jupyterlabè™šæ‹Ÿç¯å¢ƒï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæ¨èä½¿ç”¨çš„pythonç¯å¢ƒç®¡ç†è½¯ä»¶ï¼Œä¹‹å‰çš„åšå®¢ä¸­æœ‰ä»‹ç»ä½¿ç”¨ã€‚(ä¼ é€é—¨) æŸ¥çœ‹å¯å®‰è£…çš„pythonç‰ˆæœ¬å‘½ä»¤ pyenv install -l pyenv install 3.10.4 pyenv virtualenv 3.10.4 jupyterlab pyenv global jupyterlab pip install update pip pip install jupyterlab ç”Ÿæˆjupyter labçš„ç™»é™†å£ä»¤ jupyter lab password è¾“å…¥ä½ æƒ³è¦çš„å£ä»¤ï¼Œå¦‚ï¼š2933194thg309rgbn13495y1tb1 å¯åŠ¨jupyter lab, è®©å®ƒåœ¨åå°è¿è¡Œ ï½ nohup jupyter lab --allow-root --no-browser --ip '*' --port '8888' \u003e ~/.jupyter/jupyterlab.log 2\u003e\u00261 \u0026 æŸ¥çœ‹å®ƒçš„è¿è¡ŒçŠ¶æ€ ps -a ä¹–ä¹–åœ¨åå°å‘†ç€ æ›´å¥½ä¸€ç‚¹ï¼Œè®¾ç½®jupyteræœåŠ¡å¹¶è®©å®ƒå¼€æœºè‡ªå¯åŠ¨ å¢åŠ systemé…ç½®ï¼Œåˆ›å»ºå¹¶ç¼–è¾‘åä¸ºjupyterlabçš„æœåŠ¡ sudo vi /etc/systemd/system/jupyterlab.service æ³¨æ„ExecStartä¸€å®šè¦ç²¾ç¡®åˆ°jupyterlabçš„æ‰§è¡Œæ–‡ä»¶ï¼Œåç»­å¯ä»¥è‡ªè¡Œæ·»åŠ æŒ‡å®šç«¯å£ç­‰å‘½ä»¤-pç­‰ï¼ŒæŒ‡å®šå¯åŠ¨è·¯å¾„ç›´æ¥è·Ÿåœ¨åé¢å°±å¥½äº†ã€‚ [Unit] Description=jupyterlab service After=network.target [Service] Type=simple User=oliver ExecStart=/home/oliver/.pyenv/versions/jupyterlab/bin/jupyter-lab p 9001 /home/ Restart=on-failure RestartPreventExitStatus=23 [Install] WantedBy=multi-user.target ç„¶åä¿å­˜é€€å‡ºï¼Œç»§ç»­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ sudo systemctl daemon-reload sudo systemctl enable jupyterlab sudo systemctl start jupyterlab sudo systemctl status jupyterlab okï¼ŒæœåŠ¡è®¾ç½®å®Œæˆ ç„¶åé€€å‡ºä½†ä¸å…³é—­è¿™ä¸ªå®¹å™¨ï¼Œä½¿ç”¨å¿«æ·é”®Ctrl+Q+P æµè§ˆå™¨è®¿é—®127.0.0.1:8888 è¾“å…¥åˆšåˆšçš„å¯†ç 2933194thg309rgbn13495y1tb1 è¿›æ¥äº†ï¼Œè¯æ˜è¿™æ—¶æˆ‘ä»¬çš„jupyterè¿˜åœ¨å®¹å™¨åå°ä¹–ä¹–å‘†ç€ã€‚ï¼Œå› ä¸ºç«¯å£æ˜ å°„å‡ºæ¥äº†ï¼Œè®¿é—®åœ¨ä¸»æœº8888ç«¯å£ç›¸å½“äºè®¿é—®dockerå®¹å™¨çš„8888ç«¯å£ã€‚ ç»§ç»­é…ç½®æˆ‘ä»¬çš„frpc frpc.inié‡Œçš„é…ç½®å’ŒåŸºç¡€ç‰ˆçš„ä¸€æ · cd ~/frp/frp_0.41.0_linux_amd64/ ./frpc -c ./frpc.ini ok,æœåŠ¡èµ·æ¥äº† åœ¨ç½‘å€ä¸­è¾“å…¥æˆ‘ä»¬çš„http://åŸŸåxxx.com:4321 ok,è®¿é—®åˆ°äº† ç„¶åè¾“å…¥æˆ‘ä»¬çš„jupyterå£ä»¤2933194thg309rgbn13495y1tb1 OKï¼Œé€šäº† å¤§åŠŸå‘Šæˆï½ é™„åŠ ç¯‡ï¼ŒæŒ‰éœ€å–ç”¨https://blog.csdn.net/weixin_43975924/article/details/104046790 SSHæ˜ å°„æƒ…æ™¯1ï¼šç”¨æˆ·é€šè¿‡ä¸»æœºAè®¿é—®C å¾…ç»­â€¦â€¦ ","date":"2022-03-27","objectID":"/frp_by_docker/:2:2","series":[],"tags":["linux"],"title":"Linuxä¸‹é…ç½®frpå†…ç½‘ç©¿é€","uri":"/frp_by_docker/#è¿›å…¥å®¹å™¨å†…"},{"categories":[],"content":" å†…ç½‘ä¸»æœºç«¯ åˆ°dockerhubå¯»æ‰¾åˆé€‚çš„ä»“åº“dockerhubè¿™é‡Œé€‰æ‹©unbuntuä½œä¸ºæˆ‘ä»¬çš„åŸºç¡€é•œåƒ sudo docker pull python sudo docker pull ubuntu æœ¬æ–‡ä¸­docker ä½¿ç”¨çš„ä¸€äº›å‘½ä»¤ æ‹‰å–é•œåƒå‘½ä»¤ sudo docker pull é•œåƒå é€šè¿‡Dockerfileæ„å»ºé•œåƒå‘½ä»¤ sudo docker build -t æŸ¥çœ‹é•œåƒå‘½ä»¤ ç›®æ ‡é•œåƒå . sudo docker images åˆ é™¤é•œåƒå‘½ä»¤ sudo docker image rm é•œåƒå è¿›å…¥è¿è¡Œä¸­çš„docker å®¹å™¨ï¼Œé€€å‡ºæ—¶ä¸å…³é—­å®¹å™¨ sudo docker exec -it å®¹å™¨å /bin/sh å…¶ä¸­ bin/shæ˜¯æŒ‡ä»¤è¿è¡Œå™¨åœ¨é•œåƒä¸­çš„ä½ç½®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ sudo docker inspect å®¹å™¨å æˆ–è€… é•œåƒå åˆ é™¤æ‰€æœ‰å®¹å™¨ sudo docker container prune sudo docker system prune â€“volumes sudo docker system prune â€“all åœç”¨æ‰€æœ‰å¹¶åˆ é™¤æ‰€æœ‰ï¼Œä¸Šé¢é‚£æ¡å‘½ä»¤åˆ é™¤ä¸äº†åœ¨è¿è¡Œçš„å®¹å™¨(éœ€è¦å¤šé‡å¤è¿è¡Œå›è½¦å‡ æ¬¡å°±å¹²å‡€äº†) sudo docker stop $(sudo docker ps -q) \u0026 sudo docker rm $(sudo docker ps -aq) ä½¿ç”¨è¯¥é•œåƒåˆ›å»ºå®¹å™¨ï¼Œèµ·åä¸ºjupyterlabï¼Œå¹¶å°†8888ç«¯å£æ˜ å°„åˆ°å†…ç½‘ä¸»æœº sudo docker run -p 8888:8888 --name jupyterlab -itd python æ³¨:-då¯ä»¥çœç•¥æ¥è°ƒè¯•æ— æ³•å¯åŠ¨çš„ä¿¡æ¯ï¼Œæ­£å¼ä½¿ç”¨åœ¨æœ¬æ¬¡é…ç½®ä¸­éœ€è¦åŠ ä¸Šã€‚ æŸ¥çœ‹æ˜¯å¦åœ¨è¿è¡Œ sudo docker ps -a Upè¡¨ç¤ºåœ¨æ­£å¸¸è¿è¡Œ è¿›å…¥å®¹å™¨å†… sudo docker exec -it jupyterlab /bin/bash æºæ›´æ–° apt-get update å®‰è£…åŸºç¡€å·¥å…· apt install git vim curl nodejs å®‰è£…pythonä¾èµ– ç”±äºé€‰æ‹©çš„æ˜¯pythonä»“åº“ï¼Œä¸éœ€è¦è€ƒè™‘pythonçš„ä¾èµ–é—®é¢˜ åœ¨å®¹å™¨å†…å®‰è£…pyenv curl -L https://github.com/pyenv/pyenv-installer/raw/master/bin/pyenv-installer | bash é‡å¯shell exec $SHELL é…ç½®pyenvç¯å¢ƒ echo 'export PATH=\"$HOME/.pyenv/bin:$PATH\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv init -)\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv virtualenv-init -)\"' \u003e\u003e ~/.bashrc source ~/.bashrc ä½¿ç”¨pyenvå®‰è£…python3.4.10å¹¶å»ºç«‹jupyterlabè™šæ‹Ÿç¯å¢ƒï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæ¨èä½¿ç”¨çš„pythonç¯å¢ƒç®¡ç†è½¯ä»¶ï¼Œä¹‹å‰çš„åšå®¢ä¸­æœ‰ä»‹ç»ä½¿ç”¨ã€‚(ä¼ é€é—¨) æŸ¥çœ‹å¯å®‰è£…çš„pythonç‰ˆæœ¬å‘½ä»¤ pyenv install -l pyenv install 3.10.4 pyenv virtualenv 3.10.4 jupyterlab pyenv global jupyterlab pip install update pip pip install jupyterlab ç”Ÿæˆjupyter labçš„ç™»é™†å£ä»¤ jupyter lab password è¾“å…¥ä½ æƒ³è¦çš„å£ä»¤ï¼Œå¦‚ï¼š2933194thg309rgbn13495y1tb1 å¯åŠ¨jupyter lab, è®©å®ƒåœ¨åå°è¿è¡Œ ï½ nohup jupyter lab --allow-root --no-browser --ip '*' --port '8888' \u003e ~/.jupyter/jupyterlab.log 2\u003e\u00261 \u0026 æŸ¥çœ‹å®ƒçš„è¿è¡ŒçŠ¶æ€ ps -a ä¹–ä¹–åœ¨åå°å‘†ç€ æ›´å¥½ä¸€ç‚¹ï¼Œè®¾ç½®jupyteræœåŠ¡å¹¶è®©å®ƒå¼€æœºè‡ªå¯åŠ¨ å¢åŠ systemé…ç½®ï¼Œåˆ›å»ºå¹¶ç¼–è¾‘åä¸ºjupyterlabçš„æœåŠ¡ sudo vi /etc/systemd/system/jupyterlab.service æ³¨æ„ExecStartä¸€å®šè¦ç²¾ç¡®åˆ°jupyterlabçš„æ‰§è¡Œæ–‡ä»¶ï¼Œåç»­å¯ä»¥è‡ªè¡Œæ·»åŠ æŒ‡å®šç«¯å£ç­‰å‘½ä»¤-pç­‰ï¼ŒæŒ‡å®šå¯åŠ¨è·¯å¾„ç›´æ¥è·Ÿåœ¨åé¢å°±å¥½äº†ã€‚ [Unit] Description=jupyterlab service After=network.target [Service] Type=simple User=oliver ExecStart=/home/oliver/.pyenv/versions/jupyterlab/bin/jupyter-lab p 9001 /home/ Restart=on-failure RestartPreventExitStatus=23 [Install] WantedBy=multi-user.target ç„¶åä¿å­˜é€€å‡ºï¼Œç»§ç»­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ sudo systemctl daemon-reload sudo systemctl enable jupyterlab sudo systemctl start jupyterlab sudo systemctl status jupyterlab okï¼ŒæœåŠ¡è®¾ç½®å®Œæˆ ç„¶åé€€å‡ºä½†ä¸å…³é—­è¿™ä¸ªå®¹å™¨ï¼Œä½¿ç”¨å¿«æ·é”®Ctrl+Q+P æµè§ˆå™¨è®¿é—®127.0.0.1:8888 è¾“å…¥åˆšåˆšçš„å¯†ç 2933194thg309rgbn13495y1tb1 è¿›æ¥äº†ï¼Œè¯æ˜è¿™æ—¶æˆ‘ä»¬çš„jupyterè¿˜åœ¨å®¹å™¨åå°ä¹–ä¹–å‘†ç€ã€‚ï¼Œå› ä¸ºç«¯å£æ˜ å°„å‡ºæ¥äº†ï¼Œè®¿é—®åœ¨ä¸»æœº8888ç«¯å£ç›¸å½“äºè®¿é—®dockerå®¹å™¨çš„8888ç«¯å£ã€‚ ç»§ç»­é…ç½®æˆ‘ä»¬çš„frpc frpc.inié‡Œçš„é…ç½®å’ŒåŸºç¡€ç‰ˆçš„ä¸€æ · cd ~/frp/frp_0.41.0_linux_amd64/ ./frpc -c ./frpc.ini ok,æœåŠ¡èµ·æ¥äº† åœ¨ç½‘å€ä¸­è¾“å…¥æˆ‘ä»¬çš„http://åŸŸåxxx.com:4321 ok,è®¿é—®åˆ°äº† ç„¶åè¾“å…¥æˆ‘ä»¬çš„jupyterå£ä»¤2933194thg309rgbn13495y1tb1 OKï¼Œé€šäº† å¤§åŠŸå‘Šæˆï½ é™„åŠ ç¯‡ï¼ŒæŒ‰éœ€å–ç”¨https://blog.csdn.net/weixin_43975924/article/details/104046790 SSHæ˜ å°„æƒ…æ™¯1ï¼šç”¨æˆ·é€šè¿‡ä¸»æœºAè®¿é—®C å¾…ç»­â€¦â€¦ ","date":"2022-03-27","objectID":"/frp_by_docker/:2:2","series":[],"tags":["linux"],"title":"Linuxä¸‹é…ç½®frpå†…ç½‘ç©¿é€","uri":"/frp_by_docker/#æºæ›´æ–°"},{"categories":[],"content":" å†…ç½‘ä¸»æœºç«¯ åˆ°dockerhubå¯»æ‰¾åˆé€‚çš„ä»“åº“dockerhubè¿™é‡Œé€‰æ‹©unbuntuä½œä¸ºæˆ‘ä»¬çš„åŸºç¡€é•œåƒ sudo docker pull python sudo docker pull ubuntu æœ¬æ–‡ä¸­docker ä½¿ç”¨çš„ä¸€äº›å‘½ä»¤ æ‹‰å–é•œåƒå‘½ä»¤ sudo docker pull é•œåƒå é€šè¿‡Dockerfileæ„å»ºé•œåƒå‘½ä»¤ sudo docker build -t æŸ¥çœ‹é•œåƒå‘½ä»¤ ç›®æ ‡é•œåƒå . sudo docker images åˆ é™¤é•œåƒå‘½ä»¤ sudo docker image rm é•œåƒå è¿›å…¥è¿è¡Œä¸­çš„docker å®¹å™¨ï¼Œé€€å‡ºæ—¶ä¸å…³é—­å®¹å™¨ sudo docker exec -it å®¹å™¨å /bin/sh å…¶ä¸­ bin/shæ˜¯æŒ‡ä»¤è¿è¡Œå™¨åœ¨é•œåƒä¸­çš„ä½ç½®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ sudo docker inspect å®¹å™¨å æˆ–è€… é•œåƒå åˆ é™¤æ‰€æœ‰å®¹å™¨ sudo docker container prune sudo docker system prune â€“volumes sudo docker system prune â€“all åœç”¨æ‰€æœ‰å¹¶åˆ é™¤æ‰€æœ‰ï¼Œä¸Šé¢é‚£æ¡å‘½ä»¤åˆ é™¤ä¸äº†åœ¨è¿è¡Œçš„å®¹å™¨(éœ€è¦å¤šé‡å¤è¿è¡Œå›è½¦å‡ æ¬¡å°±å¹²å‡€äº†) sudo docker stop $(sudo docker ps -q) \u0026 sudo docker rm $(sudo docker ps -aq) ä½¿ç”¨è¯¥é•œåƒåˆ›å»ºå®¹å™¨ï¼Œèµ·åä¸ºjupyterlabï¼Œå¹¶å°†8888ç«¯å£æ˜ å°„åˆ°å†…ç½‘ä¸»æœº sudo docker run -p 8888:8888 --name jupyterlab -itd python æ³¨:-då¯ä»¥çœç•¥æ¥è°ƒè¯•æ— æ³•å¯åŠ¨çš„ä¿¡æ¯ï¼Œæ­£å¼ä½¿ç”¨åœ¨æœ¬æ¬¡é…ç½®ä¸­éœ€è¦åŠ ä¸Šã€‚ æŸ¥çœ‹æ˜¯å¦åœ¨è¿è¡Œ sudo docker ps -a Upè¡¨ç¤ºåœ¨æ­£å¸¸è¿è¡Œ è¿›å…¥å®¹å™¨å†… sudo docker exec -it jupyterlab /bin/bash æºæ›´æ–° apt-get update å®‰è£…åŸºç¡€å·¥å…· apt install git vim curl nodejs å®‰è£…pythonä¾èµ– ç”±äºé€‰æ‹©çš„æ˜¯pythonä»“åº“ï¼Œä¸éœ€è¦è€ƒè™‘pythonçš„ä¾èµ–é—®é¢˜ åœ¨å®¹å™¨å†…å®‰è£…pyenv curl -L https://github.com/pyenv/pyenv-installer/raw/master/bin/pyenv-installer | bash é‡å¯shell exec $SHELL é…ç½®pyenvç¯å¢ƒ echo 'export PATH=\"$HOME/.pyenv/bin:$PATH\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv init -)\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv virtualenv-init -)\"' \u003e\u003e ~/.bashrc source ~/.bashrc ä½¿ç”¨pyenvå®‰è£…python3.4.10å¹¶å»ºç«‹jupyterlabè™šæ‹Ÿç¯å¢ƒï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæ¨èä½¿ç”¨çš„pythonç¯å¢ƒç®¡ç†è½¯ä»¶ï¼Œä¹‹å‰çš„åšå®¢ä¸­æœ‰ä»‹ç»ä½¿ç”¨ã€‚(ä¼ é€é—¨) æŸ¥çœ‹å¯å®‰è£…çš„pythonç‰ˆæœ¬å‘½ä»¤ pyenv install -l pyenv install 3.10.4 pyenv virtualenv 3.10.4 jupyterlab pyenv global jupyterlab pip install update pip pip install jupyterlab ç”Ÿæˆjupyter labçš„ç™»é™†å£ä»¤ jupyter lab password è¾“å…¥ä½ æƒ³è¦çš„å£ä»¤ï¼Œå¦‚ï¼š2933194thg309rgbn13495y1tb1 å¯åŠ¨jupyter lab, è®©å®ƒåœ¨åå°è¿è¡Œ ï½ nohup jupyter lab --allow-root --no-browser --ip '*' --port '8888' \u003e ~/.jupyter/jupyterlab.log 2\u003e\u00261 \u0026 æŸ¥çœ‹å®ƒçš„è¿è¡ŒçŠ¶æ€ ps -a ä¹–ä¹–åœ¨åå°å‘†ç€ æ›´å¥½ä¸€ç‚¹ï¼Œè®¾ç½®jupyteræœåŠ¡å¹¶è®©å®ƒå¼€æœºè‡ªå¯åŠ¨ å¢åŠ systemé…ç½®ï¼Œåˆ›å»ºå¹¶ç¼–è¾‘åä¸ºjupyterlabçš„æœåŠ¡ sudo vi /etc/systemd/system/jupyterlab.service æ³¨æ„ExecStartä¸€å®šè¦ç²¾ç¡®åˆ°jupyterlabçš„æ‰§è¡Œæ–‡ä»¶ï¼Œåç»­å¯ä»¥è‡ªè¡Œæ·»åŠ æŒ‡å®šç«¯å£ç­‰å‘½ä»¤-pç­‰ï¼ŒæŒ‡å®šå¯åŠ¨è·¯å¾„ç›´æ¥è·Ÿåœ¨åé¢å°±å¥½äº†ã€‚ [Unit] Description=jupyterlab service After=network.target [Service] Type=simple User=oliver ExecStart=/home/oliver/.pyenv/versions/jupyterlab/bin/jupyter-lab p 9001 /home/ Restart=on-failure RestartPreventExitStatus=23 [Install] WantedBy=multi-user.target ç„¶åä¿å­˜é€€å‡ºï¼Œç»§ç»­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ sudo systemctl daemon-reload sudo systemctl enable jupyterlab sudo systemctl start jupyterlab sudo systemctl status jupyterlab okï¼ŒæœåŠ¡è®¾ç½®å®Œæˆ ç„¶åé€€å‡ºä½†ä¸å…³é—­è¿™ä¸ªå®¹å™¨ï¼Œä½¿ç”¨å¿«æ·é”®Ctrl+Q+P æµè§ˆå™¨è®¿é—®127.0.0.1:8888 è¾“å…¥åˆšåˆšçš„å¯†ç 2933194thg309rgbn13495y1tb1 è¿›æ¥äº†ï¼Œè¯æ˜è¿™æ—¶æˆ‘ä»¬çš„jupyterè¿˜åœ¨å®¹å™¨åå°ä¹–ä¹–å‘†ç€ã€‚ï¼Œå› ä¸ºç«¯å£æ˜ å°„å‡ºæ¥äº†ï¼Œè®¿é—®åœ¨ä¸»æœº8888ç«¯å£ç›¸å½“äºè®¿é—®dockerå®¹å™¨çš„8888ç«¯å£ã€‚ ç»§ç»­é…ç½®æˆ‘ä»¬çš„frpc frpc.inié‡Œçš„é…ç½®å’ŒåŸºç¡€ç‰ˆçš„ä¸€æ · cd ~/frp/frp_0.41.0_linux_amd64/ ./frpc -c ./frpc.ini ok,æœåŠ¡èµ·æ¥äº† åœ¨ç½‘å€ä¸­è¾“å…¥æˆ‘ä»¬çš„http://åŸŸåxxx.com:4321 ok,è®¿é—®åˆ°äº† ç„¶åè¾“å…¥æˆ‘ä»¬çš„jupyterå£ä»¤2933194thg309rgbn13495y1tb1 OKï¼Œé€šäº† å¤§åŠŸå‘Šæˆï½ é™„åŠ ç¯‡ï¼ŒæŒ‰éœ€å–ç”¨https://blog.csdn.net/weixin_43975924/article/details/104046790 SSHæ˜ å°„æƒ…æ™¯1ï¼šç”¨æˆ·é€šè¿‡ä¸»æœºAè®¿é—®C å¾…ç»­â€¦â€¦ ","date":"2022-03-27","objectID":"/frp_by_docker/:2:2","series":[],"tags":["linux"],"title":"Linuxä¸‹é…ç½®frpå†…ç½‘ç©¿é€","uri":"/frp_by_docker/#å®‰è£…åŸºç¡€å·¥å…·"},{"categories":[],"content":" å†…ç½‘ä¸»æœºç«¯ åˆ°dockerhubå¯»æ‰¾åˆé€‚çš„ä»“åº“dockerhubè¿™é‡Œé€‰æ‹©unbuntuä½œä¸ºæˆ‘ä»¬çš„åŸºç¡€é•œåƒ sudo docker pull python sudo docker pull ubuntu æœ¬æ–‡ä¸­docker ä½¿ç”¨çš„ä¸€äº›å‘½ä»¤ æ‹‰å–é•œåƒå‘½ä»¤ sudo docker pull é•œåƒå é€šè¿‡Dockerfileæ„å»ºé•œåƒå‘½ä»¤ sudo docker build -t æŸ¥çœ‹é•œåƒå‘½ä»¤ ç›®æ ‡é•œåƒå . sudo docker images åˆ é™¤é•œåƒå‘½ä»¤ sudo docker image rm é•œåƒå è¿›å…¥è¿è¡Œä¸­çš„docker å®¹å™¨ï¼Œé€€å‡ºæ—¶ä¸å…³é—­å®¹å™¨ sudo docker exec -it å®¹å™¨å /bin/sh å…¶ä¸­ bin/shæ˜¯æŒ‡ä»¤è¿è¡Œå™¨åœ¨é•œåƒä¸­çš„ä½ç½®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ sudo docker inspect å®¹å™¨å æˆ–è€… é•œåƒå åˆ é™¤æ‰€æœ‰å®¹å™¨ sudo docker container prune sudo docker system prune â€“volumes sudo docker system prune â€“all åœç”¨æ‰€æœ‰å¹¶åˆ é™¤æ‰€æœ‰ï¼Œä¸Šé¢é‚£æ¡å‘½ä»¤åˆ é™¤ä¸äº†åœ¨è¿è¡Œçš„å®¹å™¨(éœ€è¦å¤šé‡å¤è¿è¡Œå›è½¦å‡ æ¬¡å°±å¹²å‡€äº†) sudo docker stop $(sudo docker ps -q) \u0026 sudo docker rm $(sudo docker ps -aq) ä½¿ç”¨è¯¥é•œåƒåˆ›å»ºå®¹å™¨ï¼Œèµ·åä¸ºjupyterlabï¼Œå¹¶å°†8888ç«¯å£æ˜ å°„åˆ°å†…ç½‘ä¸»æœº sudo docker run -p 8888:8888 --name jupyterlab -itd python æ³¨:-då¯ä»¥çœç•¥æ¥è°ƒè¯•æ— æ³•å¯åŠ¨çš„ä¿¡æ¯ï¼Œæ­£å¼ä½¿ç”¨åœ¨æœ¬æ¬¡é…ç½®ä¸­éœ€è¦åŠ ä¸Šã€‚ æŸ¥çœ‹æ˜¯å¦åœ¨è¿è¡Œ sudo docker ps -a Upè¡¨ç¤ºåœ¨æ­£å¸¸è¿è¡Œ è¿›å…¥å®¹å™¨å†… sudo docker exec -it jupyterlab /bin/bash æºæ›´æ–° apt-get update å®‰è£…åŸºç¡€å·¥å…· apt install git vim curl nodejs å®‰è£…pythonä¾èµ– ç”±äºé€‰æ‹©çš„æ˜¯pythonä»“åº“ï¼Œä¸éœ€è¦è€ƒè™‘pythonçš„ä¾èµ–é—®é¢˜ åœ¨å®¹å™¨å†…å®‰è£…pyenv curl -L https://github.com/pyenv/pyenv-installer/raw/master/bin/pyenv-installer | bash é‡å¯shell exec $SHELL é…ç½®pyenvç¯å¢ƒ echo 'export PATH=\"$HOME/.pyenv/bin:$PATH\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv init -)\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv virtualenv-init -)\"' \u003e\u003e ~/.bashrc source ~/.bashrc ä½¿ç”¨pyenvå®‰è£…python3.4.10å¹¶å»ºç«‹jupyterlabè™šæ‹Ÿç¯å¢ƒï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæ¨èä½¿ç”¨çš„pythonç¯å¢ƒç®¡ç†è½¯ä»¶ï¼Œä¹‹å‰çš„åšå®¢ä¸­æœ‰ä»‹ç»ä½¿ç”¨ã€‚(ä¼ é€é—¨) æŸ¥çœ‹å¯å®‰è£…çš„pythonç‰ˆæœ¬å‘½ä»¤ pyenv install -l pyenv install 3.10.4 pyenv virtualenv 3.10.4 jupyterlab pyenv global jupyterlab pip install update pip pip install jupyterlab ç”Ÿæˆjupyter labçš„ç™»é™†å£ä»¤ jupyter lab password è¾“å…¥ä½ æƒ³è¦çš„å£ä»¤ï¼Œå¦‚ï¼š2933194thg309rgbn13495y1tb1 å¯åŠ¨jupyter lab, è®©å®ƒåœ¨åå°è¿è¡Œ ï½ nohup jupyter lab --allow-root --no-browser --ip '*' --port '8888' \u003e ~/.jupyter/jupyterlab.log 2\u003e\u00261 \u0026 æŸ¥çœ‹å®ƒçš„è¿è¡ŒçŠ¶æ€ ps -a ä¹–ä¹–åœ¨åå°å‘†ç€ æ›´å¥½ä¸€ç‚¹ï¼Œè®¾ç½®jupyteræœåŠ¡å¹¶è®©å®ƒå¼€æœºè‡ªå¯åŠ¨ å¢åŠ systemé…ç½®ï¼Œåˆ›å»ºå¹¶ç¼–è¾‘åä¸ºjupyterlabçš„æœåŠ¡ sudo vi /etc/systemd/system/jupyterlab.service æ³¨æ„ExecStartä¸€å®šè¦ç²¾ç¡®åˆ°jupyterlabçš„æ‰§è¡Œæ–‡ä»¶ï¼Œåç»­å¯ä»¥è‡ªè¡Œæ·»åŠ æŒ‡å®šç«¯å£ç­‰å‘½ä»¤-pç­‰ï¼ŒæŒ‡å®šå¯åŠ¨è·¯å¾„ç›´æ¥è·Ÿåœ¨åé¢å°±å¥½äº†ã€‚ [Unit] Description=jupyterlab service After=network.target [Service] Type=simple User=oliver ExecStart=/home/oliver/.pyenv/versions/jupyterlab/bin/jupyter-lab p 9001 /home/ Restart=on-failure RestartPreventExitStatus=23 [Install] WantedBy=multi-user.target ç„¶åä¿å­˜é€€å‡ºï¼Œç»§ç»­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ sudo systemctl daemon-reload sudo systemctl enable jupyterlab sudo systemctl start jupyterlab sudo systemctl status jupyterlab okï¼ŒæœåŠ¡è®¾ç½®å®Œæˆ ç„¶åé€€å‡ºä½†ä¸å…³é—­è¿™ä¸ªå®¹å™¨ï¼Œä½¿ç”¨å¿«æ·é”®Ctrl+Q+P æµè§ˆå™¨è®¿é—®127.0.0.1:8888 è¾“å…¥åˆšåˆšçš„å¯†ç 2933194thg309rgbn13495y1tb1 è¿›æ¥äº†ï¼Œè¯æ˜è¿™æ—¶æˆ‘ä»¬çš„jupyterè¿˜åœ¨å®¹å™¨åå°ä¹–ä¹–å‘†ç€ã€‚ï¼Œå› ä¸ºç«¯å£æ˜ å°„å‡ºæ¥äº†ï¼Œè®¿é—®åœ¨ä¸»æœº8888ç«¯å£ç›¸å½“äºè®¿é—®dockerå®¹å™¨çš„8888ç«¯å£ã€‚ ç»§ç»­é…ç½®æˆ‘ä»¬çš„frpc frpc.inié‡Œçš„é…ç½®å’ŒåŸºç¡€ç‰ˆçš„ä¸€æ · cd ~/frp/frp_0.41.0_linux_amd64/ ./frpc -c ./frpc.ini ok,æœåŠ¡èµ·æ¥äº† åœ¨ç½‘å€ä¸­è¾“å…¥æˆ‘ä»¬çš„http://åŸŸåxxx.com:4321 ok,è®¿é—®åˆ°äº† ç„¶åè¾“å…¥æˆ‘ä»¬çš„jupyterå£ä»¤2933194thg309rgbn13495y1tb1 OKï¼Œé€šäº† å¤§åŠŸå‘Šæˆï½ é™„åŠ ç¯‡ï¼ŒæŒ‰éœ€å–ç”¨https://blog.csdn.net/weixin_43975924/article/details/104046790 SSHæ˜ å°„æƒ…æ™¯1ï¼šç”¨æˆ·é€šè¿‡ä¸»æœºAè®¿é—®C å¾…ç»­â€¦â€¦ ","date":"2022-03-27","objectID":"/frp_by_docker/:2:2","series":[],"tags":["linux"],"title":"Linuxä¸‹é…ç½®frpå†…ç½‘ç©¿é€","uri":"/frp_by_docker/#å®‰è£…pythonä¾èµ–"},{"categories":[],"content":" å†…ç½‘ä¸»æœºç«¯ åˆ°dockerhubå¯»æ‰¾åˆé€‚çš„ä»“åº“dockerhubè¿™é‡Œé€‰æ‹©unbuntuä½œä¸ºæˆ‘ä»¬çš„åŸºç¡€é•œåƒ sudo docker pull python sudo docker pull ubuntu æœ¬æ–‡ä¸­docker ä½¿ç”¨çš„ä¸€äº›å‘½ä»¤ æ‹‰å–é•œåƒå‘½ä»¤ sudo docker pull é•œåƒå é€šè¿‡Dockerfileæ„å»ºé•œåƒå‘½ä»¤ sudo docker build -t æŸ¥çœ‹é•œåƒå‘½ä»¤ ç›®æ ‡é•œåƒå . sudo docker images åˆ é™¤é•œåƒå‘½ä»¤ sudo docker image rm é•œåƒå è¿›å…¥è¿è¡Œä¸­çš„docker å®¹å™¨ï¼Œé€€å‡ºæ—¶ä¸å…³é—­å®¹å™¨ sudo docker exec -it å®¹å™¨å /bin/sh å…¶ä¸­ bin/shæ˜¯æŒ‡ä»¤è¿è¡Œå™¨åœ¨é•œåƒä¸­çš„ä½ç½®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ sudo docker inspect å®¹å™¨å æˆ–è€… é•œåƒå åˆ é™¤æ‰€æœ‰å®¹å™¨ sudo docker container prune sudo docker system prune â€“volumes sudo docker system prune â€“all åœç”¨æ‰€æœ‰å¹¶åˆ é™¤æ‰€æœ‰ï¼Œä¸Šé¢é‚£æ¡å‘½ä»¤åˆ é™¤ä¸äº†åœ¨è¿è¡Œçš„å®¹å™¨(éœ€è¦å¤šé‡å¤è¿è¡Œå›è½¦å‡ æ¬¡å°±å¹²å‡€äº†) sudo docker stop $(sudo docker ps -q) \u0026 sudo docker rm $(sudo docker ps -aq) ä½¿ç”¨è¯¥é•œåƒåˆ›å»ºå®¹å™¨ï¼Œèµ·åä¸ºjupyterlabï¼Œå¹¶å°†8888ç«¯å£æ˜ å°„åˆ°å†…ç½‘ä¸»æœº sudo docker run -p 8888:8888 --name jupyterlab -itd python æ³¨:-då¯ä»¥çœç•¥æ¥è°ƒè¯•æ— æ³•å¯åŠ¨çš„ä¿¡æ¯ï¼Œæ­£å¼ä½¿ç”¨åœ¨æœ¬æ¬¡é…ç½®ä¸­éœ€è¦åŠ ä¸Šã€‚ æŸ¥çœ‹æ˜¯å¦åœ¨è¿è¡Œ sudo docker ps -a Upè¡¨ç¤ºåœ¨æ­£å¸¸è¿è¡Œ è¿›å…¥å®¹å™¨å†… sudo docker exec -it jupyterlab /bin/bash æºæ›´æ–° apt-get update å®‰è£…åŸºç¡€å·¥å…· apt install git vim curl nodejs å®‰è£…pythonä¾èµ– ç”±äºé€‰æ‹©çš„æ˜¯pythonä»“åº“ï¼Œä¸éœ€è¦è€ƒè™‘pythonçš„ä¾èµ–é—®é¢˜ åœ¨å®¹å™¨å†…å®‰è£…pyenv curl -L https://github.com/pyenv/pyenv-installer/raw/master/bin/pyenv-installer | bash é‡å¯shell exec $SHELL é…ç½®pyenvç¯å¢ƒ echo 'export PATH=\"$HOME/.pyenv/bin:$PATH\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv init -)\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv virtualenv-init -)\"' \u003e\u003e ~/.bashrc source ~/.bashrc ä½¿ç”¨pyenvå®‰è£…python3.4.10å¹¶å»ºç«‹jupyterlabè™šæ‹Ÿç¯å¢ƒï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæ¨èä½¿ç”¨çš„pythonç¯å¢ƒç®¡ç†è½¯ä»¶ï¼Œä¹‹å‰çš„åšå®¢ä¸­æœ‰ä»‹ç»ä½¿ç”¨ã€‚(ä¼ é€é—¨) æŸ¥çœ‹å¯å®‰è£…çš„pythonç‰ˆæœ¬å‘½ä»¤ pyenv install -l pyenv install 3.10.4 pyenv virtualenv 3.10.4 jupyterlab pyenv global jupyterlab pip install update pip pip install jupyterlab ç”Ÿæˆjupyter labçš„ç™»é™†å£ä»¤ jupyter lab password è¾“å…¥ä½ æƒ³è¦çš„å£ä»¤ï¼Œå¦‚ï¼š2933194thg309rgbn13495y1tb1 å¯åŠ¨jupyter lab, è®©å®ƒåœ¨åå°è¿è¡Œ ï½ nohup jupyter lab --allow-root --no-browser --ip '*' --port '8888' \u003e ~/.jupyter/jupyterlab.log 2\u003e\u00261 \u0026 æŸ¥çœ‹å®ƒçš„è¿è¡ŒçŠ¶æ€ ps -a ä¹–ä¹–åœ¨åå°å‘†ç€ æ›´å¥½ä¸€ç‚¹ï¼Œè®¾ç½®jupyteræœåŠ¡å¹¶è®©å®ƒå¼€æœºè‡ªå¯åŠ¨ å¢åŠ systemé…ç½®ï¼Œåˆ›å»ºå¹¶ç¼–è¾‘åä¸ºjupyterlabçš„æœåŠ¡ sudo vi /etc/systemd/system/jupyterlab.service æ³¨æ„ExecStartä¸€å®šè¦ç²¾ç¡®åˆ°jupyterlabçš„æ‰§è¡Œæ–‡ä»¶ï¼Œåç»­å¯ä»¥è‡ªè¡Œæ·»åŠ æŒ‡å®šç«¯å£ç­‰å‘½ä»¤-pç­‰ï¼ŒæŒ‡å®šå¯åŠ¨è·¯å¾„ç›´æ¥è·Ÿåœ¨åé¢å°±å¥½äº†ã€‚ [Unit] Description=jupyterlab service After=network.target [Service] Type=simple User=oliver ExecStart=/home/oliver/.pyenv/versions/jupyterlab/bin/jupyter-lab p 9001 /home/ Restart=on-failure RestartPreventExitStatus=23 [Install] WantedBy=multi-user.target ç„¶åä¿å­˜é€€å‡ºï¼Œç»§ç»­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ sudo systemctl daemon-reload sudo systemctl enable jupyterlab sudo systemctl start jupyterlab sudo systemctl status jupyterlab okï¼ŒæœåŠ¡è®¾ç½®å®Œæˆ ç„¶åé€€å‡ºä½†ä¸å…³é—­è¿™ä¸ªå®¹å™¨ï¼Œä½¿ç”¨å¿«æ·é”®Ctrl+Q+P æµè§ˆå™¨è®¿é—®127.0.0.1:8888 è¾“å…¥åˆšåˆšçš„å¯†ç 2933194thg309rgbn13495y1tb1 è¿›æ¥äº†ï¼Œè¯æ˜è¿™æ—¶æˆ‘ä»¬çš„jupyterè¿˜åœ¨å®¹å™¨åå°ä¹–ä¹–å‘†ç€ã€‚ï¼Œå› ä¸ºç«¯å£æ˜ å°„å‡ºæ¥äº†ï¼Œè®¿é—®åœ¨ä¸»æœº8888ç«¯å£ç›¸å½“äºè®¿é—®dockerå®¹å™¨çš„8888ç«¯å£ã€‚ ç»§ç»­é…ç½®æˆ‘ä»¬çš„frpc frpc.inié‡Œçš„é…ç½®å’ŒåŸºç¡€ç‰ˆçš„ä¸€æ · cd ~/frp/frp_0.41.0_linux_amd64/ ./frpc -c ./frpc.ini ok,æœåŠ¡èµ·æ¥äº† åœ¨ç½‘å€ä¸­è¾“å…¥æˆ‘ä»¬çš„http://åŸŸåxxx.com:4321 ok,è®¿é—®åˆ°äº† ç„¶åè¾“å…¥æˆ‘ä»¬çš„jupyterå£ä»¤2933194thg309rgbn13495y1tb1 OKï¼Œé€šäº† å¤§åŠŸå‘Šæˆï½ é™„åŠ ç¯‡ï¼ŒæŒ‰éœ€å–ç”¨https://blog.csdn.net/weixin_43975924/article/details/104046790 SSHæ˜ å°„æƒ…æ™¯1ï¼šç”¨æˆ·é€šè¿‡ä¸»æœºAè®¿é—®C å¾…ç»­â€¦â€¦ ","date":"2022-03-27","objectID":"/frp_by_docker/:2:2","series":[],"tags":["linux"],"title":"Linuxä¸‹é…ç½®frpå†…ç½‘ç©¿é€","uri":"/frp_by_docker/#åœ¨å®¹å™¨å†…å®‰è£…pyenv"},{"categories":[],"content":" å†…ç½‘ä¸»æœºç«¯ åˆ°dockerhubå¯»æ‰¾åˆé€‚çš„ä»“åº“dockerhubè¿™é‡Œé€‰æ‹©unbuntuä½œä¸ºæˆ‘ä»¬çš„åŸºç¡€é•œåƒ sudo docker pull python sudo docker pull ubuntu æœ¬æ–‡ä¸­docker ä½¿ç”¨çš„ä¸€äº›å‘½ä»¤ æ‹‰å–é•œåƒå‘½ä»¤ sudo docker pull é•œåƒå é€šè¿‡Dockerfileæ„å»ºé•œåƒå‘½ä»¤ sudo docker build -t æŸ¥çœ‹é•œåƒå‘½ä»¤ ç›®æ ‡é•œåƒå . sudo docker images åˆ é™¤é•œåƒå‘½ä»¤ sudo docker image rm é•œåƒå è¿›å…¥è¿è¡Œä¸­çš„docker å®¹å™¨ï¼Œé€€å‡ºæ—¶ä¸å…³é—­å®¹å™¨ sudo docker exec -it å®¹å™¨å /bin/sh å…¶ä¸­ bin/shæ˜¯æŒ‡ä»¤è¿è¡Œå™¨åœ¨é•œåƒä¸­çš„ä½ç½®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ sudo docker inspect å®¹å™¨å æˆ–è€… é•œåƒå åˆ é™¤æ‰€æœ‰å®¹å™¨ sudo docker container prune sudo docker system prune â€“volumes sudo docker system prune â€“all åœç”¨æ‰€æœ‰å¹¶åˆ é™¤æ‰€æœ‰ï¼Œä¸Šé¢é‚£æ¡å‘½ä»¤åˆ é™¤ä¸äº†åœ¨è¿è¡Œçš„å®¹å™¨(éœ€è¦å¤šé‡å¤è¿è¡Œå›è½¦å‡ æ¬¡å°±å¹²å‡€äº†) sudo docker stop $(sudo docker ps -q) \u0026 sudo docker rm $(sudo docker ps -aq) ä½¿ç”¨è¯¥é•œåƒåˆ›å»ºå®¹å™¨ï¼Œèµ·åä¸ºjupyterlabï¼Œå¹¶å°†8888ç«¯å£æ˜ å°„åˆ°å†…ç½‘ä¸»æœº sudo docker run -p 8888:8888 --name jupyterlab -itd python æ³¨:-då¯ä»¥çœç•¥æ¥è°ƒè¯•æ— æ³•å¯åŠ¨çš„ä¿¡æ¯ï¼Œæ­£å¼ä½¿ç”¨åœ¨æœ¬æ¬¡é…ç½®ä¸­éœ€è¦åŠ ä¸Šã€‚ æŸ¥çœ‹æ˜¯å¦åœ¨è¿è¡Œ sudo docker ps -a Upè¡¨ç¤ºåœ¨æ­£å¸¸è¿è¡Œ è¿›å…¥å®¹å™¨å†… sudo docker exec -it jupyterlab /bin/bash æºæ›´æ–° apt-get update å®‰è£…åŸºç¡€å·¥å…· apt install git vim curl nodejs å®‰è£…pythonä¾èµ– ç”±äºé€‰æ‹©çš„æ˜¯pythonä»“åº“ï¼Œä¸éœ€è¦è€ƒè™‘pythonçš„ä¾èµ–é—®é¢˜ åœ¨å®¹å™¨å†…å®‰è£…pyenv curl -L https://github.com/pyenv/pyenv-installer/raw/master/bin/pyenv-installer | bash é‡å¯shell exec $SHELL é…ç½®pyenvç¯å¢ƒ echo 'export PATH=\"$HOME/.pyenv/bin:$PATH\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv init -)\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv virtualenv-init -)\"' \u003e\u003e ~/.bashrc source ~/.bashrc ä½¿ç”¨pyenvå®‰è£…python3.4.10å¹¶å»ºç«‹jupyterlabè™šæ‹Ÿç¯å¢ƒï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæ¨èä½¿ç”¨çš„pythonç¯å¢ƒç®¡ç†è½¯ä»¶ï¼Œä¹‹å‰çš„åšå®¢ä¸­æœ‰ä»‹ç»ä½¿ç”¨ã€‚(ä¼ é€é—¨) æŸ¥çœ‹å¯å®‰è£…çš„pythonç‰ˆæœ¬å‘½ä»¤ pyenv install -l pyenv install 3.10.4 pyenv virtualenv 3.10.4 jupyterlab pyenv global jupyterlab pip install update pip pip install jupyterlab ç”Ÿæˆjupyter labçš„ç™»é™†å£ä»¤ jupyter lab password è¾“å…¥ä½ æƒ³è¦çš„å£ä»¤ï¼Œå¦‚ï¼š2933194thg309rgbn13495y1tb1 å¯åŠ¨jupyter lab, è®©å®ƒåœ¨åå°è¿è¡Œ ï½ nohup jupyter lab --allow-root --no-browser --ip '*' --port '8888' \u003e ~/.jupyter/jupyterlab.log 2\u003e\u00261 \u0026 æŸ¥çœ‹å®ƒçš„è¿è¡ŒçŠ¶æ€ ps -a ä¹–ä¹–åœ¨åå°å‘†ç€ æ›´å¥½ä¸€ç‚¹ï¼Œè®¾ç½®jupyteræœåŠ¡å¹¶è®©å®ƒå¼€æœºè‡ªå¯åŠ¨ å¢åŠ systemé…ç½®ï¼Œåˆ›å»ºå¹¶ç¼–è¾‘åä¸ºjupyterlabçš„æœåŠ¡ sudo vi /etc/systemd/system/jupyterlab.service æ³¨æ„ExecStartä¸€å®šè¦ç²¾ç¡®åˆ°jupyterlabçš„æ‰§è¡Œæ–‡ä»¶ï¼Œåç»­å¯ä»¥è‡ªè¡Œæ·»åŠ æŒ‡å®šç«¯å£ç­‰å‘½ä»¤-pç­‰ï¼ŒæŒ‡å®šå¯åŠ¨è·¯å¾„ç›´æ¥è·Ÿåœ¨åé¢å°±å¥½äº†ã€‚ [Unit] Description=jupyterlab service After=network.target [Service] Type=simple User=oliver ExecStart=/home/oliver/.pyenv/versions/jupyterlab/bin/jupyter-lab p 9001 /home/ Restart=on-failure RestartPreventExitStatus=23 [Install] WantedBy=multi-user.target ç„¶åä¿å­˜é€€å‡ºï¼Œç»§ç»­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ sudo systemctl daemon-reload sudo systemctl enable jupyterlab sudo systemctl start jupyterlab sudo systemctl status jupyterlab okï¼ŒæœåŠ¡è®¾ç½®å®Œæˆ ç„¶åé€€å‡ºä½†ä¸å…³é—­è¿™ä¸ªå®¹å™¨ï¼Œä½¿ç”¨å¿«æ·é”®Ctrl+Q+P æµè§ˆå™¨è®¿é—®127.0.0.1:8888 è¾“å…¥åˆšåˆšçš„å¯†ç 2933194thg309rgbn13495y1tb1 è¿›æ¥äº†ï¼Œè¯æ˜è¿™æ—¶æˆ‘ä»¬çš„jupyterè¿˜åœ¨å®¹å™¨åå°ä¹–ä¹–å‘†ç€ã€‚ï¼Œå› ä¸ºç«¯å£æ˜ å°„å‡ºæ¥äº†ï¼Œè®¿é—®åœ¨ä¸»æœº8888ç«¯å£ç›¸å½“äºè®¿é—®dockerå®¹å™¨çš„8888ç«¯å£ã€‚ ç»§ç»­é…ç½®æˆ‘ä»¬çš„frpc frpc.inié‡Œçš„é…ç½®å’ŒåŸºç¡€ç‰ˆçš„ä¸€æ · cd ~/frp/frp_0.41.0_linux_amd64/ ./frpc -c ./frpc.ini ok,æœåŠ¡èµ·æ¥äº† åœ¨ç½‘å€ä¸­è¾“å…¥æˆ‘ä»¬çš„http://åŸŸåxxx.com:4321 ok,è®¿é—®åˆ°äº† ç„¶åè¾“å…¥æˆ‘ä»¬çš„jupyterå£ä»¤2933194thg309rgbn13495y1tb1 OKï¼Œé€šäº† å¤§åŠŸå‘Šæˆï½ é™„åŠ ç¯‡ï¼ŒæŒ‰éœ€å–ç”¨https://blog.csdn.net/weixin_43975924/article/details/104046790 SSHæ˜ å°„æƒ…æ™¯1ï¼šç”¨æˆ·é€šè¿‡ä¸»æœºAè®¿é—®C å¾…ç»­â€¦â€¦ ","date":"2022-03-27","objectID":"/frp_by_docker/:2:2","series":[],"tags":["linux"],"title":"Linuxä¸‹é…ç½®frpå†…ç½‘ç©¿é€","uri":"/frp_by_docker/#é‡å¯shell"},{"categories":[],"content":" å†…ç½‘ä¸»æœºç«¯ åˆ°dockerhubå¯»æ‰¾åˆé€‚çš„ä»“åº“dockerhubè¿™é‡Œé€‰æ‹©unbuntuä½œä¸ºæˆ‘ä»¬çš„åŸºç¡€é•œåƒ sudo docker pull python sudo docker pull ubuntu æœ¬æ–‡ä¸­docker ä½¿ç”¨çš„ä¸€äº›å‘½ä»¤ æ‹‰å–é•œåƒå‘½ä»¤ sudo docker pull é•œåƒå é€šè¿‡Dockerfileæ„å»ºé•œåƒå‘½ä»¤ sudo docker build -t æŸ¥çœ‹é•œåƒå‘½ä»¤ ç›®æ ‡é•œåƒå . sudo docker images åˆ é™¤é•œåƒå‘½ä»¤ sudo docker image rm é•œåƒå è¿›å…¥è¿è¡Œä¸­çš„docker å®¹å™¨ï¼Œé€€å‡ºæ—¶ä¸å…³é—­å®¹å™¨ sudo docker exec -it å®¹å™¨å /bin/sh å…¶ä¸­ bin/shæ˜¯æŒ‡ä»¤è¿è¡Œå™¨åœ¨é•œåƒä¸­çš„ä½ç½®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ sudo docker inspect å®¹å™¨å æˆ–è€… é•œåƒå åˆ é™¤æ‰€æœ‰å®¹å™¨ sudo docker container prune sudo docker system prune â€“volumes sudo docker system prune â€“all åœç”¨æ‰€æœ‰å¹¶åˆ é™¤æ‰€æœ‰ï¼Œä¸Šé¢é‚£æ¡å‘½ä»¤åˆ é™¤ä¸äº†åœ¨è¿è¡Œçš„å®¹å™¨(éœ€è¦å¤šé‡å¤è¿è¡Œå›è½¦å‡ æ¬¡å°±å¹²å‡€äº†) sudo docker stop $(sudo docker ps -q) \u0026 sudo docker rm $(sudo docker ps -aq) ä½¿ç”¨è¯¥é•œåƒåˆ›å»ºå®¹å™¨ï¼Œèµ·åä¸ºjupyterlabï¼Œå¹¶å°†8888ç«¯å£æ˜ å°„åˆ°å†…ç½‘ä¸»æœº sudo docker run -p 8888:8888 --name jupyterlab -itd python æ³¨:-då¯ä»¥çœç•¥æ¥è°ƒè¯•æ— æ³•å¯åŠ¨çš„ä¿¡æ¯ï¼Œæ­£å¼ä½¿ç”¨åœ¨æœ¬æ¬¡é…ç½®ä¸­éœ€è¦åŠ ä¸Šã€‚ æŸ¥çœ‹æ˜¯å¦åœ¨è¿è¡Œ sudo docker ps -a Upè¡¨ç¤ºåœ¨æ­£å¸¸è¿è¡Œ è¿›å…¥å®¹å™¨å†… sudo docker exec -it jupyterlab /bin/bash æºæ›´æ–° apt-get update å®‰è£…åŸºç¡€å·¥å…· apt install git vim curl nodejs å®‰è£…pythonä¾èµ– ç”±äºé€‰æ‹©çš„æ˜¯pythonä»“åº“ï¼Œä¸éœ€è¦è€ƒè™‘pythonçš„ä¾èµ–é—®é¢˜ åœ¨å®¹å™¨å†…å®‰è£…pyenv curl -L https://github.com/pyenv/pyenv-installer/raw/master/bin/pyenv-installer | bash é‡å¯shell exec $SHELL é…ç½®pyenvç¯å¢ƒ echo 'export PATH=\"$HOME/.pyenv/bin:$PATH\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv init -)\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv virtualenv-init -)\"' \u003e\u003e ~/.bashrc source ~/.bashrc ä½¿ç”¨pyenvå®‰è£…python3.4.10å¹¶å»ºç«‹jupyterlabè™šæ‹Ÿç¯å¢ƒï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæ¨èä½¿ç”¨çš„pythonç¯å¢ƒç®¡ç†è½¯ä»¶ï¼Œä¹‹å‰çš„åšå®¢ä¸­æœ‰ä»‹ç»ä½¿ç”¨ã€‚(ä¼ é€é—¨) æŸ¥çœ‹å¯å®‰è£…çš„pythonç‰ˆæœ¬å‘½ä»¤ pyenv install -l pyenv install 3.10.4 pyenv virtualenv 3.10.4 jupyterlab pyenv global jupyterlab pip install update pip pip install jupyterlab ç”Ÿæˆjupyter labçš„ç™»é™†å£ä»¤ jupyter lab password è¾“å…¥ä½ æƒ³è¦çš„å£ä»¤ï¼Œå¦‚ï¼š2933194thg309rgbn13495y1tb1 å¯åŠ¨jupyter lab, è®©å®ƒåœ¨åå°è¿è¡Œ ï½ nohup jupyter lab --allow-root --no-browser --ip '*' --port '8888' \u003e ~/.jupyter/jupyterlab.log 2\u003e\u00261 \u0026 æŸ¥çœ‹å®ƒçš„è¿è¡ŒçŠ¶æ€ ps -a ä¹–ä¹–åœ¨åå°å‘†ç€ æ›´å¥½ä¸€ç‚¹ï¼Œè®¾ç½®jupyteræœåŠ¡å¹¶è®©å®ƒå¼€æœºè‡ªå¯åŠ¨ å¢åŠ systemé…ç½®ï¼Œåˆ›å»ºå¹¶ç¼–è¾‘åä¸ºjupyterlabçš„æœåŠ¡ sudo vi /etc/systemd/system/jupyterlab.service æ³¨æ„ExecStartä¸€å®šè¦ç²¾ç¡®åˆ°jupyterlabçš„æ‰§è¡Œæ–‡ä»¶ï¼Œåç»­å¯ä»¥è‡ªè¡Œæ·»åŠ æŒ‡å®šç«¯å£ç­‰å‘½ä»¤-pç­‰ï¼ŒæŒ‡å®šå¯åŠ¨è·¯å¾„ç›´æ¥è·Ÿåœ¨åé¢å°±å¥½äº†ã€‚ [Unit] Description=jupyterlab service After=network.target [Service] Type=simple User=oliver ExecStart=/home/oliver/.pyenv/versions/jupyterlab/bin/jupyter-lab p 9001 /home/ Restart=on-failure RestartPreventExitStatus=23 [Install] WantedBy=multi-user.target ç„¶åä¿å­˜é€€å‡ºï¼Œç»§ç»­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ sudo systemctl daemon-reload sudo systemctl enable jupyterlab sudo systemctl start jupyterlab sudo systemctl status jupyterlab okï¼ŒæœåŠ¡è®¾ç½®å®Œæˆ ç„¶åé€€å‡ºä½†ä¸å…³é—­è¿™ä¸ªå®¹å™¨ï¼Œä½¿ç”¨å¿«æ·é”®Ctrl+Q+P æµè§ˆå™¨è®¿é—®127.0.0.1:8888 è¾“å…¥åˆšåˆšçš„å¯†ç 2933194thg309rgbn13495y1tb1 è¿›æ¥äº†ï¼Œè¯æ˜è¿™æ—¶æˆ‘ä»¬çš„jupyterè¿˜åœ¨å®¹å™¨åå°ä¹–ä¹–å‘†ç€ã€‚ï¼Œå› ä¸ºç«¯å£æ˜ å°„å‡ºæ¥äº†ï¼Œè®¿é—®åœ¨ä¸»æœº8888ç«¯å£ç›¸å½“äºè®¿é—®dockerå®¹å™¨çš„8888ç«¯å£ã€‚ ç»§ç»­é…ç½®æˆ‘ä»¬çš„frpc frpc.inié‡Œçš„é…ç½®å’ŒåŸºç¡€ç‰ˆçš„ä¸€æ · cd ~/frp/frp_0.41.0_linux_amd64/ ./frpc -c ./frpc.ini ok,æœåŠ¡èµ·æ¥äº† åœ¨ç½‘å€ä¸­è¾“å…¥æˆ‘ä»¬çš„http://åŸŸåxxx.com:4321 ok,è®¿é—®åˆ°äº† ç„¶åè¾“å…¥æˆ‘ä»¬çš„jupyterå£ä»¤2933194thg309rgbn13495y1tb1 OKï¼Œé€šäº† å¤§åŠŸå‘Šæˆï½ é™„åŠ ç¯‡ï¼ŒæŒ‰éœ€å–ç”¨https://blog.csdn.net/weixin_43975924/article/details/104046790 SSHæ˜ å°„æƒ…æ™¯1ï¼šç”¨æˆ·é€šè¿‡ä¸»æœºAè®¿é—®C å¾…ç»­â€¦â€¦ ","date":"2022-03-27","objectID":"/frp_by_docker/:2:2","series":[],"tags":["linux"],"title":"Linuxä¸‹é…ç½®frpå†…ç½‘ç©¿é€","uri":"/frp_by_docker/#é…ç½®pyenvç¯å¢ƒ"},{"categories":[],"content":" å†…ç½‘ä¸»æœºç«¯ åˆ°dockerhubå¯»æ‰¾åˆé€‚çš„ä»“åº“dockerhubè¿™é‡Œé€‰æ‹©unbuntuä½œä¸ºæˆ‘ä»¬çš„åŸºç¡€é•œåƒ sudo docker pull python sudo docker pull ubuntu æœ¬æ–‡ä¸­docker ä½¿ç”¨çš„ä¸€äº›å‘½ä»¤ æ‹‰å–é•œåƒå‘½ä»¤ sudo docker pull é•œåƒå é€šè¿‡Dockerfileæ„å»ºé•œåƒå‘½ä»¤ sudo docker build -t æŸ¥çœ‹é•œåƒå‘½ä»¤ ç›®æ ‡é•œåƒå . sudo docker images åˆ é™¤é•œåƒå‘½ä»¤ sudo docker image rm é•œåƒå è¿›å…¥è¿è¡Œä¸­çš„docker å®¹å™¨ï¼Œé€€å‡ºæ—¶ä¸å…³é—­å®¹å™¨ sudo docker exec -it å®¹å™¨å /bin/sh å…¶ä¸­ bin/shæ˜¯æŒ‡ä»¤è¿è¡Œå™¨åœ¨é•œåƒä¸­çš„ä½ç½®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ sudo docker inspect å®¹å™¨å æˆ–è€… é•œåƒå åˆ é™¤æ‰€æœ‰å®¹å™¨ sudo docker container prune sudo docker system prune â€“volumes sudo docker system prune â€“all åœç”¨æ‰€æœ‰å¹¶åˆ é™¤æ‰€æœ‰ï¼Œä¸Šé¢é‚£æ¡å‘½ä»¤åˆ é™¤ä¸äº†åœ¨è¿è¡Œçš„å®¹å™¨(éœ€è¦å¤šé‡å¤è¿è¡Œå›è½¦å‡ æ¬¡å°±å¹²å‡€äº†) sudo docker stop $(sudo docker ps -q) \u0026 sudo docker rm $(sudo docker ps -aq) ä½¿ç”¨è¯¥é•œåƒåˆ›å»ºå®¹å™¨ï¼Œèµ·åä¸ºjupyterlabï¼Œå¹¶å°†8888ç«¯å£æ˜ å°„åˆ°å†…ç½‘ä¸»æœº sudo docker run -p 8888:8888 --name jupyterlab -itd python æ³¨:-då¯ä»¥çœç•¥æ¥è°ƒè¯•æ— æ³•å¯åŠ¨çš„ä¿¡æ¯ï¼Œæ­£å¼ä½¿ç”¨åœ¨æœ¬æ¬¡é…ç½®ä¸­éœ€è¦åŠ ä¸Šã€‚ æŸ¥çœ‹æ˜¯å¦åœ¨è¿è¡Œ sudo docker ps -a Upè¡¨ç¤ºåœ¨æ­£å¸¸è¿è¡Œ è¿›å…¥å®¹å™¨å†… sudo docker exec -it jupyterlab /bin/bash æºæ›´æ–° apt-get update å®‰è£…åŸºç¡€å·¥å…· apt install git vim curl nodejs å®‰è£…pythonä¾èµ– ç”±äºé€‰æ‹©çš„æ˜¯pythonä»“åº“ï¼Œä¸éœ€è¦è€ƒè™‘pythonçš„ä¾èµ–é—®é¢˜ åœ¨å®¹å™¨å†…å®‰è£…pyenv curl -L https://github.com/pyenv/pyenv-installer/raw/master/bin/pyenv-installer | bash é‡å¯shell exec $SHELL é…ç½®pyenvç¯å¢ƒ echo 'export PATH=\"$HOME/.pyenv/bin:$PATH\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv init -)\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv virtualenv-init -)\"' \u003e\u003e ~/.bashrc source ~/.bashrc ä½¿ç”¨pyenvå®‰è£…python3.4.10å¹¶å»ºç«‹jupyterlabè™šæ‹Ÿç¯å¢ƒï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæ¨èä½¿ç”¨çš„pythonç¯å¢ƒç®¡ç†è½¯ä»¶ï¼Œä¹‹å‰çš„åšå®¢ä¸­æœ‰ä»‹ç»ä½¿ç”¨ã€‚(ä¼ é€é—¨) æŸ¥çœ‹å¯å®‰è£…çš„pythonç‰ˆæœ¬å‘½ä»¤ pyenv install -l pyenv install 3.10.4 pyenv virtualenv 3.10.4 jupyterlab pyenv global jupyterlab pip install update pip pip install jupyterlab ç”Ÿæˆjupyter labçš„ç™»é™†å£ä»¤ jupyter lab password è¾“å…¥ä½ æƒ³è¦çš„å£ä»¤ï¼Œå¦‚ï¼š2933194thg309rgbn13495y1tb1 å¯åŠ¨jupyter lab, è®©å®ƒåœ¨åå°è¿è¡Œ ï½ nohup jupyter lab --allow-root --no-browser --ip '*' --port '8888' \u003e ~/.jupyter/jupyterlab.log 2\u003e\u00261 \u0026 æŸ¥çœ‹å®ƒçš„è¿è¡ŒçŠ¶æ€ ps -a ä¹–ä¹–åœ¨åå°å‘†ç€ æ›´å¥½ä¸€ç‚¹ï¼Œè®¾ç½®jupyteræœåŠ¡å¹¶è®©å®ƒå¼€æœºè‡ªå¯åŠ¨ å¢åŠ systemé…ç½®ï¼Œåˆ›å»ºå¹¶ç¼–è¾‘åä¸ºjupyterlabçš„æœåŠ¡ sudo vi /etc/systemd/system/jupyterlab.service æ³¨æ„ExecStartä¸€å®šè¦ç²¾ç¡®åˆ°jupyterlabçš„æ‰§è¡Œæ–‡ä»¶ï¼Œåç»­å¯ä»¥è‡ªè¡Œæ·»åŠ æŒ‡å®šç«¯å£ç­‰å‘½ä»¤-pç­‰ï¼ŒæŒ‡å®šå¯åŠ¨è·¯å¾„ç›´æ¥è·Ÿåœ¨åé¢å°±å¥½äº†ã€‚ [Unit] Description=jupyterlab service After=network.target [Service] Type=simple User=oliver ExecStart=/home/oliver/.pyenv/versions/jupyterlab/bin/jupyter-lab p 9001 /home/ Restart=on-failure RestartPreventExitStatus=23 [Install] WantedBy=multi-user.target ç„¶åä¿å­˜é€€å‡ºï¼Œç»§ç»­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ sudo systemctl daemon-reload sudo systemctl enable jupyterlab sudo systemctl start jupyterlab sudo systemctl status jupyterlab okï¼ŒæœåŠ¡è®¾ç½®å®Œæˆ ç„¶åé€€å‡ºä½†ä¸å…³é—­è¿™ä¸ªå®¹å™¨ï¼Œä½¿ç”¨å¿«æ·é”®Ctrl+Q+P æµè§ˆå™¨è®¿é—®127.0.0.1:8888 è¾“å…¥åˆšåˆšçš„å¯†ç 2933194thg309rgbn13495y1tb1 è¿›æ¥äº†ï¼Œè¯æ˜è¿™æ—¶æˆ‘ä»¬çš„jupyterè¿˜åœ¨å®¹å™¨åå°ä¹–ä¹–å‘†ç€ã€‚ï¼Œå› ä¸ºç«¯å£æ˜ å°„å‡ºæ¥äº†ï¼Œè®¿é—®åœ¨ä¸»æœº8888ç«¯å£ç›¸å½“äºè®¿é—®dockerå®¹å™¨çš„8888ç«¯å£ã€‚ ç»§ç»­é…ç½®æˆ‘ä»¬çš„frpc frpc.inié‡Œçš„é…ç½®å’ŒåŸºç¡€ç‰ˆçš„ä¸€æ · cd ~/frp/frp_0.41.0_linux_amd64/ ./frpc -c ./frpc.ini ok,æœåŠ¡èµ·æ¥äº† åœ¨ç½‘å€ä¸­è¾“å…¥æˆ‘ä»¬çš„http://åŸŸåxxx.com:4321 ok,è®¿é—®åˆ°äº† ç„¶åè¾“å…¥æˆ‘ä»¬çš„jupyterå£ä»¤2933194thg309rgbn13495y1tb1 OKï¼Œé€šäº† å¤§åŠŸå‘Šæˆï½ é™„åŠ ç¯‡ï¼ŒæŒ‰éœ€å–ç”¨https://blog.csdn.net/weixin_43975924/article/details/104046790 SSHæ˜ å°„æƒ…æ™¯1ï¼šç”¨æˆ·é€šè¿‡ä¸»æœºAè®¿é—®C å¾…ç»­â€¦â€¦ ","date":"2022-03-27","objectID":"/frp_by_docker/:2:2","series":[],"tags":["linux"],"title":"Linuxä¸‹é…ç½®frpå†…ç½‘ç©¿é€","uri":"/frp_by_docker/#ä½¿ç”¨pyenvå®‰è£…python3410å¹¶å»ºç«‹jupyterlabè™šæ‹Ÿç¯å¢ƒè¿™æ˜¯ä¸€ä¸ªå¾ˆæ¨èä½¿ç”¨çš„pythonç¯å¢ƒç®¡ç†è½¯ä»¶ä¹‹å‰çš„åšå®¢ä¸­æœ‰ä»‹ç»ä½¿ç”¨ä¼ é€é—¨httpsdp0dcnenv_managemente9a39fe794a8e696b9e6b395"},{"categories":[],"content":" å†…ç½‘ä¸»æœºç«¯ åˆ°dockerhubå¯»æ‰¾åˆé€‚çš„ä»“åº“dockerhubè¿™é‡Œé€‰æ‹©unbuntuä½œä¸ºæˆ‘ä»¬çš„åŸºç¡€é•œåƒ sudo docker pull python sudo docker pull ubuntu æœ¬æ–‡ä¸­docker ä½¿ç”¨çš„ä¸€äº›å‘½ä»¤ æ‹‰å–é•œåƒå‘½ä»¤ sudo docker pull é•œåƒå é€šè¿‡Dockerfileæ„å»ºé•œåƒå‘½ä»¤ sudo docker build -t æŸ¥çœ‹é•œåƒå‘½ä»¤ ç›®æ ‡é•œåƒå . sudo docker images åˆ é™¤é•œåƒå‘½ä»¤ sudo docker image rm é•œåƒå è¿›å…¥è¿è¡Œä¸­çš„docker å®¹å™¨ï¼Œé€€å‡ºæ—¶ä¸å…³é—­å®¹å™¨ sudo docker exec -it å®¹å™¨å /bin/sh å…¶ä¸­ bin/shæ˜¯æŒ‡ä»¤è¿è¡Œå™¨åœ¨é•œåƒä¸­çš„ä½ç½®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ sudo docker inspect å®¹å™¨å æˆ–è€… é•œåƒå åˆ é™¤æ‰€æœ‰å®¹å™¨ sudo docker container prune sudo docker system prune â€“volumes sudo docker system prune â€“all åœç”¨æ‰€æœ‰å¹¶åˆ é™¤æ‰€æœ‰ï¼Œä¸Šé¢é‚£æ¡å‘½ä»¤åˆ é™¤ä¸äº†åœ¨è¿è¡Œçš„å®¹å™¨(éœ€è¦å¤šé‡å¤è¿è¡Œå›è½¦å‡ æ¬¡å°±å¹²å‡€äº†) sudo docker stop $(sudo docker ps -q) \u0026 sudo docker rm $(sudo docker ps -aq) ä½¿ç”¨è¯¥é•œåƒåˆ›å»ºå®¹å™¨ï¼Œèµ·åä¸ºjupyterlabï¼Œå¹¶å°†8888ç«¯å£æ˜ å°„åˆ°å†…ç½‘ä¸»æœº sudo docker run -p 8888:8888 --name jupyterlab -itd python æ³¨:-då¯ä»¥çœç•¥æ¥è°ƒè¯•æ— æ³•å¯åŠ¨çš„ä¿¡æ¯ï¼Œæ­£å¼ä½¿ç”¨åœ¨æœ¬æ¬¡é…ç½®ä¸­éœ€è¦åŠ ä¸Šã€‚ æŸ¥çœ‹æ˜¯å¦åœ¨è¿è¡Œ sudo docker ps -a Upè¡¨ç¤ºåœ¨æ­£å¸¸è¿è¡Œ è¿›å…¥å®¹å™¨å†… sudo docker exec -it jupyterlab /bin/bash æºæ›´æ–° apt-get update å®‰è£…åŸºç¡€å·¥å…· apt install git vim curl nodejs å®‰è£…pythonä¾èµ– ç”±äºé€‰æ‹©çš„æ˜¯pythonä»“åº“ï¼Œä¸éœ€è¦è€ƒè™‘pythonçš„ä¾èµ–é—®é¢˜ åœ¨å®¹å™¨å†…å®‰è£…pyenv curl -L https://github.com/pyenv/pyenv-installer/raw/master/bin/pyenv-installer | bash é‡å¯shell exec $SHELL é…ç½®pyenvç¯å¢ƒ echo 'export PATH=\"$HOME/.pyenv/bin:$PATH\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv init -)\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv virtualenv-init -)\"' \u003e\u003e ~/.bashrc source ~/.bashrc ä½¿ç”¨pyenvå®‰è£…python3.4.10å¹¶å»ºç«‹jupyterlabè™šæ‹Ÿç¯å¢ƒï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæ¨èä½¿ç”¨çš„pythonç¯å¢ƒç®¡ç†è½¯ä»¶ï¼Œä¹‹å‰çš„åšå®¢ä¸­æœ‰ä»‹ç»ä½¿ç”¨ã€‚(ä¼ é€é—¨) æŸ¥çœ‹å¯å®‰è£…çš„pythonç‰ˆæœ¬å‘½ä»¤ pyenv install -l pyenv install 3.10.4 pyenv virtualenv 3.10.4 jupyterlab pyenv global jupyterlab pip install update pip pip install jupyterlab ç”Ÿæˆjupyter labçš„ç™»é™†å£ä»¤ jupyter lab password è¾“å…¥ä½ æƒ³è¦çš„å£ä»¤ï¼Œå¦‚ï¼š2933194thg309rgbn13495y1tb1 å¯åŠ¨jupyter lab, è®©å®ƒåœ¨åå°è¿è¡Œ ï½ nohup jupyter lab --allow-root --no-browser --ip '*' --port '8888' \u003e ~/.jupyter/jupyterlab.log 2\u003e\u00261 \u0026 æŸ¥çœ‹å®ƒçš„è¿è¡ŒçŠ¶æ€ ps -a ä¹–ä¹–åœ¨åå°å‘†ç€ æ›´å¥½ä¸€ç‚¹ï¼Œè®¾ç½®jupyteræœåŠ¡å¹¶è®©å®ƒå¼€æœºè‡ªå¯åŠ¨ å¢åŠ systemé…ç½®ï¼Œåˆ›å»ºå¹¶ç¼–è¾‘åä¸ºjupyterlabçš„æœåŠ¡ sudo vi /etc/systemd/system/jupyterlab.service æ³¨æ„ExecStartä¸€å®šè¦ç²¾ç¡®åˆ°jupyterlabçš„æ‰§è¡Œæ–‡ä»¶ï¼Œåç»­å¯ä»¥è‡ªè¡Œæ·»åŠ æŒ‡å®šç«¯å£ç­‰å‘½ä»¤-pç­‰ï¼ŒæŒ‡å®šå¯åŠ¨è·¯å¾„ç›´æ¥è·Ÿåœ¨åé¢å°±å¥½äº†ã€‚ [Unit] Description=jupyterlab service After=network.target [Service] Type=simple User=oliver ExecStart=/home/oliver/.pyenv/versions/jupyterlab/bin/jupyter-lab p 9001 /home/ Restart=on-failure RestartPreventExitStatus=23 [Install] WantedBy=multi-user.target ç„¶åä¿å­˜é€€å‡ºï¼Œç»§ç»­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ sudo systemctl daemon-reload sudo systemctl enable jupyterlab sudo systemctl start jupyterlab sudo systemctl status jupyterlab okï¼ŒæœåŠ¡è®¾ç½®å®Œæˆ ç„¶åé€€å‡ºä½†ä¸å…³é—­è¿™ä¸ªå®¹å™¨ï¼Œä½¿ç”¨å¿«æ·é”®Ctrl+Q+P æµè§ˆå™¨è®¿é—®127.0.0.1:8888 è¾“å…¥åˆšåˆšçš„å¯†ç 2933194thg309rgbn13495y1tb1 è¿›æ¥äº†ï¼Œè¯æ˜è¿™æ—¶æˆ‘ä»¬çš„jupyterè¿˜åœ¨å®¹å™¨åå°ä¹–ä¹–å‘†ç€ã€‚ï¼Œå› ä¸ºç«¯å£æ˜ å°„å‡ºæ¥äº†ï¼Œè®¿é—®åœ¨ä¸»æœº8888ç«¯å£ç›¸å½“äºè®¿é—®dockerå®¹å™¨çš„8888ç«¯å£ã€‚ ç»§ç»­é…ç½®æˆ‘ä»¬çš„frpc frpc.inié‡Œçš„é…ç½®å’ŒåŸºç¡€ç‰ˆçš„ä¸€æ · cd ~/frp/frp_0.41.0_linux_amd64/ ./frpc -c ./frpc.ini ok,æœåŠ¡èµ·æ¥äº† åœ¨ç½‘å€ä¸­è¾“å…¥æˆ‘ä»¬çš„http://åŸŸåxxx.com:4321 ok,è®¿é—®åˆ°äº† ç„¶åè¾“å…¥æˆ‘ä»¬çš„jupyterå£ä»¤2933194thg309rgbn13495y1tb1 OKï¼Œé€šäº† å¤§åŠŸå‘Šæˆï½ é™„åŠ ç¯‡ï¼ŒæŒ‰éœ€å–ç”¨https://blog.csdn.net/weixin_43975924/article/details/104046790 SSHæ˜ å°„æƒ…æ™¯1ï¼šç”¨æˆ·é€šè¿‡ä¸»æœºAè®¿é—®C å¾…ç»­â€¦â€¦ ","date":"2022-03-27","objectID":"/frp_by_docker/:2:2","series":[],"tags":["linux"],"title":"Linuxä¸‹é…ç½®frpå†…ç½‘ç©¿é€","uri":"/frp_by_docker/#ç„¶åé€€å‡ºä½†ä¸å…³é—­è¿™ä¸ªå®¹å™¨ä½¿ç”¨å¿«æ·é”®ctrlqp"},{"categories":[],"content":" å†…ç½‘ä¸»æœºç«¯ åˆ°dockerhubå¯»æ‰¾åˆé€‚çš„ä»“åº“dockerhubè¿™é‡Œé€‰æ‹©unbuntuä½œä¸ºæˆ‘ä»¬çš„åŸºç¡€é•œåƒ sudo docker pull python sudo docker pull ubuntu æœ¬æ–‡ä¸­docker ä½¿ç”¨çš„ä¸€äº›å‘½ä»¤ æ‹‰å–é•œåƒå‘½ä»¤ sudo docker pull é•œåƒå é€šè¿‡Dockerfileæ„å»ºé•œåƒå‘½ä»¤ sudo docker build -t æŸ¥çœ‹é•œåƒå‘½ä»¤ ç›®æ ‡é•œåƒå . sudo docker images åˆ é™¤é•œåƒå‘½ä»¤ sudo docker image rm é•œåƒå è¿›å…¥è¿è¡Œä¸­çš„docker å®¹å™¨ï¼Œé€€å‡ºæ—¶ä¸å…³é—­å®¹å™¨ sudo docker exec -it å®¹å™¨å /bin/sh å…¶ä¸­ bin/shæ˜¯æŒ‡ä»¤è¿è¡Œå™¨åœ¨é•œåƒä¸­çš„ä½ç½®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ sudo docker inspect å®¹å™¨å æˆ–è€… é•œåƒå åˆ é™¤æ‰€æœ‰å®¹å™¨ sudo docker container prune sudo docker system prune â€“volumes sudo docker system prune â€“all åœç”¨æ‰€æœ‰å¹¶åˆ é™¤æ‰€æœ‰ï¼Œä¸Šé¢é‚£æ¡å‘½ä»¤åˆ é™¤ä¸äº†åœ¨è¿è¡Œçš„å®¹å™¨(éœ€è¦å¤šé‡å¤è¿è¡Œå›è½¦å‡ æ¬¡å°±å¹²å‡€äº†) sudo docker stop $(sudo docker ps -q) \u0026 sudo docker rm $(sudo docker ps -aq) ä½¿ç”¨è¯¥é•œåƒåˆ›å»ºå®¹å™¨ï¼Œèµ·åä¸ºjupyterlabï¼Œå¹¶å°†8888ç«¯å£æ˜ å°„åˆ°å†…ç½‘ä¸»æœº sudo docker run -p 8888:8888 --name jupyterlab -itd python æ³¨:-då¯ä»¥çœç•¥æ¥è°ƒè¯•æ— æ³•å¯åŠ¨çš„ä¿¡æ¯ï¼Œæ­£å¼ä½¿ç”¨åœ¨æœ¬æ¬¡é…ç½®ä¸­éœ€è¦åŠ ä¸Šã€‚ æŸ¥çœ‹æ˜¯å¦åœ¨è¿è¡Œ sudo docker ps -a Upè¡¨ç¤ºåœ¨æ­£å¸¸è¿è¡Œ è¿›å…¥å®¹å™¨å†… sudo docker exec -it jupyterlab /bin/bash æºæ›´æ–° apt-get update å®‰è£…åŸºç¡€å·¥å…· apt install git vim curl nodejs å®‰è£…pythonä¾èµ– ç”±äºé€‰æ‹©çš„æ˜¯pythonä»“åº“ï¼Œä¸éœ€è¦è€ƒè™‘pythonçš„ä¾èµ–é—®é¢˜ åœ¨å®¹å™¨å†…å®‰è£…pyenv curl -L https://github.com/pyenv/pyenv-installer/raw/master/bin/pyenv-installer | bash é‡å¯shell exec $SHELL é…ç½®pyenvç¯å¢ƒ echo 'export PATH=\"$HOME/.pyenv/bin:$PATH\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv init -)\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv virtualenv-init -)\"' \u003e\u003e ~/.bashrc source ~/.bashrc ä½¿ç”¨pyenvå®‰è£…python3.4.10å¹¶å»ºç«‹jupyterlabè™šæ‹Ÿç¯å¢ƒï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæ¨èä½¿ç”¨çš„pythonç¯å¢ƒç®¡ç†è½¯ä»¶ï¼Œä¹‹å‰çš„åšå®¢ä¸­æœ‰ä»‹ç»ä½¿ç”¨ã€‚(ä¼ é€é—¨) æŸ¥çœ‹å¯å®‰è£…çš„pythonç‰ˆæœ¬å‘½ä»¤ pyenv install -l pyenv install 3.10.4 pyenv virtualenv 3.10.4 jupyterlab pyenv global jupyterlab pip install update pip pip install jupyterlab ç”Ÿæˆjupyter labçš„ç™»é™†å£ä»¤ jupyter lab password è¾“å…¥ä½ æƒ³è¦çš„å£ä»¤ï¼Œå¦‚ï¼š2933194thg309rgbn13495y1tb1 å¯åŠ¨jupyter lab, è®©å®ƒåœ¨åå°è¿è¡Œ ï½ nohup jupyter lab --allow-root --no-browser --ip '*' --port '8888' \u003e ~/.jupyter/jupyterlab.log 2\u003e\u00261 \u0026 æŸ¥çœ‹å®ƒçš„è¿è¡ŒçŠ¶æ€ ps -a ä¹–ä¹–åœ¨åå°å‘†ç€ æ›´å¥½ä¸€ç‚¹ï¼Œè®¾ç½®jupyteræœåŠ¡å¹¶è®©å®ƒå¼€æœºè‡ªå¯åŠ¨ å¢åŠ systemé…ç½®ï¼Œåˆ›å»ºå¹¶ç¼–è¾‘åä¸ºjupyterlabçš„æœåŠ¡ sudo vi /etc/systemd/system/jupyterlab.service æ³¨æ„ExecStartä¸€å®šè¦ç²¾ç¡®åˆ°jupyterlabçš„æ‰§è¡Œæ–‡ä»¶ï¼Œåç»­å¯ä»¥è‡ªè¡Œæ·»åŠ æŒ‡å®šç«¯å£ç­‰å‘½ä»¤-pç­‰ï¼ŒæŒ‡å®šå¯åŠ¨è·¯å¾„ç›´æ¥è·Ÿåœ¨åé¢å°±å¥½äº†ã€‚ [Unit] Description=jupyterlab service After=network.target [Service] Type=simple User=oliver ExecStart=/home/oliver/.pyenv/versions/jupyterlab/bin/jupyter-lab p 9001 /home/ Restart=on-failure RestartPreventExitStatus=23 [Install] WantedBy=multi-user.target ç„¶åä¿å­˜é€€å‡ºï¼Œç»§ç»­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ sudo systemctl daemon-reload sudo systemctl enable jupyterlab sudo systemctl start jupyterlab sudo systemctl status jupyterlab okï¼ŒæœåŠ¡è®¾ç½®å®Œæˆ ç„¶åé€€å‡ºä½†ä¸å…³é—­è¿™ä¸ªå®¹å™¨ï¼Œä½¿ç”¨å¿«æ·é”®Ctrl+Q+P æµè§ˆå™¨è®¿é—®127.0.0.1:8888 è¾“å…¥åˆšåˆšçš„å¯†ç 2933194thg309rgbn13495y1tb1 è¿›æ¥äº†ï¼Œè¯æ˜è¿™æ—¶æˆ‘ä»¬çš„jupyterè¿˜åœ¨å®¹å™¨åå°ä¹–ä¹–å‘†ç€ã€‚ï¼Œå› ä¸ºç«¯å£æ˜ å°„å‡ºæ¥äº†ï¼Œè®¿é—®åœ¨ä¸»æœº8888ç«¯å£ç›¸å½“äºè®¿é—®dockerå®¹å™¨çš„8888ç«¯å£ã€‚ ç»§ç»­é…ç½®æˆ‘ä»¬çš„frpc frpc.inié‡Œçš„é…ç½®å’ŒåŸºç¡€ç‰ˆçš„ä¸€æ · cd ~/frp/frp_0.41.0_linux_amd64/ ./frpc -c ./frpc.ini ok,æœåŠ¡èµ·æ¥äº† åœ¨ç½‘å€ä¸­è¾“å…¥æˆ‘ä»¬çš„http://åŸŸåxxx.com:4321 ok,è®¿é—®åˆ°äº† ç„¶åè¾“å…¥æˆ‘ä»¬çš„jupyterå£ä»¤2933194thg309rgbn13495y1tb1 OKï¼Œé€šäº† å¤§åŠŸå‘Šæˆï½ é™„åŠ ç¯‡ï¼ŒæŒ‰éœ€å–ç”¨https://blog.csdn.net/weixin_43975924/article/details/104046790 SSHæ˜ å°„æƒ…æ™¯1ï¼šç”¨æˆ·é€šè¿‡ä¸»æœºAè®¿é—®C å¾…ç»­â€¦â€¦ ","date":"2022-03-27","objectID":"/frp_by_docker/:2:2","series":[],"tags":["linux"],"title":"Linuxä¸‹é…ç½®frpå†…ç½‘ç©¿é€","uri":"/frp_by_docker/#ç»§ç»­é…ç½®æˆ‘ä»¬çš„frpc"},{"categories":[],"content":" å†…ç½‘ä¸»æœºç«¯ åˆ°dockerhubå¯»æ‰¾åˆé€‚çš„ä»“åº“dockerhubè¿™é‡Œé€‰æ‹©unbuntuä½œä¸ºæˆ‘ä»¬çš„åŸºç¡€é•œåƒ sudo docker pull python sudo docker pull ubuntu æœ¬æ–‡ä¸­docker ä½¿ç”¨çš„ä¸€äº›å‘½ä»¤ æ‹‰å–é•œåƒå‘½ä»¤ sudo docker pull é•œåƒå é€šè¿‡Dockerfileæ„å»ºé•œåƒå‘½ä»¤ sudo docker build -t æŸ¥çœ‹é•œåƒå‘½ä»¤ ç›®æ ‡é•œåƒå . sudo docker images åˆ é™¤é•œåƒå‘½ä»¤ sudo docker image rm é•œåƒå è¿›å…¥è¿è¡Œä¸­çš„docker å®¹å™¨ï¼Œé€€å‡ºæ—¶ä¸å…³é—­å®¹å™¨ sudo docker exec -it å®¹å™¨å /bin/sh å…¶ä¸­ bin/shæ˜¯æŒ‡ä»¤è¿è¡Œå™¨åœ¨é•œåƒä¸­çš„ä½ç½®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ sudo docker inspect å®¹å™¨å æˆ–è€… é•œåƒå åˆ é™¤æ‰€æœ‰å®¹å™¨ sudo docker container prune sudo docker system prune â€“volumes sudo docker system prune â€“all åœç”¨æ‰€æœ‰å¹¶åˆ é™¤æ‰€æœ‰ï¼Œä¸Šé¢é‚£æ¡å‘½ä»¤åˆ é™¤ä¸äº†åœ¨è¿è¡Œçš„å®¹å™¨(éœ€è¦å¤šé‡å¤è¿è¡Œå›è½¦å‡ æ¬¡å°±å¹²å‡€äº†) sudo docker stop $(sudo docker ps -q) \u0026 sudo docker rm $(sudo docker ps -aq) ä½¿ç”¨è¯¥é•œåƒåˆ›å»ºå®¹å™¨ï¼Œèµ·åä¸ºjupyterlabï¼Œå¹¶å°†8888ç«¯å£æ˜ å°„åˆ°å†…ç½‘ä¸»æœº sudo docker run -p 8888:8888 --name jupyterlab -itd python æ³¨:-då¯ä»¥çœç•¥æ¥è°ƒè¯•æ— æ³•å¯åŠ¨çš„ä¿¡æ¯ï¼Œæ­£å¼ä½¿ç”¨åœ¨æœ¬æ¬¡é…ç½®ä¸­éœ€è¦åŠ ä¸Šã€‚ æŸ¥çœ‹æ˜¯å¦åœ¨è¿è¡Œ sudo docker ps -a Upè¡¨ç¤ºåœ¨æ­£å¸¸è¿è¡Œ è¿›å…¥å®¹å™¨å†… sudo docker exec -it jupyterlab /bin/bash æºæ›´æ–° apt-get update å®‰è£…åŸºç¡€å·¥å…· apt install git vim curl nodejs å®‰è£…pythonä¾èµ– ç”±äºé€‰æ‹©çš„æ˜¯pythonä»“åº“ï¼Œä¸éœ€è¦è€ƒè™‘pythonçš„ä¾èµ–é—®é¢˜ åœ¨å®¹å™¨å†…å®‰è£…pyenv curl -L https://github.com/pyenv/pyenv-installer/raw/master/bin/pyenv-installer | bash é‡å¯shell exec $SHELL é…ç½®pyenvç¯å¢ƒ echo 'export PATH=\"$HOME/.pyenv/bin:$PATH\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv init -)\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv virtualenv-init -)\"' \u003e\u003e ~/.bashrc source ~/.bashrc ä½¿ç”¨pyenvå®‰è£…python3.4.10å¹¶å»ºç«‹jupyterlabè™šæ‹Ÿç¯å¢ƒï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæ¨èä½¿ç”¨çš„pythonç¯å¢ƒç®¡ç†è½¯ä»¶ï¼Œä¹‹å‰çš„åšå®¢ä¸­æœ‰ä»‹ç»ä½¿ç”¨ã€‚(ä¼ é€é—¨) æŸ¥çœ‹å¯å®‰è£…çš„pythonç‰ˆæœ¬å‘½ä»¤ pyenv install -l pyenv install 3.10.4 pyenv virtualenv 3.10.4 jupyterlab pyenv global jupyterlab pip install update pip pip install jupyterlab ç”Ÿæˆjupyter labçš„ç™»é™†å£ä»¤ jupyter lab password è¾“å…¥ä½ æƒ³è¦çš„å£ä»¤ï¼Œå¦‚ï¼š2933194thg309rgbn13495y1tb1 å¯åŠ¨jupyter lab, è®©å®ƒåœ¨åå°è¿è¡Œ ï½ nohup jupyter lab --allow-root --no-browser --ip '*' --port '8888' \u003e ~/.jupyter/jupyterlab.log 2\u003e\u00261 \u0026 æŸ¥çœ‹å®ƒçš„è¿è¡ŒçŠ¶æ€ ps -a ä¹–ä¹–åœ¨åå°å‘†ç€ æ›´å¥½ä¸€ç‚¹ï¼Œè®¾ç½®jupyteræœåŠ¡å¹¶è®©å®ƒå¼€æœºè‡ªå¯åŠ¨ å¢åŠ systemé…ç½®ï¼Œåˆ›å»ºå¹¶ç¼–è¾‘åä¸ºjupyterlabçš„æœåŠ¡ sudo vi /etc/systemd/system/jupyterlab.service æ³¨æ„ExecStartä¸€å®šè¦ç²¾ç¡®åˆ°jupyterlabçš„æ‰§è¡Œæ–‡ä»¶ï¼Œåç»­å¯ä»¥è‡ªè¡Œæ·»åŠ æŒ‡å®šç«¯å£ç­‰å‘½ä»¤-pç­‰ï¼ŒæŒ‡å®šå¯åŠ¨è·¯å¾„ç›´æ¥è·Ÿåœ¨åé¢å°±å¥½äº†ã€‚ [Unit] Description=jupyterlab service After=network.target [Service] Type=simple User=oliver ExecStart=/home/oliver/.pyenv/versions/jupyterlab/bin/jupyter-lab p 9001 /home/ Restart=on-failure RestartPreventExitStatus=23 [Install] WantedBy=multi-user.target ç„¶åä¿å­˜é€€å‡ºï¼Œç»§ç»­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ sudo systemctl daemon-reload sudo systemctl enable jupyterlab sudo systemctl start jupyterlab sudo systemctl status jupyterlab okï¼ŒæœåŠ¡è®¾ç½®å®Œæˆ ç„¶åé€€å‡ºä½†ä¸å…³é—­è¿™ä¸ªå®¹å™¨ï¼Œä½¿ç”¨å¿«æ·é”®Ctrl+Q+P æµè§ˆå™¨è®¿é—®127.0.0.1:8888 è¾“å…¥åˆšåˆšçš„å¯†ç 2933194thg309rgbn13495y1tb1 è¿›æ¥äº†ï¼Œè¯æ˜è¿™æ—¶æˆ‘ä»¬çš„jupyterè¿˜åœ¨å®¹å™¨åå°ä¹–ä¹–å‘†ç€ã€‚ï¼Œå› ä¸ºç«¯å£æ˜ å°„å‡ºæ¥äº†ï¼Œè®¿é—®åœ¨ä¸»æœº8888ç«¯å£ç›¸å½“äºè®¿é—®dockerå®¹å™¨çš„8888ç«¯å£ã€‚ ç»§ç»­é…ç½®æˆ‘ä»¬çš„frpc frpc.inié‡Œçš„é…ç½®å’ŒåŸºç¡€ç‰ˆçš„ä¸€æ · cd ~/frp/frp_0.41.0_linux_amd64/ ./frpc -c ./frpc.ini ok,æœåŠ¡èµ·æ¥äº† åœ¨ç½‘å€ä¸­è¾“å…¥æˆ‘ä»¬çš„http://åŸŸåxxx.com:4321 ok,è®¿é—®åˆ°äº† ç„¶åè¾“å…¥æˆ‘ä»¬çš„jupyterå£ä»¤2933194thg309rgbn13495y1tb1 OKï¼Œé€šäº† å¤§åŠŸå‘Šæˆï½ é™„åŠ ç¯‡ï¼ŒæŒ‰éœ€å–ç”¨https://blog.csdn.net/weixin_43975924/article/details/104046790 SSHæ˜ å°„æƒ…æ™¯1ï¼šç”¨æˆ·é€šè¿‡ä¸»æœºAè®¿é—®C å¾…ç»­â€¦â€¦ ","date":"2022-03-27","objectID":"/frp_by_docker/:2:2","series":[],"tags":["linux"],"title":"Linuxä¸‹é…ç½®frpå†…ç½‘ç©¿é€","uri":"/frp_by_docker/#frpcinié‡Œçš„é…ç½®å’ŒåŸºç¡€ç‰ˆçš„ä¸€æ ·"},{"categories":[],"content":" å†…ç½‘ä¸»æœºç«¯ åˆ°dockerhubå¯»æ‰¾åˆé€‚çš„ä»“åº“dockerhubè¿™é‡Œé€‰æ‹©unbuntuä½œä¸ºæˆ‘ä»¬çš„åŸºç¡€é•œåƒ sudo docker pull python sudo docker pull ubuntu æœ¬æ–‡ä¸­docker ä½¿ç”¨çš„ä¸€äº›å‘½ä»¤ æ‹‰å–é•œåƒå‘½ä»¤ sudo docker pull é•œåƒå é€šè¿‡Dockerfileæ„å»ºé•œåƒå‘½ä»¤ sudo docker build -t æŸ¥çœ‹é•œåƒå‘½ä»¤ ç›®æ ‡é•œåƒå . sudo docker images åˆ é™¤é•œåƒå‘½ä»¤ sudo docker image rm é•œåƒå è¿›å…¥è¿è¡Œä¸­çš„docker å®¹å™¨ï¼Œé€€å‡ºæ—¶ä¸å…³é—­å®¹å™¨ sudo docker exec -it å®¹å™¨å /bin/sh å…¶ä¸­ bin/shæ˜¯æŒ‡ä»¤è¿è¡Œå™¨åœ¨é•œåƒä¸­çš„ä½ç½®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ sudo docker inspect å®¹å™¨å æˆ–è€… é•œåƒå åˆ é™¤æ‰€æœ‰å®¹å™¨ sudo docker container prune sudo docker system prune â€“volumes sudo docker system prune â€“all åœç”¨æ‰€æœ‰å¹¶åˆ é™¤æ‰€æœ‰ï¼Œä¸Šé¢é‚£æ¡å‘½ä»¤åˆ é™¤ä¸äº†åœ¨è¿è¡Œçš„å®¹å™¨(éœ€è¦å¤šé‡å¤è¿è¡Œå›è½¦å‡ æ¬¡å°±å¹²å‡€äº†) sudo docker stop $(sudo docker ps -q) \u0026 sudo docker rm $(sudo docker ps -aq) ä½¿ç”¨è¯¥é•œåƒåˆ›å»ºå®¹å™¨ï¼Œèµ·åä¸ºjupyterlabï¼Œå¹¶å°†8888ç«¯å£æ˜ å°„åˆ°å†…ç½‘ä¸»æœº sudo docker run -p 8888:8888 --name jupyterlab -itd python æ³¨:-då¯ä»¥çœç•¥æ¥è°ƒè¯•æ— æ³•å¯åŠ¨çš„ä¿¡æ¯ï¼Œæ­£å¼ä½¿ç”¨åœ¨æœ¬æ¬¡é…ç½®ä¸­éœ€è¦åŠ ä¸Šã€‚ æŸ¥çœ‹æ˜¯å¦åœ¨è¿è¡Œ sudo docker ps -a Upè¡¨ç¤ºåœ¨æ­£å¸¸è¿è¡Œ è¿›å…¥å®¹å™¨å†… sudo docker exec -it jupyterlab /bin/bash æºæ›´æ–° apt-get update å®‰è£…åŸºç¡€å·¥å…· apt install git vim curl nodejs å®‰è£…pythonä¾èµ– ç”±äºé€‰æ‹©çš„æ˜¯pythonä»“åº“ï¼Œä¸éœ€è¦è€ƒè™‘pythonçš„ä¾èµ–é—®é¢˜ åœ¨å®¹å™¨å†…å®‰è£…pyenv curl -L https://github.com/pyenv/pyenv-installer/raw/master/bin/pyenv-installer | bash é‡å¯shell exec $SHELL é…ç½®pyenvç¯å¢ƒ echo 'export PATH=\"$HOME/.pyenv/bin:$PATH\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv init -)\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv virtualenv-init -)\"' \u003e\u003e ~/.bashrc source ~/.bashrc ä½¿ç”¨pyenvå®‰è£…python3.4.10å¹¶å»ºç«‹jupyterlabè™šæ‹Ÿç¯å¢ƒï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæ¨èä½¿ç”¨çš„pythonç¯å¢ƒç®¡ç†è½¯ä»¶ï¼Œä¹‹å‰çš„åšå®¢ä¸­æœ‰ä»‹ç»ä½¿ç”¨ã€‚(ä¼ é€é—¨) æŸ¥çœ‹å¯å®‰è£…çš„pythonç‰ˆæœ¬å‘½ä»¤ pyenv install -l pyenv install 3.10.4 pyenv virtualenv 3.10.4 jupyterlab pyenv global jupyterlab pip install update pip pip install jupyterlab ç”Ÿæˆjupyter labçš„ç™»é™†å£ä»¤ jupyter lab password è¾“å…¥ä½ æƒ³è¦çš„å£ä»¤ï¼Œå¦‚ï¼š2933194thg309rgbn13495y1tb1 å¯åŠ¨jupyter lab, è®©å®ƒåœ¨åå°è¿è¡Œ ï½ nohup jupyter lab --allow-root --no-browser --ip '*' --port '8888' \u003e ~/.jupyter/jupyterlab.log 2\u003e\u00261 \u0026 æŸ¥çœ‹å®ƒçš„è¿è¡ŒçŠ¶æ€ ps -a ä¹–ä¹–åœ¨åå°å‘†ç€ æ›´å¥½ä¸€ç‚¹ï¼Œè®¾ç½®jupyteræœåŠ¡å¹¶è®©å®ƒå¼€æœºè‡ªå¯åŠ¨ å¢åŠ systemé…ç½®ï¼Œåˆ›å»ºå¹¶ç¼–è¾‘åä¸ºjupyterlabçš„æœåŠ¡ sudo vi /etc/systemd/system/jupyterlab.service æ³¨æ„ExecStartä¸€å®šè¦ç²¾ç¡®åˆ°jupyterlabçš„æ‰§è¡Œæ–‡ä»¶ï¼Œåç»­å¯ä»¥è‡ªè¡Œæ·»åŠ æŒ‡å®šç«¯å£ç­‰å‘½ä»¤-pç­‰ï¼ŒæŒ‡å®šå¯åŠ¨è·¯å¾„ç›´æ¥è·Ÿåœ¨åé¢å°±å¥½äº†ã€‚ [Unit] Description=jupyterlab service After=network.target [Service] Type=simple User=oliver ExecStart=/home/oliver/.pyenv/versions/jupyterlab/bin/jupyter-lab p 9001 /home/ Restart=on-failure RestartPreventExitStatus=23 [Install] WantedBy=multi-user.target ç„¶åä¿å­˜é€€å‡ºï¼Œç»§ç»­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ sudo systemctl daemon-reload sudo systemctl enable jupyterlab sudo systemctl start jupyterlab sudo systemctl status jupyterlab okï¼ŒæœåŠ¡è®¾ç½®å®Œæˆ ç„¶åé€€å‡ºä½†ä¸å…³é—­è¿™ä¸ªå®¹å™¨ï¼Œä½¿ç”¨å¿«æ·é”®Ctrl+Q+P æµè§ˆå™¨è®¿é—®127.0.0.1:8888 è¾“å…¥åˆšåˆšçš„å¯†ç 2933194thg309rgbn13495y1tb1 è¿›æ¥äº†ï¼Œè¯æ˜è¿™æ—¶æˆ‘ä»¬çš„jupyterè¿˜åœ¨å®¹å™¨åå°ä¹–ä¹–å‘†ç€ã€‚ï¼Œå› ä¸ºç«¯å£æ˜ å°„å‡ºæ¥äº†ï¼Œè®¿é—®åœ¨ä¸»æœº8888ç«¯å£ç›¸å½“äºè®¿é—®dockerå®¹å™¨çš„8888ç«¯å£ã€‚ ç»§ç»­é…ç½®æˆ‘ä»¬çš„frpc frpc.inié‡Œçš„é…ç½®å’ŒåŸºç¡€ç‰ˆçš„ä¸€æ · cd ~/frp/frp_0.41.0_linux_amd64/ ./frpc -c ./frpc.ini ok,æœåŠ¡èµ·æ¥äº† åœ¨ç½‘å€ä¸­è¾“å…¥æˆ‘ä»¬çš„http://åŸŸåxxx.com:4321 ok,è®¿é—®åˆ°äº† ç„¶åè¾“å…¥æˆ‘ä»¬çš„jupyterå£ä»¤2933194thg309rgbn13495y1tb1 OKï¼Œé€šäº† å¤§åŠŸå‘Šæˆï½ é™„åŠ ç¯‡ï¼ŒæŒ‰éœ€å–ç”¨https://blog.csdn.net/weixin_43975924/article/details/104046790 SSHæ˜ å°„æƒ…æ™¯1ï¼šç”¨æˆ·é€šè¿‡ä¸»æœºAè®¿é—®C å¾…ç»­â€¦â€¦ ","date":"2022-03-27","objectID":"/frp_by_docker/:2:2","series":[],"tags":["linux"],"title":"Linuxä¸‹é…ç½®frpå†…ç½‘ç©¿é€","uri":"/frp_by_docker/#é™„åŠ ç¯‡æŒ‰éœ€å–ç”¨"},{"categories":[],"content":" å†…ç½‘ä¸»æœºç«¯ åˆ°dockerhubå¯»æ‰¾åˆé€‚çš„ä»“åº“dockerhubè¿™é‡Œé€‰æ‹©unbuntuä½œä¸ºæˆ‘ä»¬çš„åŸºç¡€é•œåƒ sudo docker pull python sudo docker pull ubuntu æœ¬æ–‡ä¸­docker ä½¿ç”¨çš„ä¸€äº›å‘½ä»¤ æ‹‰å–é•œåƒå‘½ä»¤ sudo docker pull é•œåƒå é€šè¿‡Dockerfileæ„å»ºé•œåƒå‘½ä»¤ sudo docker build -t æŸ¥çœ‹é•œåƒå‘½ä»¤ ç›®æ ‡é•œåƒå . sudo docker images åˆ é™¤é•œåƒå‘½ä»¤ sudo docker image rm é•œåƒå è¿›å…¥è¿è¡Œä¸­çš„docker å®¹å™¨ï¼Œé€€å‡ºæ—¶ä¸å…³é—­å®¹å™¨ sudo docker exec -it å®¹å™¨å /bin/sh å…¶ä¸­ bin/shæ˜¯æŒ‡ä»¤è¿è¡Œå™¨åœ¨é•œåƒä¸­çš„ä½ç½®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ sudo docker inspect å®¹å™¨å æˆ–è€… é•œåƒå åˆ é™¤æ‰€æœ‰å®¹å™¨ sudo docker container prune sudo docker system prune â€“volumes sudo docker system prune â€“all åœç”¨æ‰€æœ‰å¹¶åˆ é™¤æ‰€æœ‰ï¼Œä¸Šé¢é‚£æ¡å‘½ä»¤åˆ é™¤ä¸äº†åœ¨è¿è¡Œçš„å®¹å™¨(éœ€è¦å¤šé‡å¤è¿è¡Œå›è½¦å‡ æ¬¡å°±å¹²å‡€äº†) sudo docker stop $(sudo docker ps -q) \u0026 sudo docker rm $(sudo docker ps -aq) ä½¿ç”¨è¯¥é•œåƒåˆ›å»ºå®¹å™¨ï¼Œèµ·åä¸ºjupyterlabï¼Œå¹¶å°†8888ç«¯å£æ˜ å°„åˆ°å†…ç½‘ä¸»æœº sudo docker run -p 8888:8888 --name jupyterlab -itd python æ³¨:-då¯ä»¥çœç•¥æ¥è°ƒè¯•æ— æ³•å¯åŠ¨çš„ä¿¡æ¯ï¼Œæ­£å¼ä½¿ç”¨åœ¨æœ¬æ¬¡é…ç½®ä¸­éœ€è¦åŠ ä¸Šã€‚ æŸ¥çœ‹æ˜¯å¦åœ¨è¿è¡Œ sudo docker ps -a Upè¡¨ç¤ºåœ¨æ­£å¸¸è¿è¡Œ è¿›å…¥å®¹å™¨å†… sudo docker exec -it jupyterlab /bin/bash æºæ›´æ–° apt-get update å®‰è£…åŸºç¡€å·¥å…· apt install git vim curl nodejs å®‰è£…pythonä¾èµ– ç”±äºé€‰æ‹©çš„æ˜¯pythonä»“åº“ï¼Œä¸éœ€è¦è€ƒè™‘pythonçš„ä¾èµ–é—®é¢˜ åœ¨å®¹å™¨å†…å®‰è£…pyenv curl -L https://github.com/pyenv/pyenv-installer/raw/master/bin/pyenv-installer | bash é‡å¯shell exec $SHELL é…ç½®pyenvç¯å¢ƒ echo 'export PATH=\"$HOME/.pyenv/bin:$PATH\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv init -)\"' \u003e\u003e ~/.bashrc echo 'eval \"$(pyenv virtualenv-init -)\"' \u003e\u003e ~/.bashrc source ~/.bashrc ä½¿ç”¨pyenvå®‰è£…python3.4.10å¹¶å»ºç«‹jupyterlabè™šæ‹Ÿç¯å¢ƒï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæ¨èä½¿ç”¨çš„pythonç¯å¢ƒç®¡ç†è½¯ä»¶ï¼Œä¹‹å‰çš„åšå®¢ä¸­æœ‰ä»‹ç»ä½¿ç”¨ã€‚(ä¼ é€é—¨) æŸ¥çœ‹å¯å®‰è£…çš„pythonç‰ˆæœ¬å‘½ä»¤ pyenv install -l pyenv install 3.10.4 pyenv virtualenv 3.10.4 jupyterlab pyenv global jupyterlab pip install update pip pip install jupyterlab ç”Ÿæˆjupyter labçš„ç™»é™†å£ä»¤ jupyter lab password è¾“å…¥ä½ æƒ³è¦çš„å£ä»¤ï¼Œå¦‚ï¼š2933194thg309rgbn13495y1tb1 å¯åŠ¨jupyter lab, è®©å®ƒåœ¨åå°è¿è¡Œ ï½ nohup jupyter lab --allow-root --no-browser --ip '*' --port '8888' \u003e ~/.jupyter/jupyterlab.log 2\u003e\u00261 \u0026 æŸ¥çœ‹å®ƒçš„è¿è¡ŒçŠ¶æ€ ps -a ä¹–ä¹–åœ¨åå°å‘†ç€ æ›´å¥½ä¸€ç‚¹ï¼Œè®¾ç½®jupyteræœåŠ¡å¹¶è®©å®ƒå¼€æœºè‡ªå¯åŠ¨ å¢åŠ systemé…ç½®ï¼Œåˆ›å»ºå¹¶ç¼–è¾‘åä¸ºjupyterlabçš„æœåŠ¡ sudo vi /etc/systemd/system/jupyterlab.service æ³¨æ„ExecStartä¸€å®šè¦ç²¾ç¡®åˆ°jupyterlabçš„æ‰§è¡Œæ–‡ä»¶ï¼Œåç»­å¯ä»¥è‡ªè¡Œæ·»åŠ æŒ‡å®šç«¯å£ç­‰å‘½ä»¤-pç­‰ï¼ŒæŒ‡å®šå¯åŠ¨è·¯å¾„ç›´æ¥è·Ÿåœ¨åé¢å°±å¥½äº†ã€‚ [Unit] Description=jupyterlab service After=network.target [Service] Type=simple User=oliver ExecStart=/home/oliver/.pyenv/versions/jupyterlab/bin/jupyter-lab p 9001 /home/ Restart=on-failure RestartPreventExitStatus=23 [Install] WantedBy=multi-user.target ç„¶åä¿å­˜é€€å‡ºï¼Œç»§ç»­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ sudo systemctl daemon-reload sudo systemctl enable jupyterlab sudo systemctl start jupyterlab sudo systemctl status jupyterlab okï¼ŒæœåŠ¡è®¾ç½®å®Œæˆ ç„¶åé€€å‡ºä½†ä¸å…³é—­è¿™ä¸ªå®¹å™¨ï¼Œä½¿ç”¨å¿«æ·é”®Ctrl+Q+P æµè§ˆå™¨è®¿é—®127.0.0.1:8888 è¾“å…¥åˆšåˆšçš„å¯†ç 2933194thg309rgbn13495y1tb1 è¿›æ¥äº†ï¼Œè¯æ˜è¿™æ—¶æˆ‘ä»¬çš„jupyterè¿˜åœ¨å®¹å™¨åå°ä¹–ä¹–å‘†ç€ã€‚ï¼Œå› ä¸ºç«¯å£æ˜ å°„å‡ºæ¥äº†ï¼Œè®¿é—®åœ¨ä¸»æœº8888ç«¯å£ç›¸å½“äºè®¿é—®dockerå®¹å™¨çš„8888ç«¯å£ã€‚ ç»§ç»­é…ç½®æˆ‘ä»¬çš„frpc frpc.inié‡Œçš„é…ç½®å’ŒåŸºç¡€ç‰ˆçš„ä¸€æ · cd ~/frp/frp_0.41.0_linux_amd64/ ./frpc -c ./frpc.ini ok,æœåŠ¡èµ·æ¥äº† åœ¨ç½‘å€ä¸­è¾“å…¥æˆ‘ä»¬çš„http://åŸŸåxxx.com:4321 ok,è®¿é—®åˆ°äº† ç„¶åè¾“å…¥æˆ‘ä»¬çš„jupyterå£ä»¤2933194thg309rgbn13495y1tb1 OKï¼Œé€šäº† å¤§åŠŸå‘Šæˆï½ é™„åŠ ç¯‡ï¼ŒæŒ‰éœ€å–ç”¨https://blog.csdn.net/weixin_43975924/article/details/104046790 SSHæ˜ å°„æƒ…æ™¯1ï¼šç”¨æˆ·é€šè¿‡ä¸»æœºAè®¿é—®C å¾…ç»­â€¦â€¦ ","date":"2022-03-27","objectID":"/frp_by_docker/:2:2","series":[],"tags":["linux"],"title":"Linuxä¸‹é…ç½®frpå†…ç½‘ç©¿é€","uri":"/frp_by_docker/#sshæ˜ å°„"},{"categories":["tutorial"],"content":"è¯´æ˜ æœ¬æ–‡æ ¹æ®å¸¸è§çš„è¯»å†™è¿›è¡Œæ–¹æ³•é˜è¿°ï¼Œæœ¬æ–‡å®éªŒç¯å¢ƒåŸºäºpython3.8ï¼Œå¹¶éœ€è¦æå‰å‘ŠçŸ¥å„ç±»è¯»å†™æ–¹å¼çš„æ–‡ä»¶æ“ä½œæ•ˆæœï¼Œå¦‚ä¸‹åˆ—å‡ºï¼š r : è¯»å–æ–‡ä»¶ï¼Œæ–‡ä»¶éœ€è¦æ‰‹åŠ¨åˆ›å»º w: å†™å…¥æ–‡ä»¶ï¼Œè‹¥æ–‡ä»¶ä¸å­˜åœ¨åˆ™ä¼šè‡ªåŠ¨åˆ›å»ºå†å†™å…¥ï¼Œä¼šè¦†ç›–åŸæ–‡ä»¶ a : å†™å…¥æ–‡ä»¶ï¼Œè‹¥æ–‡ä»¶ä¸å­˜åœ¨åˆ™ä¼šè‡ªåŠ¨åˆ›å»ºå†å†™å…¥ï¼Œä½†ä¸ä¼šè¦†ç›–åŸæ–‡ä»¶ï¼Œè€Œæ˜¯è¿½åŠ åœ¨æ–‡ä»¶æœ«å°¾ rb,wbï¼š åˆ†åˆ«äºr, wç±»ä¼¼ï¼Œä½†æ˜¯ç”¨äºè¯»å†™äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ­¤ç±»å‹å¯ç”¨äºä¿å­˜å˜é‡ã€‚ r+ : å¯è¯»ã€å¯å†™ï¼Œæ–‡ä»¶éœ€è¦æ‰‹åŠ¨åˆ›å»ºï¼Œå†™æ“ä½œæ—¶ä¼šè¦†ç›–åŸæ–‡ä»¶ã€‚ w+ : å¯è¯»ï¼Œå¯å†™ï¼Œæ–‡ä»¶ä¸å­˜åœ¨è‡ªåŠ¨åˆ›å»ºï¼Œä¼šè¦†ç›–åŸæ–‡ä»¶ã€‚ a+ : å¯è¯»ã€å¯å†™ï¼Œæ–‡ä»¶ä¸å­˜åœ¨è‡ªåŠ¨åˆ›å»ºï¼Œä¸ä¼šè¦†ç›–åŸæ–‡ä»¶ï¼Œè¿½åŠ åœ¨æœ«å°¾ã€‚ ","date":"2022-03-26","objectID":"/file_read_py/:0:0","series":[],"tags":["py"],"title":"Pythonä¸­å¸¸è§çš„æ–‡ä»¶è¯»å†™","uri":"/file_read_py/#"},{"categories":["tutorial"],"content":" csvæ ¼å¼æ–‡ä»¶","date":"2022-03-26","objectID":"/file_read_py/:1:0","series":[],"tags":["py"],"title":"Pythonä¸­å¸¸è§çš„æ–‡ä»¶è¯»å†™","uri":"/file_read_py/#csvæ ¼å¼æ–‡ä»¶"},{"categories":["tutorial"],"content":" csvåº“ åˆ—è¡¨è¯»å†™ # å°†ä»¥ä¸‹ä¸¤ä¸ªåˆ—è¡¨ä½œä¸ºä¸¤åˆ—å†™å…¥CSVï¼Œç”¨ ' ' ç©ºæ ¼éš”å¼€ï¼š import csv list1=[1,2] list2=['1','2'] with open('filename.csv', \"w\", newline='', encoding='utf-8') as f1: writer = csv.writer(f1, delimiter=',') writer.writerows(zip(list1,list2)) print('æ–‡ä»¶å†™å…¥å®Œæˆâ€¦â€¦') # ä½œä¸ºä¸¤è¡Œå‘¢ lis = [[1,2],['1','2']] with open('filename.csv', \"w\", newline='', encoding='utf-8') as f1: writer = csv.writer(f1, delimiter=',') for data in lis: writer.writerow(data) # ä»ä¸Šè¿°å†™æˆçš„CSVä¸­è¯»å‡ºä¸¤ä¸ªåˆ—è¡¨, åŒæ ·ç”¨ ' ' ç©ºæ ¼éš”å¼€è¯»å–ï¼š import csv with open('filename.csv','r',encoding='utf-8') as f2: list1 = [] list2 = [] # è¿™é‡Œæ³¨æ„ï¼Œä¹‹å‰intç±»å‹çš„åˆ—è¡¨å†™å…¥å’Œè¯»å–ä¹‹åéƒ½ä¼šå˜ä¸ºstrç±»å‹çš„åˆ—è¡¨ reader = csv.reader(f2, delimiter = ',') for i in reader: list1.append(i[0]) list2.append(i[1]) print('æ–‡ä»¶è¯»å–å®Œæˆâ€¦â€¦') # å…¶ä»–æ¨¡å¼ list = [[1,2,3],[4,5,6]] with open('filename.csv', \"w\", newline='', encoding='utf-8') as f1: writer = csv.writer(f1, delimiter=',') writer.writerows(list) print('æ–‡ä»¶å†™å…¥å®Œæˆâ€¦â€¦') ","date":"2022-03-26","objectID":"/file_read_py/:1:1","series":[],"tags":["py"],"title":"Pythonä¸­å¸¸è§çš„æ–‡ä»¶è¯»å†™","uri":"/file_read_py/#csvåº“"},{"categories":["tutorial"],"content":" csvåº“ åˆ—è¡¨è¯»å†™ # å°†ä»¥ä¸‹ä¸¤ä¸ªåˆ—è¡¨ä½œä¸ºä¸¤åˆ—å†™å…¥CSVï¼Œç”¨ ' ' ç©ºæ ¼éš”å¼€ï¼š import csv list1=[1,2] list2=['1','2'] with open('filename.csv', \"w\", newline='', encoding='utf-8') as f1: writer = csv.writer(f1, delimiter=',') writer.writerows(zip(list1,list2)) print('æ–‡ä»¶å†™å…¥å®Œæˆâ€¦â€¦') # ä½œä¸ºä¸¤è¡Œå‘¢ lis = [[1,2],['1','2']] with open('filename.csv', \"w\", newline='', encoding='utf-8') as f1: writer = csv.writer(f1, delimiter=',') for data in lis: writer.writerow(data) # ä»ä¸Šè¿°å†™æˆçš„CSVä¸­è¯»å‡ºä¸¤ä¸ªåˆ—è¡¨, åŒæ ·ç”¨ ' ' ç©ºæ ¼éš”å¼€è¯»å–ï¼š import csv with open('filename.csv','r',encoding='utf-8') as f2: list1 = [] list2 = [] # è¿™é‡Œæ³¨æ„ï¼Œä¹‹å‰intç±»å‹çš„åˆ—è¡¨å†™å…¥å’Œè¯»å–ä¹‹åéƒ½ä¼šå˜ä¸ºstrç±»å‹çš„åˆ—è¡¨ reader = csv.reader(f2, delimiter = ',') for i in reader: list1.append(i[0]) list2.append(i[1]) print('æ–‡ä»¶è¯»å–å®Œæˆâ€¦â€¦') # å…¶ä»–æ¨¡å¼ list = [[1,2,3],[4,5,6]] with open('filename.csv', \"w\", newline='', encoding='utf-8') as f1: writer = csv.writer(f1, delimiter=',') writer.writerows(list) print('æ–‡ä»¶å†™å…¥å®Œæˆâ€¦â€¦') ","date":"2022-03-26","objectID":"/file_read_py/:1:1","series":[],"tags":["py"],"title":"Pythonä¸­å¸¸è§çš„æ–‡ä»¶è¯»å†™","uri":"/file_read_py/#åˆ—è¡¨è¯»å†™"},{"categories":["tutorial"],"content":" pandasåº“ è¯»å‡ºå¤šä¸ªæ–‡ä»¶å¹¶æŒ‰åˆ—è¿æ¥å†™å…¥ä¸€ä¸ªæ–‡ä»¶ import pandas as pd inputfile_csv_1='head-dep_context_1.csv' inputfile_csv_2='head-dep_context_2.csv' inputfile_csv_3='head-dep_context_3.csv' inputfile_csv_4='head-dep_context_4.csv' outputfile='4.csv' csv_1 = pd.read_csv(inputfile_csv_1) csv_2 = pd.read_csv(inputfile_csv_2) csv_3 = pd.read_csv(inputfile_csv_3) csv_4 = pd.read_csv(inputfile_csv_4) out_csv=pd.concat([csv_1,csv_2,csv_3,csv_4],axis =1) out_csv.to_csv(outputfile, index=False) æŒ‰åˆ—è¯»å…¥å››ä¸ªæ–‡ä»¶å¹¶æŒ‰åˆ—åˆå¹¶ï¼š ","date":"2022-03-26","objectID":"/file_read_py/:1:2","series":[],"tags":["py"],"title":"Pythonä¸­å¸¸è§çš„æ–‡ä»¶è¯»å†™","uri":"/file_read_py/#pandasåº“"},{"categories":["tutorial"],"content":" pandasåº“ è¯»å‡ºå¤šä¸ªæ–‡ä»¶å¹¶æŒ‰åˆ—è¿æ¥å†™å…¥ä¸€ä¸ªæ–‡ä»¶ import pandas as pd inputfile_csv_1='head-dep_context_1.csv' inputfile_csv_2='head-dep_context_2.csv' inputfile_csv_3='head-dep_context_3.csv' inputfile_csv_4='head-dep_context_4.csv' outputfile='4.csv' csv_1 = pd.read_csv(inputfile_csv_1) csv_2 = pd.read_csv(inputfile_csv_2) csv_3 = pd.read_csv(inputfile_csv_3) csv_4 = pd.read_csv(inputfile_csv_4) out_csv=pd.concat([csv_1,csv_2,csv_3,csv_4],axis =1) out_csv.to_csv(outputfile, index=False) æŒ‰åˆ—è¯»å…¥å››ä¸ªæ–‡ä»¶å¹¶æŒ‰åˆ—åˆå¹¶ï¼š ","date":"2022-03-26","objectID":"/file_read_py/:1:2","series":[],"tags":["py"],"title":"Pythonä¸­å¸¸è§çš„æ–‡ä»¶è¯»å†™","uri":"/file_read_py/#è¯»å‡ºå¤šä¸ªæ–‡ä»¶å¹¶æŒ‰åˆ—è¿æ¥å†™å…¥ä¸€ä¸ªæ–‡ä»¶"},{"categories":["tutorial"],"content":" txtæ ¼å¼æ–‡ä»¶æ³¨ï¼štxtæ ¼å¼æ–‡ä»¶å¯ä»¥ç”¨äºå­˜æ”¾å­—å…¸ã€‚ # å‘æ–‡ä»¶å†™å…¥list1çš„å­—å…¸vocab list1 = ['3','1','1','2','2'] vocab = sorted(set(list)) # åˆ›å»ºä¸€ä¸ªlist1çš„å­—å…¸ï¼Œç”±äºsetæ¯æ¬¡é¡ºåºä¼šæ”¹å˜ï¼Œä¸ºäº†ä¿è¯ç¨‹åºèƒ½å¤Ÿå¤ç°ï¼Œè¿™é‡Œå¯ä»¥æ’åºä¸€ä¸‹ã€‚ with open('filename.txt', 'w',encoding = 'utf-8') as f1: for i in vocab: f1.write(i + '\\n') # è¿™é‡Œå‘æ–‡ä»¶æ¯è¡Œå†™å…¥vocabçš„ä¸€ä¸ªè¯ä½œä¸ºå­—å…¸ print('å­—å…¸å†™å…¥å®Œæˆâ€¦â€¦') # ä»æ–‡ä»¶è¯»å–list1çš„å­—å…¸vocabï¼Œé€è¡Œè¯»å–ï¼Œä¸€è¡Œä¸€ä¸ªè¯ vocab = [] with open('filename.txt', 'r', encoding = 'utf-8') as f2: lines = f2.readlines() for i in lines: vocab.append(i.strip('\\n')) # å»é™¤æ¯ä¸€è¡Œçš„æ¢è¡Œç¬¦ print('å­—å…¸è¯»å–å®Œæˆâ€¦â€¦') ","date":"2022-03-26","objectID":"/file_read_py/:2:0","series":[],"tags":["py"],"title":"Pythonä¸­å¸¸è§çš„æ–‡ä»¶è¯»å†™","uri":"/file_read_py/#txtæ ¼å¼æ–‡ä»¶"},{"categories":["tutorial"],"content":" pickleæ ¼å¼æ–‡ä»¶æ³¨ï¼špickleå¯ä»¥å°†å¾ˆå¤šæ ¼å¼çš„æ•°æ®ä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ä»¥äºŒè¿›åˆ¶ä¿å­˜ã€‚é‡æ–°åŠ è½½ä¹‹åè¿˜æ˜¯ä¹‹å‰çš„æ ¼å¼ã€‚æ­¤ç§æ–¹å¼é€šå¸¸ç”¨äºä¿å­˜ç”ŸæˆèŠ±é”€è¾ƒå¤§çš„ä¸­é—´å˜é‡ï¼Œä»¥æå‡å·¥ä½œæ•ˆç‡ã€‚ # å°†varå˜é‡ä»¥äºŒè¿›åˆ¶çš„å½¢å¼å†™å…¥æ–‡ä»¶,å¯ä»¥ä¿å­˜å¤šç§ç±»å‹çš„å˜é‡ï¼š import pickle var = \"I am your friend.\" with open('filename.pickle', 'wb') as f1: pickle.dump(var, f1) print('å˜é‡å†™å…¥å®Œæˆâ€¦â€¦') # ä»ä¸Šè¿°å†™æˆçš„pickleæ–‡ä»¶ä¸­ä»¥äºŒè¿›åˆ¶è¯»å‡ºvarå˜é‡ï¼Œå˜é‡ç±»å‹è¯»å®Œåä¸ä¿å­˜æ—¶ä¸€è‡´ï¼š import pickle with open('filename.pickle', 'rb') as f2: var = pickle.load(f2) print('å˜é‡è¯»å–å®Œæˆâ€¦â€¦') ","date":"2022-03-26","objectID":"/file_read_py/:3:0","series":[],"tags":["py"],"title":"Pythonä¸­å¸¸è§çš„æ–‡ä»¶è¯»å†™","uri":"/file_read_py/#pickleæ ¼å¼æ–‡ä»¶"},{"categories":["tutorial"],"content":" jsonæ ¼å¼æ–‡ä»¶ # å†™jsonæ–‡ä»¶ï¼Œå¯ä»¥ä¿å­˜å­—å…¸ç­‰ç±»å‹çš„å˜é‡ import json var_dic = {'1st':'ä½ å¥½','2nd':'ä¸–ç•Œ'} with open('filename.json', 'w') as f1: json.dump(var_dic,f1) # å¦‚æœä¿å­˜çš„æ˜¯ä¸­æ–‡ï¼Œé»˜è®¤ä¼šè½¬ä¸ºasciiç å­˜å‚¨ï¼Œå¦‚æœæƒ³ä»¥ä¸­æ–‡å­˜å‚¨ï¼Œåˆ™éœ€è¦æŒ‡å®š with open('filename_ch.json', 'w', encoding='utf-8') as f: json.dump(var_dic,f,ensure_ascii=False,indent = 4) #è¯»å‡ºjsonæ–‡ä»¶ï¼š with open('filename.json', 'r') as f2: var_dic = json.dump(f2) ","date":"2022-03-26","objectID":"/file_read_py/:4:0","series":[],"tags":["py"],"title":"Pythonä¸­å¸¸è§çš„æ–‡ä»¶è¯»å†™","uri":"/file_read_py/#jsonæ ¼å¼æ–‡ä»¶"},{"categories":["tutorial"],"content":" matæ ¼å¼æ–‡ä»¶æ­¤ç§æ ¼å¼æ–‡ä»¶èµ·åˆä¸ºmatlabè½¯ä»¶ä¿å­˜å¾—åˆ°çš„ï¼Œåœ¨pythonä¸­ä¹Ÿé€æ¸æœ‰äº†ç›¸å…³å‡½æ•°è¿›è¡Œå¤„ç†ï¼Œå…¶ç‰¹ç‚¹æ˜¯å¯ä»¥å‹ç¼©ä¿å­˜å¤§çŸ©é˜µæ–‡ä»¶ï¼Œå‡å°ç£ç›˜ç©ºé—´å ç”¨ã€‚ ä»¥ä¸‹æ•°æ®å­˜å–éœ€è¦é…å¥—ä½¿ç”¨ å¤§çŸ©é˜µå¤„ç†æ–¹å¼ä¸€ import scipy.io as scio import hdf5storage # å­˜å‚¨ä½ çš„æ•°æ®å­—å…¸ï¼Œ def save(out_file_path: str,data: dict, do_compression: bool, large_array: bool): \"\"\" :param out_file_path: éœ€è¦ä¿å­˜åˆ°çš„æ•°æ®è·¯å¾„ :param data: ä½ çš„æ•°æ®å­—å…¸ :param do_compression: æ˜¯å¦å‹ç¼©å­˜å‚¨ :return: æ—  \"\"\" if not large_array: scio.savemat(out_file_path, data, do_compression=do_compression) else: hdf5storage.savemat(out_file_path, data, do_compression=do_compression) # åŠ è½½è¯¥æ•°æ® def save(file_path: str, large_array: bool): if not large_array: scio.loadmat(file_path) else: hdf5storage.loadmat(file_pathn) ä»¥ä¸‹æ•°æ®å­˜å–éœ€è¦é…å¥—ä½¿ç”¨ å¤§çŸ©é˜µå¤„ç†æ–¹å¼äºŒ import scipy.io as scio from scipy.sparse import csc_matrix # å­˜å‚¨ä½ çš„æ•°æ®å­—å…¸ï¼Œ def save(out_file_path: str,data: dict, do_compression: bool, large_array: bool): \"\"\" :param out_file_path: éœ€è¦ä¿å­˜åˆ°çš„æ•°æ®è·¯å¾„ :param data: ä½ çš„æ•°æ®å­—å…¸ :param do_compression: æ˜¯å¦å‹ç¼©å­˜å‚¨ :return: æ—  \"\"\" if not large_array: scio.savemat(out_file_path, data, do_compression=do_compression) else: data['large_matrix_key'] = csc_matrix(data['large_matrix_key']) scio.savemat(out_file_path, data, do_compression=do_compression) # åŠ è½½è¯¥æ•°æ® def save(file_path: str, large_array: bool): if not large_array: scio.loadmat(file_path) else: scio.loadmat(file_path) data['large_matrix_key'] = data['large_matrix_key'].toarray() ","date":"2022-03-26","objectID":"/file_read_py/:5:0","series":[],"tags":["py"],"title":"Pythonä¸­å¸¸è§çš„æ–‡ä»¶è¯»å†™","uri":"/file_read_py/#matæ ¼å¼æ–‡ä»¶"},{"categories":null,"content":" å‰è¨€åœ¨Pythonå·¥ç¨‹ä¸­ï¼Œç‰¹åˆ«æ˜¯å¯¹äºè¦å¤ç°ä¸€äº›é¡¹ç›®æ—¶ã€éœ€è¦æµ‹è¯•ç‰¹å®šç¯å¢ƒä¸‹ç¨‹åºè¡¨ç°æ—¶ã€åŒä¸€ä¸ªæœåŠ¡å™¨ä¸Šå¤šäººè¿›è¡Œè·‘ç¨‹åºæ—¶éœ€è¦è‡ªå·±çš„ç‹¬ç«‹ç¯å¢ƒæ—¶ç­‰ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ç”¨åˆ°ç‰¹å®šç‰ˆæœ¬çš„åº“ï¼Œè€Œè¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒå®‰è£…ä¾èµ–ã€‚è¿™æ ·ä¾èµ–ï¼Œæˆ‘ä»¬å°±ä¸ä¼šå½±å“åˆ°ä¸»ç¯å¢ƒï¼Œè¯¶è¿™æ ·å°± ä¸ç”¨é‡å¤å¸è½½é‡è£…ä¸»ç¯å¢ƒï¼Œ ä¹Ÿä¸ä¼šä½¿å¾—ä¸»ç¯å¢ƒæ—¥æ¸è‡ƒè‚¿ï¼› è¿˜å¯ä»¥å®‰è£…å¤šç‰ˆæœ¬pythonï¼ˆå¦‚ç»å…¸çš„pyenv åŒ…ç®¡ç†è½¯ä»¶ä¾¿å¯ä»¥å®ç°ï¼‰ï¼› å¦‚æœ‰éœ€è¦ç›´æ¥åˆ æ‰è™šæ‹Ÿç¯å¢ƒï¼Œç„¶åå»ºæ–°çš„å³å¯ã€‚ ç”±äºç³»ç»Ÿé…ç½®çš„ä¸ç¡®å®šæ€§ï¼Œå»ºè®®å‹å‹ä»¬åœ¨linuxä¸‹é£Ÿç”¨ã€‚ ","date":"2022-03-22","objectID":"/env_management/:0:0","series":null,"tags":null,"title":"Python å·¥ç¨‹ç¯å¢ƒç®¡ç†","uri":"/env_management/#å‰è¨€"},{"categories":null,"content":" ç¯å¢ƒç®¡ç†é€”å¾„ä»‹ç»ç¯å¢ƒéœ€è¦ç”¨åˆ°çš„åŒ…å¯ä»¥å†™å…¥requirements.txtæ–‡ä»¶é‡Œï¼Œå¦‚æœæ˜¯ä»å¦ä¸€ä¸ªå·¥ç¨‹ç¯å¢ƒåˆ‡æ¢è¿‡æ¥ï¼Œå¯ä»¥åœ¨é‚£ä¸ªç¯å¢ƒä¸­è¿è¡Œ pip freeze \u003e requirements.txt ç„¶ååœ¨éœ€è¦é…ç½®çš„ç¯å¢ƒä¸­è¿è¡Œå¦‚ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…å¤§éƒ¨åˆ†éœ€è¦çš„åŒ… cat requirements.txt | xargs -n 1 pip install æ­¤æ–¹æ³•ä¼šå¿½ç•¥æŠ¥é”™è¿›è¡ŒpipåŒ…çš„å®‰è£…ï¼Œä¼šå‡ºç°åŒ…çš„ç¼ºæŸï¼Œåç»­å¯ä»¥è‡ªè¡Œè¡¥ä¸Šã€‚ é•œåƒæº pip -i https://pypi.tuna.tsinghua.edu.cn/simple è±†ç“£ï¼š-i http://pypi.douban.com/simple/ --trusted-host pypi.douban.com é˜¿é‡Œäº‘ï¼š-i http://mirrors.aliyun.com/pypi/simple/ --trusted-host mirrors.aliyun.com # è®¾ç½®å…¨å±€ # æ¸…åæº pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple ","date":"2022-03-22","objectID":"/env_management/:0:0","series":null,"tags":null,"title":"Python å·¥ç¨‹ç¯å¢ƒç®¡ç†","uri":"/env_management/#ç¯å¢ƒç®¡ç†é€”å¾„ä»‹ç»"},{"categories":null,"content":" Conda æŸ¥çœ‹æˆ‘ä»¬å½“å‰condaé‡Œæœ‰çš„ç¯å¢ƒ ï¼Œä¸‰ç§æ–¹å¼éƒ½å¯ğŸ‘‡ğŸ» conda info --envs conda info -e conda env list è¾“å‡ºå¦‚ä¸‹ğŸ‘‡ğŸ» å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ç›®å‰åªæœ‰ä¸€ä¸ªbaseçš„åŸºç¡€ç¯å¢ƒã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è¯•ç€æŸ¥çœ‹ä¸€ä¸‹è¯¥ç¯å¢ƒä¸‹çš„åŒ…åˆ—è¡¨ğŸ‘‡ğŸ» ","date":"2022-03-22","objectID":"/env_management/:1:0","series":null,"tags":null,"title":"Python å·¥ç¨‹ç¯å¢ƒç®¡ç†","uri":"/env_management/#conda"},{"categories":null,"content":" Condaåˆ›å»ºè™šæ‹Ÿç¯å¢ƒåˆ›å»ºæ—¶æŒ‡å®š condaä¸‹çš„è™šæ‹Ÿç¯å¢ƒåå­—ä¸ºenv_nameï¼Œpythonç‰ˆæœ¬ä¸º3.6ğŸ‘‡ conda create -n env_name python=3.6 æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ymlæ–‡ä»¶æ¥æ„å»ºè‡ªå·±æƒ³è¦çš„ç¯å¢ƒï¼Œæ¯”å¦‚ä½ æƒ³è¦å¦‚ä¸‹é…ç½®çš„ç¯å¢ƒï¼ˆnameæŒ‡çš„æ˜¯ä½ çš„è™šæ‹Ÿç¯å¢ƒå«å•¥ï¼Œä¸ä¸Šæ¡å‘½ä»¤ä¸­çš„env_nameæ•ˆæœä¸€æ ·ï¼‰ğŸ‘‡ é‚£ä¹ˆï¼Œä½ åˆ™éœ€è¦åœ¨å½“å‰ç›®å½•åˆ›å»ºä¸€ä¸ªymlåç¼€çš„æ–‡ä»¶ï¼Œç„¶åå†™å…¥ä¸Šå›¾ç±»ä¼¼çš„ä½ éœ€è¦çš„ç¯å¢ƒå†…å®¹ï¼Œå¹¶è¿è¡Œå¦‚ä¸‹å‘½ä»¤ğŸ‘‡ conda env create -f conda_env.yml å†æ¬¡æŸ¥çœ‹condaä¸‹çš„ç¯å¢ƒåˆ—è¡¨ å¯ä»¥çœ‹åˆ°åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„env_nameç¯å¢ƒã€‚ ","date":"2022-03-22","objectID":"/env_management/:1:1","series":null,"tags":null,"title":"Python å·¥ç¨‹ç¯å¢ƒç®¡ç†","uri":"/env_management/#condaåˆ›å»ºè™šæ‹Ÿç¯å¢ƒ"},{"categories":null,"content":" Condaæ¿€æ´»è™šæ‹Ÿç¯å¢ƒè¾“å…¥activateæŒ‡ä»¤ğŸ‘‡ conda activate env_name å¯ä»¥çœ‹åˆ° å‘½ä»¤è¡Œå‰çš„æ‹¬å·å†…å®¹å·²ç»æ”¹å˜(base)ğŸ‘‰(env_name)ï¼Œæ­¤æ—¶å·²ç»æ˜¯åŸºäºè¯¥è™šæ‹Ÿç¯å¢ƒäº†ã€‚ ç„¶åå‘¢ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›å…¥è¿™ä¸ªç¯å¢ƒä¹±è£…ä¸€é€šäº†ï¼Œæ­¤å¤„çœç•¥ä¸€ä¸‡è¡Œæ“ä½œâ€¦â€¦ å¥½äº†ï¼Œè¿™ä¸ªç¯å¢ƒçš„ä½¿å‘½å·²ç»ç»“æŸäº†ï¼Œæˆ‘ä»¬å†æŠŠå®ƒåˆ æ‰ğŸ‘‡ conda deactivate conda remove -n env_name --all ","date":"2022-03-22","objectID":"/env_management/:1:2","series":null,"tags":null,"title":"Python å·¥ç¨‹ç¯å¢ƒç®¡ç†","uri":"/env_management/#condaæ¿€æ´»è™šæ‹Ÿç¯å¢ƒ"},{"categories":null,"content":" Python Virtualenvè¿™æ˜¯ä¸€æ¬¾pythonè‡ªå¸¦çš„è™šæ‹Ÿç¯å¢ƒç®¡ç†æ–¹æ¡ˆï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸ºå•¥ä¸ç”¨condaå‘¢ï¼Ÿcondaå¤šå¥½ï¼Œè‡ªå¸¦åŒ…åˆå¤šï¼Œå¤šçœäº‹ã€‚é—®é¢˜å°±æ˜¯ï¼Œæœ‰äº›æƒ…å†µä¸‹æˆ‘ä»¬ä¸éœ€è¦ä»»ä½•ä¸€ä¸ªå¤šä½™çš„åŒ…ï¼Œåœ¨å·¥ç¨‹ä¸Šå³ä¾¿æ˜¯å¤šä½™ä¸€ä¸ªåŒ…ä¹Ÿæ˜¯å¯¹å­˜å‚¨ç©ºé—´çš„æµªè´¹ï¼Œcondaå†…éƒ¨æˆ‘ä¸æ˜¯å¾ˆæ¸…æ¥šè¿˜å°è£…äº†ä»€ä¹ˆï¼Œä½†æ€»æ˜¯ç»™äººä¸€ç§å¾ˆå¥å£®çš„æ„Ÿè§‰ï¼Œæ€•éº»çƒ¦çš„è¯æ¨ècondaï¼Œä½†æ˜¯æœ‰æ´ç™–çš„äººæ¨èè‡ªå·±é€æ­¥æ­å»ºç›¸å…³ä¾èµ–ã€‚ç°åœ¨ä»‹ç»çš„è¿™æ¬¾å°±æ˜¯å®˜æ–¹ç»™çš„ï¼Œè¯¶ï¼Œå¹²å‡€ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ éœ€è¦åœ¨å¤šä¸ªpythonç‰ˆæœ¬ä¸Šå»ºç«‹è™šæ‹Ÿç¯å¢ƒï¼Œé‚£ä¹ˆæ¯”è¾ƒéº»çƒ¦ï¼Œä¸‹èŠ‚ä¼šè¯´ï¼Œå»ºè®®ç›´æ¥ç§»æ­¥ä¸‹ä¸€èŠ‚çš„pyenvã€‚ï¼ˆPython Virtualenvå®˜æ–¹æ–‡æ¡£#ï¼‰ æ­¤æ–¹æ¡ˆä¸­è™šæ‹Ÿç¯å¢ƒçš„åˆ›å»ºæ–¹å¼å’Œcondaå·®ä¸å¤šï¼Œè¿™é‡Œä»‹ç»æŒ‡å®šç¯å¢ƒè·¯å¾„çš„æ–¹æ³•ï¼Œå…¶ä¸­env_pathä¸ºä½ è¦ä¿å­˜è¯¥è™šæ‹Ÿç¯å¢ƒçš„è·¯å¾„ python -m venv env_path ç„¶åå¯ä»¥æ¿€æ´»æ­¤ç¯å¢ƒ source env_path/bin/activate å…³é—­ç¯å¢ƒ deactivate ","date":"2022-03-22","objectID":"/env_management/:2:0","series":null,"tags":null,"title":"Python å·¥ç¨‹ç¯å¢ƒç®¡ç†","uri":"/env_management/#python-virtualenv"},{"categories":null,"content":" Pyenv æ¨èé£Ÿç”¨ Pyenvæ˜¯ä¸€ä¸ªå¼€æºçš„pythonç¯å¢ƒç®¡ç†è½¯ä»¶ï¼ˆæºç é“¾æ¥ï¼‰ï¼Œå®ƒååˆ†æ–¹ä¾¿å¯ä»¥å®ç°æˆ‘æ‰€è¯´çš„è™šä¸ŠåŠ è™šã€‚è¯¶ï¼Ÿå•¥æ„æ€å‘¢ï¼Ÿå¦‚æœæˆ‘ä»¬æŠŠåˆ›å»ºè™šæ‹Ÿç¯å¢ƒçš„ç¯å¢ƒç§°ä¸ºåº•åº§ï¼Œé‚£ä¹ˆå¾ˆæ˜¾ç„¶ï¼Œæœ¬åœ°ç¯å¢ƒé€šå¸¸åªèƒ½æ»¡è¶³ä¸€ä¸¤ä¸ªpythonç‰ˆæœ¬ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨ä¸Šä¸€èŠ‚çš„Python Virtualenvç¯å¢ƒç®¡ç†æ–¹æ¡ˆå°±åªæœ‰ä¸€ä¸¤ä¸ªåº•åº§ï¼Œå®ƒå°±æ˜¯æœ¬æœºå·²ç»å®‰è£…çš„pythonç‰ˆæœ¬ï¼Œå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥å°†å¤šä¸ªä¸åŒç‰ˆæœ¬çš„pythonè£…åˆ°ä¸åŒçš„æ–‡ä»¶ï¼Œç„¶ååŠ ä¸åŒçš„å¯åŠ¨å‘½ä»¤æ¯”å¦‚python2.xå’Œpython3.xæ¥ä½¿ç”¨ï¼Œä½†è¿™å¹¶ä¸å¥½ç®¡ç†ï¼Œä¸”è¾ƒä¸ºéº»çƒ¦ã€‚è€Œä¸”ï¼Œå°±åƒä¹‹å‰è¯´çš„ï¼Œä¼šä½¿å¾—å¯¹äºæœ‰æ´ç™–çš„å‹å‹å¾ˆä¸å¥½å—ï¼Œä¸èƒ½ä¸€æ½å…¨å±€ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨Pyenvï¼Œåˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼Œå› ä¸ºå®ƒå¯ä»¥ç”¨æ¥å®‰è£…ä¸åŒç‰ˆæœ¬çš„pythonï¼Œcondaï¼Œminicondaç­‰ï¼Œå†™åˆ°è¿™é‡Œåšä¸»å¿½ç„¶è§‰å¾—Pyenvå¥½åƒå°±æ˜¯åœ¨å¥—å£³ä¸Šè¿°ä¸¤ç§æ–¹æ³•ï¼Œä½†æ˜¯ä¾¿æ·æ€§æå‡å¾ˆå¤šï¼Œæ•…æˆ‘ä»¬å°±ç›¸å½“äºåˆ›å»ºäº†ä¸åŒçš„åº•åº§ï¼Œä½¿ç”¨Pyenvæ¥ç»Ÿä¸€ç®¡ç†ğŸ‘‡ ","date":"2022-03-22","objectID":"/env_management/:3:0","series":null,"tags":null,"title":"Python å·¥ç¨‹ç¯å¢ƒç®¡ç†","uri":"/env_management/#pyenv"},{"categories":null,"content":" å®‰è£… LinuxğŸ‘‡ curl -L https://github.com/pyenv/pyenv-installer/raw/master/bin/pyenv-installer | bash echo 'export PATH=\"$HOME/.pyenv/bin:$PATH\"' \u003e\u003e ~/.bashrc ç¦»çº¿éƒ¨ç½² å…ˆä½¿ç”¨èƒ½å¤Ÿç§‘å­¦ä¸Šç½‘çš„æœºå™¨ä¸‹è½½release https://github.com/pyenv/pyenv ç„¶åæ”¾åˆ°éœ€è¦éƒ¨ç½²çš„æœºå™¨ä¸Šä¸Š tar -zxvf pyenv-2.3.2.tar.gz mv pyenv-2.3.2 ~/.pyenv mkdir ~/.pyenv/cache cat \u003e\u003e ~/.bashrc\u003c\u003c'EOF' ### pyenv ### export PYENV_ROOT=\"$HOME/.pyenv\" export PATH=\"$PYENV_ROOT/bin:$PATH\" export PATH=\"$PYENV_ROOT/shims:$PATH\" eval \"$(pyenv init -)\" EOF source ~/.bashrc pyenv --version pyenv 2.2.0 MacOS brew update brew install pyenv Windows pyenvå®˜æ–¹æ²¡æœ‰æ”¯æŒwindowsï¼Œæ¨èä½¿ç”¨pyenv-winï¼ˆgithubåœ°å€ï¼‰ windowsä¸‹æ¨èä½¿ç”¨pipå®‰è£…pyenv-win pip install pyenv-win --target %USERPROFILE%\\.pyenv æˆ–è€…ä¸‹è½½zipæ–‡ä»¶ç„¶åè§£å‹åˆ°%USERPROFILE%\\.pyenv\\pyenv-winä¸‹ ","date":"2022-03-22","objectID":"/env_management/:3:1","series":null,"tags":null,"title":"Python å·¥ç¨‹ç¯å¢ƒç®¡ç†","uri":"/env_management/#å®‰è£…"},{"categories":null,"content":" é£Ÿç”¨æ–¹æ³• æŸ¥çœ‹å¯ä»¥å®‰è£…çš„ç›¸åº”ç‰ˆæœ¬çš„ç¯å¢ƒï¼ˆä¸€èˆ¬åªæœ‰æ•°å­—çš„é€‰é¡¹é»˜è®¤æŒ‡pythonç¯å¢ƒï¼‰ pyenv install -l å®‰è£…æ‰€éœ€è¦çš„,å¦‚é€‰æ‹©python3.6.15ç¯å¢ƒ pyenv install 3.6.15 å€ŸåŠ©é•œåƒæºå®‰è£… v=3.6.15; curl -L https://npm.taobao.org/mirrors/python/$v/Python-$v.tar.xz -o ~/.pyenv/cache/Python-$v.tar.xz; pyenv install $v æ¿€æ´»æ‰€éœ€è¦çš„ï¼ˆæ­¤å¤„å¯ä»¥ç›´æ¥æ¿€æ´»å‰æ–‡ä¸­äºŒçº§åº•åº§çš„è™šæ‹Ÿç¯å¢ƒï¼‰ pyenv activate 3.6.15 æš‚æ—¶å°†æŸä¸ªç¯å¢ƒåº”ç”¨åˆ°æ‰€æœ‰ç›®å½•çš„å‘½ä»¤è¡Œä¸‹ pyenv global 3.6.15 è¿›å…¥æŸä¸ªç›®å½•æ—¶ï¼Œå‘½ä»¤è¡Œè‡ªåŠ¨åˆ‡æ¢åˆ°å¯¹åº”ç¯å¢ƒçš„æ–¹æ³• åœ¨è¿™ä¸ªç›®å½•æ–°å»ºä¸€ä¸ªåä¸º.python-versionçš„æ–‡ä»¶ åœ¨å…¶ä¸­å†™å…¥ä½ å¸Œæœ›æ¿€æ´»çš„ç¯å¢ƒåç§° é€€å‡ºç¯å¢ƒ pyenv source deactivate åˆ é™¤ç¯å¢ƒï¼ˆä¸€çº§åº•åº§ï¼‰ pyenv uninstall 3.6.15 åŸºäºæŸä¸ªç¯å¢ƒå»ºç«‹è™šæ‹Ÿç¯å¢ƒå¹¶å–è™šæ‹Ÿç¯å¢ƒå å¯ä»¥å…ˆæ¿€æ´»è¿™ä¸ªç¯å¢ƒï¼Œç„¶ååœ¨è¿™ä¸ªç¯å¢ƒä¸‹åˆ›å»ºï¼Œæ¿€æ´»ï¼Œé€€å‡ºï¼Œåˆ é™¤è™šæ‹Ÿç¯å¢ƒ ä¹Ÿå¯ä»¥ä¸æ¿€æ´»ï¼Œç›´æ¥ä½¿ç”¨pyenvå‘½ä»¤ åœ¨ä¸€çº§åº•åº§ä¸Šåˆ›å»ºè™šæ‹Ÿç¯å¢ƒ pyenv virtualenv 3.6.15 è™šæ‹Ÿç¯å¢ƒå ç„¶åæ¿€æ´»è™šæ‹Ÿç¯å¢ƒ pyenv activate è™šæ‹Ÿç¯å¢ƒå é€€å‡ºè™šæ‹Ÿç¯å¢ƒ pyenv deactivate è™šæ‹Ÿç¯å¢ƒå åˆ é™¤è™šæ‹Ÿç¯å¢ƒï¼ˆäºŒçº§åº•åº§ï¼‰ pyenv virtualenv-delete è™šæ‹Ÿç¯å¢ƒå ","date":"2022-03-22","objectID":"/env_management/:3:2","series":null,"tags":null,"title":"Python å·¥ç¨‹ç¯å¢ƒç®¡ç†","uri":"/env_management/#é£Ÿç”¨æ–¹æ³•"},{"categories":null,"content":" é£Ÿç”¨æ–¹æ³• æŸ¥çœ‹å¯ä»¥å®‰è£…çš„ç›¸åº”ç‰ˆæœ¬çš„ç¯å¢ƒï¼ˆä¸€èˆ¬åªæœ‰æ•°å­—çš„é€‰é¡¹é»˜è®¤æŒ‡pythonç¯å¢ƒï¼‰ pyenv install -l å®‰è£…æ‰€éœ€è¦çš„,å¦‚é€‰æ‹©python3.6.15ç¯å¢ƒ pyenv install 3.6.15 å€ŸåŠ©é•œåƒæºå®‰è£… v=3.6.15; curl -L https://npm.taobao.org/mirrors/python/$v/Python-$v.tar.xz -o ~/.pyenv/cache/Python-$v.tar.xz; pyenv install $v æ¿€æ´»æ‰€éœ€è¦çš„ï¼ˆæ­¤å¤„å¯ä»¥ç›´æ¥æ¿€æ´»å‰æ–‡ä¸­äºŒçº§åº•åº§çš„è™šæ‹Ÿç¯å¢ƒï¼‰ pyenv activate 3.6.15 æš‚æ—¶å°†æŸä¸ªç¯å¢ƒåº”ç”¨åˆ°æ‰€æœ‰ç›®å½•çš„å‘½ä»¤è¡Œä¸‹ pyenv global 3.6.15 è¿›å…¥æŸä¸ªç›®å½•æ—¶ï¼Œå‘½ä»¤è¡Œè‡ªåŠ¨åˆ‡æ¢åˆ°å¯¹åº”ç¯å¢ƒçš„æ–¹æ³• åœ¨è¿™ä¸ªç›®å½•æ–°å»ºä¸€ä¸ªåä¸º.python-versionçš„æ–‡ä»¶ åœ¨å…¶ä¸­å†™å…¥ä½ å¸Œæœ›æ¿€æ´»çš„ç¯å¢ƒåç§° é€€å‡ºç¯å¢ƒ pyenv source deactivate åˆ é™¤ç¯å¢ƒï¼ˆä¸€çº§åº•åº§ï¼‰ pyenv uninstall 3.6.15 åŸºäºæŸä¸ªç¯å¢ƒå»ºç«‹è™šæ‹Ÿç¯å¢ƒå¹¶å–è™šæ‹Ÿç¯å¢ƒå å¯ä»¥å…ˆæ¿€æ´»è¿™ä¸ªç¯å¢ƒï¼Œç„¶ååœ¨è¿™ä¸ªç¯å¢ƒä¸‹åˆ›å»ºï¼Œæ¿€æ´»ï¼Œé€€å‡ºï¼Œåˆ é™¤è™šæ‹Ÿç¯å¢ƒ ä¹Ÿå¯ä»¥ä¸æ¿€æ´»ï¼Œç›´æ¥ä½¿ç”¨pyenvå‘½ä»¤ åœ¨ä¸€çº§åº•åº§ä¸Šåˆ›å»ºè™šæ‹Ÿç¯å¢ƒ pyenv virtualenv 3.6.15 è™šæ‹Ÿç¯å¢ƒå ç„¶åæ¿€æ´»è™šæ‹Ÿç¯å¢ƒ pyenv activate è™šæ‹Ÿç¯å¢ƒå é€€å‡ºè™šæ‹Ÿç¯å¢ƒ pyenv deactivate è™šæ‹Ÿç¯å¢ƒå åˆ é™¤è™šæ‹Ÿç¯å¢ƒï¼ˆäºŒçº§åº•åº§ï¼‰ pyenv virtualenv-delete è™šæ‹Ÿç¯å¢ƒå ","date":"2022-03-22","objectID":"/env_management/:3:2","series":null,"tags":null,"title":"Python å·¥ç¨‹ç¯å¢ƒç®¡ç†","uri":"/env_management/#åŸºäºæŸä¸ªç¯å¢ƒå»ºç«‹è™šæ‹Ÿç¯å¢ƒå¹¶å–è™šæ‹Ÿç¯å¢ƒå"},{"categories":null,"content":" åå‘ä¼ æ’­ç®—æ³•ä½œä¸ºä¸€ä½æœºå™¨å­¦ä¹ é¢†åŸŸçš„åšä¸»ï¼Œç¬¬ä¸€ç¯‡åšå®¢è‚¯å®šè¦ä»åå‘ä¼ æ’­ç®—æ³•å¼€å§‹å•¦~ ","date":"2022-03-18","objectID":"/backpropagation/:0:0","series":null,"tags":null,"title":"åå‘ä¼ æ’­ç®—æ³•","uri":"/backpropagation/#åå‘ä¼ æ’­ç®—æ³•"},{"categories":null,"content":" ç®€ä»‹â€‹ æ¥è‡ªç»´åŸºç™¾ç§‘ â€‹ é¦–å…ˆæ˜¯åå‘ä¼ æ’­ç®—æ³•çš„å†å²æ²¿ç”¨ğŸ‘‡ â€‹ å¼—æ‹‰åŸºç±³å°”Â·ç“¦æ™®å°¼å…‹å¼•ç”¨ï¼ˆBryson, A.E.; W.F. Denham; S.E. Dreyfus. Optimal programming problems with inequality constraints. I: Necessary conditions for extremal solutions. AIAA J. 1, 11 (1963) 2544-2550ï¼‰åœ¨ä»–çš„ä¹¦ã€Šæ”¯æŒå‘é‡æœºã€‹ä¸­é¦–æ¬¡å‘è¡¨åå‘ä¼ æ’­ç®—æ³•ã€‚åœ¨1969å¹´Arthur E. Brysonå’Œä½•æ¯“ç¦å°†å…¶æè¿°ä¸ºå¤šçº§åŠ¨æ€ç³»ç»Ÿä¼˜åŒ–æ–¹æ³•ã€‚ç›´åˆ°1974å¹´ä»¥ååœ¨ç¥ç»ç½‘ç»œçš„èƒŒæ™¯ä¸‹åº”ç”¨ï¼Œå¹¶ç”±Paul Werbos[7]ã€David E. Rumelhartã€æ°å¼—é‡ŒÂ·è¾›é¡¿å’ŒRonald J. Williams[1][8]çš„è‘—ä½œï¼Œå®ƒæ‰è·å¾—è®¤å¯ï¼Œå¹¶å¼•å‘äº†ä¸€åœºäººå·¥ç¥ç»ç½‘ç»œçš„ç ”ç©¶é¢†åŸŸçš„â€œæ–‡è‰ºå¤å…´â€ã€‚åœ¨21ä¸–çºªåˆäººä»¬å¯¹å…¶å¤±å»å…´è¶£ï¼Œä½†åœ¨2010å¹´ååˆæ‹¥æœ‰äº†å…´è¶£ï¼Œå¦‚ä»Šå¯ä»¥é€šè¿‡GPUç­‰å¤§å‹ç°ä»£è¿ç®—å™¨ä»¶ç”¨äºè®­ç»ƒæ›´å¤§çš„ç½‘ç»œã€‚ä¾‹å¦‚åœ¨2013å¹´ï¼Œé¡¶çº§è¯­éŸ³è¯†åˆ«å™¨ç°åœ¨ä½¿ç”¨åå‘ä¼ æ’­ç®—æ³•è®­ç»ƒç¥ç»ç½‘ç»œã€‚ â€‹ é‚£ä¹ˆåå‘ä¼ æ’­ç®—æ³•æ˜¯å•¥ï¼ŸğŸ‘‡ â€‹ åå‘ä¼ æ’­ï¼ˆè‹±è¯­ï¼šBackpropagationï¼Œç¼©å†™ä¸ºBPï¼‰æ˜¯â€œè¯¯å·®åå‘ä¼ æ’­â€çš„ç®€ç§°ï¼Œæ˜¯ä¸€ç§ä¸æœ€ä¼˜åŒ–æ–¹æ³•ï¼ˆå¦‚æ¢¯åº¦ä¸‹é™æ³•ï¼‰ç»“åˆä½¿ç”¨çš„ï¼Œç”¨æ¥è®­ç»ƒäººå·¥ç¥ç»ç½‘ç»œçš„å¸¸è§æ–¹æ³•ã€‚è¯¥æ–¹æ³•å¯¹ç½‘ç»œä¸­æ‰€æœ‰æƒé‡è®¡ç®—æŸå¤±å‡½æ•°çš„æ¢¯åº¦ã€‚è¿™ä¸ªæ¢¯åº¦ä¼šå›é¦ˆç»™æœ€ä½³åŒ–æ–¹æ³•ï¼Œç”¨æ¥æ›´æ–°æƒå€¼ä»¥æœ€å°åŒ–æŸå¤±å‡½æ•°ã€‚ ","date":"2022-03-18","objectID":"/backpropagation/:1:0","series":null,"tags":null,"title":"åå‘ä¼ æ’­ç®—æ³•","uri":"/backpropagation/#ç®€ä»‹"},{"categories":null,"content":" å‰å‘ä¼ æ’­æ¨å¯¼","date":"2022-03-18","objectID":"/backpropagation/:2:0","series":null,"tags":null,"title":"åå‘ä¼ æ’­ç®—æ³•","uri":"/backpropagation/#å‰å‘ä¼ æ’­æ¨å¯¼"},{"categories":null,"content":" a. äº†è§£çŸ©é˜µä¹˜æ³•å‡è®¾ğŸ‘‡ $$ \\textbf{A} = \\begin{bmatrix} 1 \u0026 2 \\\\ 3 \u0026 4 \\\\ \\end{bmatrix} \\quad \\textbf{B}=\\left[ \\begin{matrix} -1 \u0026 -2 \\\\ -3 \u0026 -4 \\\\ \\end{matrix} \\right] $$ ç‚¹ç§¯ï¼ˆé€šå¸¸çœç•¥ Â· ç¬¦å·ï¼‰è®¡ç®—å¦‚ä¸‹ğŸ‘‡ $$ \\textbf{AB} = \\left[ \\begin{matrix} 1 \\times(-1) + 2\\times(-3) \u0026 1\\times (-2) +2\\times(-4)\\\\ 3 \\times(-1) + 4\\times(-3) \u0026 3\\times(-2) +4 \\times(-4) \\end{matrix} \\right]= \\left[ \\begin{matrix} -7 \u0026 -10\\\\ -15\u0026 -22 \\end{matrix} \\right] $$ é€å…ƒç´ ä¹˜æ³•å¦‚ä¸‹ğŸ‘‡ $$ \\textbf{A}\\odot\\textbf{B} = \\left[ \\begin{matrix} 1 \\times(-1)\u0026 2\\times(-2)\\\\ 3 \\times(-3)\u0026 4 \\times(-4) \\end{matrix} \\right]= \\left[ \\begin{matrix} -1 \u0026 -4\\\\ -9\u0026 -16 \\end{matrix} \\right] $$ ","date":"2022-03-18","objectID":"/backpropagation/:2:1","series":null,"tags":null,"title":"åå‘ä¼ æ’­ç®—æ³•","uri":"/backpropagation/#a-äº†è§£çŸ©é˜µä¹˜æ³•"},{"categories":null,"content":" b. äº†è§£è¿å¼æ³•åˆ™å¦‚æœå°†å¤åˆå‡½æ•°f(g(x))å¯¹xæ±‚å¯¼ï¼Œéœ€è¦ä½¿ç”¨é“¾å¼æ³•åˆ™ï¼Œ $$ \\frac{\\partial f(g(x))}{\\partial x} = \\frac{\\partial f(g(x))}{\\partial g(x)} \\frac{\\partial g(x)}{\\partial x} $$ ä¸¾ä¸ªæ —å­ï¼Œ $$ \\frac{\\partial e^{-x}}{\\partial x} = \\frac{\\partial e^{-x}}{\\partial (-x)} \\frac{\\partial (-x)}{\\partial x}=e^{-x}\\cdot(-1) = -e^{-x} $$ è¿™ä¹Ÿæ˜¯ç¥ç»ç½‘ç»œæ ¹æ®ç»“æœæ¥æ›´æ–°å‰é¢nå±‚å‚æ•°çš„åŸºç¡€ã€‚ ","date":"2022-03-18","objectID":"/backpropagation/:2:2","series":null,"tags":null,"title":"åå‘ä¼ æ’­ç®—æ³•","uri":"/backpropagation/#b-äº†è§£è¿å¼æ³•åˆ™"},{"categories":null,"content":" c.äº†è§£ç¥ç»ç½‘ç»œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¿™æ˜¯ä¸€ä¸ªç¥ç»ç½‘ç»œğŸ‘‡ å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªç¥ç»ç½‘ç»œçš„éšè—å±‚ï¼ˆé™¤äº†ç¬¬ä¸€å±‚è¾“å…¥å±‚å’Œæœ€åä¸€å±‚è¾“å‡ºå±‚ä¹‹å¤–éƒ½æ˜¯éšè—å±‚ï¼‰ä¸æ‰€æœ‰ä¸Šä¸€å±‚çš„ç¥ç»å…ƒéƒ½è¿æ¥äº†ï¼Œæˆ‘ä»¬ä¸€èˆ¬ç§°è¿™æ ·çš„å±‚ä¸ºå…¨è¿æ¥å±‚ã€‚å¯ä»¥çœ‹åˆ°ï¼Œå›¾ä¸­çš„ç¥ç»ç½‘ç»œè¾ƒä¸ºå¤æ‚ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯¹ç½‘ç»œè¿›è¡Œæ‹†è§£è‡³æœ€å°å•å…ƒã€‚ å…ˆçœ‹çœ‹æœ€åŸºæœ¬çš„ç¥ç»å…ƒæ˜¯å¦‚ä½•è¿›è¡Œå†…éƒ¨è®¡ç®—çš„ã€‚ğŸ‘‡ å¯ä»¥çœ‹åˆ°ï¼Œå…¶å®ä¸éš¾ï¼Œæ¯ä¸ªç¥ç»å…ƒæ¥å—åˆ°æ¥è‡ªä¸Šä¸€å±‚çš„æ¯ä¸€ä¸ªè¾“å…¥ï¼ˆå³ä¸Šä¸€å±‚éœ€è¦è¿æ¥çš„è¾“å‡ºä¹˜ä»¥ï¼ˆä¸Šä¸€å±‚è‡³å½“å‰å±‚çš„æƒé‡çŸ©é˜µï¼‰å¾—åˆ°çš„$w_{j_i}^{[l]}$ï¼‰å€¼ï¼Œå¹¶å°†è¿™äº›å€¼æ±‚å’Œï¼Œç„¶ååŠ ä¸Šæœ¬ç¥ç»å…ƒçš„Biasï¼Œç»è¿‡æ¿€æ´»å‡½æ•°$\\sigma$å¾—åˆ°æ­¤ç¥ç»å…ƒçš„è¾“å‡º $a_j^{[l]}$ã€‚ ç„¶åæˆ‘ä»¬è®©ç¥ç»å…ƒå›å½’åˆ°ç¥ç»ç½‘ç»œä¸­ï¼Œçœ‹ä¸€ä¸‹æ•´ä¸ªç½‘ç»œçš„å‰é¦ˆè®¡ç®—è„‰è·¯ğŸ‘‡ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè¿™å°±æ˜¯ä¸€ä¸ªåŸºæœ¬çš„å‰é¦ˆç¥ç»ç½‘ç»œè®¡ç®—è¿‡ç¨‹ã€‚å…¶ä¸­ï¼Œ$Z$ä»£è¡¨çš„æ˜¯æœ¬ç¥ç»å…ƒçš„æ¿€æ´»å‡½æ•°æ‰€æ¥å—çš„è¾“å…¥å€¼ï¼Œä¹Ÿå°±æ˜¯æœ¬ç¥ç»å…ƒæ¥å—çš„æ¥è‡ªä¸Šä¸€å±‚å„ç¥ç»å…ƒçš„è¾“å‡ºï¼ˆå¦‚æœä¸æ˜¯å…¨è¿æ¥å±‚ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ä¸Šä¸€å±‚éƒ¨åˆ†ç¥ç»å…ƒçš„è¾“å‡ºï¼‰ä¹˜ä»¥æƒé‡wï¼Œæ±‚å’Œåï¼ŒåŠ ä¸Šæœ¬ç¥ç»å…ƒçš„Biaså¾—åˆ°çš„å€¼ã€‚ å¦‚æœå¯¹è¿™ä¸ªè¿‡ç¨‹ä¸æ˜¯ç‰¹åˆ«äº†è§£ï¼Œé‚£æˆ‘ä»¬ä»¥çŸ©é˜µçš„å½¢å¼å†™ä¸€æ¬¡$Z$çš„è®¡ç®—èŒƒä¾‹ã€‚ğŸ‘‡ å¯¹éƒ¨åˆ†å‚æ•°è¿›è¡Œå¦‚ä¸‹å®šä¹‰ğŸ‘‡ $$ \\begin{array}{cc} w^{[1]}=\\left[\\begin{array}{ll} w_{11}^{[1]} \u0026 w_{12}^{[1]} \\\\ w_{21}^{[1]} \u0026 w_{22}^{[1]} \\\\ w_{31}^{[1]} \u0026 w_{32}^{[1]} \\end{array}\\right] \u0026 w^{[2]}=\\left[\\begin{array}{lll} w_{11}^{[2]} \u0026 w_{12}^{[2]} \u0026 w_{13}^{[2]} \\\\ w_{21}^{[2]} \u0026 w_{22}^{[2]} \u0026 w_{23}^{[2]} \\end{array}\\right] \\\\ b^{[1]}=\\left[\\begin{array}{c} b_{1}^{[1]} \\\\ b_{2}^{[1]} \\\\ b_{3}^{[1]} \\end{array}\\right] \u0026 b^{[2]}=\\left[\\begin{array}{c} b_{1}^{[2]} \\\\ b_{2}^{[2]} \\end{array}\\right] \\end{array} $$ äºæ˜¯ï¼Œå›¾ä¸­ä¸¤ä¸ªéšè—å±‚$Z$çš„è®¡ç®—å¦‚ä¸‹ğŸ‘‡ $$ \\begin{array}{c} z^{[1]}=\\left[\\begin{array}{ll} w_{11}^{[1]} \u0026 w_{12}^{[1]} \\\\ w_{21}^{[1]} \u0026 w_{22}^{[1]} \\\\ w_{31}^{[1]} \u0026 w_{32}^{[1]} \\end{array}\\right] \\cdot\\left[\\begin{array}{c} a_{1}^{[0]} \\\\ a_{2}^{[0]} \\end{array}\\right]+\\left[\\begin{array}{c} b_{1}^{[1]} \\\\ b_{2}^{[1]} \\\\ b_{3}^{[1]} \\end{array}\\right]=\\left[\\begin{array}{c} w_{11}^{[1]} a_{1}^{[0]}+w_{12}^{[1]} a_{2}^{[0]}+b_{1}^{[1]} \\\\ w_{21}^{[1]} a_{1}^{[0]}+w_{22}^{[1]} a_{2}^{[0]}+b_{2}^{[1]} \\\\ w_{31}^{[1]} a_{1}^{[0]}+w_{32}^{[1]} a_{2}^{[0]}+b_{3}^{[1]} \\end{array}\\right] \\\\ z^{[2]}=\\left[\\begin{array}{lll} w_{11}^{[2]} \u0026 w_{12}^{[2]} \u0026 w_{13}^{[2]} \\\\ w_{21}^{[2]} \u0026 w_{22}^{[2]} \u0026 w_{23}^{[2]} \\end{array}\\right] \\cdot\\left[\\begin{array}{c} a_{1}^{[1]} \\\\ a_{2}^{[1]} \\\\ a_{3}^{[1]} \\end{array}\\right]+\\left[\\begin{array}{l} b_{1}^{[2]} \\\\ b_{2}^{[2]} \\end{array}\\right]=\\left[\\begin{array}{l} w_{11}^{[2]} a_{1}^{[1]}+w_{12}^{[2]} a_{2}^{[1]}+w_{13}^{[2]} a_{3}^{[1]}+b_{1}^{[2]} \\\\ w_{21}^{[2]} a_{1}^{[1]}+w_{22}^{[2]} a_{2}^{[1]}+w_{23}^{[2]} a_{3}^{[1]}+b_{2}^{[2]} \\end{array}\\right] \\\\ \\end{array} $$ å¯ä»¥è¡¨è¿°æˆğŸ‘‡ $$ \\textbf{Z}^{[l]}=w^{[l]}\\cdot \\textbf{A}^{[l-1]} +b^{[l]} $$ é‚£ä¹ˆï¼Œæœ€åä¸€å±‚çš„è¾“å‡ºå‘¢å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„é¢„æµ‹å€¼ï¼Œå¯¹äºè¿™ä¸€ä¸ªé¢„æµ‹å€¼ï¼Œæˆ‘ä»¬å¸Œæœ›å®ƒä¸çœŸå®å€¼ä¸è¦æœ‰è¿‡å¤§çš„åå·®ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬ä¾¿éœ€è¦ä¸€ä¸ªåº¦é‡æ–¹æ³•æ¥è¡¡é‡é¢„æµ‹å€¼ä¸ç›®æ ‡å€¼çš„åå·®ç¨‹åº¦ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬å°†è¿™ä¸ªç¨‹åº¦é‡åŒ–ä¸ºæŸå¤±å‡½æ•°çš„å‡½æ•°å€¼Lossï¼Œé‚£ä¹ˆè¿™ä¸ªæŸå¤±å‡½æ•°å¦‚ä½•å»å®šä¹‰å‘¢ï¼Ÿè¿™å°±ç‰µæ‰¯åˆ°ä½ æ‰€éœ€è¦çš„é¢„æµ‹æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œå®ƒä¸å®é™…å€¼çš„å…³ç³»æ˜¯æ€æ ·çš„äº†ï¼Œä»¥åæœ‰æœºä¼šå‡ºä¸€ç¯‡æ–‡ç« æ¢³ç†ä¸€äº›å¸¸ç”¨çš„æŸå¤±å‡½æ•°ã€‚ç°åœ¨æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªæœ€ç®€å•çš„åº¦é‡æ–¹æ³•ï¼Œä¹Ÿæˆä¸º$L_1$åº¦é‡ï¼Œå³ç»å¯¹å·®å€¼åº¦é‡æ³•ï¼Œå®šä¹‰$(\\hat{y},y)$ä¸ºï¼ˆç½‘ç»œé¢„æµ‹å€¼ï¼ŒçœŸå®å€¼ï¼‰ï¼Œé‚£ä¹ˆå‡½æ•°$L(\\hat{y},y)$å¯ä»¥å®šä¹‰å¦‚ä¸‹ğŸ‘‡ $$ L(\\hat{y},y)=|\\hat{y}-y| $$ é‚£ä¹ˆï¼Œä»–è¾“å‡ºçš„å‡½æ•°å€¼å°±æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„åå·®åº¦é‡ã€‚æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œç¥ç»ç½‘ç»œéœ€è¦è¿›è¡Œå­¦ä¹ ï¼Œå­¦ä¹ çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå…¶å®å°±æ˜¯ä¸€ä¸ªåˆ†å¸ƒï¼Œå¸Œæœ›åœ¨ç»™å‡ºæ¡ä»¶$x$ä¸‹ï¼Œèƒ½å¤Ÿç»™å‡ºç›¸åº”çš„æ˜ å°„$y$ï¼Œå³ç½‘ç»œèƒ½å¤Ÿé€šè¿‡æ˜ å°„è®¡ç®—å»æ‹Ÿåˆæ•°æ®ä¸­çš„åˆ†å¸ƒ$p(x)$ã€‚è¿™ä¸ªæ‹Ÿåˆè¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯ç¼©å°åå·®åº¦é‡ï¼Œé‚£ä¹ˆå¦‚ä½•ç¼©å°åå·®å‘¢ï¼Ÿè¿™æ—¶ä¾¿å‡ºç°äº†æˆ‘ä»¬çš„ä¸»è§’ï¼Œåå‘ä¼ æ’­ç®—æ³•ï¼Œè¿™æ˜¯ä¸€ä¸ªé€šè¿‡è¾“å‡ºæ¥åé¦ˆä¿¡æ¯çš„ç®—æ³•ï¼Œä¹Ÿæ˜¯ç¥ç»ç½‘ç»œå­¦ä¹ çš„æ ¹æœ¬æ‰€åœ¨ï¼Œå®ƒçš„å…¨åå…¶å®æ˜¯è¯¯å·®åå‘ä¼ æ’­ï¼Œå³é€šè¿‡è¯¯å·®å›ä¼ ï¼Œè®©æ¨¡å‹çš„å‚æ•°å…±åŒè°ƒæ•´å»å‡å°è¿™ä¸ªè¯¯å·®ã€‚ é‚£ä¹ˆè¯¯å·®æˆ‘ä»¬ç†Ÿæ‚‰ï¼Œå°±æ˜¯ä¸¤ä¸ªå€¼ä¹‹é—´çš„å·®å€¼ï¼Œè€Œå½“æˆ‘ä»¬å°†è¿™ä¸ªå·®å€¼è§†ä¸ºå‡½æ•°å·®å€¼çš„æ—¶å€™ï¼Œä»–å°±å¯ä»¥ä¸å‡½æ•°æ±‚å¯¼æŒ‚é’©ï¼Œå›é¡¾ä¸€ä¸‹æ±‚å¯¼æ³•åˆ™ğŸ‘‡ $$ f'(x)=\\lim_{\\Delta x \\rightarrow0} \\frac{\\Delta y}{\\Delta x} $$ å¯ä»¥çœ‹åˆ°ï¼Œé€šä¿—çš„è¯´ï¼Œæœ‰äº†å¯¼æ•°ï¼Œæˆ‘ä»¬å°±å¯ä»¥çŸ¥é“è¦å°†åå·®å¤šå°‘$y$è°ƒæ•´å›æ¥ï¼Œéœ€è¦å¤šå°‘çš„$x$ã€‚ é‚£ä¹ˆé—®é¢˜åˆæ¥äº†ï¼Œå¯¹äºé‚£ä¹ˆå¤šçš„ç½‘ç»œå‚æ•°ï¼Œæˆ‘ä»¬æ€ä¹ˆå»è°ƒæ•´å‘¢ï¼Ÿ $$ \\begin{array}{cc} w^{[1]}=\\left[\\begin{array}{ll} w_{11}^{[1]} \u0026 w_{12}^{[1]} \\\\ w_{21}^{[1]} \u0026 w_{22}^{[1]} \\\\ w_{31}^{[1]} \u0026 w_{32}^{[1]} \\end{array}\\right] \\quad w^{[2]}=\\left[\\begin{array}{lll} w_{11}^{[2]} \u0026 w_{12}^{[2]} \u0026 w_{13}^{[2]} \\\\ w_{21}^{[2]} \u0026 w_{22}^{[2]} \u0026 w_{23}^{[2]} \\end{array}\\right] \\\\ b^{[1]}=\\left[\\begin{array}{c} b_{1}^{[1]} \\\\ b_{2}^{[1]} \\\\ b_{3}^{[1]} \\end{array}\\right] \u0026 b^{[2]}=\\left[\\begin{array}{c} b_{1}^{[2]} \\\\ b_{2}^{[2]} \\end{array}\\right] \\end{array} $$ ç­”æ¡ˆå°±æ˜¯ï¼Œåå¯¼æ•°ğŸ‘‡ $$ f_xâ€™(x,y)=\\frac{\\partial f}{\\partial x} $$ åå¯¼æ•°æ˜¯å•¥ï¼Œåå¯¼æ•°å°±æ˜¯æœ‰åè§çš„å¯¼æ•°ï¼Œåªå¯¹ç‰¹å®šçš„æ¡ä»¶$x$æ„Ÿå…´è¶£ï¼Œä¹Ÿå°±æ˜¯åå¯¼çš„ä¸€æ–¹ï¼Œè€Œå…¶ä»–çš„è§†ä¸ºå¸¸æ•°ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½ç²¾å‡†åœ°å¯¹ä¸åŒå‚æ•°è¿›è¡Œæ›´æ–°ã€‚ ä¸¾ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼Œè®¾ğŸ‘‡ $$ f(x,y)=xy $$ é‚£ä¹ˆå¦‚æœå¯¹$x$åå¯¼ğŸ‘‡ $$ f_x(x,y)=y $$ åä¹‹ï¼Œè‹¥å¯¹$y$åå¯¼ğŸ‘‡ $$ f_y(x,y)=x $$ é‚£ä¹ˆï¼Œåœ¨ç¥ç»ç½‘ç»œä¸­ï¼Œåå¯¼çš„æ¦‚å¿µå°±è§†ä¸ºäº†æ¢¯åº¦$\\nabla$ï¼Œä¸ºå•¥å«æ¢¯åº¦å‘¢ï¼Ÿæ¢¯åº¦$\\nabla$çš„æœ¬æ„æ˜¯ä¸€ä¸ªå‘é‡ï¼ˆçŸ¢é‡ï¼‰ï¼Œè¡¨ç¤ºæŸä¸€å‡½æ•°åœ¨è¯¥ç‚¹å¤„çš„æ–¹å‘å¯¼æ•°æ²¿ç€è¯¥æ–¹å‘å–å¾—æœ€å¤§å€¼ï¼Œé‚£ä¹ˆå¦‚æœåœ¨æŸä¸€ä¸ªå˜é‡ä¸Šéœ€è¦å¯¹è¯¯å·®äº§ç”Ÿæœ€å¤§çš„å½±å“ï¼Œåˆ™éœ€è¦æ²¿ç€æ¢¯åº¦$\\nabla$çš„æ–¹å‘ï¼Œä¹Ÿå°±æ˜¯åå¯¼çš„æ–¹å‘ã€‚ $$ w:=w-a \\frac{\\partial J(w)}{\\partial w} $$ å›¾ä¸­æ˜¯ç›®æ ‡å‡½æ•°å¯¹å˜é‡$w$çš„æ¢¯åº¦$\\nabla$ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæ¢¯åº¦$\\nabla$åœ¨å›¾çº¿ä¸Šè¡¨ç°ä¸ºåˆ‡çº¿ï¼Œå¾ˆå®¹æ˜“çŸ¥é“åœ¨è¿™ä¸ªæ–¹å‘ä¸Šèƒ½å¤Ÿå¯¹ç›®æ ‡å‡½æ•°çš„å€¼å¸¦æ¥æœ€å¤§çš„å½±å“ï¼Œé‚£ä¹ˆå˜é‡$w$åœ¨å½“å‰æ—¶åˆ»æ²¿ç€è¿™ä¸ªæ–¹å‘å˜åŒ–ä¾¿èƒ½ä¸ºç¼©å°è¯¯å·®åšå‡ºæœ€å¤§è´¡çŒ®ã€‚ å¦‚æœæ‹“å±•åˆ°çŸ©é˜µåˆ™å®¹æ˜“å¾—åˆ°çŸ©é˜µæ¢¯åº¦$\\nabla$çŸ©é˜µï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªå…ƒç´ çš„æ¢¯åº¦å•¦ã€‚ğŸ‘‡ $$ \\nabla_{\\textbf{A}}f(\\textbf{A})= \\begin","date":"2022-03-18","objectID":"/backpropagation/:2:3","series":null,"tags":null,"title":"åå‘ä¼ æ’­ç®—æ³•","uri":"/backpropagation/#cäº†è§£ç¥ç»ç½‘ç»œ"},{"categories":null,"content":" è¯¯å·®åå‘ä¼ æ’­ä¸ºè¯¯å·®å¯¹ç¥ç»å…ƒè¾“å…¥çš„å€¼ï¼ˆæ¿€æ´»å‰ï¼‰$z$ åšå¦‚ä¸‹å‡è®¾ğŸ‘‡ é‚£ä¹ˆå¯¹äºè¾“å‡ºå±‚ğŸ‘‡ $$ \\delta_{j}^{[L]}=\\frac{\\partial L}{\\partial a_{j}^{[L]}} \\sigma^{\\prime}\\left(z_{j}^{[L]}\\right) \\quad \\delta^{[L]}=\\left[\\begin{array}{c} \\frac{\\partial L}{\\partial a_{1}^{L L}} \\\\ \\frac{\\partial L}{\\partial a_{2}^{[L]}} \\\\ \\vdots \\\\ \\frac{\\partial L}{\\partial a_{j}^{L L}} \\end{array}\\right] \\odot\\left[\\begin{array}{c} \\sigma^{\\prime}\\left(z_{1}^{[L]}\\right) \\\\ \\sigma^{\\prime}\\left(z_{2}^{[L]}\\right) \\\\ \\vdots \\\\ \\sigma^{\\prime}\\left(z_{j}^{[L]}\\right) \\end{array}\\right] \\quad \\delta^{[L]}=\\nabla_{a} L \\odot \\sigma^{\\prime}\\left(z^{[L]}\\right) $$ å¯¹äºéšè—å±‚ğŸ‘‡ $$ \\delta_{j}^{[l]}=\\sum_{k} w_{k j}^{[l+1]} \\delta_{k}^{[l+1]} \\sigma^{\\prime}\\left(z_{j}^{[l]}\\right) \\\\ \\delta^{[l]}=\\left[\\left[\\begin{array}{cccc} w_{11}^{[l]} \u0026 w_{12}^{[l]} \u0026 \\ldots \u0026 w_{1 k}^{[l]} \\\\ w_{21}^{[l]} \u0026 w_{22}^{[l]} \u0026 \\ldots \u0026 w_{2 k}^{[l]} \\\\ \\vdots \u0026 \\vdots \u0026 \\ddots \u0026 \\vdots \\\\ w_{j 1}^{[l]} \u0026 w_{j 2}^{[l]} \u0026 \\ldots \u0026 w_{j k}^{[l]} \\end{array}\\right]\\left[\\begin{array}{c} \\delta_{1}^{[l+1]} \\\\ \\delta_{2}^{[l+1]} \\\\ \\vdots \\\\ \\delta_{k}^{[l+1]} \\end{array}\\right]\\right] \\odot\\left[\\begin{array}{c} \\sigma^{\\prime}\\left(z_{1}^{[l]}\\right) \\\\ \\sigma^{\\prime}\\left(z_{2}^{[l]}\\right) \\\\ \\vdots \\\\ \\sigma^{\\prime}\\left(z_{j}^{[l]}\\right) \\end{array}\\right] \\\\ (\\mathrm{j}, \\mathrm{k}) *(\\mathrm{k}, 1) \\odot(\\mathrm{j}, 1)=(\\mathrm{j}, 1) \\\\ \\delta^{[l]}=\\left[w^{[l+1]^{T}} \\delta^{[l+1]}\\right] \\odot \\sigma^{\\prime}\\left(z^{[l]}\\right) $$ æ›´æ–°æ­¥ğŸ‘‡ $$ \\begin{array}{c} \\frac{\\partial L}{\\partial b_{j}^{[l]}}=\\delta_{j}^{[l]} \\\\ \\frac{\\partial L}{\\partial w_{j k}^{[l]}}=a_{k}^{[l-1]} \\delta_{j}^{[l]} \\\\ \\frac{\\partial L}{\\partial b^{[l]}}=\\left[\\begin{array}{c} \\delta_{1}^{[l]} \\\\ \\delta_{2}^{[l]} \\\\ \\vdots \\\\ \\delta_{j}^{[l]} \\end{array}\\right]=\\delta^{[l]} \\\\ \\frac{\\partial L}{\\partial w^{[l]}}=\\left[\\begin{array}{c} \\delta_{1}^{[l]} \\\\ \\delta_{2}^{[l]} \\\\ \\vdots \\\\ \\delta_{j}^{[l]} \\end{array}\\right]\\left[\\begin{array}{lll} a_{1}^{[l]} \u0026 a_{2}^{[l]} \\ldots \u0026 a_{k}^{[l]} \\end{array}\\right]\\\\ (j, 1) *(1, k)=(j, k)\\\\ \\frac{\\partial L}{\\partial b^{[l]}}=\\delta^{[l]}\\\\ \\frac{\\partial L}{\\partial w^{[l]}}=\\delta^{[l]} a^{[l-1] T} \\end{array} $$ $$ \\begin{aligned} b_{j}^{[l]} \u0026 \\leftarrow b_{j}^{[l]}-\\alpha \\frac{\\partial L}{\\partial b_{j}^{l]}} \\\\ w_{j k}^{[l]} \u0026 \\leftarrow w_{j k}^{[l]}-\\alpha \\frac{\\partial L}{\\partial w_{j k}^{[l]}} \\\\ b^{[l]} \u0026 \\leftarrow b^{[l]}-\\alpha \\frac{\\partial L}{\\partial b^{[l]}} \\\\ w^{[l]} \u0026 \\leftarrow w^{[l]}-\\alpha \\frac{\\partial L}{\\partial w^{[l]}} \\end{aligned} $$ å›¾è§£åå‘ä¼ æ’­è¿‡ç¨‹ï¼Œé¦–å…ˆæ˜¯è¾“å‡ºå±‚ğŸ‘‡ è¯¯å·®æ¢¯åº¦ä¼ å‘ç¬¬ä¸€ä¸ªéšè—å±‚ğŸ‘‡ ğŸ‘‡ ğŸ‘‡ ğŸ‘‡ ğŸ‘‡ ğŸ‘‡ ä»¥æ­¤ç±»æ¨ï¼Œåå‘ä¼ æ’­çš„è¿‡ç¨‹å°±ç»“æŸå•¦~ ","date":"2022-03-18","objectID":"/backpropagation/:3:0","series":null,"tags":null,"title":"åå‘ä¼ æ’­ç®—æ³•","uri":"/backpropagation/#è¯¯å·®åå‘ä¼ æ’­"},{"categories":null,"content":" You are not connected to the Internet, only cached pages will be available. ","date":"0001-01-01","objectID":"/offline/:0:0","series":null,"tags":null,"title":"Offline","uri":"/offline/#"},{"categories":null,"content":" æŸ985ç¡•å£«ç”Ÿåœ¨è¯» ","date":"0001-01-01","objectID":"/about/:0:0","series":null,"tags":null,"title":"å…³äºdp0d","uri":"/about/#"},{"categories":null,"content":" è‡´æ•¬åšå°”ç‰¹ ","date":"0001-01-01","objectID":"/charge/:0:0","series":null,"tags":null,"title":"æœ‹å‹ï¼Œç»™è‡ªå·±å……ä¸ªç”µå§ï½","uri":"/charge/#è‡´æ•¬åšå°”ç‰¹"}]